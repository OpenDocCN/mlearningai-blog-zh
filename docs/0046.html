<html>
<head>
<title>Zipf’s law in WhatsApp</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">WhatsApp中的齐夫定律</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/zipfs-law-in-whatsapp-ec47c8c38a97?source=collection_archive---------9-----------------------#2020-09-16">https://medium.com/mlearning-ai/zipfs-law-in-whatsapp-ec47c8c38a97?source=collection_archive---------9-----------------------#2020-09-16</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="437b" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">最有趣的复杂定律是如何成为你聊天的一部分的</h2></div><p id="1151" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">今天我将谈论我最喜欢的自然法则之一:所谓的Zipf。</p><p id="462c" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><a class="ae js" href="https://en.wikipedia.org/wiki/Zipf%27s_law" rel="noopener ugc nofollow" target="_blank">齐夫定律</a>特别有趣，因为尽管它非常简单，但它在我们的生活中无处不在。你不知道，但确实如此。</p><ul class=""><li id="a1d9" class="jt ju hh iy b iz ja jc jd jf jv jj jw jn jx jr jy jz ka kb bi translated">想象一下，统计一下哪些词在维基百科中很常见，哪些不常见:答案是Zipf！</li></ul><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kc"><img src="../Images/40dce25a808f9900d25d58b6e5f4cb32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5EUV_2kmOVC--9XJPXqB1g.png"/></div></div><figcaption class="ko kp et er es kq kr bd b be z dx">A plot of the rank versus frequency for the first 10 million words in 30 Wikipedias (dumps from October 2015) in a log-log scale. Credits: Wikipedia (<a class="ae js" href="https://commons.wikimedia.org/wiki/User:SergioJimenez" rel="noopener ugc nofollow" target="_blank">SergioJimenez</a>, <a class="ae js" href="https://commons.wikimedia.org/wiki/File:Zipf_30wiki_en_labels.png" rel="noopener ugc nofollow" target="_blank">Zipf 30wiki en labels</a>, <a class="ae js" href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" rel="noopener ugc nofollow" target="_blank">CC BY-SA 4.0</a>)</figcaption></figure><ul class=""><li id="a6a2" class="jt ju hh iy b iz ja jc jd jf jv jj jw jn jx jr jy jz ka kb bi translated">想象一下测量月球环形山的大小，<a class="ae js" href="http://www.ptep-online.com/2016/PP-44-04.PDF" rel="noopener ugc nofollow" target="_blank">它们的大小分布是一个Zipf </a>。</li><li id="32d8" class="jt ju hh iy b iz ks jc kt jf ku jj kv jn kw jr jy jz ka kb bi translated">如果有人测量日本的火灾规模。他们的分布如何？对，一个拉链</li><li id="81f5" class="jt ju hh iy b iz ks jc kt jf ku jj kv jn kw jr jy jz ka kb bi translated">齐夫定律甚至在我们的DNA中也很普遍</li><li id="43d1" class="jt ju hh iy b iz ks jc kt jf ku jj kv jn kw jr jy jz ka kb bi translated">细胞的转录物也有这种特征[1]</li></ul><p id="d28b" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">但它离你更近。你用的是<strong class="iy hi"> Whatsapp </strong>吧？</p><p id="1346" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">让我们看看Zipf定律是如何在你的聊天中出现的！</p></div><div class="ab cl kx ky go kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ha hb hc hd he"><h1 id="ee1a" class="le lf hh bd lg lh li lj lk ll lm ln lo in lp io lq iq lr ir ls it lt iu lu lv bi translated">一点数学知识</h1><p id="f559" class="pw-post-body-paragraph iw ix hh iy b iz lw ii jb jc lx il je jf ly jh ji jj lz jl jm jn ma jp jq jr ha bi translated">为了理解这一点，我们需要一点数学知识。</p><ul class=""><li id="923e" class="jt ju hh iy b iz ja jc jd jf jv jj jw jn jx jr jy jz ka kb bi translated">首先，我们需要一个单词的丰富度。丰度是一个单词在聊天中出现的总次数</li><li id="e05d" class="jt ju hh iy b iz ks jc kt jf ku jj kv jn kw jr jy jz ka kb bi translated">我们可以将丰度归一化并获得频率。一个单词的<strong class="iy hi">频率</strong>是它在聊天中出现的次数占聊天中单词总数的比例</li><li id="642e" class="jt ju hh iy b iz ks jc kt jf ku jj kv jn kw jr jy jz ka kb bi translated">我们可以根据单词出现的频率对它们进行排序，并有一个<strong class="iy hi">等级</strong>。最丰富的作品将具有等级1。</li></ul><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es mb"><img src="../Images/6f8fbb27abebd60f0d21d77342a22f76.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/1*v1f09e-oQDmmB5SY4fsF7w.png"/></div></div><figcaption class="ko kp et er es kq kr bd b be z dx">Most abundant words in a Whatsapp chat. Image by author.</figcaption></figure></div><div class="ab cl kx ky go kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ha hb hc hd he"><h1 id="fc2a" class="le lf hh bd lg lh li lj lk ll lm ln lo in lp io lq iq lr ir ls it lt iu lu lv bi translated">获取数据</h1><p id="faaa" class="pw-post-body-paragraph iw ix hh iy b iz lw ii jb jc lx il je jf ly jh ji jj lz jl jm jn ma jp jq jr ha bi translated">导出你的一个WhatsApp聊天记录:说明是</p><h2 id="09c8" class="mc lf hh bd lg md me mf lk mg mh mi lo jf mj mk lq jj ml mm ls jn mn mo lu mp bi translated">预处理您的字符串</h2><p id="7237" class="pw-post-body-paragraph iw ix hh iy b iz lw ii jb jc lx il je jf ly jh ji jj lz jl jm jn ma jp jq jr ha bi translated">首先，我们需要做一些预处理。</p><p id="f237" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">例如，是否有助于:</p><ul class=""><li id="ef47" class="jt ju hh iy b iz ja jc jd jf jv jj jw jn jx jr jy jz ka kb bi translated">删除特殊字符</li><li id="e866" class="jt ju hh iy b iz ks jc kt jf ku jj kv jn kw jr jy jz ka kb bi translated">删除标点符号</li><li id="88fb" class="jt ju hh iy b iz ks jc kt jf ku jj kv jn kw jr jy jz ka kb bi translated">在单词和表情之间添加一个空格</li></ul><h2 id="fead" class="mc lf hh bd lg md me mf lk mg mh mi lo jf mj mk lq jj ml mm ls jn mn mo lu mp bi translated">数数单词</h2><p id="9a09" class="pw-post-body-paragraph iw ix hh iy b iz lw ii jb jc lx il je jf ly jh ji jj lz jl jm jn ma jp jq jr ha bi translated">我们准备在聊天中计算字数。下面的代码就是一个例子。</p><p id="407e" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我建立了一个词汇表，如果一个单词在我的词汇表中，我就给它加1，否则我就把它加到词汇表中。</p><pre class="kd ke kf kg fd mq mr ms mt aw mu bi"><span id="27b0" class="mc lf hh mr b fi mv mw l mx my">function process_words(line, voc)<br/>    for word in line<br/>        if haskey(voc, word)<br/>            voc[word]+=1<br/>        else<br/>            voc[word]=1<br/>        end<br/>    end<br/>end</span></pre><p id="162a" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在这一点上，我们可以估计丰度和频率</p><pre class="kd ke kf kg fd mq mr ms mt aw mu bi"><span id="522f" class="mc lf hh mr b fi mv mw l mx my">function process_chat(chat_file="_chat.txt")<br/>    vocabulary = Dict()<br/>    open(chat_file,"r") do io<br/>        while ! eof(io)<br/>            message = readline(io)<br/>            processed_message = preprocess(message)<br/>            process_words(processed_message, vocabulary)<br/>        end<br/>    end<br/>    frequencies = collect(values(voc))<br/>    # Order by abundance<br/>    frequencies = sort!(f, rev=true);<br/>    # normalise<br/>    frequencies = frequencies ./ sum(frequencies);<br/>    return vocabulary, f<br/>end</span></pre><h1 id="a783" class="le lf hh bd lg lh mz lj lk ll na ln lo in nb io lq iq nc ir ls it nd iu lu lv bi translated">你的聊天很有趣</h1><p id="4855" class="pw-post-body-paragraph iw ix hh iy b iz lw ii jb jc lx il je jf ly jh ji jj lz jl jm jn ma jp jq jr ha bi translated">人们可以很容易地绘制出频率与等级的关系，这就是……齐夫定律！</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es ne"><img src="../Images/3c783caae7f360924c5ea55481edaecc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5OxhUAMjVWSq0Dqp9IEuAA.png"/></div></div><figcaption class="ko kp et er es kq kr bd b be z dx">Zipf’s law for different Whatsapp chats. Image by author.</figcaption></figure></div><div class="ab cl kx ky go kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ha hb hc hd he"><h1 id="1f34" class="le lf hh bd lg lh li lj lk ll lm ln lo in lp io lq iq lr ir ls it lt iu lu lv bi translated">代码</h1><p id="8d58" class="pw-post-body-paragraph iw ix hh iy b iz lw ii jb jc lx il je jf ly jh ji jj lz jl jm jn ma jp jq jr ha bi translated">在https://github.com/fvalle1/whatsanalyser有一个包含这些代码的GitHub库</p><h1 id="bbfb" class="le lf hh bd lg lh mz lj lk ll na ln lo in nb io lq iq nc ir ls it nd iu lu lv bi translated">参考</h1><p id="3c00" class="pw-post-body-paragraph iw ix hh iy b iz lw ii jb jc lx il je jf ly jh ji jj lz jl jm jn ma jp jq jr ha bi translated">[1] Silvia Lazzardi，Filippo Valle，Andrea Mazzolini，Antonio Scialdone，Michele Caselle，Matteo Osella <a class="ae js" href="https://doi.org/10.1101/2021.06.16.448706" rel="noopener ugc nofollow" target="_blank">单细胞转录组数据中的涌现统计规律</a> (2021) bioRxiv</p></div></div>    
</body>
</html>