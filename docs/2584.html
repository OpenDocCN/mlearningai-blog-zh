<html>
<head>
<title>Spotify API Project Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python的Spotify API项目</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/spotify-api-project-using-python-5fbcab921f5e?source=collection_archive---------0-----------------------#2022-05-21">https://medium.com/mlearning-ai/spotify-api-project-using-python-5fbcab921f5e?source=collection_archive---------0-----------------------#2022-05-21</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/b987b667ea08277138b37c693e263e50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X4UbcooAj08ZrPUIQ0b83w.png"/></div></div></figure><p id="b24c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Spotify的API拥有丰富的数据，允许公众访问与平台上任何歌曲或艺术家相关的各种信息。Spotify的推荐算法和搜索引擎等其他功能也可以访问。这可以通过<a class="ae jn" href="https://spotipy.readthedocs.io/en/2.19.0/#" rel="noopener ugc nofollow" target="_blank"> Spotipy </a>轻松完成，这是一个Python包，可以轻松提取数据。</p><p id="37c1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我想熟悉从API中提取数据，并决定使用Spotify的API，因为它的可用数据范围很大。在我的项目中，我希望创建一个应用程序，允许最终用户输入他们选择的艺术家，并接收包含艺术家信息、推荐和与艺术家唱片相关的数据分析的电子邮件报告。</p><p id="c994" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我认为这可以帮助用户更多地了解他们所听的艺术家，并获得更多他们可能喜欢的音乐。在这里查看我的代码:【https://github.com/anushakuppahally/spotify-api-project】T2。</p><h1 id="c8a7" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">入门指南</h1><p id="1c13" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">为了开始我的项目，我首先创建了一个<a class="ae jn" href="https://developer.spotify.com/" rel="noopener ugc nofollow" target="_blank"> Spotify for Developers </a>账户，以访问客户端ID和客户端密钥。这两者都是访问Spotify API所需要的。我用Spotify凭证登录后，导航到仪表盘，然后点击“创建应用程序”。然后，就可以访问必要的凭证。</p><p id="9521" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我创建了一个<a class="ae jn" href="https://sendgrid.com/" rel="noopener ugc nofollow" target="_blank"> Sendgrid </a>帐户来发送邮件报告。然后，导航到设置，我点击“API密钥”，然后“创建API密钥”。我配置了该帐户的电子邮件地址，并获得了一个API密钥以供使用。</p><p id="d427" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我将Spotify API和Sendgrid的凭证放在一个. env文件中，为了安全起见，我创建了一个. gitignore文件，因为我使用Github进行版本控制。</p><figure class="ks kt ku kv fd ii er es paragraph-image"><div class="er es kr"><img src="../Images/3b0af706b2cb572d6397acc7320febc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:732/format:webp/1*r_P_OgbsnIHVs79m-eOyUw.png"/></div><figcaption class="kw kx et er es ky kz bd b be z dx">Contents of .env file</figcaption></figure><p id="df86" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在这之后，我决定用我的项目需要的库来建立我的requirements.txt文件，涉及到数据查询、分析和可视化。</p><figure class="ks kt ku kv fd ii er es paragraph-image"><div class="er es la"><img src="../Images/f5e6cf24fd49e544ed431df9ad93f4ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/1*yDkOG-Tt_v53dXOLTzgNdQ.png"/></div><figcaption class="kw kx et er es ky kz bd b be z dx">Contents of requirements.txt</figcaption></figure><p id="a0ce" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在开始使用我的实际应用程序之前，我想完成我的设置。我将我的应用程序与<a class="ae jn" href="https://codeclimate.com/" rel="noopener ugc nofollow" target="_blank">代码环境</a>集成在一起，以评估我的代码质量。然后，我在根目录下创建了一个. codeclimate.yml文件，以帮助提供自动化的代码质量检查。</p><p id="1b31" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">然后，对于organization，我在根目录中创建了一个app文件夹和一个tests文件夹，其中我的应用程序及其相关测试的代码将位于适当的文件夹中。我在根目录下创建了. conftest.py来帮助我的测试找到应用程序代码。</p><p id="b67d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我在下面创建了python-app.yml文件。github/workflows有助于持续集成，或者每当我推送更改时自动测试。</p><p id="21ba" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">最后，我创建了一个README.md文件来解释我的项目是如何工作的，还创建了一个LICENSE.md文件。</p><h1 id="06eb" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">创建应用程序</h1><p id="ffa8" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">设置完成后，我导入了我的凭证来访问Spotify API。</p><figure class="ks kt ku kv fd ii er es paragraph-image"><div class="er es lb"><img src="../Images/c00a46b9d6ce098eb93a9165b7362e75.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/format:webp/1*mRNUmiWtlNrbu6BH4_5vRA.png"/></div><figcaption class="kw kx et er es ky kz bd b be z dx">Import Spotify credentials</figcaption></figure><p id="a76f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为了简单起见，我决定将我的函数放在一个类中。我构建了我的应用程序，允许用户输入艺术家，所以一旦用户输入了艺术家，我就使用Spotify的搜索引擎来查找与输入相关的艺术家。然后，我要求用户验证搜索结果是否正确。</p><p id="87a9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">一旦通过验证，这些函数就使用艺术家的URI或统一资源标识符来返回请求的结果。我使用艺术家的URI来查找艺术家的专辑、前5首歌曲、歌曲推荐和艺术家推荐。</p><p id="4aa3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">然后，我使用该艺术家的URI来查找该艺术家每张专辑下每首歌曲的曲目id。然后，我使用一个单独的函数遍历每张专辑，并从Spotify API创建一个曲目及其特征的数据帧，如声音、长度、流行度等。</p><p id="a083" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">从那里，我想做一些基本的数据分析。我想找到与艺术家受欢迎程度最相关和最不相关的变量，并基于这些变量创建散点图。这是散点图的一个例子，其中响度与流行度最相关，而声音与流行度最不相关。</p><div class="ks kt ku kv fd ab cb"><figure class="lc ii ld le lf lg lh paragraph-image"><img src="../Images/482af48427269ad1ac613ee402ff0388.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*I1uhrMKAWkvjMRwwSiE7SQ.png"/></figure><figure class="lc ii ld le lf lg lh paragraph-image"><img src="../Images/da051fefad00291f4378bf9c17e7cf12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*MRo4vZe0X_AaBygIhnKofQ.png"/></figure></div><p id="659e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">然后，我想创建一个流行度直方图，看看一个艺术家的流行度是如何分布的。</p><figure class="ks kt ku kv fd ii er es paragraph-image"><div class="er es li"><img src="../Images/8382c1e59bac990166908fe55a14ba50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*dq2ke2aYretsXaJXkvt97A.png"/></div></figure><p id="8f0a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">对于这些图像，我在根目录下创建了一个名为reports的文件夹，并添加了。gitkeep到那个文件夹，这样文件夹最初就不会是空的。该文件夹将保存可视化效果，每次用户输入不同的艺术家时，可视化效果都会发生变化。</p><p id="7804" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在构建电子邮件报告时，我使用了函数输出，并在电子邮件中附加了散点图、直方图和数据帧的CSV文件。我使用HTML来格式化电子邮件报告的内容，并根据关于艺术家和歌曲特征分析的信息来拆分电子邮件。</p><figure class="ks kt ku kv fd ii er es paragraph-image"><div class="er es lj"><img src="../Images/0d58184ffac83b4fd45619d7d657f610.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/format:webp/1*mCOnFO_Cqxn-1z9218fvcg.png"/></div></figure><figure class="ks kt ku kv fd ii er es paragraph-image"><div class="er es lk"><img src="../Images/f8cef211941ba02300ce621def23aa6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/format:webp/1*1oyjPJdtqAuugmfLRv8S5w.png"/></div></figure><figure class="ks kt ku kv fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ll"><img src="../Images/938e2178456a170f79a6a037bc340f82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q3ADAnUMoHEo2VmS5uQNSg.png"/></div></div></figure><p id="9399" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">电子邮件发送成功后，用户会收到“202”的输出，然后可以在收件箱中看到该电子邮件。</p><h1 id="e9f8" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">测试</h1><p id="10ce" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">测试很重要，所以我为每个功能创建了测试。由于函数输出因艺术家而异，并且会随着时间的推移而变化，所以我能测试的部分是有限的。</p><p id="848c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">然而，由于这些函数使用了Spotify API，每当我推送我的更改时，我都必须跳过这些持续集成测试，因为这会导致构建失败。我不得不做一些改变来解决这个问题。首先，我将<em class="lm"> CI="true" </em>添加到我的。环境文件。然后，在我的python-app.yml文件中，我将最后一行的pytest改为<em class="lm"> CI="true" pytest </em>。最后，在我的测试文件中，我创建了一个fixture来调用该类，并在持续集成下推送更改时跳过了每个使用Spotify API的测试。</p><h1 id="322f" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">挑战和未来扩展</h1><p id="3bda" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">虽然我从来没有从事过这样的项目，但这个过程是一个很好的学习机会，我现在更愿意使用API数据。</p><p id="1e9c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我想做更多的数据分析，但由于我不能在电子邮件报告的正文中嵌入可视化，这导致我优先考虑文本输出而不是图像。然而，还有许多其他方法来分析跟踪数据。在未来，我想做多元回归分析，显著性测试，甚至尝试创建一个模型，根据歌曲的特点预测歌曲的受欢迎程度。我还想考虑其他因素，如流派。</p><p id="8b10" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">另一个问题与Spotify的搜索引擎有关，因为一些艺术家即使输入正确也不会出现。我不确定如何解决这个问题，但这是将来要考虑的另一个因素。我还想做更多与此相关的错误处理。</p><p id="4f6f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我想在未来加入的另一个组件是用户凭证。我认为基于一个用户的收听历史而不是一个艺术家来创建类似的报告会很有趣。</p><p id="86ed" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">总的来说，我真的很喜欢这个项目，很高兴能继续升级它！</p><div class="ln lo ez fb lp lq"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="lr ab dw"><div class="ls ab lt cl cj lu"><h2 class="bd hi fi z dy lv ea eb lw ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="lx l"><h3 class="bd b fi z dy lv ea eb lw ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="ly l"><p class="bd b fp z dy lv ea eb lw ed ef dx translated">medium.com</p></div></div><div class="lz l"><div class="ma l mb mc md lz me in lq"/></div></div></a></div></div></div>    
</body>
</html>