<html>
<head>
<title>An Alternative Introduction to Altair Plotting</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">牛郎星绘图的另一种介绍</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/an-alternative-introduction-to-altair-plotting-c7c5a7ee4bde?source=collection_archive---------0-----------------------#2021-12-07">https://medium.com/mlearning-ai/an-alternative-introduction-to-altair-plotting-c7c5a7ee4bde?source=collection_archive---------0-----------------------#2021-12-07</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="f755" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">常见选项和最佳实践</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/c3dfac5782d25e231e1737505749d6ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zD1lJcoib1Sf_mXHSWbPJQ.jpeg"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Photo by <a class="ae jm" href="https://unsplash.com/@hostreviews?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Stephen Phillips — Hostreviews.co.uk</a> on <a class="ae jm" href="https://unsplash.com/s/photos/charts?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="8677" class="jn jo hh bd jp jq jr js jt ju jv jw jx in jy io jz iq ka ir kb it kc iu kd ke bi translated">范围</h1><p id="db29" class="pw-post-body-paragraph kf kg hh kh b ki kj ii kk kl km il kn ko kp kq kr ks kt ku kv kw kx ky kz la ha bi translated">本文面向至少对一个绘图库有些熟悉的读者，并且在<code class="du lb lc ld le b">python</code>生态系统中，很可能是<code class="du lb lc ld le b">matplotlib</code>。因此，当引入一个新的绘图库时，除了基本的语法之外，大多数人想知道如何启用公共选项，并在设置标题、定义用户友好的工具提示以及将转换从绘图元素中分离出来时应用基本的最佳实践。</p><p id="299c" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">这篇文章不是介绍一个新的数据集，而是基于<a class="ae jm" href="https://altair-viz.github.io/gallery/index.html" rel="noopener ugc nofollow" target="_blank"> altair </a>的<em class="lk">示例库</em>，但是应用了这些通用选项和最佳实践。本文展示了原始和修改后的图，以产生一个易于浏览的参考。</p></div><div class="ab cl ll lm go ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="ha hb hc hd he"><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es ls"><img src="../Images/eb939b59464e567964dab4154978100c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZOFy9Xa5LaaxgD_1oWDhog.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Welcome to Data Science Guides by <a class="ae jm" href="https://aero-data-science.medium.com/" rel="noopener">Ashraf Miah</a> | Image by the Author</figcaption></figure></div><div class="ab cl ll lm go ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="ha hb hc hd he"><h1 id="beb3" class="jn jo hh bd jp jq lt js jt ju lu jw jx in lv io jz iq lw ir kb it lx iu kd ke bi translated">简单条形图</h1><p id="49ac" class="pw-post-body-paragraph kf kg hh kh b ki kj ii kk kl km il kn ko kp kq kr ks kt ku kv kw kx ky kz la ha bi translated">对比显示原始的(在<em class="lk">左侧</em>上)和修改后的<em class="lk">图</em>(在<em class="lk">右侧</em>上)。plot是最简单的例子，但是它缺少一些基本的最佳实践，比如plot和axes标题。增加了条形的颜色编码，以产生更大的对比度。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es ly"><img src="../Images/4ec847e416010eafe39088b67fa5410f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*BaJQxtfcShrgZeQMr4V8Qw.png"/></div><figcaption class="ji jj et er es jk jl bd b be z dx">A Simple Bar Chart Comparison by <a class="ae jm" href="https://aero-data-science.medium.com/" rel="noopener">Ashraf Miah</a> | Image by the Author</figcaption></figure><p id="c603" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">下面的代码直接来自<em class="lk">牛郎星</em>的开发者:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="9e66" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated"><code class="du lb lc ld le b">source</code> <em class="lk">数据框</em>中的数据如下:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mb ma l"/></div></figure><p id="198d" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">使用以下内容制作了<em class="lk">新的</em>修改图:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="45df" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">三大变化:</p><ul class=""><li id="85d2" class="mc md hh kh b ki lf kl lg ko me ks mf kw mg la mh mi mj mk bi translated">使用<code class="du lb lc ld le b">alt.X</code>类给轴赋予了更有意义的<code class="du lb lc ld le b">title</code>。</li><li id="ee91" class="mc md hh kh b ki ml kl mm ko mn ks mo kw mp la mh mi mj mk bi translated">使用<code class="du lb lc ld le b">alt.Tootlip</code>类再次添加了自定义<code class="du lb lc ld le b">title</code>。</li><li id="b396" class="mc md hh kh b ki ml kl mm ko mn ks mo kw mp la mh mi mj mk bi translated">为整个图添加了一个<code class="du lb lc ld le b">title</code>，以反映使用<code class="du lb lc ld le b">Chart</code>的<code class="du lb lc ld le b">properties</code>元素的最佳实践。</li></ul></div><div class="ab cl ll lm go ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="ha hb hc hd he"><h1 id="8683" class="jn jo hh bd jp jq lt js jt ju lu jw jx in lv io jz iq lw ir kb it lx iu kd ke bi translated">简单热图</h1><p id="ee8c" class="pw-post-body-paragraph kf kg hh kh b ki kj ii kk kl km il kn ko kp kq kr ks kt ku kv kw kx ky kz la ha bi translated"><em class="lk">原版</em>和<em class="lk">改进型</em>的对比如下:</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mq"><img src="../Images/5b81dd62cbe03e12467a3ebf2bf9f73f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m3TpSb8z2_5OBytBgPFf8g.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Simple Heatmap Comparison by <a class="ae jm" href="https://aero-data-science.medium.com/" rel="noopener">Ashraf Miah</a> | Image by the Author</figcaption></figure><p id="aafa" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">来自<em class="lk"> Altair </em>开发者的代码使用<code class="du lb lc ld le b">x</code>、<code class="du lb lc ld le b">y</code>和<code class="du lb lc ld le b">z</code>之间的简单关系生成<code class="du lb lc ld le b">source</code>数据:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="4c92" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">下面是源数据的预览:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mb ma l"/></div></figure><p id="1d6c" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">修改后的<em class="lk">图表</em>由以下代码生成:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="2c98" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">相对于之前的图，<code class="du lb lc ld le b">color</code>通道已经使用<code class="du lb lc ld le b">alt.Color</code>类进行了定制。图表<em class="lk">的其余部分</em>反映了最佳实践:轴、图例和绘图使用类似的模式<code class="du lb lc ld le b">alt.X('x:O', title='X Coodinate')</code>提供给<code class="du lb lc ld le b">title</code>。图的大小也改变了——注意使用了整数<em class="lk">而不是字符串</em>。</p></div><div class="ab cl ll lm go ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="ha hb hc hd he"><h1 id="c788" class="jn jo hh bd jp jq lt js jt ju lu jw jx in lv io jz iq lw ir kb it lx iu kd ke bi translated">简单直方图</h1><p id="84b7" class="pw-post-body-paragraph kf kg hh kh b ki kj ii kk kl km il kn ko kp kq kr ks kt ku kv kw kx ky kz la ha bi translated"><em class="lk">原始</em>和<em class="lk">新</em>图表之间的对比隐藏了显著的变化。<em class="lk"> Altair </em>使用单线(<code class="du lb lc ld le b">bin=True</code>)执行转换以创建直方图，而使用<code class="du lb lc ld le b">pandas</code>操作数据需要更多的工作:</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mr"><img src="../Images/e60fc4c63c85abb086353bfa37cf1082.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gl_m9WfidHrE7vw-1ujupQ.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">A Simple Histogram Comparison by <a class="ae jm" href="https://aero-data-science.medium.com/" rel="noopener">Ashraf Miah</a> | Image by the Author</figcaption></figure><p id="2dac" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">原始代码包含一个关键字参数，用<code class="du lb lc ld le b">bin=True</code>转换数据:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="a31e" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">数据来自IMDb，包括许多电影事实:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mb ma l"/></div></figure><p id="2da9" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">直方图是<code class="du lb lc ld le b">IMDB_Rating</code>的直方图，通过<code class="du lb lc ld le b">altair</code>使用<code class="du lb lc ld le b">bin=True</code>选项使其变得简单。相比之下，手动宁滨数据并以直方图的形式呈现需要一行以上的时间！</p><p id="2985" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">这个例子有助于说明如何使用<code class="du lb lc ld le b">spark</code>、<code class="du lb lc ld le b">dask</code>、<code class="du lb lc ld le b">vaex</code>等将包含1000万行的大数据集轻松转换为只有10行的<code class="du lb lc ld le b">pandas Series</code>，而<code class="du lb lc ld le b">altair</code>通常会很困难。以下步骤改编自<code class="du lb lc ld le b">altair</code>团队的<a class="ae jm" href="https://github.com/altair-viz/altair/issues/1691" rel="noopener ugc nofollow" target="_blank">问题#1691 </a>。</p><p id="8ea2" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">使用<code class="du lb lc ld le b">pd.read_json()</code>功能将<code class="du lb lc ld le b">url</code>中的数据存储为<em class="lk">数据帧</em> ( <code class="du lb lc ld le b">df</code>)。然后，第一步是创建容器类别(或边缘),然后相应地划分数据:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="0596" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">检查的输出确认分类是正确的:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mb ma l"/></div></figure><p id="ba74" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">接下来的步骤是:</p><ul class=""><li id="d3c6" class="mc md hh kh b ki lf kl lg ko me ks mf kw mg la mh mi mj mk bi translated">使用<code class="du lb lc ld le b">groupby</code>汇总数据</li><li id="fd81" class="mc md hh kh b ki ml kl mm ko mn ks mo kw mp la mh mi mj mk bi translated">为每个类别的最低和最高评分创建标签列</li><li id="0b93" class="mc md hh kh b ki ml kl mm ko mn ks mo kw mp la mh mi mj mk bi translated">删除不再需要的索引</li></ul><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="1479" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">在整个<em class="lk">数据框架</em>中，只有<code class="du lb lc ld le b">IMDB_Rating</code>列是必需的，并使用宁滨类别、<code class="du lb lc ld le b">count</code>编辑、转换和重命名为<em class="lk">数据框架</em>进行聚合(<code class="du lb lc ld le b">groupby</code>)。然后使用<code class="du lb lc ld le b">list</code>索引到单独的列中提取每个箱的范围，并移除现有的<code class="du lb lc ld le b">index</code>。数据现在是这样的格式:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mb ma l"/></div></figure><p id="7bd2" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">下面的例子是在<em class="lk">图库</em>中找到的<strong class="kh hi">而不是</strong>，并且没有明确说明，但是下面的代码是用<strong class="kh hi">预入库</strong>数据创建<em class="lk">图表</em>的最小代码:</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es ms"><img src="../Images/067babf63f19d95958b916c1ee4d7850.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*Z_mWk3YZnDV7d4jE-5NGHw.png"/></div><figcaption class="ji jj et er es jk jl bd b be z dx">Pre-binned Histogram by <a class="ae jm" href="https://aero-data-science.medium.com/" rel="noopener">Ashraf Miah</a> | Image by the Author</figcaption></figure><p id="c270" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">注意关键字参数<code class="du lb lc ld le b">bin=’binned’ </code>是必需的，它允许使用<code class="du lb lc ld le b">x2</code>(或<code class="du lb lc ld le b">y2</code>)编码通道来定义bin范围的上限:</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mt"><img src="../Images/e19cba35904d85cead2feb16f50630d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I_6QDxyn9DsdPnyv8jDqxw.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Image by the Author</figcaption></figure><p id="b3de" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated"><code class="du lb lc ld le b">tooltip</code>包含每个箱的上限和下限；这可以通过使用<em class="lk"> Vega表达式</em>和<code class="du lb lc ld le b">altair</code>的<code class="du lb lc ld le b">transform_calculate</code>函数来改善:</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mu"><img src="../Images/337f54832c2502d0bb4c52ceeca3d552.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eeqsd6I9DAOebHg5QGhRCg.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Image by the Author</figcaption></figure><p id="7157" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">代码一次显示多个<code class="du lb lc ld le b">altair</code>特性；数据被转换以创建一个名为<code class="du lb lc ld le b">rating_range</code>的新参数。使用<em class="lk"> Vega </em>表达式将这两个标签列转换成字符串，然后使用<em class="lk"> JavaScript </em>语法组合起来，创建一个格式为<code class="du lb lc ld le b">6–7</code>的标签。这显示为<code class="du lb lc ld le b">tooltip</code>。<em class="lk">图表</em>也被分配了稍大的尺寸，以便于比较。</p><p id="6098" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">但是，该图没有反映最佳实践，如下文的并排比较所示:</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mv"><img src="../Images/346006d0552a8227f4190970524377a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kG2UkcXvv0N6iZ4gP4wJRg.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Comparison with Best Practice by <a class="ae jm" href="https://aero-data-science.medium.com/" rel="noopener">Ashraf Miah</a> | Image by the Author</figcaption></figure><p id="0f67" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">修改后的图表(右侧)的代码如下所示:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="75b6" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">由于使用了<em class="lk">预先入库的</em>数据，因此<code class="du lb lc ld le b">altair</code>行的数量增加了一倍。生成新参数的<code class="du lb lc ld le b">transform_calculate</code>功能已经介绍过了。要删除第二个轴标题，必须明确设置为<code class="du lb lc ld le b">None</code>，即<code class="du lb lc ld le b">alt.X2('bin_max', title=None)</code>。使用<code class="du lb lc ld le b">title</code>参数添加带有格式良好的标签的工具提示，作为绘图标题。</p></div><div class="ab cl ll lm go ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="ha hb hc hd he"><h1 id="743f" class="jn jo hh bd jp jq lt js jt ju lu jw jx in lv io jz iq lw ir kb it lx iu kd ke bi translated">简单折线图</h1><p id="f342" class="pw-post-body-paragraph kf kg hh kh b ki kj ii kk kl km il kn ko kp kq kr ks kt ku kv kw kx ky kz la ha bi translated"><em class="lk">原始</em>和<em class="lk">新</em>图之间的比较如下所示，其中有一些反映最佳实践的微小变化:</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mw"><img src="../Images/1c2407e367bb1129d4093df5cb9984c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NgyyCb3HL50eCsNS4OBzlQ.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Simple Line Chart Comparison by <a class="ae jm" href="https://aero-data-science.medium.com/" rel="noopener">Ashraf Miah</a> | Image by the Author</figcaption></figure><p id="bf4c" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">用于生成<em class="lk">原始</em>图的代码是一个非常简单的<em class="lk">正弦</em>图示例:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="7b92" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">该数据的格式如下:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mb ma l"/></div></figure><p id="a78a" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">对<em class="lk">原始</em>图的修改较小，使用更明确的轴<code class="du lb lc ld le b">titles</code>和总体图的<code class="du lb lc ld le b">title</code>:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lz ma l"/></div></figure></div><div class="ab cl ll lm go ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="ha hb hc hd he"><h1 id="6324" class="jn jo hh bd jp jq lt js jt ju lu jw jx in lv io jz iq lw ir kb it lx iu kd ke bi translated">带工具提示的简单散点图</h1><p id="bfab" class="pw-post-body-paragraph kf kg hh kh b ki kj ii kk kl km il kn ko kp kq kr ks kt ku kv kw kx ky kz la ha bi translated">下面使用静态图像简单散布在<em class="lk">原始</em>和<em class="lk">新</em>之间，隐藏了使用<code class="du lb lc ld le b">Tooltips</code>的一些变化以及最佳实践的应用:</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mx"><img src="../Images/7bd3060d65f87255c7f9138ad1f6edc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*diskelWjWBdG9ESEgWgFfg.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Simple Scatter Chart Comparison by <a class="ae jm" href="https://aero-data-science.medium.com/" rel="noopener">Ashraf Miah</a> | Image by the Author</figcaption></figure><p id="88ad" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated"><em class="lk">原始</em>代码使用来自<em class="lk">织女星</em>的cars数据集，并显示圆圈的修改尺寸:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="4960" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">该数据的格式如下:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mb ma l"/></div></figure><p id="76e9" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">修改后的图包含许多最佳实践，使其更易于阅读和理解:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="74de" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">增加了一个剧情<code class="du lb lc ld le b">title</code>和<code class="du lb lc ld le b">y</code>频道的明确标题，因为它反映了燃油效率。<code class="du lb lc ld le b">Tooltip</code>现在包含了<code class="du lb lc ld le b">Miles_per_Gallon</code>编码的缩写，以便在交互查看时减少对<em class="lk">图表</em>的阻碍。</p></div><div class="ab cl ll lm go ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="ha hb hc hd he"><h1 id="ca4f" class="jn jo hh bd jp jq lt js jt ju lu jw jx in lv io jz iq lw ir kb it lx iu kd ke bi translated">简单堆积面积图</h1><p id="183a" class="pw-post-body-paragraph kf kg hh kh b ki kj ii kk kl km il kn ko kp kq kr ks kt ku kv kw kx ky kz la ha bi translated"><em class="lk">原</em>与<em class="lk">修改后</em>的对比</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es my"><img src="../Images/11b6739934ca33d7b83e1fb82069c990.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-NLjiat4YdQ7xyRJz7uuNw.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Simple Stacked Area Chart Comparison by <a class="ae jm" href="https://aero-data-science.medium.com/" rel="noopener">Ashraf Miah</a> | Image by the Author</figcaption></figure><p id="255b" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">原始代码使用<em class="lk">美国爱荷华州</em>能源生产数据集和区域<code class="du lb lc ld le b">mark</code>:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="f4ad" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">数据在<em class="lk">长</em>表格中:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mb ma l"/></div></figure><p id="1434" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">修改后的代码反映了之前讨论的最佳实践，对所有通道使用显式标题:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lz ma l"/></div></figure></div><div class="ab cl ll lm go ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="ha hb hc hd he"><h1 id="feaa" class="jn jo hh bd jp jq lt js jt ju lu jw jx in lv io jz iq lw ir kb it lx iu kd ke bi translated">简单带状图</h1><p id="7a1b" class="pw-post-body-paragraph kf kg hh kh b ki kj ii kk kl km il kn ko kp kq kr ks kt ku kv kw kx ky kz la ha bi translated"><em class="lk">原</em>与<em class="lk">改装</em>的对比:</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mz"><img src="../Images/428cb4cef9b8af5dc4962992e02b6152.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E7ge-LUDDhJFxr9RUgEB9g.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Simple Strip Chart Comparison by <a class="ae jm" href="https://aero-data-science.medium.com/" rel="noopener">Ashraf Miah</a> | Image by the Author</figcaption></figure><p id="43c1" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">数据同样基于来自<em class="lk">织女星</em>的cars数据集；请注意编码数据类型的显式使用:</p><ul class=""><li id="b8b9" class="mc md hh kh b ki lf kl lg ko me ks mf kw mg la mh mi mj mk bi translated"><code class="du lb lc ld le b">Q</code>:定量</li><li id="a945" class="mc md hh kh b ki ml kl mm ko mn ks mo kw mp la mh mi mj mk bi translated"><code class="du lb lc ld le b">O</code>:序数</li></ul><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="1fda" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">该数据的格式如下:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mb ma l"/></div></figure><p id="45c6" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">修改后的图表增加了<code class="du lb lc ld le b">color</code>通道以增加对比度:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="1882" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">该图反映了添加<code class="du lb lc ld le b">color</code>通道作为<em class="lk">标称</em>数据类型的最佳实践。</p><h1 id="4270" class="jn jo hh bd jp jq jr js jt ju jv jw jx in jy io jz iq ka ir kb it kc iu kd ke bi translated">摘要</h1><p id="fba0" class="pw-post-body-paragraph kf kg hh kh b ki kj ii kk kl km il kn ko kp kq kr ks kt ku kv kw kx ky kz la ha bi translated">来自<em class="lk"> Altair </em>示例图库的第一组绘图已尽可能以最佳实践再现，但也通过从绘图组件中分离转换。修改后的图显示了以下附加特征:</p><ul class=""><li id="b015" class="mc md hh kh b ki lf kl lg ko me ks mf kw mg la mh mi mj mk bi translated">添加情节<code class="du lb lc ld le b">title</code></li><li id="6923" class="mc md hh kh b ki ml kl mm ko mn ks mo kw mp la mh mi mj mk bi translated">用<code class="du lb lc ld le b">alt.X(&lt;column&gt;, title='Meaningful Axis')</code>明确标记轴</li><li id="43f3" class="mc md hh kh b ki ml kl mm ko mn ks mo kw mp la mh mi mj mk bi translated">明确标注其他频道和<em class="lk">工具提示</em></li><li id="6e49" class="mc md hh kh b ki ml kl mm ko mn ks mo kw mp la mh mi mj mk bi translated">出于显示目的，使用<code class="du lb lc ld le b">transform_calculate</code>生成新的补充数据。</li><li id="147a" class="mc md hh kh b ki ml kl mm ko mn ks mo kw mp la mh mi mj mk bi translated">用<code class="du lb lc ld le b">altair</code>宁滨数据生成聚合，用于随后的绘图。</li></ul><p id="c24f" class="pw-post-body-paragraph kf kg hh kh b ki lf ii kk kl lg il kn ko lh kq kr ks li ku kv kw lj ky kz la ha bi translated">因此，通过使用几个展示常见选项和最佳实践的示例，对<em class="lk"> Altair </em>进行了另一种介绍，这些示例在<em class="lk"> Altair </em>用户指南的<em class="lk">示例库</em>中没有。</p></div><div class="ab cl ll lm go ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="ha hb hc hd he"><h2 id="aa02" class="na jo hh bd jp nb nc nd jt ne nf ng jx ko nh ni jz ks nj nk kb kw nl nm kd nn bi translated">属性</h2><p id="cfa6" class="pw-post-body-paragraph kf kg hh kh b ki kj ii kk kl km il kn ko kp kq kr ks kt ku kv kw kx ky kz la ha bi translated">所有<code class="du lb lc ld le b">gists</code>，笔记本，终端演员表均为作者。所有作品都是基于明确的<a class="ae jm" href="https://creativecommons.org/share-your-work/public-domain/cc0/" rel="noopener ugc nofollow" target="_blank"> CC0、公共领域</a>许可或<a class="ae jm" href="https://scripts.sil.org/cms/scripts/page.php?item_id=OFL_web" rel="noopener ugc nofollow" target="_blank">SIL of</a>的资产，因此不侵权。主题灵感来自并基于我最喜欢的<code class="du lb lc ld le b">vim</code>主题:<a class="ae jm" href="https://github.com/morhetz/gruvbox" rel="noopener ugc nofollow" target="_blank">grubbox</a>。</p><h2 id="1f66" class="na jo hh bd jp nb nc nd jt ne nf ng jx ko nh ni jz ks nj nk kb kw nl nm kd nn bi translated">连接</h2><p id="c148" class="pw-post-body-paragraph kf kg hh kh b ki kj ii kk kl km il kn ko kp kq kr ks kt ku kv kw kx ky kz la ha bi translated">请随时在LinkedIn上与我联系。</p><div class="no np ez fb nq nr"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="ns ab dw"><div class="nt ab nu cl cj nv"><h2 class="bd hi fi z dy nw ea eb nx ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="ny l"><h3 class="bd b fi z dy nw ea eb nx ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="nz l"><p class="bd b fp z dy nw ea eb nx ed ef dx translated">medium.com</p></div></div><div class="oa l"><div class="ob l oc od oe oa of jg nr"/></div></div></a></div></div></div>    
</body>
</html>