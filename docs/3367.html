<html>
<head>
<title>How to deploy Simple Flask API in Docker Container</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Docker容器中部署简单的Flask API</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/how-to-deploy-simple-flask-api-in-docker-container-bf661fcffcbb?source=collection_archive---------2-----------------------#2022-08-24">https://medium.com/mlearning-ai/how-to-deploy-simple-flask-api-in-docker-container-bf661fcffcbb?source=collection_archive---------2-----------------------#2022-08-24</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="cfbb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这篇文章中，我将指导你在docker容器中部署一个简单的flask API。</p><p id="fb43" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">完成本教程后，您将了解:</p><ul class=""><li id="1e84" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">创建并测试一个简单的Flask API</li><li id="22b4" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">创建Dockerfile文件</li><li id="024a" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">使用Docker文件创建应用程序的Docker映像</li><li id="011e" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">创建运行应用程序的容器</li></ul><figure class="jr js jt ju fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es jq"><img src="../Images/127b409323b67d7f0012a10cf7691cbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KoN80S13-cNiiCul.jpg"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx"><a class="ae kg" href="https://www.freepik.com/vectors/import" rel="noopener ugc nofollow" target="_blank">Import vector created by freepik — www.freepik.com</a></figcaption></figure><h1 id="262d" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">创建和测试一个简单的Flask API</h1><p id="cd64" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">我们首先需要的是一个Flask API应用程序，它将接收来自客户端的请求，并在收到请求后返回确认。</p><p id="441c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我已经创建了一个简单的API来做我上面提到的事情。你可以从<a class="ae kg" href="https://github.com/errolPereira/blog_resources/tree/main/Flask%20API" rel="noopener ugc nofollow" target="_blank">这里</a>克隆这个库。</p><p id="0116" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">将目录更改为Flask API，并运行下面的命令在本地环境中运行您的API。</p><p id="e598" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du lk ll lm ln b">cd Flask API</code><code class="du lk ll lm ln b">pip install -r requirements.txt</code>T2】</p><figure class="jr js jt ju fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es lo"><img src="../Images/0f3ac2fc969aa3ba6b476acd9bf32261.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*omBoJmFxKGhyXm7H.png"/></div></div></figure><p id="efe0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，您应该会在控制台中看到上面的输出。太好了！这意味着API正在您的本地环境中运行。是时候测试我们的API了。为此，我们将使用名为Postman的API测试应用程序。如果还没有安装，可以在这里安装<a class="ae kg" href="https://www.postman.com/downloads/" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="e5a9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">打开应用程序并创建一个新标签，然后将下面的URL粘贴到标签中。</p><p id="3b37" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du lk ll lm ln b"><a class="ae kg" href="http://127.0.0.1:5005/apirequest" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:5005/apirequest</a></code></p><figure class="jr js jt ju fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es lp"><img src="../Images/35df367de383c397ff2c4f86d07970b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ADcLvh-ESvtnueE2.png"/></div></div></figure><p id="70bc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们来分解一下网址:</p><ol class=""><li id="89b1" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lq ji jj jk bi translated"><a class="ae kg" href="http://127.0.0.1-This" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi">http://127 . 0 . 0 . 1</strong>——这个</a>是本地URL或本地主机，我们的API部署在其上。</li><li id="a241" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb lq ji jj jk bi translated"><strong class="ig hi"> 5005 </strong>:这是部署API的端口</li><li id="5c58" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb lq ji jj jk bi translated"><strong class="ig hi"> /apirequest </strong> —这是API的端点。基本上，这意味着我应该点击应用程序的哪个部分来从API获得相关的响应。一个API可以有多个端点。</li></ol><p id="d45f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">除此之外，API还可以有一个主体来传递额外的输入给应用程序，以获得想要的结果。要了解更多关于API的知识，请阅读这个<a class="ae kg" href="https://realpython.com/api-integration-in-python/" rel="noopener ugc nofollow" target="_blank">牛逼的博客</a>。</p><p id="f518" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">单击send按钮，您应该会从API得到类似“Hello from the FLASK GET API”的响应</p><h1 id="9fd5" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">为API创建docker文件</h1><p id="f235" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">太好了！我们已经创建并测试了API，并准备好进行部署。我们需要在docker容器上部署这个API。为此，我们首先需要为我们的应用程序创建一个docker映像。如果你的系统中安装了docker，请按照他们<a class="ae kg" href="https://docs.docker.com/engine/install/" rel="noopener ugc nofollow" target="_blank">官方网站</a>上的说明进行安装。</p><p id="625c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦安装了docker，使用下面的通用方法创建API的docker镜像。</p><p id="91da" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du lk ll lm ln b">docker build -t flask_docker_image .</code></p><figure class="jr js jt ju fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es lr"><img src="../Images/95e1a8f3d217682a24d37bbc7e5334ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZwHz-Ttfv3CnTpTT.png"/></div></div></figure><p id="a511" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这将把运行我们的应用程序所需的所有依赖项安装到docker映像中，并将创建一个名为flask_docker_image的新映像。</p><p id="d166" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要验证是否已创建映像，请运行以下命令</p><p id="8017" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du lk ll lm ln b">docker image ls.</code></p><figure class="jr js jt ju fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es ls"><img src="../Images/391e155e795d863ccdc90f1e3bb6d1f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UyhEMApClIHK-0Z1.png"/></div></div></figure><p id="08ce" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">既然我们的映像已经创建好了，接下来是时候创建一个docker容器并在该容器上部署我们的应用程序了。</p><p id="9b2d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">运行下面的命令来创建一个docker容器实例。</p><p id="ef8e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du lk ll lm ln b">docker run --name flask_container -p 5000:5000 flask_docker_image</code></p><p id="cac3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当我们在本地系统上运行我们的模型时，您应该能够看到类似的输出。</p><figure class="jr js jt ju fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es lt"><img src="../Images/7e6faf3483c9ebb70d2877c3a4457a29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fwtN7rVB2Q1L6shY.png"/></div></div></figure><p id="7ce3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，您可以继续使用Postman再次测试您的API。您应该能够看到类似的响应。但是这次您的API运行在docker容器实例上，而不是您的本地系统上。</p><p id="074b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">参考文献</strong>:</p><p id="488c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae kg" href="https://docs.docker.com/engine/reference/commandline/run/" rel="noopener ugc nofollow" target="_blank"> Docker官方文档</a></p></div><div class="ab cl lu lv go lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ha hb hc hd he"><p id="1820" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="mb">原载于2022年8月24日</em><a class="ae kg" href="https://errolpereira.github.io/deploy_flask_api_using_docker_container/" rel="noopener ugc nofollow" target="_blank"><em class="mb">https://errolpereira . github . io</em></a><em class="mb">。</em></p><div class="mc md ez fb me mf"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="mg ab dw"><div class="mh ab mi cl cj mj"><h2 class="bd hi fi z dy mk ea eb ml ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="mm l"><h3 class="bd b fi z dy mk ea eb ml ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="mn l"><p class="bd b fp z dy mk ea eb ml ed ef dx translated">medium.com</p></div></div><div class="mo l"><div class="mp l mq mr ms mo mt ka mf"/></div></div></a></div></div></div>    
</body>
</html>