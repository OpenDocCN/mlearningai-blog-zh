<html>
<head>
<title>Everything You Need to Know About Histogram</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于直方图你需要知道的一切</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/everything-you-need-to-know-about-histogram-296181b74137?source=collection_archive---------4-----------------------#2022-12-23">https://medium.com/mlearning-ai/everything-you-need-to-know-about-histogram-296181b74137?source=collection_archive---------4-----------------------#2022-12-23</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="4615" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">直方图是描述统计的关键部分之一</h2></div><p id="8d8c" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">描述性统计的主要目的是对数据进行汇总，并以一种易于理解的形式呈现数据，其中之一就是直方图。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es js"><img src="../Images/e4566101cc57f47e5f9b09f9e7b79959.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*teA2g1s6oHy_AmXaEqZxdQ.png"/></div></div><figcaption class="ke kf et er es kg kh bd b be z dx">Image by pressfoto on <a class="ae ki" href="https://www.freepik.com/free-photo/economical-research_5402552.htm#page=2&amp;query=statistics&amp;position=37&amp;from_view=search&amp;track=sph" rel="noopener ugc nofollow" target="_blank">Freepik</a></figcaption></figure><p id="c722" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">数据是统计世界的主要部分。为了从数据中获得洞察力，我们需要统计数据。当你只需要总结数据而不需要得出任何结论时，描述性统计是正确的选择。有很多方法可以总结数据，包括直方图。</p><p id="25ec" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">直方图在描述性统计中非常常见。在学习描述性统计的时候，你应该学过直方图，或者听过“直方图”这个词。本文将讨论与直方图相关的东西，也将有一些手动和使用Python创建直方图的方法。</p><h1 id="4753" class="kj kk hh bd kl km kn ko kp kq kr ks kt in ku io kv iq kw ir kx it ky iu kz la bi translated">直方图介绍</h1><p id="8f1f" class="pw-post-body-paragraph iw ix hh iy b iz lb ii jb jc lc il je jf ld jh ji jj le jl jm jn lf jp jq jr ha bi translated">呈现数据分布的最佳方式之一是使用直方图。直方图是一种很好的条形图形式，用于查看连续数据点的频率分布。它绘制了两个数值轴，一个轴用于特定值(频率)的出现次数，另一个轴用于将值分组到箱(区间类)[1]。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es lg"><img src="../Images/1f2bfa3e7584db8cb81eb7013193375d.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/format:webp/1*he9IT4lzJAVCYLmvv_lxpw.png"/></div><figcaption class="ke kf et er es kg kh bd b be z dx">Example of a simple histogram where the x-axis represents age and the y-axis represents the frequency of each age class/bin (Image by author)</figcaption></figure><p id="c974" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">直方图中的每个条代表每个区间/类/仓中的频率数量。直方图有多种用途，包括帮助我们估计值集中的位置，帮助我们查看是否有异常值，以及帮助我们向机构提供数据的分布类型。</p><h1 id="bf86" class="kj kk hh bd kl km kn ko kp kq kr ks kt in ku io kv iq kw ir kx it ky iu kz la bi translated">如何创建直方图</h1><p id="6b91" class="pw-post-body-paragraph iw ix hh iy b iz lb ii jb jc lc il je jf ld jh ji jj le jl jm jn lf jp jq jr ha bi translated">直方图最重要的部分是类的数量，或者我们称之为箱。其工作方式是将x轴划分为多个条柱，将数据集中的每个数据点分配到一个条柱，然后计算分配到每个条柱的数据点数量。然后，y轴是每个箱中数据点的频率之和。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es lh"><img src="../Images/9755daabb85f03d1255d43806e77ad92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*e7Y0RCtwi529LU7Q.png"/></div><figcaption class="ke kf et er es kg kh bd b be z dx">Example histograms with each different number of bins [2]</figcaption></figure><p id="cfcf" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">面元太少不会有任何意义，面元太多会让我们很难确定数据的汇总。制作一个好的直方图有许多步骤，以便我们更容易阅读数据摘要。</p><p id="bf75" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">制作直方图的一个简单方法是首先制作一个频率数据表。制作频率数据表的步骤如下:</p><ol class=""><li id="dc2e" class="li lj hh iy b iz ja jc jd jf lk jj ll jn lm jr ln lo lp lq bi translated">用公式<code class="du lr ls lt lu b">1 + 3.3 log n</code>确定箱子的正确数量。实际bin值的范围总是从5到20。</li><li id="1390" class="li lj hh iy b iz lv jc lw jf lx jj ly jn lz jr ln lo lp lq bi translated">用公式<code class="du lr ls lt lu b">max-min/bins</code>确定每个仓的宽度。</li><li id="560d" class="li lj hh iy b iz lv jc lw jf lx jj ly jn lz jr ln lo lp lq bi translated">指定第一个容器的最低容器限制。</li><li id="a07f" class="li lj hh iy b iz lv jc lw jf lx jj ly jn lz jr ln lo lp lq bi translated">确定每个箱的边界。在确定每个箱的边界时，不应有间隙和重叠，并且每个箱的距离应相同。</li><li id="1e77" class="li lj hh iy b iz lv jc lw jf lx jj ly jn lz jr ln lo lp lq bi translated">确定属于类/箱的数据量。</li></ol><p id="a3ef" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">了解了制作柱状图的初始步骤后，我们来试着做一个频数数据表。以下数据收集了56名学生在数据科学课程中的成绩。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es ma"><img src="../Images/540b20371a38a21aeae86bcef198838a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8N8ryjX3hS5fAYo3jYSj-g.png"/></div></div></figure><p id="5dae" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">你们中的一些人肯定会想到一个关于数据的问题，比如有多少学生的分数低于70分。有多少学生得分在85分以上？这个学生得了多少分？还有更多。我们先把数据汇总成一个频数数据表，然后用柱状图的形式表示出来，这样就可以回答这些问题了。</p><ol class=""><li id="b789" class="li lj hh iy b iz ja jc jd jf lk jj ll jn lm jr ln lo lp lq bi translated">首先，我们先用公式<code class="du lr ls lt lu b">1 + 3.3 log(56) = 6.77</code>计算bin值。因为bin的值必须是整数，所以我们必须将其转换为整数。这里我们改成<code class="du lr ls lt lu b">6</code>。</li><li id="8a44" class="li lj hh iy b iz lv jc lw jf lx jj ly jn lz jr ln lo lp lq bi translated">其次，我们必须用最大-最小/面元公式来确定面元的宽度。已知数据中的最大值是<code class="du lr ls lt lu b">90</code>，数据中的最小值是<code class="du lr ls lt lu b">62</code>，所以<code class="du lr ls lt lu b">90–62/6 = 4.66</code>。我们可以将值<code class="du lr ls lt lu b">4.66</code>设为<code class="du lr ls lt lu b">4</code>。</li></ol><p id="55aa" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在获得箱值和每个箱的宽度之后，我们可以通过计算每个箱中包含多少数据(频率)来构建我们的频率分布表。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es mb"><img src="../Images/49c5b2f759bad33ebaf4a188f8038cb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/1*rLpRIXas3Em9SRrkkLPZBw.png"/></div></figure><p id="5453" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">然而，除了这两个分量，频率分布表还包含中值、小于上限的值和大于下限的值。要找到每个箱的中间值，可以使用<code class="du lr ls lt lu b">upper limit + lower limit / 2</code>来完成。比如第一个bin，也就是<code class="du lr ls lt lu b">62 + 66 / 2 = 64</code>。然后，我们还必须计算小于每个箱的上限的每个值，反之亦然，对于大于每个箱的下限的值也是如此。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es mc"><img src="../Images/701a5d2a178687ce8c023066f57058cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dSOlHX9yFPF9-pbmlurqjg.png"/></div></div></figure><p id="32a3" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">好了，我们已经成功地创建了我们的频率分布表。接下来，我们可以从表中创建一个直方图。直方图的x轴将表示仓的值，y轴将表示每个仓的频率。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es md"><img src="../Images/d65a15c673809afd12eb8ec4a1883ab8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wm_LfFXxCwJ5JOOJzMA7Zg.png"/></div></div><figcaption class="ke kf et er es kg kh bd b be z dx">The histogram of the data we have made into a frequency distribution table (Image by author)</figcaption></figure><p id="e96f" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">因此，从直方图中，我们可以解释数据中的一些见解，例如值范围为71.5到76.5的学生出现频率最高。然后，从直方图中，我们还可以看到数据分布的类型。此外，有了直方图，我们可以回答第一次查看原始数据时出现的问题。</p><h1 id="50bd" class="kj kk hh bd kl km kn ko kp kq kr ks kt in ku io kv iq kw ir kx it ky iu kz la bi translated">使用Python中的各种库创建直方图</h1><p id="819f" class="pw-post-body-paragraph iw ix hh iy b iz lb ii jb jc lc il je jf ld jh ji jj le jl jm jn lf jp jq jr ha bi translated">Python提供了几个库，我们可以用它们来可视化数据。我们将使用一些库来创建直方图。其中一些库，如Matplotlib、Seaborn和Plotly。你可以访问我们这里使用的collab笔记本:<a class="ae ki" href="https://bit.ly/3joXdmt" rel="noopener ugc nofollow" target="_blank">https://bit.ly/3joXdmt</a></p><p id="9ae4" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">导入一些我们将使用的库。</p><pre class="jt ju jv jw fd me lu mf bn mg mh bi"><span id="37ed" class="mi kk hh lu b be mj mk l ml mm">import numpy as np<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns<br/>import plotly.express as px</span></pre><p id="825e" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们将只使用我们使用NumPy创建的虚拟数据集，这样我们就可以专注于创建直方图。</p><pre class="jt ju jv jw fd me lu mf bn mg mh bi"><span id="a40d" class="mi kk hh lu b be mj mk l ml mm">age = 10 * np.random.randn(1000) + 30</span></pre><p id="3a05" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">代码的输出是一个NumPy数组，总共有1000个，正态分布，平均值为30，标准偏差为10。然后，我们可以继续制作直方图。</p><h2 id="11cc" class="mn kk hh bd kl mo mp mq kp mr ms mt kt jf mu mv kv jj mw mx kx jn my mz kz na bi translated">Matplotlib</h2><p id="5d14" class="pw-post-body-paragraph iw ix hh iy b iz lb ii jb jc lc il je jf ld jh ji jj le jl jm jn lf jp jq jr ha bi translated">要在不调整某些参数的情况下创建直方图，我们在使用Matplotlib时只需要一行代码。</p><pre class="jt ju jv jw fd me lu mf bn mg mh bi"><span id="741e" class="mi kk hh lu b be mj mk l ml mm">plt.hist(age)</span></pre><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es nb"><img src="../Images/81306f40390b65dbffb02bc48566e25f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*2xZ0m_sHj7Wui-xwA_KuUA.png"/></div></figure><p id="c415" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">为了让直方图更吸引人，我们可以做一些参数调整，比如设置仓的数量、图表颜色、网格、轴标题等。</p><pre class="jt ju jv jw fd me lu mf bn mg mh bi"><span id="6bd3" class="mi kk hh lu b be mj mk l ml mm">plt.figure(figsize=(9,7))<br/>plt.hist(age, bins=20, color='yellowgreen', edgecolor='black', alpha=0.7)<br/>plt.title('Histogram', {'fontsize':22})<br/>plt.ylabel('Frequency', {'fontsize':14})<br/>plt.xlabel('Age', {'fontsize':14})<br/>plt.grid(axis="y", which='minor')<br/>plt.show()</span></pre><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es nc"><img src="../Images/2ad61d661494f8d00fbda1b18319d915.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*HtEXd_HP8EyV4w8M4W0XPQ.png"/></div></figure><p id="0e62" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">实际上还有更多参数调整来调整Matplotlib上的直方图，更多细节你可以阅读来自<a class="ae ki" href="https://matplotlib.org/stable/index.html" rel="noopener ugc nofollow" target="_blank"> Matplotlib </a>的官方文档。</p><h2 id="930e" class="mn kk hh bd kl mo mp mq kp mr ms mt kt jf mu mv kv jj mw mx kx jn my mz kz na bi translated">海生的</h2><p id="35e7" class="pw-post-body-paragraph iw ix hh iy b iz lb ii jb jc lc il je jf ld jh ji jj le jl jm jn lf jp jq jr ha bi translated">Seaborn与Matplotlib几乎相似，因为Seaborn是建立在Matplotlib之上的。就像Matplotlib一样，我们也可以只用一行代码创建一个直方图。</p><pre class="jt ju jv jw fd me lu mf bn mg mh bi"><span id="cf22" class="mi kk hh lu b be mj mk l ml mm">sns.histplot(x=age)</span></pre><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es nd"><img src="../Images/f189fc45d8ba3c4e58522c74a1157953.png" data-original-src="https://miro.medium.com/v2/resize:fit:1138/format:webp/1*kX1pK7qnpOdTRif7pw1klQ.png"/></div></figure><p id="df0c" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">为了使直方图更有吸引力，我们还可以改变各种参数值。</p><pre class="jt ju jv jw fd me lu mf bn mg mh bi"><span id="d17f" class="mi kk hh lu b be mj mk l ml mm">sns.set_style("ticks")<br/>plt.figure(figsize=(9,7))<br/>sns.histplot(x=age, bins=11, kde=True, element="step")<br/>plt.title('Histogram', {'fontsize':22})<br/>plt.ylabel('Frequency', {'fontsize':14})<br/>plt.xlabel('Age', {'fontsize':14})<br/>plt.show()</span></pre><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es ne"><img src="../Images/a5149de84a35328e87f7627f403c1bcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*l9ku1zyOfACsnHk8oG9Xkg.png"/></div></figure><p id="4066" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">详细的参数调整，可以阅读<a class="ae ki" href="https://seaborn.pydata.org/" rel="noopener ugc nofollow" target="_blank"> Seaborn </a>的官方文档。</p><h2 id="29e1" class="mn kk hh bd kl mo mp mq kp mr ms mt kt jf mu mv kv jj mw mx kx jn my mz kz na bi translated">Plotly</h2><p id="692e" class="pw-post-body-paragraph iw ix hh iy b iz lb ii jb jc lc il je jf ld jh ji jj le jl jm jn lf jp jq jr ha bi translated">与我们使用的两个库不同，Plotly是一个用于动态可视化的Python库。以下是如何用Plotly创建直方图。</p><pre class="jt ju jv jw fd me lu mf bn mg mh bi"><span id="d4be" class="mi kk hh lu b be mj mk l ml mm">fig = px.histogram(x=age)<br/>fig.show()</span></pre><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es nf"><img src="../Images/c6f6abfba0459b747b6069c7df4ac9c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DkgkpFduoCuuRaj_CoErtQ.png"/></div></div></figure><p id="4266" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">此外，我们可以像以前一样进行一些参数调整。</p><pre class="jt ju jv jw fd me lu mf bn mg mh bi"><span id="cfc0" class="mi kk hh lu b be mj mk l ml mm">fig = px.histogram(x=age, nbins=15)<br/>fig.update_layout(title = 'Histogram',<br/>                  title_x = 0.48,<br/>                  title_font= dict(size = 24, color = '#7C7C7C' ))<br/>fig.update_xaxes(title= 'Age')<br/>fig.update_yaxes(title= 'Frequency')<br/>fig.show()</span></pre><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es ng"><img src="../Images/3e0be36eb510c2134acf8f10361c8cf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lYv1Yx9OhMsWVSDoYhAirw.png"/></div></div></figure><p id="fc5c" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">详细的参数调整，可以看<a class="ae ki" href="https://plotly.com/python-api-reference/index.html#" rel="noopener ugc nofollow" target="_blank"> Plotly </a>的官方文档。</p><h1 id="0fa4" class="kj kk hh bd kl km kn ko kp kq kr ks kt in ku io kv iq kw ir kx it ky iu kz la bi translated">结论</h1><p id="f273" class="pw-post-body-paragraph iw ix hh iy b iz lb ii jb jc lc il je jf ld jh ji jj le jl jm jn lf jp jq jr ha bi translated">直方图是描述统计的重要组成部分。有了直方图，我们可以回答数据中出现的几个问题，比如我们的数据是如何分布的？我们的数据是如何集中的？还有更多。当我们手工制作直方图时，需要先做一个频数分布表。然而，为了使我们的工作更容易，Python提供了各种可以帮助我们创建直方图的库，如Matplotlib、Seaborn和Plotly。</p></div><div class="ab cl nh ni go nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ha hb hc hd he"><h1 id="8703" class="kj kk hh bd kl km no ko kp kq np ks kt in nq io kv iq nr ir kx it ns iu kz la bi translated">参考资料:</h1><p id="6c20" class="pw-post-body-paragraph iw ix hh iy b iz lb ii jb jc lc il je jf ld jh ji jj le jl jm jn lf jp jq jr ha bi translated">[1]奥尔钦，C. (2021)。<em class="nt">用数据交流:用数据证明你的观点</em>。奥莱利媒体。</p><p id="8bed" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">[2]威尔基，C. (2019)。F <em class="nt">数据可视化的基础:制作信息丰富和引人注目的图表的初级读本</em>。奥莱利媒体。</p><div class="nu nv ez fb nw nx"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="ny ab dw"><div class="nz ab oa cl cj ob"><h2 class="bd hi fi z dy oc ea eb od ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="oe l"><h3 class="bd b fi z dy oc ea eb od ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="of l"><p class="bd b fp z dy oc ea eb od ed ef dx translated">medium.com</p></div></div><div class="og l"><div class="oh l oi oj ok og ol kc nx"/></div></div></a></div></div></div>    
</body>
</html>