<html>
<head>
<title>Multivariate Relationships</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">多元关系</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/multivariate-relationships-three-is-seldom-a-crowd-8c0a9e09b5c?source=collection_archive---------1-----------------------#2022-01-01">https://medium.com/mlearning-ai/multivariate-relationships-three-is-seldom-a-crowd-8c0a9e09b5c?source=collection_archive---------1-----------------------#2022-01-01</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="939a" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">三个人很少拥挤</h2></div><p id="9272" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi js translated">寻找关联是我们人类的工作。当我们看云或画时，当我们读书、看电视或与人交谈时，我们会这样做。我们一直在这么做，所以在通往因果关系的三级阶梯上，<a class="ae kb" href="https://en.wikipedia.org/wiki/The_Book_of_Why" rel="noopener ugc nofollow" target="_blank">联想排在第一</a>也就不足为奇了。诚然，联想只能给因果关系以最轻微的暗示，但却是绝对必要的。</p><p id="b6ea" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">联想的基本需要是两个变量需要共同变化。不需要在B之前或者B在A之前有变化，但是随着A的变化，B也必须变化。这是联想的前提。“相关≠因果”。</p><p id="64b8" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在这篇文章中，我想告诉你用图表的方式找到一个关系是多么容易，但是当你添加第三个变量时，它就溜走了。在一个充满多元关系的整体世界里，三个人很少是一群人。</p><p id="621a" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在，新冠肺炎是一个很好的例子，在这里你可以看到联想的壮举是如何被创造、传播并被认为是真理的。至少，它会让你<a class="ae kb" href="https://link.springer.com/content/pdf/10.1007/s10654-021-00808-7.pdf" rel="noopener ugc nofollow" target="_blank">出版</a>，而且相当快。我相信有时候太快了。例如，见下图，这是不同国家的两个变量的横截面切片，来自公开可用的<a class="ae kb" href="https://ourworldindata.org/coronavirus" rel="noopener ugc nofollow" target="_blank"> OWID数据</a>。</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kc"><img src="../Images/8daa30aba7185b81d84e770f07b968cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TjjLGcO46UFy4cy0R_GfwQ.png"/></div></div></figure><p id="9d28" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我自己下载了数据，重新创建了包含两个、三个甚至四个变量的简单的信息图。然而，在一个整体的世界里，这很少足以说明任何形式的因果关系。如果可能的话。分析在r。</p><pre class="kd ke kf kg fd ko kp kq kr aw ks bi"><span id="884b" class="kt ku hh kp b fi kv kw l kx ky">library(tidyverse<br/>library(umap)<br/>library(M3C)<br/>library(lubridate)<br/>library(psych)<br/><br/>coviddat &lt;- read_csv("owid-covid-data.csv")<br/>coviddat$vax_perc&lt;-(coviddat$people_fully_vaccinated/coviddat$population)*100<br/>coviddat$emc_perc&lt;-(coviddat$excess_mortality_cumulative/coviddat$population)*100<br/>coviddat$week&lt;-week(coviddat$date)<br/>coviddat$month&lt;-month(coviddat$date)<br/>coviddat$year&lt;-year(coviddat$date)<br/><br/><br/>coviddat2&lt;-coviddat%&gt;%dplyr::select(date,<br/>                                    week,<br/>                                    month,<br/>                                    year,<br/>                                    location, <br/>                                    continent, <br/>                                    vax_perc,<br/>                                    emc_perc,<br/>                                    total_deaths_per_million,<br/>                                    total_cases_per_million)%&gt;%<br/>  group_by(location)%&gt;%<br/>  filter(year=="2021" &amp; month=="11")%&gt;%<br/>  summarise(.,<br/>            location=location,<br/>            continent=continent,<br/>            vax_max=max(vax_perc,na.rm=TRUE),<br/>            tdpm_max=max(total_deaths_per_million,na.rm=TRUE),<br/>            tcpm_max=max(total_cases_per_million,na.rm=TRUE))%&gt;%distinct()%&gt;%<br/>  filter(tcpm_max&gt;0 &amp; tdpm_max&gt;0 &amp; vax_max&gt;0)%&gt;%<br/>  filter(!is.na(continent))<br/>coviddat2$vaxcat&lt;-cut(coviddat2$vax_max, seq(0,120,10))<br/><br/><br/>coviddat2%&gt;%filter(tcpm_max&gt;0 &amp; tdpm_max&gt;0)%&gt;%<br/>  ggplot(., aes(x=tcpm_max, y=tdpm_max))+<br/>  geom_point(size=2, alpha=0.8,show.legend = FALSE) +<br/>  geom_smooth()+<br/>  labs(title="Relationship between Total Deaths and Total Cases per Million",<br/>       x="Total Cases per Million",<br/>       y="Total Deaths per Million")+<br/>  theme_bw()</span></pre><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kz"><img src="../Images/f5422d1529cb94157d70f72a4ae7950b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a57aTGco-4J9uQVyBTn0Ew.png"/></div></div></figure><pre class="kd ke kf kg fd ko kp kq kr aw ks bi"><span id="48c7" class="kt ku hh kp b fi kv kw l kx ky">coviddat2%&gt;%filter(tcpm_max&gt;0 &amp; tdpm_max&gt;0)%&gt;<br/>  ggplot(., aes(x=tcpm_max, y=tdpm_max,colour=as.factor(continent)))+<br/>  geom_point(size=2, alpha=0.8,show.legend = FALSE) +<br/>  geom_smooth(aes(fill=as.factor(continent)))+<br/>  labs(title="Relationship between Total Deaths and Total Cases per Million per Country",<br/>       x="Total Cases per Million",<br/>       y="Total Deaths per Million")+<br/>  guides(colour=guide_legend(title="Continent"))+<br/>  guides(fill="none")+<br/>  theme_bw()</span></pre><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es la"><img src="../Images/be2a7fbc310e0bacf48fe62d3dd367e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iS1huZi6XBFfhp_qN0bNJw.png"/></div></div></figure><p id="0d7a" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在，让我们添加一些变量，而不仅仅是X，Y和颜色。下面你可以看到11月底各大洲的总病例数、总死亡率、疫苗接种率之间的关系。下面的样条线建立了甚至不一定存在的联系，但在大线条中，这种关系似乎可以跨洲复制。</p><pre class="kd ke kf kg fd ko kp kq kr aw ks bi"><span id="8a6c" class="kt ku hh kp b fi kv kw l kx ky">coviddat2%&gt;%filter(tcpm_max&gt;0 &amp; tdpm_max&gt;0)%&gt;<br/>  ggplot(., aes(x=tcpm_max, y=tdpm_max))+<br/>  geom_point(aes(colour=vaxcat), size=2, alpha=0.8) +<br/>  geom_smooth(colour="black")+<br/>  facet_wrap(~continent)+<br/>  labs(title="Relationship between Total Deaths and Total Cases per Million",<br/>       x="Total Cases per Million",<br/>       y="Total Deaths per Million")+<br/>  theme_bw()</span></pre><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es lb"><img src="../Images/f12652b32090287660e6d8e8ab65b0df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gpNkes1xN1WJobWMzfjH7g.png"/></div></div></figure><p id="443d" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">让我们更深入地探究大陆与总病例和死亡之间的关系。为了使它更明确，我想张贴地点的名称。预期让我认为一个大陆上的国家紧密团结在一起。最后，图表看起来比它提供的信息更好。</p><pre class="kd ke kf kg fd ko kp kq kr aw ks bi"><span id="4f0b" class="kt ku hh kp b fi kv kw l kx ky">ggplot(coviddat2,aes(x=tcpm_max, y=tdpm_max,colour=as.factor(continent)))<br/>  geom_point(aes(colour=as.factor(continent)), size=2, alpha=0.8) +<br/>  geom_text_repel(aes(tcpm_max, tdpm_max, label = location), size = 3, max.overlaps = 20)+<br/>  labs(title="Relationship between Total Deaths and Total Cases per Million per Country",<br/>       x="Total Cases per Million",<br/>       y="Total Deaths per Million")+<br/>  guides(colour=guide_legend(title="Continent"))+<br/>  theme_bw()</span></pre><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es lc"><img src="../Images/1cbeabd02b315ed7e68c8dd8550120ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w57NwKI3IW6d1IxFv_9gfA.png"/></div></div></figure><p id="b73f" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">当包含两个以上的数值变量时，查看关系的另一个好方法是创建密度图。下面你可以看到代码和密度图的结果，显示了总病例数和死亡率之间的关系。正如你所看到的，肯定有集群和关系严重扇出。</p><pre class="kd ke kf kg fd ko kp kq kr aw ks bi"><span id="eefe" class="kt ku hh kp b fi kv kw l kx ky">coviddat2%&gt;%filter(tcpm_max&gt;0 &amp; tdpm_max&gt;0)%&gt;<br/>  ggplot(.,aes(x=tcpm_max, y=tdpm_max))+<br/>  geom_point() +<br/>  geom_density_2d_filled(alpha = 0.4) +<br/>  geom_density_2d(colour = "black")+<br/>  theme_bw()+<br/>  labs(title="Relationship between Total Deaths and Total Cases per Million",<br/>       x="Total Cases per Million",<br/>       y="Total Deaths per Million")</span></pre><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es ld"><img src="../Images/a3cef5882990355c0de6b9991376634d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HsGV7Lmjw_G2j0kDxco9_Q.png"/></div></div></figure><pre class="kd ke kf kg fd ko kp kq kr aw ks bi"><span id="c47b" class="kt ku hh kp b fi kv kw l kx ky">pairs.panels(coviddat2[,3:5]<br/>             method = "pearson", # correlation method<br/>             hist.col = "#00AFBB",<br/>             density = TRUE,  # show density plots<br/>             ellipses = TRUE, # show correlation ellipses<br/>             smooth=TRUE,<br/>             rug=TRUE)</span></pre><p id="61ce" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">一个简单的相关图，寻找完全接种疫苗的人口比率与总病例数和死亡率之间的关系。数据不是正态分布的，所以这些数字只是看上去的。就我个人而言，我更多的是在黄土回归中寻找有趣的东西。</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es le"><img src="../Images/ceefb02342cffe2baf855f72f6b24321.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GNJwxKtWWiHwnYBnpYbu6w.png"/></div></div></figure><p id="d83a" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">接下来的情节就有趣多了。它通过颜色和大小显示了疫苗接种率的作用。你可以清楚地看到，接种率把对角线的上下部分分开了。但是，一如既往，还是有国家“越界”。</p><pre class="kd ke kf kg fd ko kp kq kr aw ks bi"><span id="dadf" class="kt ku hh kp b fi kv kw l kx ky">coviddat2%&gt;%filter(tcpm_max&gt;0 &amp; tdpm_max&gt;0)%&gt;<br/>  ggplot(.,aes(x=tcpm_max, y=tdpm_max, colour=vax_max))+<br/>  geom_point(aes(size=vax_max), alpha=0.95) +<br/>  scale_color_gradient2(midpoint=50, low="blue", mid="white",<br/>                        high="red", space ="Lab" )+<br/>  geom_text_repel(aes(tcpm_max, tdpm_max, label = location), size = 3, max.overlaps = 20)+<br/>    guides(size=guide_legend(title="Vaccination Rate - Size"), <br/>           colour=guide_legend(title="Vaccination Rate - Colour"))+<br/>  theme_bw()+<br/>  labs(title="Relationship between Total Deaths and Total Cases per Million",<br/>       x="Total Cases per Million",<br/>       y="Total Deaths per Million")</span></pre><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es lf"><img src="../Images/caeb089ec56de47c7faf44867140d61f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J_z3qPSSEhKtrn5Ra1aPfQ.png"/></div></div></figure><p id="4225" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如果我通过添加更多的分类来添加更多的信息，会发生什么？如你所见，更多的信息意味着增加更多的灰度。意味着事情变得更加复杂。正如我们认为我们有一个很好的突破以上，似乎还有更多在发挥作用。</p><pre class="kd ke kf kg fd ko kp kq kr aw ks bi"><span id="04bc" class="kt ku hh kp b fi kv kw l kx ky">coviddat2%&gt;%filter(tcpm_max&gt;0 &amp; tdpm_max&gt;0)%&gt;<br/>  ggplot(.,aes(x=tcpm_max, y=tdpm_max, colour=vaxcat))+<br/>  geom_point(aes(size=vax_max), alpha=0.95) +<br/>  geom_text_repel(aes(tcpm_max, tdpm_max, label = location), size = 3, max.overlaps = 20)+<br/>  guides(size=guide_legend(title="Vaccination Rate - Size"), <br/>         colour=guide_legend(title="Vaccination Rate - Colour"))+<br/>  theme_bw()+<br/>  labs(title="Relationship between Total Deaths and Total Cases per Million",<br/>       x="Total Cases per Million",<br/>       y="Total Deaths per Million")</span></pre><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es lg"><img src="../Images/0756af9763742b7323fbe9fb868f2095.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R_Z1WV8YnqW2d3x4o5kKXg.png"/></div></div></figure><p id="ff3f" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">让我们开始添加更多的变量，也从相关矩阵开始。并不是说它真的有帮助(数据需要转换)，但它是大多数人做的。建立联系。</p><pre class="kd ke kf kg fd ko kp kq kr aw ks bi"><span id="0a80" class="kt ku hh kp b fi kv kw l kx ky">coviddat2&lt;-coviddat%&gt;%dplyr::select(date<br/>                                    week,<br/>                                    month,<br/>                                    year,<br/>                                    continent,<br/>                                    population_density,<br/>                                    extreme_poverty,<br/>                                    diabetes_prevalence,<br/>                                    male_smokers,<br/>                                    female_smokers,<br/>                                    handwashing_facilities,<br/>                                    hospital_beds_per_thousand,<br/>                                    human_development_index,<br/>                                    cardiovasc_death_rate,<br/>                                    aged_70_older,<br/>                                    median_age,<br/>                                    aged_65_older,<br/>                                    gdp_per_capita,<br/>                                    life_expectancy,<br/>                                    location, <br/>                                    continent, <br/>                                    vax_perc,<br/>                                    emc_perc,<br/>                                    total_deaths_per_million,<br/>                                    total_cases_per_million)%&gt;%<br/>  group_by(location)%&gt;%<br/>  filter(year=="2021" &amp; month=="11")%&gt;%<br/>  filter(!is.na(continent))%&gt;%<br/>  summarise(.,<br/>            location=location,<br/>            continent=continent,<br/>            population_density=population_density,<br/>            extreme_poverty=extreme_poverty,<br/>            diabetes_prevalence=diabetes_prevalence,<br/>            male_smokers=male_smokers,<br/>            female_smokers=female_smokers,<br/>            handwashing_facilities=handwashing_facilities,<br/>            hospital_beds_per_thousand=hospital_beds_per_thousand,<br/>            human_development_index=human_development_index,<br/>            cardiovasc_death_rate=cardiovasc_death_rate,<br/>            aged_70_older=aged_70_older,<br/>            median_age=median_age,<br/>            aged_65_older=aged_65_older,<br/>            gdp_per_capita=gdp_per_capita,<br/>            life_expectancy=life_expectancy,<br/>            vax_max=max(vax_perc,na.rm=TRUE),<br/>            tdpm_max=max(total_deaths_per_million,na.rm=TRUE),<br/>            tcpm_max=max(total_cases_per_million,na.rm=TRUE))%&gt;%distinct()%&gt;%<br/>  filter(tcpm_max&gt;0 &amp; tdpm_max&gt;0 &amp; vax_max&gt;0)<br/>coviddat2$continent&lt;-as.factor(coviddat2$continent)<br/>coviddat2$vaxcat&lt;-cut(coviddat2$vax_max, seq(0,120,10))<br/><br/>&gt; names(coviddat2)<br/> [1] "location"                   "continent"                  "population_density"        <br/> [4] "extreme_poverty"            "diabetes_prevalence"        "male_smokers"              <br/> [7] "female_smokers"             "handwashing_facilities"     "hospital_beds_per_thousand"<br/>[10] "human_development_index"    "cardiovasc_death_rate"      "aged_70_older"             <br/>[13] "median_age"                 "aged_65_older"              "gdp_per_capita"            <br/>[16] "life_expectancy"            "vax_max"                    "tdpm_max"                  <br/>[19] "tcpm_max"                   "vaxcat"           <br/><br/>pairs.panels(coviddat2[,3:19]<br/>             method = "pearson", # correlation method<br/>             hist.col = "#00AFBB",<br/>             density = TRUE,  # show density plots<br/>             ellipses = TRUE, # show correlation ellipses<br/>             smooth=TRUE,<br/>             rug=TRUE)</span></pre><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es lh"><img src="../Images/3e4e2a9d59b5e3a067ff7d4d2eba9295.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RefoGPsNRnIryjliW1wIwQ.png"/></div></div></figure></div><div class="ab cl li lj go lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="ha hb hc hd he"><p id="5fc5" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi js translated">人类擅长在关系中思考，我们已经讨论过了。然而，我们很快高估了我们可以欺骗多少关系。把A和B，或者B和A联系起来并不那么困难，我们甚至可以把C积分，这就把我们带到了辛普森悖论。但是如果我们加上E，F，G，H，J和K呢？这就是我们迷失方向和速度的地方，但我们常常不承认这一点，因为我们愿意认为我们是协会的主人。</p><p id="9f9f" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">一组真正擅长建立关联的算法是降维技术。这些模型可以很容易地整合数百个因素，分解它们，并寻找潜在的或支配性的因素。它们中的大多数只不过是数学构造，很难向他人解释，但它们确实有助于显示哪些观察结果基于它们的基本特征而聚集在一起。</p><p id="2b46" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">首先是<a class="ae kb" href="https://en.wikipedia.org/wiki/Multidimensional_scaling" rel="noopener ugc nofollow" target="_blank">多维扩展</a>。</p><pre class="kd ke kf kg fd ko kp kq kr aw ks bi"><span id="fd19" class="kt ku hh kp b fi kv kw l kx ky">dist_covid_num &lt;- dist(coviddat2[, 3:19], method = "canberra"<br/>mds_covid_num &lt;- cmdscale(dist_covid_num, eig = TRUE, k = 2)<br/>mds_covid_num &lt;- data.frame(<br/>  MDS1 =mds_covid_num$points[, 1],<br/>  MDS2 =mds_covid_num$points[, 2],<br/>  label =coviddat2$location,<br/>  classification = coviddat2$vaxcat)<br/>ggplot(mds_covid_num, <br/>       aes(x = MDS1, y = MDS2,label=label, col = classification)) +<br/>  geom_point() +<br/>  guides( colour=guide_legend(title="Vaccination Rate Classification"))+<br/>  ggrepel::geom_text_repel(cex = 2.5) + theme_bw() + <br/>  labs(title="Multidimensional Scaling",<br/>       x="MDS1",<br/>       y="MDS2"))</span></pre><p id="6129" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">结果立即看起来比我之前展示的更加不同。我让MDS算法将17个变量分成两部分，分别标为MDS1和MDS2。它们没有实际意义。我们需要通过使用数据集中包含的变量来覆盖一些潜在的含义。我试图通过查看感兴趣的国家和疫苗接种率来做到这一点。如果疫苗接种率真的很重要的话，我希望各国按照疫苗接种率进行分组。</p><p id="5493" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">正如你所看到的，似乎有一个总的趋势，但国家及其概况并不仅仅由疫苗接种率来界定。</p><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es lp"><img src="../Images/5b199630e12f2f69a458e42c11bd1b90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WUWU8dcjtJyaQnTi7EQkEg.png"/></div></div></figure></div><div class="ab cl li lj go lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="ha hb hc hd he"><p id="a05b" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi js translated"><span class="l jt ju jv bm jw jx jy jz ka di">机器学习时代另一种常用的聚类形式是<a class="ae kb" href="https://arxiv.org/pdf/1802.03426.pdf" rel="noopener ugc nofollow" target="_blank"> UMAP </a> —统一流形逼近和投影。它的数学描述远远超出了这篇文章的目的，但就像任何形式的降维一样，它试图寻找多维尺度之间的联系。然而，与MDS不同，它需要完整的资料，所以我首先需要使用K-最近邻(KNN)估算数据。并不完美，而且有一些变量的缺失并不真正适合KNN，但至少我们可以完成这个例子。</span></p><pre class="kd ke kf kg fd ko kp kq kr aw ks bi"><span id="16f3" class="kt ku hh kp b fi kv kw l kx ky">require(bnstruct<br/>coviddat2_imp&lt;-as.data.frame(knn.impute(as.matrix(coviddat2[,c(3:19)]),<br/>                          k = 10));names(coviddat2_imp)<br/>covid.data = cbind(coviddat2[,c(1,2,20)],coviddat2_imp);names(covid.data)<br/>custom.config = umap.defaults<br/>custom.config$knn_repeats = 100<br/>covid.umap=umap::umap(covid.data[,c(4:20)],config=custom.config);covid.umap<br/>umap_plot_df&lt;-cbind(coviddat2,as.data.frame(covid.umap$layout))<br/>ggplot(umap_plot_df, aes(x=V1, y=V2, colour=continent))+<br/>  geom_point(size=3, alpha=0.5)+theme_bw()+<br/>  labs(title="UMAP results",<br/>       x="Total Cases per Million",<br/>       y="Total Deaths per Million"))</span></pre><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es lq"><img src="../Images/985e8008e633824c3b0b1c2957addb32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7wk1nOS86oa3Q4c1mjaLSw.png"/></div></div></figure><pre class="kd ke kf kg fd ko kp kq kr aw ks bi"><span id="5a1f" class="kt ku hh kp b fi kv kw l kx ky">ggplot(umap_plot_df, aes(x=V1, y=V2,<br/>                         label=location, <br/>                         col = vaxcat)) +<br/>  geom_point() +<br/>  guides( colour=guide_legend(title="Vaccination Rate Classification"))+<br/>  ggrepel::geom_text_repel(cex = 2.5) + theme_bw() + <br/>  labs(title="UMAP",<br/>       x="UMAP1",<br/>       y="UMAP2")</span></pre><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es lr"><img src="../Images/52ef114bcbe087d68a4683f82ac71ec9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fpPhzv205lD6kjT1jXRiYA.png"/></div></div></figure><pre class="kd ke kf kg fd ko kp kq kr aw ks bi"><span id="89e7" class="kt ku hh kp b fi kv kw l kx ky">ggplot(umap_plot_df, aes(x=V1, y=V2,<br/>                         label=location, <br/>                         col = life_expectancy)) +<br/>  geom_point(aes(size=vax_max), alpha=0.95) +<br/>  scale_color_gradientn(colours = rainbow(5))+<br/>  ggrepel::geom_text_repel(size = 3, max.overlaps = 20) + theme_bw() + <br/>  labs(title="UMAP",<br/>       x="UMAP1",<br/>       y="UMAP2")</span></pre><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es ls"><img src="../Images/e04781584b64ad23c465bb75f0c9b4cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tBY2e8OfSLzgfjxJum9nzA.png"/></div></div></figure><p id="c944" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">从上面的例子中你可以看到(我们可以通过应用更多的技术来扩展，比如t-SNE ),基于两三个变量来渲染数据点是不够的。尽管UMAP的地图看起来是这样做的，但是他们包括了总共17个变量来创建两个新的变量。这些变量决定集群，而这些集群服务于关联的目的。你要寻找的是那些聚集在一起的国家和那些没有商业聚集在一起的国家。例如，蒙古这个国家和法国、西班牙、葡萄牙在同一个地方。我不知道为什么，也许这是KNN估算法的一个错误，但情况似乎确实如此。最好的办法是通过多种降维技术追溯发现，并更仔细地寻找关系。</p><p id="c731" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">老实说，这是个永无止境的故事。只要你记住两个变量是不够的。绝不可能。</p><pre class="kd ke kf kg fd ko kp kq kr aw ks bi"><span id="ce17" class="kt ku hh kp b fi kv kw l kx ky">coviddat2%&gt;%filter(life_expectancy&gt;0 &amp; tdpm_max&gt;0 &amp; vax_max&gt;0)%&gt;<br/>  ggplot(., aes(x=life_expectancy, <br/>                y=tdpm_max, <br/>                col=vax_max,<br/>                label=location))+<br/>  geom_point(size=2, alpha=0.5,show.legend = FALSE) +<br/>  facet_grid(~continent)+<br/>  scale_color_gradient2(midpoint=50, low="blue", mid="white",<br/>                        high="red", space ="Lab" )+<br/>  ggrepel::geom_text_repel(size = 1.5, max.overlaps = 20)+<br/>  guides( colour=guide_legend(title="Vaccination Rate"))+<br/>  labs(title="Relationship between Life Expectancy and Total Deaths per Million",<br/>       x="Life Expectancy",<br/>       y="Total Deaths per Million")+<br/>  theme_bw()</span></pre><figure class="kd ke kf kg fd kh er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es lt"><img src="../Images/6f3adbb2147a0de63137703d7ccd2bb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q15rtPq9FBDi4YlYuLc19w.png"/></div></div></figure><div class="lu lv ez fb lw lx"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="ly ab dw"><div class="lz ab ma cl cj mb"><h2 class="bd hi fi z dy mc ea eb md ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="me l"><h3 class="bd b fi z dy mc ea eb md ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="mf l"><p class="bd b fp z dy mc ea eb md ed ef dx translated">medium.com</p></div></div><div class="mg l"><div class="mh l mi mj mk mg ml km lx"/></div></div></a></div></div></div>    
</body>
</html>