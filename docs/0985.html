<html>
<head>
<title>ML Experiments beyond MLFlow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">超越MLFlow的ML实验</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/extending-machine-learning-experimentation-platform-beyond-mlflow-eea5584e5ff8?source=collection_archive---------0-----------------------#2021-09-08">https://medium.com/mlearning-ai/extending-machine-learning-experimentation-platform-beyond-mlflow-eea5584e5ff8?source=collection_archive---------0-----------------------#2021-09-08</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/bacf0794ec2a0c56865c968ee6fd090b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OnUzwKxNpRXhLfri.png"/></div></div></figure><div class=""/><p id="25a7" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在这篇博客中，我解释了扩展MLFlow的想法，以增强对机器学习实验的跟踪及其在实际ML Ops中的应用。这些设计理念中的一部分来源于制造部门如何构建产品生命周期跟踪系统的灵感</p><h1 id="7daa" class="jn jo hs bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated"><strong class="ak">什么是ML Ops？</strong></h1><p id="8433" class="pw-post-body-paragraph ip iq hs ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi kq translated"><span class="l kr ks kt bm ku kv kw kx ky di"> M </span> L Ops是建立一个服务、API、管道和仪表板的生态系统的实践，能够系统地生产一个ML模型。ML Ops功能的例子包括模型监控、模型解释、模型测试/评估等等。</p><p id="a540" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果你是一个ML工程师，正在开发一个面向消费者的ML产品(例如:定价模型/推荐系统等),每天有成千上万的消费者在使用它，它会在利益相关者和消费者之间激发一些动力。需要不断迭代和改进模型，并关闭反馈回路。这意味着我们不仅在数据科学家可见的仪表板上跟踪实验，还跟踪与已部署模型实验相关的一切(超参数、选定功能、季节调整因素、见解等)，并在模型生命周期的所有阶段建立与最终用户影响指标的关联/持续关联。我们举一个具体的例子。假设一个股东问你以下问题:</p><blockquote class="kz la lb"><p id="c570" class="ip iq lc ir b is it iu iv iw ix iy iz ld jb jc jd le jf jg jh lf jj jk jl jm ha bi translated">我们从6个月前部署的导致销售线索下降的模型中学到了什么？</p></blockquote><p id="6318" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为了定量地回答这个问题，我们需要系统地收集、存储和查询实验生命周期数据。</p><h2 id="3a25" class="lg jo hs bd jp lh li lj jt lk ll lm jx ja ln lo kb je lp lq kf ji lr ls kj lt bi translated">制造业的先例和启示</h2><p id="6830" class="pw-post-body-paragraph ip iq hs ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">几十年来，在制造业中，产品生命周期管理一直是关于从概念-&gt;设计-&gt;制造-&gt;服务-&gt;报废收集、存储和查询产品元数据。这有助于飞机制造商跟踪设计阶段假设和其20年服役期间产生的相应转速表数据之间的关联。工程师依靠跟踪的关联来关闭未来变体/衍生物中的反馈回路。这个类比几乎完全适用于机器学习模型。</p><blockquote class="kz la lb"><p id="a0ed" class="ip iq lc ir b is it iu iv iw ix iy iz ld jb jc jd le jf jg jh lf jj jk jl jm ha bi translated">ML工程师应该绝对关心通过推荐系统的消费者交互产生的数据，以便在未来的模型训练/部署迭代中关闭反馈回路。(当然，除了实时可以做的以外)</p></blockquote><p id="f34b" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir ht">为什么实验跟踪？</strong> <br/> ML Flow是一款开源产品，支持实验跟踪，但仍有明显的差距需要解决。虽然在ML实验中收集遥测数据并不新奇，但系统的ML实验数据收集&amp;存储对ML Ops服务的成功设计具有深远的影响。</p><p id="bc6e" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">机器学习的生命周期保证了一种永恒的实验状态——培训、A/B测试和生产</p><p id="193a" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir ht">如何收集&amp;整理实验数据？</strong></p><p id="6dcc" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">下图显示了一个培训管道，其中包含了ML模型部署的几个步骤。每个流水线步骤执行一个“目标任务”+“附带/副作用”。这使得每个流水线步骤将标记的实验参数/序列化的可视化“发射”到分布式数据库。</p><figure class="lv lw lx ly fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lu"><img src="../Images/00d67102950621304b80a61ca701fcd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AVPpLFEMCKEREYijqcqN4g.png"/></div></div></figure><p id="4819" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">上述步骤中收集的数据被分割成多个分区，每个分区代表一个实验的数据图。实验数据图聚集了在实验中创建的每个模型的实体，例如超参数、洞察力和度量</p><figure class="lv lw lx ly fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lz"><img src="../Images/7ff71b19f62948a2f01d0a75098ffee9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SX_BSZznL9tZw0frwASrIA.png"/></div></div></figure><p id="f80d" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir ht">好的，我们收集了实验数据。现在怎么办？</strong></p><p id="fed6" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir ht">应用一——综合选型</strong></p><blockquote class="kz la lb"><p id="89b4" class="ip iq lc ir b is it iu iv iw ix iy iz ld jb jc jd le jf jg jh lf jj jk jl jm ha bi translated">模型选择过程必须结合使用指标和准确性，包括产品利益相关者关心的指标。一个例子可以是房屋估价模型的平均预测价格的转换，以及它给你的企业带来的货币风险</p></blockquote><figure class="lv lw lx ly fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ma"><img src="../Images/388237fac8b0b1a9902da02f4ba8f08f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jElyttyuzGiS8pLS8Anl5A.png"/></div></div></figure><p id="f462" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">上述架构可用于部分自动化模型选择，该模型选择使用这样的度量标准组合(准确性、转换、用户交互)。我们可能拥有所有的计算能力来为一个版本训练几十/几百个模型。然而，系统化的数据收集能够可管理地可视化和比较各种模型的性能分布，从而针对复杂性缩放模型选择。此外，人们可以注意到，当模型选择仪表板可以将它们作为工件(想想plotly  json)在浏览器中显示时，序列化可视化变得很方便</p><p id="6a5d" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">人们还会注意到，我们维护着一个已部署模型的用户行为指标和一个数据科学家在概念化模型时生成的实验参数之间的关联。最终，我们希望将数据科学家的行为与用户互动联系起来。这也可用于A/B测试设置</p><p id="0e19" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir ht">应用二参数化ML Ops管道:</strong></p><figure class="lv lw lx ly fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mb"><img src="../Images/65b3d11fc1b5dd2f7820a433e751b7cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vDRhSAIC8cQDJqxy7sfNew.png"/></div></div></figure><p id="543c" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">上图显示了从管道中分离模型生成数据的模式，管道表示应用于模型数据的操作</p><p id="3d1f" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">诸如解释管道或监控管道之类的ML Ops管道由模型参数化。这意味着我们在为仪表板准备数据时重复使用相同的管道，该仪表板将每个模型的预测数据与群组/用户交互数据相结合。实验数据模型有助于这种连接的惰性评估</p><p id="faf6" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我经常看到数据科学家在实验平台上采用开箱即用的实现。虽然需要尽可能多地重用可用的内容，但我们必须扩展这些框架(如ML Flow ),以获得特定数据科学生命周期所需的最大价值。</p><p id="b3b2" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在我以后的博客中，我将详细介绍ML Ops的生命周期(模型解释、模型监控和模型部署)</p></div></div>    
</body>
</html>