<html>
<head>
<title>Single Node Spark/PySpark Cluster on Windows Subsystem for Linux (WSL2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于Linux的Windows子系统上的单节点Spark/PySpark集群(WSL2)</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/single-node-spark-pyspark-cluster-on-windows-subsystem-for-linux-wsl2-22860888a98d?source=collection_archive---------0-----------------------#2022-05-28">https://medium.com/mlearning-ai/single-node-spark-pyspark-cluster-on-windows-subsystem-for-linux-wsl2-22860888a98d?source=collection_archive---------0-----------------------#2022-05-28</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/c93b370919809db75ccfb541391a6c48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*P5FPDrqAxO-JYuJJ.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">This image has been taken from <a class="ae it" href="https://www.google.com/url?sa=i&amp;url=https%3A%2F%2Fwww.datanami.com%2F2015%2F02%2F25%2Fapache-spark-ecosystem-continues-to-build%2F&amp;psig=AOvVaw0TfSztH85fVQwye-Nr29SD&amp;ust=1653797344917000&amp;source=images&amp;cd=vfe&amp;ved=0CAwQjRxqFwoTCPCGxK2pgfgCFQAAAAAdAAAAABAD" rel="noopener ugc nofollow" target="_blank">here</a></figcaption></figure><p id="f5fd" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">本文是为希望使用PC/笔记本电脑，尤其是Windows 10或11用户的Windows子系统for Linux 2 (WSL2)来练习大数据技能的有抱负的数据科学家撰写的。</p><p id="ec20" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如果您不知道什么是WSL2以及如何安装它，您可以访问以下两篇文章:</p><p id="b4ed" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><a class="ae it" href="https://www.windowscentral.com/how-install-wsl2-windows-10" rel="noopener ugc nofollow" target="_blank">如何在Windows 10和Windows 11上安装Linux wsl 2</a></p><p id="b3bd" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><a class="ae it" href="https://www.omgubuntu.co.uk/how-to-install-wsl2-on-windows-10" rel="noopener ugc nofollow" target="_blank">如何在Windows 10上安装WSL 2(更新)</a></p><p id="297b" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">一旦安装了WSL2，就可以创建单节点Spark/PySpark集群了。事实上，它应该可以在任何Ubuntu机器上运行。</p><p id="0578" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">以下是关键组件:</p><p id="8e49" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">1.0<em class="js">安装Java</em>T7】</strong></p><p id="5c12" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi"> <em class="js"> 2.0安装Python3 </em> </strong></p><p id="5f8f" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi"> <em class="js"> 3.0安装Scala </em> </strong></p><p id="09b3" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi"> <em class="js"> 4.0用Hadoop安装Spark</em></strong></p><p id="cde7" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi"> <em class="js"> 5.0激活火花</em> </strong></p><p id="8098" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi"> <em class="js"> 6.0测试火花</em> </strong></p><p id="4951" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi"> <em class="js"> 7.0阻止你集群</em> </strong></p><h1 id="fd0b" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">1.0安装Java:</h1><p id="693c" class="pw-post-body-paragraph iu iv hh iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr ha bi translated">以下命令将安装运行Spark Cluster所需的JAVA JDK:</p><blockquote class="kw"><p id="6069" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg"> $ </em> <em class="lg"> sudo apt更新&amp; &amp;升级</em></p><p id="89df" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg"> $sudo apt-get安装openjdk-11-jre </em></p><p id="8f4d" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg"> $ sudo apt-get安装openjdk-11-jdk </em></p></blockquote><figure class="li lj lk ll lm ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lh"><img src="../Images/ae630a164359796981b480799dc3e5d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z1GB6ZiUVPuYG-bVUidNgQ.png"/></div></div></figure><p id="b3e0" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">检查您的Java版本:</p><blockquote class="kw"><p id="fca3" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg"> $java版本</em></p></blockquote><h1 id="5e88" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke ln kg kh ki lo kk kl km lp ko kp kq bi translated">2.0安装Python3:</h1><p id="35da" class="pw-post-body-paragraph iu iv hh iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr ha bi translated">以下命令将为Python3安装必要的依赖项和包</p><blockquote class="kw"><p id="23e4" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg"> $sudo apt更新&amp; &amp;升级</em></p><p id="f37e" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg"> $sudo安装python3 python3-pip ipython3 </em></p><p id="2eb6" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg"> $sudo安装python3-pip </em></p><p id="1cf5" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg"> $pip3安装jupyter py4j pyspark </em></p></blockquote><figure class="li lj lk ll lm ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lh"><img src="../Images/a68604f5f39cfd4c51dbfc55956e775c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uw8nZiOKTtbvvb9S_q6gjg.png"/></div></div></figure><p id="29be" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">为Jupyter笔记本设置别名:</p><p id="6418" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">使用nano或vi打开bashrc文件:</p><blockquote class="kw"><p id="0b6c" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg">$纳米~/。巴沙尔</em></p></blockquote><p id="ce91" class="pw-post-body-paragraph iu iv hh iw b ix lq iz ja jb lr jd je jf ls jh ji jj lt jl jm jn lu jp jq jr ha bi translated">将这些行添加到bashrc文件的末尾或您的首选位置:</p><blockquote class="kw"><p id="41c1" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg">别名jupyter-notebook="~/。local/bin/jupyter-notebook —无浏览器"</em></p></blockquote><figure class="li lj lk ll lm ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lv"><img src="../Images/7c8928bc1564a077d52cd9131f6c9204.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*217IyMCntZrirAhkUfNS9Q.png"/></div></div></figure><blockquote class="kw"><p id="bb6e" class="kx ky hh bd kz la lw lx ly lz ma jr dx translated"><em class="lg">$来源~/。巴沙尔</em></p></blockquote><h1 id="63b2" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke ln kg kh ki lo kk kl km lp ko kp kq bi translated">3.0安装Scala:</h1><p id="3ec1" class="pw-post-body-paragraph iu iv hh iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr ha bi translated">下载Scale并解压Scala:</p><blockquote class="kw"><p id="fa6d" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg">$ wget</em><a class="ae it" href="https://downloads.lightbend.com/scala/2.13.3/scala-2.13.3.tgz" rel="noopener ugc nofollow" target="_blank"><em class="lg">https://downloads . light bend . com/Scala/2 . 13 . 3/Scala-2 . 13 . 3 . tgz</em></a></p><p id="cc4f" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg">$ tar xvf Scala-2 . 13 . 3 . tgz</em></p></blockquote><figure class="li lj lk ll lm ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mb"><img src="../Images/6e6e00374c7f3c1facd8036e9b13a5e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KUw3XWAUocCP39P_ZX9-nA.png"/></div></div></figure><p id="b59c" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在bashrc上添加Scala</p><blockquote class="kw"><p id="b736" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg"> $nano ~/。巴沙尔</em></p></blockquote><p id="6c4f" class="pw-post-body-paragraph iu iv hh iw b ix lq iz ja jb lr jd je jf ls jh ji jj lt jl jm jn lu jp jq jr ha bi translated">请在bashrc文件的末尾添加这些行:</p><blockquote class="kw"><p id="03e6" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg">导出SCALA _ HOME =/HOME/aitmsi/SCALA-2 . 13 . 3</em></p><p id="f286" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg">导出路径=$PATH:$SCALA_HOME/bin </em></p></blockquote><p id="a62a" class="pw-post-body-paragraph iu iv hh iw b ix lq iz ja jb lr jd je jf ls jh ji jj lt jl jm jn lu jp jq jr ha bi translated">(在WSL2 Ubuntu中使用您的根用户名替换aitmsi)</p><p id="1e9d" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">请保存、关闭并获取该文件</p><blockquote class="kw"><p id="8ade" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg"> $source ~/。巴沙尔</em></p></blockquote><p id="17a4" class="pw-post-body-paragraph iu iv hh iw b ix lq iz ja jb lr jd je jf ls jh ji jj lt jl jm jn lu jp jq jr ha bi translated">检查Scala版本:</p><blockquote class="kw"><p id="2c91" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg">$ Scala-版本</em></p></blockquote><h1 id="d882" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke ln kg kh ki lo kk kl km lp ko kp kq bi translated">4.0用Hadoop安装Spark</h1><p id="0c64" class="pw-post-body-paragraph iu iv hh iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr ha bi translated">使用以下步骤安装Spark和Hadoop:</p><p id="2f5d" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">使用Hadoop下载并解压缩Spark:</p><blockquote class="kw"><p id="0886" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg">$ wget</em><a class="ae it" href="https://archive.apache.org/dist/spark/spark-3.1.1/spark-3.1.1-bin-hadoop3.2.tgz" rel="noopener ugc nofollow" target="_blank"><em class="lg">https://archive . Apache . org/dist/spark/spark-3 . 1 . 1/spark-3 . 1 . 1-bin-Hadoop 3.2 . tgz</em></a></p><p id="a867" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg">$ tar xvf spark-3 . 1 . 1-bin-Hadoop 3.2 . tgz</em></p></blockquote><p id="2d35" class="pw-post-body-paragraph iu iv hh iw b ix lq iz ja jb lr jd je jf ls jh ji jj lt jl jm jn lu jp jq jr ha bi translated">打开bashrc:</p><blockquote class="kw"><p id="b784" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg"> $nano ~/。bashrc </em></p></blockquote><p id="11aa" class="pw-post-body-paragraph iu iv hh iw b ix lq iz ja jb lr jd je jf ls jh ji jj lt jl jm jn lu jp jq jr ha bi translated">在bashrc文件中添加以下行</p><blockquote class="kw"><p id="a259" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg">导出SPARK _ HOME = "/HOME/aitmsi/SPARK-3 . 1 . 1-bin-Hadoop 3.2 "</em></p><p id="9f95" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg">导出路径=$PATH:$SPARK_HOME/bin </em></p></blockquote><p id="39a4" class="pw-post-body-paragraph iu iv hh iw b ix lq iz ja jb lr jd je jf ls jh ji jj lt jl jm jn lu jp jq jr ha bi translated">(在WSL2 Ubuntu中使用您的根用户名替换aitmsi)</p><figure class="mc md me mf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lv"><img src="../Images/a6d5f146d58995bc3b260687308872d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QX_pAqc2c4QsajCOcgLVow.png"/></div></div></figure><p id="8cad" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">保存、关闭并获取文件</p><blockquote class="kw"><p id="b2c0" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg"> $source ~/。bashrc </em></p></blockquote><h1 id="b546" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke ln kg kh ki lo kk kl km lp ko kp kq bi translated">5.0激活火花</h1><p id="c00e" class="pw-post-body-paragraph iu iv hh iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr ha bi translated">运行以下命令来激活集群</p><blockquote class="kw"><p id="7cd4" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg"> $cd $SPARK_HOME </em></p><p id="8c4a" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg"> $。/sbin/start-master.sh </em></p><p id="9598" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg"> $。/sbin/start-worker . sh spark://Ubuntu 1:7077</em></p></blockquote><figure class="li lj lk ll lm ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mg"><img src="../Images/c2ece12656eacd567fd43356773222ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zHwFGNJjtHya7nyNfVSIEA.png"/></div></div></figure><figure class="mc md me mf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lv"><img src="../Images/8258fb914e9881ca32965cbca2165c54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YzqBjzO39COBI86wTKsHSA.png"/></div></div></figure><h1 id="89e8" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">6.0测试火花</h1><p id="a61b" class="pw-post-body-paragraph iu iv hh iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr ha bi translated">使用以下命令检查外壳上的火花:</p><blockquote class="kw"><p id="c719" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg">$火花壳</em></p></blockquote><figure class="li lj lk ll lm ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lv"><img src="../Images/09429995b22da7edd4f5e8a702d03e6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B_Vv0WpeqGHU6c-nLN_KJQ.png"/></div></div></figure><p id="0006" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">你可以用Jupyter笔记本测试你的PySpark。在您的课堂上，学生将使用Jupyter笔记本进行各种练习</p><blockquote class="kw"><p id="6c75" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg">$ jupyter-笔记本</em></p></blockquote><figure class="li lj lk ll lm ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lh"><img src="../Images/925e189bc40628fc1b0c048c8054ef99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eBnMukIM9C3hIFKKeeBhGg.png"/></div></div></figure><figure class="mc md me mf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mg"><img src="../Images/3a305dd27c57aa24de5446e89de90f59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qyz2zLs-ooFsOWQtXcvtKA.png"/></div></div></figure><h1 id="e9cb" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">7.0停止你的集群</h1><p id="7424" class="pw-post-body-paragraph iu iv hh iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr ha bi translated">停止你的集群是非常重要的，否则你将像往常一样被收费，这将非常非常沉重。</p><blockquote class="kw"><p id="be11" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg"> $。/sbin/stop-master.sh </em></p><p id="2ed1" class="kx ky hh bd kz la lb lc ld le lf jr dx translated"><em class="lg"> $。/sbin/stop-worker.sh </em></p></blockquote><figure class="li lj lk ll lm ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mh"><img src="../Images/981c3b623aed055693794038627ef602.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fAlYk5Mmtx94MEz0i7f-Zg.png"/></div></div></figure><h1 id="0eeb" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">8.结论</h1><p id="c936" class="pw-post-body-paragraph iu iv hh iw b ix kr iz ja jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr ha bi translated">这将有助于为您提供一个实践各种大数据分析概念的环境。练习愉快！</p><p id="cf2f" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">非常感谢您的评论和订阅！！</p><div class="mi mj ez fb mk ml"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="mm ab dw"><div class="mn ab mo cl cj mp"><h2 class="bd hi fi z dy mq ea eb mr ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="ms l"><h3 class="bd b fi z dy mq ea eb mr ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="mt l"><p class="bd b fp z dy mq ea eb mr ed ef dx translated">medium.com</p></div></div><div class="mu l"><div class="mv l mw mx my mu mz in ml"/></div></div></a></div></div></div>    
</body>
</html>