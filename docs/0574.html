<html>
<head>
<title>Tidy Tuesday : Economic Guide to Picking a College Major</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">整洁星期二:选择大学专业的经济指南</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/tidy-tuesday-economic-guide-to-picking-a-college-major-9b2fd5275d9b?source=collection_archive---------3-----------------------#2021-05-17">https://medium.com/mlearning-ai/tidy-tuesday-economic-guide-to-picking-a-college-major-9b2fd5275d9b?source=collection_archive---------3-----------------------#2021-05-17</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="e99c" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">使用Pandas和Plotnine实现了著名的Tidy Tuesday数据集。</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/9e92acbf09bd6431abcfd4b1a36ea9e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gX7sC0Kmt-dOPZR2"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Photo by <a class="ae jm" href="https://unsplash.com/@napr0tiv?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Vasily Koloda</a> on <a class="ae jm" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="8f44" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated"><a class="ae jm" href="https://github.com/rfordatascience/tidytuesday" rel="noopener ugc nofollow" target="_blank"> <strong class="jp hi"> Tidy Tuesday </strong> </a>是R的一个每周社交数据项目，用户每周探索一个新的数据集，并在Twitter上与# <strong class="jp hi"> TidyTuesday </strong>分享他们的发现。</p><p id="e574" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">Tidy Tuesday主要是使用R生态系统的人使用的。在本系列中，我将尝试使用Python，主要是<em class="kj"> Pandas </em>和<em class="kj"> Plotnine </em>库来完成数据分析和可视化。</p><p id="471e" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">这个项目背后的动力来自于<a class="ae jm" href="https://www.youtube.com/user/safe4democracy" rel="noopener ugc nofollow" target="_blank"> <strong class="jp hi"> <em class="kj">大卫·罗宾逊</em> </strong> </a>所做的数据截屏。在这些视频中，大卫看着数据集，并开始现场分析它，而之前没有看到它。</p><h1 id="b4e0" class="kk kl hh bd km kn ko kp kq kr ks kt ku in kv io kw iq kx ir ky it kz iu la lb bi translated">获取数据</h1><p id="44c0" class="pw-post-body-paragraph jn jo hh jp b jq lc ii js jt ld il jv jw le jy jz ka lf kc kd ke lg kg kh ki ha bi translated">这个项目的数据可以从Tidy Tuesday的github库获取。这是一个维护得非常好的存储库，还包括原始数据集以及非常需要的数据字典。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es lh"><img src="../Images/9e9aea7fc5132f709197f5987ad12f41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zHQa0N9FOQlEJKF_qs3yTw.jpeg"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Source : Image by Author</figcaption></figure><p id="8724" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">现在，您可以使用<code class="du li lj lk ll b">read_csv()</code>方法将CSV文件读入Pandas中的数据帧。数据导入后，您就可以开始分析数据了。</p><h1 id="ee16" class="kk kl hh bd km kn ko kp kq kr ks kt ku in kv io kw iq kx ir ky it kz iu la lb bi translated">数据探索和分析</h1><p id="538d" class="pw-post-body-paragraph jn jo hh jp b jq lc ii js jt ld il jv jw le jy jz ka lf kc kd ke lg kg kh ki ha bi translated">我将继续阐述一些问题，并通过构建情节来回答这些问题。</p><h2 id="ee9e" class="lm kl hh bd km ln lo lp kq lq lr ls ku jw lt lu kw ka lv lw ky ke lx ly la lz bi translated">最常见的专业和最常见的专业类别有哪些？</h2><p id="666c" class="pw-post-body-paragraph jn jo hh jp b jq lc ii js jt ld il jv jw le jy jz ka lf kc kd ke lg kg kh ki ha bi translated">我首先要看的是每个专业，每个专业类别有多少毕业生报名。</p><p id="a594" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">让我们从最常见的主要类别开始。我将按<em class="kj">专业类别</em>列对数据进行分组，得出每个类别的毕业生总数，并用水平条形图绘制出来。</p><pre class="ix iy iz ja fd ma ll mb mc aw md bi"><span id="1353" class="lm kl hh ll b fi me mf l mg mh">most_common_category = recent_grads.groupby('Major_category')['Total'].sum().sort_values(ascending=False).reset_index()</span><span id="2e49" class="lm kl hh ll b fi mi mf l mg mh">most_common_category</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es mj"><img src="../Images/ecb0c292086bd43d3404d432035b954f.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/format:webp/1*eP1zWBYoIJVEdPhqopCO2Q.jpeg"/></div><figcaption class="ji jj et er es jk jl bd b be z dx">Source : Image by Author</figcaption></figure><p id="d464" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">我们现在可以使用<em class="kj"> Plotnine绘制一个柱状图。</em>在ggplot或plotnine中，图形是逐层构建的，这就像使用+运算符<em class="kj"> </em>并在基本图形上添加更多对象一样简单。</p><pre class="ix iy iz ja fd ma ll mb mc aw md bi"><span id="b471" class="lm kl hh ll b fi me mf l mg mh">(<br/>    ggplot(data = most_common_category)<br/>    + geom_col(aes(x = 'Major_category', y = 'Total', fill = 'Major_category'))<br/>    + scale_x_discrete(limits = most_common_category['Major_category'].to_list()[::-1])<br/>    + scale_y_continuous(labels = custom_format('{:,}'))<br/>    + coord_flip()<br/>    + labs(x = "", y = 'Number of Total Graduates', title = 'Most common Majors Category by Total Number of Graduates')<br/>    + theme(legend_position = 'none')<br/>)</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mk"><img src="../Images/bc97aabe32c392d14ddb05159be84fa0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zEfJoC9i90Cq4reB-rzuNw.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Source : Image by Author</figcaption></figure><p id="a74c" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">类似地，我可以按照<em class="kj">专业</em>列分组，得到最常见专业的柱状图。但是，由于我们有173个专业，我将只看最常见的20个专业。</p><pre class="ix iy iz ja fd ma ll mb mc aw md bi"><span id="fdab" class="lm kl hh ll b fi me mf l mg mh">most_common_major = recent_grads.groupby('Major').sum().sort_values(by = 'Total', ascending=False).reset_index()</span><span id="a8d4" class="lm kl hh ll b fi mi mf l mg mh">(<br/>    ggplot(data = most_common_major.head(20))<br/>    + geom_col(aes(x = 'Major', y = 'Total', fill = 'Major'))<br/>    + scale_x_discrete(limits = most_common_major['Major'].head(20).to_list()[::-1], labels = [item.title() for item in most_common_major['Major'].head(20).to_list()[::-1]])<br/>    + scale_y_continuous(labels = custom_format('{:,}'))<br/>    + coord_flip()<br/>    + labs(x = "", y = 'Number of Total Graduates', title = 'Top 20 most common Majors')<br/>    + theme(legend_position = 'none')<br/>)</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es ml"><img src="../Images/33763d5ee56e364fc1d307d7c309bfac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q0x7J27yQZ7FTmr_r69tGQ.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Source : Image by Author</figcaption></figure><p id="68ae" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">在这里，你可以看到最常见的专业类别是商业，而心理学是最常见的专业。</p><h2 id="04c8" class="lm kl hh bd km ln lo lp kq lq lr ls ku jw lt lu kw ka lv lw ky ke lx ly la lz bi translated">根据工资中位数，收入最高的专业类别是什么？</h2><p id="8932" class="pw-post-body-paragraph jn jo hh jp b jq lc ii js jt ld il jv jw le jy jz ka lf kc kd ke lg kg kh ki ha bi translated">我可以用两个图来回答这个问题，即条形图和箱线图。在EDA阶段，我可以玩两个图，但在报告时，我会放弃其中一个。</p><p id="c7a2" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">对于条形图，我将按主要类别分组，并对中值薪金应用中值聚合函数。这将使我获得每个主要类别的最高工资中位数。</p><pre class="ix iy iz ja fd ma ll mb mc aw md bi"><span id="f265" class="lm kl hh ll b fi me mf l mg mh">median_per_major = recent_grads[['Median', 'Major_category']].groupby('Major_category').median().sort_values('Median', ascending=False).reset_index()</span><span id="5536" class="lm kl hh ll b fi mi mf l mg mh">median_per_major</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es mm"><img src="../Images/e19ef6ebec5b63313025ba2caf4a76c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:878/format:webp/1*sKu60qMCiS5TIqKtvpo1QQ.jpeg"/></div><figcaption class="ji jj et er es jk jl bd b be z dx">Source : Image by Author</figcaption></figure><pre class="ix iy iz ja fd ma ll mb mc aw md bi"><span id="f194" class="lm kl hh ll b fi me mf l mg mh">(</span><span id="a89a" class="lm kl hh ll b fi mi mf l mg mh">    ggplot(median_per_major, aes(x = 'Major_category', y = 'Median'))<br/>    + geom_col()<br/>    + scale_x_discrete(limits = median_per_major['Major_category'].to_list()[::-1])<br/>    + scale_y_continuous(labels = currency_format('$', big_mark = ','))<br/>    + coord_flip()</span><span id="bfb5" class="lm kl hh ll b fi mi mf l mg mh">)</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mn"><img src="../Images/265c7f3dd9a777b3038efa15ab331356.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iK_RGrM1NGkfgiCz_sPpGg.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Source : Image by Author</figcaption></figure><p id="3f61" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">类似地，一个更好的可视化方法是查看每个主要类别的工资中位数的分布。这将在一个图中给出中值、百分位数和异常值。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mo"><img src="../Images/5ff79bea76fa197d1c6df39cc4080ba2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B47NkurIZAZTv6Tu-LpiRw.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Source : Image by Author</figcaption></figure><p id="0d9c" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">在这里，你可以看到异常值。在初始阶段，这是理解异常值是否重要的重要一步。这里，异常值的出现是因为样本量非常小。例如，对于工程类的石油工程来说，只有36名毕业生接受了调查，而石油工程师的工资却非常高，约为110，000英镑。</p><h2 id="3426" class="lm kl hh bd km ln lo lp kq lq lr ls ku jw lt lu kw ka lv lw ky ke lx ly la lz bi translated">收入最高的专业有哪些？</h2><p id="0c18" class="pw-post-body-paragraph jn jo hh jp b jq lc ii js jt ld il jv jw le jy jz ka lf kc kd ke lg kg kh ki ha bi translated">正如上一节所讨论的，样本量有很大的变化。因此，我将筛选样本量&gt; 100的专业，并按<em class="kj">中位数</em>降序排列，只得到前20个专业。</p><pre class="ix iy iz ja fd ma ll mb mc aw md bi"><span id="b153" class="lm kl hh ll b fi me mf l mg mh">(<br/>   ggplot(data = majors_processed.head(20))<br/>    + geom_point(aes('Major', 'Median', color = 'Major_category'))<br/>    + scale_x_discrete(labels = [item.title() for item in majors_processed['Major'].head(20).to_list()[::-1]], limits = majors_processed['Major'].head(20).to_list()[::-1])<br/>    + geom_errorbar(aes(x = 'Major', ymin = 'P25th', ymax = 'P75th', color = 'Major_category'))<br/>    + expand_limits(y=0)<br/>    + scale_y_continuous(labels = currency_format('$', big_mark = ','))<br/>    + labs(title = 'What are the highest-earning majors?', x = "Major", y = 'Median salary of graduates')<br/>    + coord_flip()<br/>)</span></pre><p id="57e5" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">请记住，该点两端的竖线是第25和第75个工资百分点，而不是置信区间。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mp"><img src="../Images/be8ea3e6f3394c3eed839b4c8e17801a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s_viqIiHx9vc9Z30DnX6Vg.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Source : Image by Author</figcaption></figure><p id="44ac" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">你可以做的一个重要观察是，工程学涵盖了排名前20的大部分专业。</p><h2 id="8e78" class="lm kl hh bd km ln lo lp kq lq lr ls ku jw lt lu kw ka lv lw ky ke lx ly la lz bi translated">收入最低的专业有哪些？</h2><p id="a21c" class="pw-post-body-paragraph jn jo hh jp b jq lc ii js jt ld il jv jw le jy jz ka lf kc kd ke lg kg kh ki ha bi translated">类似于最高收入专业图，我也可以得到最低收入专业图。我只需要看排序数据的尾部而不是头部。</p><pre class="ix iy iz ja fd ma ll mb mc aw md bi"><span id="4d3e" class="lm kl hh ll b fi me mf l mg mh">(<br/>    ggplot(data = majors_processed.head(20))<br/>    + geom_point(aes('Major', 'Median', color = 'Major_category'))<br/>    + scale_x_discrete(labels = [item.title() for item in majors_processed['Major'].head(20).to_list()[::-1]], limits = majors_processed['Major'].head(20).to_list()[::-1])<br/>    + geom_errorbar(aes(x = 'Major', ymin = 'P25th', ymax = 'P75th', color = 'Major_category'))<br/>    + expand_limits(y=0)<br/>    + scale_y_continuous(labels = currency_format('$', big_mark = ','))<br/>    + labs(title = 'What are the highest-earning majors?', x = "Major", y = 'Median salary of graduates')<br/>    + coord_flip()<br/>    + theme(figure_size=(16, 16))<br/>)</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mp"><img src="../Images/b48bfc59b25f9757a22f5e0a72f369cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i2FfAEaJUNkbKSsNanPRCg.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Source : Image by Author</figcaption></figure><p id="5462" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">在收入最低的专业，你几乎看不到任何STEM项目。</p><h2 id="c3bf" class="lm kl hh bd km ln lo lp kq lq lr ls ku jw lt lu kw ka lv lw ky ke lx ly la lz bi translated">性别细分与典型收入有什么关系？</h2><p id="1a3e" class="pw-post-body-paragraph jn jo hh jp b jq lc ii js jt ld il jv jw le jy jz ka lf kc kd ke lg kg kh ki ha bi translated">一个更重要的分析是查看按性别划分的收入(高收入主要类别图)，即每个高收入主要类别中有多少女性和男性。</p><p id="7ad8" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">为了进行这种分析，我将首先按照毕业生总数降序排列数据框架。这将帮助我获得前20个最常见的主要类别。然后，我将使用<code class="du li lj lk ll b">pd.melt()</code>函数将<em class="kj">男性</em>和<em class="kj">女性</em>列转换为一个名为<em class="kj">性别</em>的列。</p><pre class="ix iy iz ja fd ma ll mb mc aw md bi"><span id="ac53" class="lm kl hh ll b fi me mf l mg mh">gender_earnings = recent_grads.sort_values('Total', ascending=False).head(20).melt(id_vars = ['Major', 'Major_category', 'Total'], value_vars= ['Men', 'Women'], var_name='Gender', value_name='Number')</span><span id="0dd1" class="lm kl hh ll b fi mi mf l mg mh">gender_earnings</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mq"><img src="../Images/475b7c2cbad185397103030ec7977d8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EgVAqrNguDlfSOfweIYJGw.jpeg"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Source : Image by Author</figcaption></figure><p id="7553" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">如您所见，对于每个主要类别，将有一行是男性及其总数，一行是女性及其总数。</p><pre class="ix iy iz ja fd ma ll mb mc aw md bi"><span id="0ebe" class="lm kl hh ll b fi me mf l mg mh">(<br/>    ggplot(gender_earnings, aes(x = 'Major', y = 'Number', fill = 'Gender'))<br/>    + geom_col()<br/>    + scale_x_discrete(limits = gender_earnings['Major'].head(20).to_list()[::-1], labels = [item.title() for item in gender_earnings['Major'].head(20).to_list()[::-1]])<br/>    + scale_y_continuous(labels = custom_format('{:,}'))<br/>    + coord_flip()<br/>    + labs(title = 'Ratio of Men and Women Graduating in top 20 most common majors', x = "Majors", y = 'Total Number of Graduates')<br/>)</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mr"><img src="../Images/2332111ad5a7906c75e56585a2dee54c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4OTz7Z55LzvdJuW8-G1ENw.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Source : Image by Author</figcaption></figure><h1 id="64d5" class="kk kl hh bd km kn ko kp kq kr ks kt ku in kv io kw iq kx ir ky it kz iu la lb bi translated">结论</h1><p id="52e8" class="pw-post-body-paragraph jn jo hh jp b jq lc ii js jt ld il jv jw le jy jz ka lf kc kd ke lg kg kh ki ha bi translated">这只是对如何处理Tidy Tuesday数据以及如何使用Plotnine在Python中制作ggplots的简单介绍。</p><p id="c3b2" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">你可以在我的Github上找到完整的代码:<a class="ae jm" href="https://github.com/hemantrattey/TidyTuesday" rel="noopener ugc nofollow" target="_blank">https://github.com/hemantrattey/TidyTuesday</a></p><p id="6c5e" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">请随时给我同样的反馈。</p><p id="59b8" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">感谢你的阅读，我希望它能激励你继续前进，做你自己的分析。我真的建议你去看大卫·罗宾逊的电影。</p><p id="60e5" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">本周晚些时候，我将发布另一份来自Tidy Tuesday数据集的分析。</p><p id="5262" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">过来打个招呼。在Twitter和T2的Linkedin上告诉我，这样你就不会错过分析。</p></div></div>    
</body>
</html>