<html>
<head>
<title>5 Pandas Functions You Need to Know as a Complete Beginner</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">作为一个完全的初学者，你需要知道熊猫的5个功能</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/5-pandas-functions-you-need-to-know-as-a-complete-beginner-c0b38ec6435e?source=collection_archive---------2-----------------------#2022-04-16">https://medium.com/mlearning-ai/5-pandas-functions-you-need-to-know-as-a-complete-beginner-c0b38ec6435e?source=collection_archive---------2-----------------------#2022-04-16</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="4808" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">这是一个数据科学初学者使用Pandas和Python进行数据分析基础知识的快速指南，包括代码示例和备忘单(分类字段)。</h2></div><p id="34b5" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><a class="ae js" href="http://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank"> Pandas </a>库是数据科学家进行数据操作和分析的最流行工具之一，结合<a class="ae js" href="http://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"> matplotlib </a> <strong class="iy hi"> </strong>进行数据可视化，奠定了数据科学基础。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es jt"><img src="../Images/07eea096d0e73bae18b66ffbbdc5a4fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FEVUf20GNVyFhXhtkil9KA.jpeg"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx"><a class="ae js" href="https://unsplash.com/photos/4EajIuUxgAQ" rel="noopener ugc nofollow" target="_blank">https://unsplash.com/photos/4EajIuUxgAQ</a></figcaption></figure><h2 id="b77f" class="kj kk hh bd kl km kn ko kp kq kr ks kt jf ku kv kw jj kx ky kz jn la lb lc ld bi translated"><strong class="ak">数据集</strong></h2><p id="0043" class="pw-post-body-paragraph iw ix hh iy b iz le ii jb jc lf il je jf lg jh ji jj lh jl jm jn li jp jq jr ha bi translated">我们将使用心脏病的个人关键指标数据集。它收集了与40万成年人健康状况相关的年度调查数据。</p><p id="571d" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">检测和预防对心脏病影响最大的因素在医疗保健中非常重要。机器学习方法在从数据中检测“模式”以预测患者的状况方面非常方便，通过这个数据集，我们拟合了一个分类模型，以预测给定患者数据的心脏病。</p><p id="3f62" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">kaggle笔记本参考此处<a class="ae js" href="https://www.kaggle.com/code/gusarovma/pandas" rel="noopener ugc nofollow" target="_blank">为</a>。</p><h2 id="b9c9" class="kj kk hh bd kl km kn ko kp kq kr ks kt jf ku kv kw jj kx ky kz jn la lb lc ld bi translated"><strong class="ak">1-数据熟悉:head() </strong></h2><p id="9cc1" class="pw-post-body-paragraph iw ix hh iy b iz le ii jb jc lf il je jf lg jh ji jj lh jl jm jn li jp jq jr ha bi translated">数据科学家花费大量时间了解他们的数据集、功能/属性和业务定义。而熊猫<code class="du lj lk ll lm b">head()</code>功能对开启探索之旅很有帮助。它返回给定数据集的所有要素和前5行。</p><pre class="ju jv jw jx fd ln lm lo lp aw lq bi"><span id="21f2" class="kj kk hh lm b fi lr ls l lt lu">hd.head()</span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es lv"><img src="../Images/1a7774a269245f3afbd9f3d05528d331.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4z1GkAHderqDRqQilapsoA.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx">head()</figcaption></figure><p id="3b20" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">有了这个，你马上就能掌握，数据集包含的特征:身体质量指数、中风、身体健康等。当您查看数据时，您开始询问有关这些功能的正确问题。例如，PhysicalHealth在这个数据集中意味着什么？开始接触正确的资源，探索其中的意义。在本例中，请访问<a class="ae js" href="https://www.kaggle.com/datasets/kamilpytlak/personal-key-indicators-of-heart-disease?datasetId=1936563&amp;sortBy=voteCount" rel="noopener ugc nofollow" target="_blank">数据源</a>获取定义:</p><blockquote class="lw lx ly"><p id="8127" class="iw ix lz iy b iz ja ii jb jc jd il je ma jg jh ji mb jk jl jm mc jo jp jq jr ha bi translated">身体健康:现在想想你的身体健康，包括身体疾病和受伤，在过去的30天里有多少天。</p></blockquote><p id="4563" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">您经常会在一个数据集中遇到几十或几百个要素，而<code class="du lj lk ll lm b">columns</code>函数可以方便地检查这些列:</p><pre class="ju jv jw jx fd ln lm lo lp aw lq bi"><span id="9fb8" class="kj kk hh lm b fi lr ls l lt lu">hd.columns</span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es md"><img src="../Images/6b9e863498918a8ca9d07984c01d81df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TUQN-aW9st4whNeckILIvw.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx">columns</figcaption></figure><h2 id="c4ec" class="kj kk hh bd kl km kn ko kp kq kr ks kt jf ku kv kw jj kx ky kz jn la lb lc ld bi translated">2-分类目标:isin()</h2><p id="1674" class="pw-post-body-paragraph iw ix hh iy b iz le ii jb jc lf il je jf lg jh ji jj lh jl jm jn li jp jq jr ha bi translated">在检查数据集的时候，问问你自己我在这里必须完成的科学任务是什么？在分类目标下，我需要预测哪些类别，哪些类别对业务最重要？</p><p id="643f" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">例如，在这里，我们希望帮助医生预测给定患者数据的心脏病概率。您可能想花大量时间通过检查心脏病患者来了解导致心脏病的原因，而最简单的方法是结合head()和isin()函数。</p><pre class="ju jv jw jx fd ln lm lo lp aw lq bi"><span id="1951" class="kj kk hh lm b fi lr ls l lt lu">hd[hd['HeartDisease'].isin([1])]</span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es me"><img src="../Images/3d368cb975a221555d09ea4bc0febd1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wPg8Yck9TOSklpv0Sjv6cQ.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx">isin()</figcaption></figure><p id="70c4" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">只有2.7万名心脏病患者(40万人中)，这意味着这是一个不平衡的数据集，需要特别关注。我们可以开始构建一个心脏病患者的图像:身体质量指数高于25，这不是一个健康的身体质量指数，许多患者吸烟，行走困难，患有糖尿病，他们的年龄往往更大。</p><p id="6b4d" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">虽然这可能不是非常准确，但它让我们对患者水平有了一目了然的了解。</p><h2 id="ca1a" class="kj kk hh bd kl km kn ko kp kq kr ks kt jf ku kv kw jj kx ky kz jn la lb lc ld bi translated">3-了解关键驱动因素:描述()或说明()</h2><p id="4105" class="pw-post-body-paragraph iw ix hh iy b iz le ii jb jc lf il je jf lg jh ji jj lh jl jm jn li jp jq jr ha bi translated">要理解分类驱动因素，您可能需要查看聚合。使用<code class="du lj lk ll lm b">describe()</code>功能，您可以找出平均值、标准差和四分位数。</p><pre class="ju jv jw jx fd ln lm lo lp aw lq bi"><span id="b966" class="kj kk hh lm b fi lr ls l lt lu">hd[hd['HeartDisease'].isin([1])].describe()</span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mf"><img src="../Images/0e0eba182c30b742cd77a310f89c7675.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gn-nlggUnLU7bp4fRTbiQQ.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx">describe()</figcaption></figure><p id="a6e8" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">通过绘制这两类人群的总数:有和没有心脏病，你可以更好地了解人群差异，以及可能导致心脏病的因素。</p><pre class="ju jv jw jx fd ln lm lo lp aw lq bi"><span id="1c71" class="kj kk hh lm b fi lr ls l lt lu">hd[hd['HeartDisease'].isin([0])].describe()</span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mg"><img src="../Images/01549034a3559e67afc808684e4a36a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*clSEXO2TJp_EuER2n6xXHg.png"/></div></div></figure><p id="8da7" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">通过比较这两种观点，我们可以立即发现心脏病患者往往吸烟更多，身体状况更差，行走困难等等。</p><p id="a750" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">或者，我们可以用<code class="du lj lk ll lm b">mean()</code>函数构建一个比较视图:</p><pre class="ju jv jw jx fd ln lm lo lp aw lq bi"><span id="b6fe" class="kj kk hh lm b fi lr ls l lt lu">hd[hd['HeartDisease'].isin([1])].mean()/hd[hd['HeartDisease'].isin([0])].mean()</span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mh"><img src="../Images/59617e4af024b653e1a63c1140ad2e37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_SeWjg45SwVA05yeWGKIDg.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx">mean()</figcaption></figure><p id="f68e" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">平均而言，心脏病患者中风次数(6.2)、肾病(4.4)、行走困难(3.1)、糖尿病(2.8)、身体健康问题(2.6)、吸烟更多(1.5)和年龄更大(1.4)的几率更高。</p><p id="29cb" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">一方面，有意思的是，肾病患者更有可能患心脏病。这份<a class="ae js" href="https://www.cdc.gov/kidneydisease/publications-resources/link-between-ckd-diabetes-heart-disease.html" rel="noopener ugc nofollow" target="_blank">参考文献</a>称，当肾脏工作不正常时，心脏会承受更大的压力。当有人患有肾脏疾病时，他们的心脏需要更努力地泵血才能将血液输送到肾脏。这会导致心脏病。另一方面，心脏病患者的肥胖/身体质量指数似乎并不更高。这些见解为下一步探索什么提供了一个好主意。</p><p id="a7e3" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">令人惊讶的是，我们还观察到，饮酒越多的患者患心脏病的几率越小。这可能并不意味着我们应该开始喝更多的酒来降低患心脏病的风险，尽管一些研究证实了这一矛盾。</p><h2 id="badd" class="kj kk hh bd kl km kn ko kp kq kr ks kt jf ku kv kw jj kx ky kz jn la lb lc ld bi translated">4.功能级别聚合:groupby()</h2><p id="e42c" class="pw-post-body-paragraph iw ix hh iy b iz le ii jb jc lf il je jf lg jh ji jj lh jl jm jn li jp jq jr ha bi translated">虽然平均值有助于理解人口差异，但由于其分布，它们无法很好地描述全球范围内的人口。特性集合将有助于进一步深入，您可以使用<code class="du lj lk ll lm b">groupby()</code>函数来实现。</p><pre class="ju jv jw jx fd ln lm lo lp aw lq bi"><span id="02af" class="kj kk hh lm b fi lr ls l lt lu">hd.groupby(['KidneyDisease']).size()<br/>hd.groupby(['Stroke']).size()</span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mi"><img src="../Images/b3c5dec3266eb84fb8d3fb5285bd1b15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LIC16fr3MOX7hNKIFPihCw.png"/></div></div></figure><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mj"><img src="../Images/60200314dcc9e85086983ae674755b79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GoR5XhPqtmewFYaeFv1sxQ.png"/></div></div></figure><p id="b5aa" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">例如，我们可以看到中风和肾病非常罕见，不会成为分类器中的主要特征驱动因素。</p><p id="955a" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">你可以用不同的方式使用<code class="du lj lk ll lm b">groupby()</code>功能，例如，你可以清晰地想象:病人年龄越大——患心脏病的几率越高。这可能是模型中最重要的特征之一(尽管可能对医生没有太大帮助)。</p><pre class="ju jv jw jx fd ln lm lo lp aw lq bi"><span id="b536" class="kj kk hh lm b fi lr ls l lt lu">hd_age = hd.groupby(['AgeCategory','HeartDisease'])['HeartDisease'].count()<br/>hd_age = hd_age.groupby(level=0).apply(lambda x:<br/>                                                 100 * x / float(x.sum()))<br/>hd_age</span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mk"><img src="../Images/5f7352f40a66cdb4e616b981d823a559.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SpuCmmyuFQ4R4LYX5SHixg.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx">Age category younger towards 1.0 and older towards 13:0</figcaption></figure><h2 id="e6fb" class="kj kk hh bd kl km kn ko kp kq kr ks kt jf ku kv kw jj kx ky kz jn la lb lc ld bi translated">5个功能级别聚合:分组依据()+宁滨</h2><p id="8206" class="pw-post-body-paragraph iw ix hh iy b iz le ii jb jc lf il je jf lg jh ji jj lh jl jm jn li jp jq jr ha bi translated">我们发现，平均而言，身体质量指数在心脏病患者中并没有升高多少，这没有太大的意义。许多研究发现心脏病和身体质量指数之间有很强的相关性，如下图所示:</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es ml"><img src="../Images/c842b810250c227014027172be565c22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*EwCUrw4mBuZyy6nL.jpg"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx"><a class="ae js" href="https://rxhometest.com/article/obesity-heart-disease" rel="noopener ugc nofollow" target="_blank">https://rxhometest.com/article/obesity-heart-disease</a></figcaption></figure><p id="3c47" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">根据特征分布和其他因素，平均值可能会误导我们。为了更上一层楼，你可以在<code class="du lj lk ll lm b">groupby()</code>中使用宁滨技巧:</p><pre class="ju jv jw jx fd ln lm lo lp aw lq bi"><span id="ee4a" class="kj kk hh lm b fi lr ls l lt lu">bins = [0, 15, 25, 35, 45, 100]<br/>labels = ['0-15', '15-25', '25-35', '35-45','45-100']<br/>hd['binned'] = pd.cut(hd['BMI'], bins=bins, labels=labels)<br/>analyse_BMI = hd.groupby(['binned','HeartDisease'])['HeartDisease'].count()<br/>analyse_BMI = analyse_BMI.groupby(level=0).apply(lambda x:<br/>                                                 100 * x / float(x.sum())) <br/>analyse_BMI = analyse_BMI.unstack() <br/>analyse_BMI</span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mm"><img src="../Images/9f4685845e078258475c879565a06167.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yGCtEZpgQivVSibhpLzKXg.png"/></div></div></figure><p id="daf1" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这清楚地证明了身体质量指数和心脏病之间的相关性，身体质量指数越高，患心脏病的几率越高——这看起来与之前的图表非常相似！</p></div><div class="ab cl mn mo go mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ha hb hc hd he"><p id="32ba" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">让我们结束分析。</p><p id="cc61" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">从这些见解中，我们可以形成以下观点:患有肾脏疾病、行走困难、男性、糖尿病和高身体质量指数的70岁患者将属于心脏病的高危人群。</p><p id="5a95" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">实际上，我们可以通过绘制特征重要性图表，快速验证我们通过使用带有简单分类器的pandas获得的理解:</p><pre class="ju jv jw jx fd ln lm lo lp aw lq bi"><span id="9715" class="kj kk hh lm b fi lr ls l lt lu">from sklearn.model_selection import train_test_split<br/>from sklearn.linear_model import LogisticRegression<br/>from sklearn.metrics import confusion_matrix, precision_score, recall_score, auc,roc_curve<br/>from sklearn.preprocessing import MinMaxScaler</span><span id="e7b8" class="kj kk hh lm b fi mu ls l lt lu">hd = hd.drop(columns = ['binned'], axis = 1)</span><span id="1957" class="kj kk hh lm b fi mu ls l lt lu">X = hd.drop('HeartDisease', axis=1)<br/>y = hd[['HeartDisease']]<br/>y = y.values.ravel()</span><span id="5a6a" class="kj kk hh lm b fi mu ls l lt lu">X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.25, random_state=42, stratify=y)</span><span id="895c" class="kj kk hh lm b fi mu ls l lt lu">logreg = LogisticRegression(max_iter=1000)<br/>logreg.fit(X_train, y_train)</span><span id="4948" class="kj kk hh lm b fi mu ls l lt lu">y_pred = logreg.predict(X_test)</span><span id="bdff" class="kj kk hh lm b fi mu ls l lt lu">print('Accuracy of logistic regression classifier on train set: {:.2f}'.format(logreg.score(X_train, y_train)))<br/>print('Accuracy of logistic regression classifier on test set: {:.2f}'.format(logreg.score(X_test, y_test)))</span><span id="841d" class="kj kk hh lm b fi mu ls l lt lu">import shap<br/>shap.initjs()<br/>explainer = shap.Explainer(logreg, X_train)<br/>shap_values = explainer(X_test)<br/>shap.plots.beeswarm(shap_values)</span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mj"><img src="../Images/17a043cb17b8ff2beb2213b48e8fa6fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jrUUJL6bNuBfHaa7qLlxhA.png"/></div></div></figure><p id="f1af" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在此图表中:</p><ol class=""><li id="7ee2" class="mv mw hh iy b iz ja jc jd jf mx jj my jn mz jr na nb nc nd bi translated">蓝色和红色代表特征值，例如年龄类别蓝色是较小的值(例如1.0/更小)，红色是较大的值(例如13.0/更大)。</li><li id="4faa" class="mv mw hh iy b iz ne jc nf jf ng jj nh jn ni jr na nb nc nd bi translated">条的宽度代表观察的数量，例如中风特征包含大多数没有中风的病人和少数有中风的病人。</li><li id="3f26" class="mv mw hh iy b iz ne jc nf jf ng jj nh jn ni jr na nb nc nd bi translated">x轴负SHAP值代表可能<strong class="iy hi">没有</strong>心脏病的患者，右侧的正值代表可能<strong class="iy hi">有</strong>心脏病的患者。</li></ol><p id="b037" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们从这张图表中学到了什么:</p><ol class=""><li id="7b14" class="mv mw hh iy b iz ja jc jd jf mx jj my jn mz jr na nb nc nd bi translated">5个关键驾驶特征是:年龄类别、性别、吸烟、糖尿病和行走困难。</li><li id="3d55" class="mv mw hh iy b iz ne jc nf jf ng jj nh jn ni jr na nb nc nd bi translated">通过关键特征，我们可以得出结论，我们通过使用熊猫获得的理解完全符合模型的可解释性:患者年龄越大，患心脏病的几率越高，男性/吸烟者/糖尿病患者患心脏病的几率往往更高，等等。</li></ol><p id="7b49" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们可以通过查看每个单独的(局部)预测来进一步验证我们的理解:</p><pre class="ju jv jw jx fd ln lm lo lp aw lq bi"><span id="e393" class="kj kk hh lm b fi lr ls l lt lu">shap.plots.bar(shap_values[18])</span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es nj"><img src="../Images/86bd1bde32c6986059b4bfeb88c6508b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iZsxP-KPTe3crOtx3tXHwg.png"/></div></div></figure><p id="052e" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">预测患有心脏病的患者和实际患有心脏病的患者的主要原因是:年龄较大、肾脏疾病、精神健康状况不佳和糖尿病。尽管患者没有身体健康和行走困难的问题，但年龄和肾脏疾病的结合使该病例极有可能患有心脏病。</p><p id="c130" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">与此相反，一个年轻的病人，不吸烟，并且有一个健康的身体质量指数，是不可能有心脏病的。</p><pre class="ju jv jw jx fd ln lm lo lp aw lq bi"><span id="616f" class="kj kk hh lm b fi lr ls l lt lu">shap.plots.bar(shap_values[5])</span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es nk"><img src="../Images/8715ec0b74afee975e07fa8b622b0d66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2AZd9GssGAon66ArSyJCyw.png"/></div></div></figure></div><div class="ab cl mn mo go mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ha hb hc hd he"><p id="7661" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">作为一名数据科学家，一定要花时间去理解数据！它将帮助您构建更简单、更有意义的解决方案。</p><p id="24de" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">熊猫是一个令人兴奋的工具，为了释放它的全部潜力，请将备忘单放在手边！我遇到的一些很棒的小抄是<a class="ae js" href="http://datacamp-community-prod.s3.amazonaws.com/f04456d7-8e61-482f-9cc9-da6f7f25fc9b" rel="noopener ugc nofollow" target="_blank">数据营</a>和<a class="ae js" href="https://pandas.pydata.org/Pandas_Cheat_Sheet.pdf" rel="noopener ugc nofollow" target="_blank">熊猫. pydata </a>。</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es nl"><img src="../Images/fa0964e634bb4582d66b32f9738dab42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9ydpSdT1z86Fkuli3a8R0g.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx"><a class="ae js" href="http://datacamp-community-prod.s3.amazonaws.com/f04456d7-8e61-482f-9cc9-da6f7f25fc9b" rel="noopener ugc nofollow" target="_blank">http://datacamp-community-prod.s3.amazonaws.com/f04456d7-8e61-482f-9cc9-da6f7f25fc9b</a></figcaption></figure><div class="nm nn ez fb no np"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="nq ab dw"><div class="nr ab ns cl cj nt"><h2 class="bd hi fi z dy nu ea eb nv ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="nw l"><h3 class="bd b fi z dy nu ea eb nv ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="nx l"><p class="bd b fp z dy nu ea eb nv ed ef dx translated">medium.com</p></div></div><div class="ny l"><div class="nz l oa ob oc ny od kd np"/></div></div></a></div></div></div>    
</body>
</html>