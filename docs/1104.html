<html>
<head>
<title>Opening Cafes For Indoor Use Using Foot Traffic Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用步行交通数据开设供室内使用的咖啡馆</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/opening-cafes-for-indoor-use-using-foot-traffic-data-d62562f0655f?source=collection_archive---------4-----------------------#2021-10-02">https://medium.com/mlearning-ai/opening-cafes-for-indoor-use-using-foot-traffic-data-d62562f0655f?source=collection_archive---------4-----------------------#2021-10-02</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/e9667cdd33550c73b6568613ca179a43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sbQz18v2IBPsZe1W"/></div></div></figure><p id="decf" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">最初开门后，利润可能会增加300%，而客户和员工都可能会因为不再需要通过尴尬的开门来谈判交易而感到宽慰。但是重新培训员工、补充库存和准备室内使用的空间是昂贵的:时间、金钱和耐心都是可以考验的。</p><p id="bd72" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">因此，在2021年年中，当务之急是确定哪些零售和食品场所最适合提供Grab N' Go室内服务，哪些可以暂时不对公众开放。对于在曼哈顿拥有240多家分店的星巴克来说，这个问题至关重要。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div class="er es jn"><img src="../Images/45c11c382a3eff808ca41eea4f3c8857.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/0*DW1lSXEfyCeZkgPF"/></div></figure><p id="5416" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这就是为什么我选择使用纽约地铁系统的客流量数据来确定哪些曼哈顿地铁站1)整体客流量更大，以及2)客流量恢复增长更大，以便专注于可能直接受益于再次乘坐地铁的人数增加的星巴克地点。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es js"><img src="../Images/d782942c4091f61dfd6e0c1b0f8a4090.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3ebNNOCM0VKfCfHy"/></div></div></figure><p id="d271" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">数据是从纽约开放数据项目收集的，该项目每周从MTA网络的每个站点上传步行交通数据。</p><p id="ca56" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">出于本项目的目的，我们需要截至该日期的所有2021年交通数据，以及同期的相应2019年交通数据。</p><p id="1024" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这些数据非常杂乱，在用于模拟当前交通模式并与前几年进行比较之前，需要进行相当多的清理。</p><p id="2a22" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在发现的错误中，有一个计数器在倒数通过十字转门的人数，而不是在向上计数，以及需要在每个车站的基础上调查缺失数据的缺口。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es js"><img src="../Images/def3ba4f8688e382bf53c8ddf63a73d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uyOhDVd5vDBRpEfI"/></div></div></figure><p id="8c54" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">使用python的datetime函数从每日交通模式行中生成每周时间窗，通过从时间窗结束时的累积十字转门计数器数字中减去时间窗开始时的累积十字转门计数器数字来生成步行交通数据。</p><p id="0e98" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">相同的清理模式可应用于2019年和2021年的交通数据，并对交通模式中的异常进行了调查。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es js"><img src="../Images/8bfa476d210a7f667efb5cf73f4a296e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tE2MwrV7MYbfRunb"/></div></div></figure><p id="9a04" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">2019年与2021年在同一周内的流量对比显示了Covid对纽约的打击有多严重。虽然在相同的假期前后，两个时间段的流量都出现了相同的下降，但2021年的流量明显低于疫情之前的水平。</p><p id="aada" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">确定我选择用来比较数据的第一个指标，即特定车站的更大交通量，相当简单:2021年的交通趋势向我们显示了今年哪些车站的表现高于曼哈顿所有车站的平均水平。</p><p id="1866" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我首先取了2021年的平均值，然后确定了MTA网络中所有站点交通量排名前10的站点。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es jt"><img src="../Images/a5d97a99dc1df8248b0c540b84cd8293.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xAJE_u-RUudCi4nz"/></div></div></figure><p id="4813" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">对于第二个指标，更大的流量恢复，我选择根据恢复的百分比比较2021年和2019年的流量模式。</p><p id="837c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我将每个车站的当前流量与2019年相同车站的客流量进行了比较。我们的想法是，最终，所有电视台都将在疫情之前以100%或接近100%的流量运行，但目前，我们希望找出与其他电视台相比更接近100%恢复的电视台，尤其是我们网络中表现最好的电视台。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es js"><img src="../Images/35f7ed873c6cc6fc784156551240ae69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EedoASLITo2tWqzi"/></div></div></figure><p id="e57c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">取MTA网络中所有站点的平均值，我发现在这个时间点，平均百分比恢复率目前为48.5%，高于年初的29.18%。我们要完全恢复还有很长的路要走。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es js"><img src="../Images/81a1dc521323cba884dd25cf726fda35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bDfNYASH2a1nXJXY"/></div></div></figure><p id="ddd6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在运量表现最好的车站中，有四个车站在交通恢复方面的表现高于平均水平，目前只有一个车站表现出上升趋势——世贸中心站。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ju"><img src="../Images/5ecf04ed0c96104fec6d846280e30fcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*T61XBLY4983AQx21"/></div></div></figure><p id="ef40" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这是纽约最新的车站，是对一段艰难过去的纪念，即将迎来一个重大的周年纪念，也是曼哈顿的金融办公中心。这种上升趋势是有道理的。</p><p id="ed79" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在该地区开设星巴克门店以获取N' Go室内订单也是有意义的，因为我们在该地区有最大的投资回报机会。</p><p id="d03d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">通过使用Google API查找每个MTA站点的纬度和经度坐标，我们可以调用与我们排名前十的站点直接相邻的星巴克位置列表，然后根据交通优先级对它们进行排序。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es js"><img src="../Images/60bd42480b3b1111e7f33b48b19992cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KweLO6rKE-emU0Xu"/></div></div></figure><p id="39cc" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">不幸的是，Google API并没有给出我们所需要的精确的搜索结果。我希望星巴克的位置在任何一个车站的4个街区左右的范围内，但是Google API返回十个街区半径内的星巴克位置，而不管原始API调用中的半径指令。</p><p id="6cfc" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">因此，在接收到每个车站的星巴克位置列表后，对从Google API接收的星巴克位置列表执行KDTree搜索，并且保存了与每个MTA车站最近的前3个位置。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es js"><img src="../Images/409a35ee06a41d92f9def95ce7eeedfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6_eSTsfyZLO2vSkZ"/></div></div></figure><p id="c4d0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">最后，星巴克的位置列表根据客流量和客流量的恢复情况进行排序，优先考虑那些在这两个领域都有前景的站点。然后，这个最高优先级列表被可视化在曼哈顿的地图上，每个点都标识了其打开Grab N' Go的优先级。</p><figure class="jo jp jq jr fd ii"><div class="bz dy l di"><div class="jv jw l"/></div></figure><p id="d80a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在我们准备提供一些咖啡。</p><p id="331e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在我的<a class="ae jx" href="https://github.com/CeliaSagas" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上查看完整的项目和代码<a class="ae jx" href="https://github.com/CeliaSagas/Coffee-Time" rel="noopener ugc nofollow" target="_blank">这里</a>。</p></div><div class="ab cl jy jz go ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ha hb hc hd he"><p id="dcf4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">【https://celiasagastume.com】最初发表于<a class="ae jx" href="https://celiasagastume.com/?p=347" rel="noopener ugc nofollow" target="_blank"><em class="kf"/></a><em class="kf">。</em></p></div></div>    
</body>
</html>