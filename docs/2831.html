<html>
<head>
<title>Geometric interpretation of F1-score</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">F1分数的几何解释</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/geometric-interpretation-of-f1-score-7fad9c63fd48?source=collection_archive---------3-----------------------#2022-06-15">https://medium.com/mlearning-ai/geometric-interpretation-of-f1-score-7fad9c63fd48?source=collection_archive---------3-----------------------#2022-06-15</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/eabad7566e2e0018d5441fd83280e5ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZC7qla_Bzm-WLBIqy-uaug.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">The best way to get a fast interpretation of a classifier !</figcaption></figure><p id="e4f7" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">今天，我想谈谈一个在分类问题中非常常用的度量。所谓F1-score。我的目标是追溯一种历史形式，以便给你一种“F1分数到底是什么，为什么有用”的直觉？</p><p id="e13d" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">当我们有一个分类问题时，我们希望有一些指标来启发我们对结果的理解。<br/> <a class="ae jr" rel="noopener" href="/mlearning-ai/precision-recall-a-combinatoric-and-probabilistic-point-of-view-c904f7ab15df">精确和回忆</a>是很好的候选，来自我们直觉的一个很低的层次。<br/>由于它们提供了非常不同且互补的信息，我们希望有一个综合这两条信息的指标。</p><h1 id="b1ea" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">从平均值到F1</h1><p id="8428" class="pw-post-body-paragraph it iu hh iv b iw kq iy iz ja kr jc jd je ks jg jh ji kt jk jl jm ku jo jp jq ha bi translated">第一个想法是使用均值:当我们想要对信息进行“分组”时，使用均值是很常见的。很好，但是…</p><p id="0848" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">假设我们想在一个平衡的二进制数据集上为一个分类器提供一个全局分数，其召回率为0.01，精确度为0.99。<br/>对于这样的结果，我们希望提供非常接近0.01的结果。假设0.02比较好…</p><p id="aa42" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">如果我们使用算术平均值，我们将得到0.5的结果，这将给人一种可以改进的中等分类器的印象。</p><p id="73fc" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">那怎么办呢？<br/>显然，我们想要一个函数F1使得<br/> 1)F1(a，b) ~ (a+b)/2如果a和b远离零<br/> 2)F1(a，b)~ 0否则<br/>和F1-score是一个很好的候选。</p><p id="73b7" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">为什么？首先，让我们转换它的公式:</p><figure class="kw kx ky kz fd ii er es paragraph-image"><div class="er es kv"><img src="../Images/7e22a51c3c1fa4f9c75073d7288a0541.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/1*u27cZXHDbyepQQ34-TKZTA.gif"/></div></figure><p id="f598" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">因此，如果我们称MEAN为算术平均值，INV为反函数，我们可以看到</p><blockquote class="la"><p id="d5fe" class="lb lc hh bd ld le lf lg lh li lj jq dx translated">F1 = INV(均值(INV(精度)，INV(召回)))。</p></blockquote><p id="bca5" class="pw-post-body-paragraph it iu hh iv b iw lk iy iz ja ll jc jd je lm jg jh ji ln jk jl jm lo jo jp jq ha bi translated">使用这种“算法”的观点，我们现在可以更好地理解发生了什么。</p><h1 id="6e4f" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">F1的几何性质</h1><p id="3952" class="pw-post-body-paragraph it iu hh iv b iw kq iy iz ja kr jc jd je ks jg jh ji kt jk jl jm ku jo jp jq ha bi translated">首先，你需要回忆一下反函数是从(0，1)到[1，inf的自然映射。此外，离原点最近的是零，离无限远的是反函数。</p><figure class="kw kx ky kz fd ii er es paragraph-image"><div class="er es lp"><img src="../Images/ca89988bb0599793c6cbd85dc1ca4d6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:514/format:webp/1*2QqDbwyDczPZbedr4B3U-g.png"/></div><figcaption class="ip iq et er es ir is bd b be z dx">The graph is symmetric with respect to the axis y = x. So closest to 0 is the input, most far on 1 will be the output.</figcaption></figure><p id="2b8a" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">1/10会移到10，1/100会移到100。<br/>输入之差为0.099，接近0.1，输出之差为90，接近1/(1/100)。</p><p id="be7a" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们可以在下图中想象这个概念。<br/>线左边的每个点代表一个输入，并且映射的是相同颜色的点，但是在线的右边。我们可以看到，最接近零的是两个邻居，它们中的每一个的输出都是最远的。</p><figure class="kw kx ky kz fd ii er es paragraph-image"><div class="er es lq"><img src="../Images/029b3d67ea8e10ee38b424334051fc80.png" data-original-src="https://miro.medium.com/v2/resize:fit:796/format:webp/1*ipPcfAKAoGGK_e1Z6728oA.png"/></div><figcaption class="ip iq et er es ir is bd b be z dx">The blue vertical line is representing the axis x = 1. The inputs are on the left, the mapping by inverse on the right.</figcaption></figure><p id="00ac" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">那么，F1-score在做什么呢？首先，它转置右行[1，inf中的两个输入，之后，它取平均值，并将该结果再次转置到段(0，1)中。</p><p id="338a" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这样做，我们确保了接近于零的值在我们的最终结果中是突出的。<br/>相反，<em class="lr">如果两个变量远不为零</em>，那么转位就不是在做强效应，这样<em class="lr"> F1得分就可以看成是调和平均值的“小扰动”。</em></p><h1 id="2153" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">逐步理解的算法程序</h1><p id="30a1" class="pw-post-body-paragraph it iu hh iv b iw kq iy iz ja kr jc jd je ks jg jh ji kt jk jl jm ku jo jp jq ha bi translated">为了说服我们自己，让我们做一些计算。</p><h2 id="59a0" class="ls jt hh bd ju lt lu lv jy lw lx ly kc je lz ma kg ji mb mc kk jm md me ko mf bi translated">1)两个远离0的变量</h2><p id="73df" class="pw-post-body-paragraph it iu hh iv b iw kq iy iz ja kr jc jd je ks jg jh ji kt jk jl jm ku jo jp jq ha bi translated">a)从0.4和0.7 <br/>开始b)计算倒数:2，5和1.42 <em class="lr">(它们并不是那么远)<br/> </em> c)计算它们的平均值:1.96 ( <em class="lr">仍然捕捉到两者的信息</em> ) <br/> d)再次求逆:1/1.96 = 0.51 ( <em class="lr">不完全是0.55，但也不是那么远，在好的范围内</em>)。</p><h2 id="5864" class="ls jt hh bd ju lt lu lv jy lw lx ly kc je lz ma kg ji mb mc kk jm md me ko mf bi translated">2)一个接近0的变量</h2><p id="3049" class="pw-post-body-paragraph it iu hh iv b iw kq iy iz ja kr jc jd je ks jg jh ji kt jk jl jm ku jo jp jq ha bi translated">a)从0.1和0.8 <br/>开始b)计算倒数:10和1.25 ( <em class="lr"> 10会很突出</em> ) <br/> c)计算它们的平均值:5.625 ( <em class="lr">我们离1比以前远得多</em> ) <br/> d)再次求倒数:0.17 ( <em class="lr">从1到0.07，从0.8到0.63:本质信息被0.1捕捉！！</em>)</p><h1 id="c03d" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">F_beta评分:扩展到权重均值！！</h1><p id="aa24" class="pw-post-body-paragraph it iu hh iv b iw kq iy iz ja kr jc jd je ks jg jh ji kt jk jl jm ku jo jp jq ha bi translated">人们可以采用调和平均值中的均匀权重以外的其他权重。我们可能希望更多地关注某个特定的指标，但继续寻找两者之间的平衡。<br/>例如，一个人想要具有“远离零”的属性，分数看起来像0.3精度+ 0.7召回。</p><p id="edde" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">好的，听起来不错。但是可以将精确度的权重设为1，将召回率的权重设为2。或者2表示精确，4表示召回。<br/>我们看到，显然，我们需要一个约定，以便消除这个虚假的问题。而最好的是，一如既往地在这类“问题”上，利用有理数的性质！</p><p id="6201" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">如果我们假设β= coeff(召回)/coeff(精度)，我们看到加权调和平均值的一般公式将是(做计算！)</p><figure class="kw kx ky kz fd ii er es paragraph-image"><div class="er es mg"><img src="../Images/bf4b23a6ea6f18cbdb2f76c4b3322c4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:516/1*4hOx3E_melRw20mjn4vU6Q.gif"/></div></figure><p id="6b3e" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这导致F1分数扩大到(做吧！)</p><figure class="kw kx ky kz fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mh"><img src="../Images/42f7d6a31d9bac4fa485f81e0086495a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1166/1*yQB41541Uz25_fCgAv3S4Q.gif"/></div></div></figure><p id="3e02" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">其中MEAN_(Beta)是加权调和平均值。</p><p id="a007" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">注意，当精度和召回的权重相同时，我们得到β= 1。😮</p><p id="9fdb" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">最后一句话:由于β必须严格为正，一般来说，在公式中我们使用这个系数的平方。</p><div class="mi mj ez fb mk ml"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="mm ab dw"><div class="mn ab mo cl cj mp"><h2 class="bd hi fi z dy mq ea eb mr ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="ms l"><h3 class="bd b fi z dy mq ea eb mr ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="mt l"><p class="bd b fp z dy mq ea eb mr ed ef dx translated">medium.com</p></div></div><div class="mu l"><div class="mv l mw mx my mu mz in ml"/></div></div></a></div></div></div>    
</body>
</html>