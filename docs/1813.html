<html>
<head>
<title>Harry’s Invisibility Cloak — Less than 50 lines of code— with source code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">哈利的隐身衣——不到50行代码——带源代码</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/harrys-invisibility-cloak-less-than-50-lines-of-code-with-source-code-easiest-explanation-772a8176b46f?source=collection_archive---------13-----------------------#2022-01-31">https://medium.com/mlearning-ai/harrys-invisibility-cloak-less-than-50-lines-of-code-with-source-code-easiest-explanation-772a8176b46f?source=collection_archive---------13-----------------------#2022-01-31</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="a450" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">伙计们，最期待的博客之一来了。今天我们要用不到50行代码编写哈利的隐身衣，看完结果你会大吃一惊的。是啊是啊，我知道你不能控制自己的情绪🙂</p><p id="011e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">点击此处阅读带源代码的整篇文章—</strong><a class="ae jc" href="https://machinelearningprojects.net/harrys-invisibility-cloak/" rel="noopener ugc nofollow" target="_blank">https://machine learning projects . net/harrys-invisibility-斗篷/ </a></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/829b92a483b475cff19c3cef21f15000.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*fbEzqEXEmqGDdUVyy18TBw.gif"/></div></div></figure><h1 id="d107" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">让我们开始吧…</h1><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kn"><img src="../Images/65eb7f4ca4d5a34bb23d0b2fa780de88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Vb4_qyWcT8qkZfT3.jpg"/></div></div></figure><h2 id="6f6d" class="ko jq hh bd jr kp kq kr jv ks kt ku jz ip kv kw kd it kx ky kh ix kz la kl lb bi translated">哈利隐形衣的代码…</h2><pre class="je jf jg jh fd lc ld le lf aw lg bi"><span id="3c3a" class="ko jq hh ld b fi lh li l lj lk">import cv2<br/>import numpy as np<br/>import time<br/><br/>cap = cv2.VideoCapture(0)<br/><br/>for i in range(30):<br/>    ret,background = cap.read()<br/><br/>background = np.flip(background,axis=1)<br/><br/>while(1):<br/>    ret, frame = cap.read()<br/><br/>    img = np.flip(frame,axis=1)<br/>    hsv = cv2.cvtColor(img, cv2.COLOR_BGR2HSV)<br/>    blurred = cv2.GaussianBlur(hsv, (35, 35),0)<br/>    <br/>    lower = np.array([2,170,0])<br/>    upper = np.array([28,255,255])<br/>    mask = cv2.inRange(hsv,lower,upper)<br/><br/>    mask = cv2.erode(mask,np.ones((7,7),np.uint8))<br/>    mask = cv2.dilate(mask,np.ones((19,19),np.uint8))<br/>    <br/>    img[np.where(mask==255)] = background[np.where(mask==255)]<br/><br/>    cv2.imshow('MAGIC',img)<br/>    <br/>    if cv2.waitKey(1) == 27:<br/>        break<br/>        <br/>cv2.destroyAllWindows()<br/>cap.release()<br/><br/># This was the code for Harry's Invisibility Cloak</span></pre><ul class=""><li id="3d7a" class="ll lm hh ig b ih ii il im ip ln it lo ix lp jb lq lr ls lt bi translated">第1–3行—导入所需的库。</li><li id="649a" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">第5行—实例化<a class="ae jc" href="https://docs.opencv.org/3.4/d8/dfe/classcv_1_1VideoCapture.html" rel="noopener ugc nofollow" target="_blank"> VideoCapture() </a>对象，以便稍后访问网络摄像头。</li><li id="f2a2" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">第7- 8行—最初记录背景。我们一直循环到第30帧，第30帧作为背景图像。记住当你记录背景时你不需要在相框里，也不要在记录背景后改变你的笔记本电脑/相机的位置。</li><li id="c51c" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">第10行——简单地水平翻转背景图像。</li><li id="c28c" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated"><strong class="ig hi">让我们运行循环… </strong></li><li id="0104" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">第13行——使用我们上面制作的<a class="ae jc" href="https://docs.opencv.org/3.4/d8/dfe/classcv_1_1VideoCapture.html" rel="noopener ugc nofollow" target="_blank"> VideoCapture() </a>对象读取当前帧。</li><li id="7039" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">第15行—翻转图像。</li><li id="4fe8" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">第16行——将图像转换到HSV颜色空间，因为我们将在后面的步骤中从中取出蒙版，为了蒙版的目的，HSV效果最好。</li><li id="5f7a" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">第17行-高斯模糊图像以减少高斯噪声。</li><li id="fc76" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">第19–20行—指定您将使用斗篷的颜色范围。我用了一件橙色的斗篷。这些是橙色的HSV范围上限和下限。</li><li id="9f90" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">第21行——从图像中创建蒙版。这意味着当我们在框架中显示斗篷时，它将只标记该区域为白色，其他区域为黑色。</li><li id="ed5e" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">第23–24行——侵蚀和扩张蒙版以增强其效果。</li><li id="c323" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">第26行— <strong class="ig hi">【最重要的一行】</strong>在蒙版中有白色区域的地方(有斗篷的地方)用我们上面记录的背景图像的像素替换那些像素。通过这种方式，它创造了一种隐形效果。当所有的斗篷都出现时，它会在那些地方显示背景，看起来你是隐形的。</li><li id="c36e" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">第28行——简单地显示我们的图像。</li><li id="de8f" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">第30–31行—如果有人按ESC键，破解密码。</li><li id="479d" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">第33–34行—释放网络摄像头并销毁所有打开的窗口。</li></ul><h2 id="a09f" class="ko jq hh bd jr kp kq kr jv ks kt ku jz ip kv kw kd it kx ky kh ix kz la kl lb bi translated">最终结果…</h2><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/829b92a483b475cff19c3cef21f15000.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*fbEzqEXEmqGDdUVyy18TBw.gif"/></div></div></figure><p id="7474" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果对哈利的隐形衣有任何疑问，请通过电子邮件或LinkedIn联系我。</p><p id="3945" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">如需进一步的代码解释和源代码，请访问此处</strong>—<a class="ae jc" href="https://machinelearningprojects.net/harrys-invisibility-cloak/" rel="noopener ugc nofollow" target="_blank">https://machine learning projects . net/harrys-invisibility-斗篷/ </a></p><p id="b0b7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="lz">这就是我写给这个博客的全部内容，感谢你的阅读，我希望你在阅读完这篇文章后，能有所收获，直到下一次👋… </em></p><p id="809b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="lz">看我之前的帖子:</em> </strong> <a class="ae jc" href="https://machinelearningprojects.net/how-to-detect-shapes-in-opencv/" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi"> <em class="lz">如何在OPENCV中检测形状</em> </strong> </a></p><p id="bb39" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">查看我的其他</strong> <a class="ae jc" href="https://machinelearningprojects.net/machine-learning-projects/" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi">机器学习项目</strong></a><strong class="ig hi"/><a class="ae jc" href="https://machinelearningprojects.net/deep-learning-projects/" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi">深度学习项目</strong></a><strong class="ig hi"/><a class="ae jc" href="https://machinelearningprojects.net/opencv-projects/" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi">计算机视觉项目</strong></a><strong class="ig hi"/><a class="ae jc" href="https://machinelearningprojects.net/nlp-projects/" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi">NLP项目</strong></a><strong class="ig hi"/><a class="ae jc" href="https://machinelearningprojects.net/flask-projects/" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi">烧瓶项目</strong> </a> <strong class="ig hi"> at</strong></p><div class="ma mb ez fb mc md"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="me ab dw"><div class="mf ab mg cl cj mh"><h2 class="bd hi fi z dy mi ea eb mj ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="mk l"><h3 class="bd b fi z dy mi ea eb mj ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="ml l"><p class="bd b fp z dy mi ea eb mj ed ef dx translated">medium.com</p></div></div><div class="mm l"><div class="mn l mo mp mq mm mr jn md"/></div></div></a></div></div></div>    
</body>
</html>