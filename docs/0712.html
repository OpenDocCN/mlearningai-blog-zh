<html>
<head>
<title>Building an Instagram Scraper in 3 minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">åœ¨3åˆ†é’Ÿå†…å»ºç«‹ä¸€ä¸ªInstagramåˆ®åˆ€</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/mlearning-ai/building-a-instagram-scraper-in-3-minutes-a6aac0a2512f?source=collection_archive---------1-----------------------#2021-06-22">https://medium.com/mlearning-ai/building-a-instagram-scraper-in-3-minutes-a6aac0a2512f?source=collection_archive---------1-----------------------#2021-06-22</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/6405b0d317c97d093bbd3a39ef1cb5d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z5oFE74S1k7TcEdo-D5oaQ.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Image from Instagram</figcaption></figure><p id="e57e" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">Twitteræ˜¯ä¸ºæƒ…æ„Ÿåˆ†æã€æ–‡æœ¬åˆ†ç±»å’Œæœºå™¨å­¦ä¹ é¡¹ç›®æ”¶é›†æ–‡æœ¬çš„æœ€å¹¿æ³›ä½¿ç”¨çš„æ¥æºã€‚Twitterä¸ºç”¨æˆ·æä¾›äº†è‡ªå·±çš„APIæ¥æŠ“å–ä»–ä»¬çš„æ–‡æœ¬æ•°æ®ã€‚ç„¶è€Œï¼Œç°åœ¨çš„Instagramæ›´å¤šåœ°è¢«äºŒä¸‰åå²çš„é’å°‘å¹´å’Œå¹´è½»äººä½¿ç”¨ã€‚ä¸å¹¸çš„æ˜¯ï¼Œä½ éœ€è¦è‡ªå·±åšä¸€ä¸ªåˆ®åˆ€æˆ–è€…ä½¿ç”¨å¼€æºåº“æ¥æŠ“å–ä»–ä»¬çš„æ–‡æœ¬æ•°æ®æˆ–è€…è¯„è®ºã€‚æˆ‘å‘ç°ä½¿ç”¨å¼€æºåº“åŒ…æ¥æŠ“å–Instagramè¯„è®ºæå…¶å›°éš¾ã€‚æœ¬æ–‡å°†æŒ‡å¯¼ä½ åœ¨<em class="jr"> 3åˆ†é’Ÿ</em>å†…å»ºç«‹è‡ªå·±çš„Instagramè¯„è®ºæŠ“å–å™¨ï¼</p><h2 id="c347" class="js jt hh bd ju jv jw jx jy jz ka kb kc je kd ke kf ji kg kh ki jm kj kk kl km bi translated">1.å®‰è£…å¹¶åŠ è½½æ‰€éœ€çš„åº“åŒ…</h2><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="859b" class="js jt hh ks b fi kw kx l ky kz">import pandas as pd<br/>import time<br/>import re<br/>import os<br/>import csv<br/>import json<br/>from urllib.request import urlopen<br/>from urllib.parse import quote_plus<br/>from bs4 import BeautifulSoup<br/>from selenium import webdriver</span></pre><p id="8fb9" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">ç„¶åä½ éœ€è¦ä»è¿™ä¸ªç½‘ç«™ä¸‹è½½ç½‘ç»œé©±åŠ¨:ã€https://chromedriver.chromium.org/downloads T2ã€‘</p><p id="dcbd" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">å°†ä½ ä¸‹è½½çš„ç½‘ç»œé©±åŠ¨ç¨‹åº(é»˜è®¤æƒ…å†µä¸‹å¯èƒ½ä¼šå‘½åä¸º<strong class="iv hi"> <em class="jr"> chromedriver </em> </strong>)æ”¾åœ¨ä½ æƒ³è¦å·¥ä½œçš„æ–‡ä»¶å¤¹ä¸­ã€‚</p><h2 id="6a3d" class="js jt hh bd ju jv jw jx jy jz ka kb kc je kd ke kf ji kg kh ki jm kj kk kl km bi translated">2.ä¿å­˜é©±åŠ¨ç¨‹åºå¹¶è·å–URL</h2><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="c6aa" class="js jt hh ks b fi kw kx l ky kz">driver = webdriver.Chrome(â€˜path to your driverâ€™)</span><span id="0165" class="js jt hh ks b fi lb kx l ky kz"># link to the post you want to scrap comments from (This is Kim Kardashian's Instagram URL)<br/>url = "<a class="ae la" href="https://www.instagram.com/p/CQWQDCOgSt9/" rel="noopener ugc nofollow" target="_blank">https://www.instagram.com/p/CQWQDCOgSt9/</a>"</span><span id="025e" class="js jt hh ks b fi lb kx l ky kz"># Driver will access to the URL<br/>driver.get(url)</span></pre><p id="6df3" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">ç„¶åä½ ä¿å­˜ä½ çš„é©±åŠ¨ç¨‹åºï¼Œå¹¶æŠŠå®ƒæ”¾å…¥åˆ°ä½ çš„é©±åŠ¨ç¨‹åºçš„è·¯å¾„ä¸­ï¼æ‰€ä»¥æˆ‘çš„åº”è¯¥æ˜¯è¿™æ ·çš„:<em class="jr"> webdriverã€‚chrome('/ç”¨æˆ·/irenekim/æ¡Œé¢/ä¸ªäºº/æŠ“å–/chromedriver') </em></p><p id="cffa" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">Instagramå…è®¸ä»å…¬ä¼—è´¦å·æ”¶é›†è¯„è®ºå’Œå›¾ç‰‡ã€‚è¿˜æœ‰ï¼Œåªè¦ä½ ç”¨çš„æ˜¯å…¬ä¼—äººç‰©çš„å…¬å¼€è´¦å·ï¼Œå°±ä¸ç®—ä¾µçŠ¯éšç§ã€‚ä½†æ˜¯ä¸€å®šè¦åå¤æ£€æŸ¥ï¼Œä¸è¦ä¾µçŠ¯ä»»ä½•äººçš„æ•°æ®éšç§ï¼</p><p id="1833" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">å¦‚æœä½ æƒ³çŸ¥é“å½“å‰çš„å·¥ä½œç›®å½•ï¼Œä½ å¯ä»¥ç”¨ä¸€ä¸ªç®€å•çš„ä»£ç æ‰¾åˆ°å®ƒï¼Œå®ƒä¼šæ˜¾ç¤ºä½ ç°åœ¨åœ¨pythonä¸­çš„å“ªä¸ªå·¥ä½œç›®å½•:</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="df96" class="js jt hh ks b fi kw kx l ky kz">os.getcwd()</span></pre><h2 id="ba4c" class="js jt hh bd ju jv jw jx jy jz ka kb kc je kd ke kf ji kg kh ki jm kj kk kl km bi translated">3.æ“ä½œä½ çš„é©±åŠ¨æŠ“å–è¯„è®º</h2><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="ae1e" class="js jt hh ks b fi kw kx l ky kz"># Create an empty container to put all the comments inside<br/>comments = []</span></pre><p id="8a02" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">è¿™äº›ä»£ç ä¼šè‡ªåŠ¨ä¸ºä½ ç‚¹å‡»Instagramä¸Šçš„åŠ è½½æ›´å¤šæŒ‰é’®ï¼</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="9568" class="js jt hh ks b fi kw kx l ky kz">hasLoadMore = True<br/>while hasLoadMore:<br/>    time.sleep(1)<br/>    try:<br/>        if driver.find_element_by_css_selector('#react-root &gt; section &gt; main &gt; div &gt; div &gt; article &gt; div.eo2As &gt; div.EtaWk &gt; ul &gt; li &gt; div &gt; button &gt; span'):<br/>            driver.find_element_by_css_selector('#react-root &gt; section &gt; main &gt; div &gt; div &gt; article &gt; div.eo2As &gt; div.EtaWk &gt; ul &gt; li &gt; div &gt; button &gt; span').click()<br/>    except:<br/>        hasLoadMore = False</span></pre><p id="f31b" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> _6lAjh </strong>'æ˜¯Instagramä¸­ç”¨æˆ·åçš„ç±»åã€‚'<strong class="iv hi">find _ elements _ by _ CSS _ selector</strong>ä¸­å†™çš„è·¯å¾„æ˜¯Instagramä¸­spanæŒ‰é’®åŠ è½½æ›´å¤šè¯„è®ºçš„è·¯å¾„ã€‚æ‚¨å¯ä»¥é€šè¿‡å³é”®å•å‡»é¡µé¢å¹¶è¿›å…¥'<em class="jr">æ£€éªŒ</em>'é¡µé¢æ¥è¯•éªŒè¯¥è·¯å¾„ã€‚</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="f203" class="js jt hh ks b fi kw kx l ky kz">users_list = []<br/>users = driver.find_elements_by_class_name('_6lAjh')</span><span id="ace5" class="js jt hh ks b fi lb kx l ky kz">for user in users:<br/>    users_list.append(user.text)<br/>    <br/>i = 0<br/>texts_list = []</span><span id="72e2" class="js jt hh ks b fi lb kx l ky kz">texts = driver.find_elements_by_css_selector('#react-root &gt; section &gt; main &gt; div &gt; div &gt; article &gt; div.eo2As &gt; div.EtaWk &gt; ul &gt; ul &gt; div &gt; li &gt; div &gt; div &gt; div.C4VMK &gt; span')</span><span id="7e74" class="js jt hh ks b fi lb kx l ky kz">for txt in texts:<br/>    texts_list.append(txt.text)<br/>    i += 1<br/>    comments_count = len(users_list)<br/><br/>for i in range(1, comments_count):<br/>    user = users_list[i]<br/>    text = texts_list[i]<br/>    comments.append(users_list[i])<br/>    comments.append(texts_list[i])<br/>    print("User ",user)<br/>    print("Text ",text)<br/>    print()</span></pre><p id="be1f" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">ç»“æœåº”è¯¥æ˜¯è¿™æ ·çš„ï¼å‡ºäºéšç§è€ƒè™‘ï¼Œæˆ‘åˆ é™¤äº†è¿™é‡Œçš„ç”¨æˆ·åã€‚</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="7454" class="js jt hh ks b fi kw kx l ky kz">User  user1<br/>Text  ğŸ™Œ I love this ğŸ˜<br/><br/>User  user2<br/>Text  Fatherhood â¤ï¸</span></pre><p id="00b5" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">è°ƒç”¨commentsä¼šç»™ä½ æ‰€æœ‰çš„ç”¨æˆ·ååˆ—è¡¨å’Œä»–ä»¬çš„è¯„è®ºã€‚</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="f494" class="js jt hh ks b fi kw kx l ky kz">['user1',<br/> 'This post is everything â¤ï¸',<br/> 'user2',<br/> 'Kids r adorable']</span></pre><h2 id="c8d1" class="js jt hh bd ju jv jw jx jy jz ka kb kc je kd ke kf ji kg kh ki jm kj kk kl km bi translated">4.ä¸ºæ¨¡å‹è®­ç»ƒåˆ¶ä½œå¥½çœ‹çš„CSVæ–‡ä»¶</h2><p id="c70c" class="pw-post-body-paragraph it iu hh iv b iw lc iy iz ja ld jc jd je le jg jh ji lf jk jl jm lg jo jp jq ha bi translated">æˆ‘æ„Ÿå…´è¶£çš„æ˜¯åˆ†ç¦»æ‰€æœ‰çš„ç”¨æˆ·åå’Œä»–ä»¬çš„è¯„è®ºï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦çš„é€šå¸¸æ˜¯æ–‡æœ¬ï¼Œè€Œä¸æ˜¯ç”¨æˆ·åã€‚å› æ­¤ï¼Œæˆ‘å°†åˆ›å»ºä¸€ä¸ªCSVæ–‡ä»¶ï¼Œåœ¨â€œç”¨æˆ·â€åˆ—ä¸­åŒ…å«æ‰€æœ‰å¸æˆ·ï¼Œåœ¨â€œæ–‡æœ¬â€åˆ—ä¸­åŒ…å«ç›¸åº”çš„è¯„è®ºã€‚</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="7e45" class="js jt hh ks b fi kw kx l ky kz">rows = []<br/>for user, text in zip(comments[::2], comments[1::2]):<br/>    print(user, text)<br/>    rows.append([user, text])</span><span id="f430" class="js jt hh ks b fi lb kx l ky kz">fields = ["User", "Text"]<br/>filename = "cleanfile.csv"<br/>with open(filename, 'w',  encoding='utf-8', newline='') as csvfile: <br/>    csvwriter = csv.writer(csvfile) <br/>    csvwriter.writerow(fields) <br/>    csvwriter.writerows(rows)<br/></span><span id="5406" class="js jt hh ks b fi lb kx l ky kz">df = pd.read_csv(r"path to your filename")<br/>print(df)</span></pre><p id="02f3" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">åªæ˜¯æé†’ä¸€ä¸‹ï¼Œåˆ«å¿˜äº†æ”¾ã€‚csvåœ¨ä½ çš„è·¯å¾„çš„æœ«ç«¯åˆ°ä½ çš„æ–‡ä»¶åï¼</p><p id="ff47" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">ç»“æœæ˜¯ä¸€ä¸ªå¹²å‡€çš„æ•°æ®å¸§:</p><pre class="kn ko kp kq fd kr ks kt ku aw kv bi"><span id="2564" class="js jt hh ks b fi kw kx l ky kz">     User                Text<br/>0  user100         I love you Kim<br/>1  user200         Causal nothing, it's called wanting attention<br/>2  user300         This women needs mental health this is just wr...</span></pre><p id="1e34" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œæœ‰ä¸€äº›åˆ»è–„çš„è¯„è®ºâ€¦ <br/>æˆ‘å®é™…ä¸Šå†™äº†æˆ‘çš„ç¡•å£«è®ºæ–‡ï¼Œå…³äºæ£€æµ‹ç½‘ç»œæ¬ºå‡Œçš„è¯„è®ºï¼Œè¿™äº›è¯„è®ºä¸“é—¨é’ˆå¯¹ä½¿ç”¨æ·±åº¦å­¦ä¹ çš„å¥³æ€§ï¼æ— è®ºå¦‚ä½•ï¼Œè¿™æ˜¯ä½ åˆ›å»ºè‡ªå·±çš„Instagramè¯„è®ºæŠ“å–å·¥å…·çš„æ—¶å€™äº†ã€‚</p><p id="c98e" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">è½»æ¾ç‚¹ã€‚</p></div></div>    
</body>
</html>