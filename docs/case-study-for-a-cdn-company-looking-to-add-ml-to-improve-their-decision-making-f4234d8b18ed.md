# 一家 CDN 公司的案例研究，该公司希望添加 ML 解决方案来改善其决策

> 原文：<https://medium.com/mlearning-ai/case-study-for-a-cdn-company-looking-to-add-ml-to-improve-their-decision-making-f4234d8b18ed?source=collection_archive---------9----------------------->

> 一家 CDN 公司的基线模型案例研究，该公司希望添加 ML 来改善其决策

*这是我对一家 CDN 公司的面试测试评估*

**任务描述**我们希望开发一款工具，通过在数据中心放置额外的服务器来帮助我们扩展网络，从而最大程度地改善我们的全球延迟性能。

可用数据点:

*   数据中心的位置
*   用户等待时间信息等

目标应该是解决方案需要尽可能少的功能集

**预期成果**

*   概念
*   履行

# 概念:

我提出了两个概念来实现这一目标，最终结果是预测在数据中心增加额外的服务器是否会改善全局延迟性能

# 聚类算法:

**提出解决方案:**

1.  对于这个概念，我们将使用集群算法来设计一个服务，通过在数据中心放置额外的服务器来扩展网络。聚类算法将根据用户到数据中心的延迟将用户分组到不同的群集中。然后，可以根据这些集群的中心来选择额外服务器的位置，确保将它们放置在靠近高延迟用户的位置。

**步骤:**

首先，我会收集有关全球数据中心位置的数据，以及每个数据中心的用户平均延迟时间。这些数据可以表示为一个矩阵，其中行代表用户，列代表数据中心。

接下来，我将对数据矩阵应用 k-means 或分层聚类等聚类算法，根据用户对数据中心的平均延迟对用户进行分组。这将帮助我们识别哪些集群具有高延迟

一旦确定了集群，我们将计算每个集群中的数据点(用户)数量，并选择数据点数量最多的集群。该集群将代表最受用户欢迎的数据中心。我们可以使用用户数量最多的集群来确定额外服务器的最佳位置。例如，如果一群用户对某个特定的数据中心有很高的延迟，我们可以在该数据中心放置一台新的服务器来改善这些用户的延迟。

**自变量:**

这种方法的一个好处是它可以自动执行手动方法，并帮助确定新服务器的新的潜在位置。其次，这种方法可以处理延迟的动态变化，例如，如果集群 A 中的用户 A 的延迟发生变化，这种解决方案将为用户 A 更新最佳数据中心或集群。这使其成为一种有用的工具，可以随着时间的推移改善全局延迟性能。

## 履行

**工具:**

*   来自 sklearn 的 Kmeans
*   距离 sklearn 的欧氏距离
*   Numpy
*   熊猫
*   部署、协调和监控(Flask、Docker、AWS Lambda 无服务器、Gantry、Prefect)

**数据集样本/模式:**

*   数据中心的服务器数量
*   每个数据中心的用户平均延迟时间

首先，我将使用`**elbow technique**`来获得集群的 K 个质心的最佳数量，然后我将使用`**KMeans**`类使用现有服务器的位置来初始化集群中心。然后，我会使用`**fit_predict**`方法，根据每个用户对数据中心的延迟将他们分配到一个集群。

接下来，我们将编写一个迭代，将具有高延迟性能和高用户延迟的数据中心确定为额外服务器的潜在位置。

最后，对这些位置的服务器放置进行优先级排序，以提高全局延迟性能，并监控额外的服务器放置对全局延迟性能的影响，并根据需要调整放置。

> 这些指标将提供群集算法性能的全面情况，使我们能够评估它将用户分组到不同的群集以及选择额外服务器位置的能力。

**剪影系数:**对于这个评估，我们将使用`sklearn.metrics.silhouette_score`度量来衡量算法产生的聚类的紧密度和分离度。较高的轮廓系数表明聚类轮廓分明且彼此不同。 **Calinski-Harabasz 指数:**在本次评估中，我们将使用`**sklearn.metrics.calinski_harabasz_score**`指标来衡量聚类的紧密度和分离度，同时考虑聚类的数量和数据集的大小。较高的 Calinski-Harabasz 指数表明聚类是轮廓分明的并且彼此不同。 **Fowlkes-Mallows 评分:**在本次评估中，我们将使用* *`sklearn.metrics.fowlkes_mallows_score`* *这一指标衡量样本的实际类别分配。它计算成对精度和召回的几何平均值。

# 最终结果:

使用聚类方法(如 k-means)来解决提高全局延迟性能的问题的最终结果将是确定额外服务器的潜在位置。通过根据延迟性能和用户数据将数据中心分组到集群中，我们可以确定最有可能改善全局延迟性能的数据中心。

# 回归方法

**提出解决方案:**

开发服务以实现我们的目标的一个可行方法是使用回归策略。该策略将使用各数据中心的位置、用户到各中心的平均延迟、数据中心的用户数量、各数据中心的服务器数量以及用户到各数据中心的平均距离等信息。

接下来，我们可以使用回归分析来确定与全局延迟性能最相关的因素，然后我们将使用该数据来训练回归模型，该模型可以预测向数据中心添加额外的服务器对全局延迟性能的影响。该模型将数据中心的当前服务器数量、用户离数据中心的平均距离、数据中心的用户数量以及用户到数据中心的平均延迟作为输入。该模型的输出将有助于确定应该向每个中心添加多少服务器，以便最大限度地提高全局延迟性能。然后，该结果可用于指导网络中额外服务器的部署，从而改善整体全局延迟性能。

**步骤:**

收集网络当前性能的数据，包括每个数据中心的位置、数据中心的用户数量、用户到每个中心的平均延迟、每个中心的服务器数量以及用户到每个中心的平均距离。

1.  使用回归分析来确定与全局延迟性能最相关的因素。
2.  使用此数据来训练回归模型，该模型可以预测向数据中心添加额外的服务器对全局延迟性能的影响。
3.  使用训练好的模型来确定哪些数据中心将从额外的服务器中受益最多，以及应该向每个中心添加多少台服务器，以便最大限度地提高全局延迟性能。
4.  在确定的数据中心部署额外的服务器。
5.  部署额外的服务器后，监控网络的性能，并使用此信息来微调模型并提高其准确性。
6.  根据需要重复上述步骤，以不断提高全局延迟性能。

**论据:**

首先，这种方法可以处理不同变量之间的复杂关系。例如，数据中心的服务器数量和全局延迟性能之间的关系可能不是简单的线性关系。相反，可能有多个因素影响这种关系，例如用户与数据中心的距离、用户到数据中心的平均延迟以及数据中心的用户数量。通过使用回归模型，我们可以考虑所有这些因素，并准确预测向数据中心添加服务器对全局延迟性能的影响。

另一个例子，假设我们有一个数据中心，有 100 台服务器，平均用户延迟为 50 毫秒，平均用户距离为 1000 公里。如果我们向该数据中心添加 10 台额外的服务器，我们的回归模型可能预测全局延迟性能将提高 3%。这种预测可以帮助我们决定添加额外的服务器是否值得，以及我们应该添加多少服务器来最大限度地提高全局延迟性能。

第二，回归模型是灵活的，可以很容易地随着新数据的出现而更新。随着网络性能随时间的变化，我们可以使用新数据来微调模型并提高其准确性。这使我们能够不断改进该工具，并使其与网络性能的最新信息保持同步。

# 实施:

**工具:**

*   Sklearn
*   线性回归和随机梯度下降
*   Numpy
*   熊猫
*   部署、协调和监控(Flask、Docker、AWSEc2、Gantry、Prefect)

**数据集样本/模式:**

*   数据中心的位置(纬度和经度坐标)
*   每个数据中心的服务器数量
*   用户离每个数据中心的平均距离(英里或公里)
*   每个数据中心的用户数量
*   每个数据中心的用户平均延迟时间(毫秒)

**伪代码:**

首先，我将对数据进行预处理，以清理和准备用于分析的数据。这可能包括使用`df.dropna()`删除缺失或不相关的数据，以及通过使用`df.astype(int)`将数据类型转换为 int 来标准化数值

第二，我会使用统计方法，如`scipy.stats.pearsonr`皮尔森和`scipy.stats.spearmanr`* * * *来确定与全局延迟性能最密切相关的因素。

然后，一旦确定了这些因素，我将使用`sklearn.model_selection.train_test_split`数据集进行训练和测试，然后，我将使用`****sklearn.linear_model.LinearRegression****`和`sklearn.linear_model.SGDRegressor fit()`训练模型，根据确定的因素预测全局延迟性能，并使用`sklearn.linear_model.SGDRegressor predict()`预测全局延迟性能。

最后，使用`seaborn.lineplot`来可视化结果，并确定在添加额外服务器时可能对全局延迟性能产生最大影响的数据中心。

> ***多余:***
> 
> 使用经过训练的模型和附加模拟来确定附加服务器的最佳数量和位置，以最大限度地提高全局延迟性能。随着时间的推移，跟踪这些额外服务器的性能，以确保它们在全局延迟性能方面提供了所需的改进。

# 模型评估:

我会使用平均绝对误差(MAE)和均方误差(MSE)指标来评估模型的性能。MAE 测量预测值和实际值之间的平均差值，而 MSE 测量预测值和实际值之间的平均平方差。

**最终结果:**

实施此解决方案的最终结果将是一个回归模型，用于确定在添加更多服务器时可能对全局延迟性能产生最大影响的数据中心。该模型将使我们能够做出明智的决策，决定在何处放置额外的服务器以获得最大的影响，并跟踪这些服务器随时间推移的性能，以确保它们在全局延迟性能方面提供所需的改进。最终，这将改善我们网络的全局延迟性能，为我们的客户提供更好的用户体验。

# 产品评估:

为了评估模型在生产中的产品性能，我将使用产品评估指标的组合。这可能包括如下指标:

*   用户满意度:这可以通过调查或其他形式的用户反馈来衡量，以评估他们对模型的总体满意度及其对全局延迟性能的影响。
*   服务器利用率:这可以通过跟踪使用中的服务器数量及其利用率水平来衡量，以评估该工具是否有效地识别将从额外的服务器中受益最多的数据中心。
*   全局延迟性能:这可以通过跟踪模型实施前后的平均全局延迟性能来衡量，以评估模型是否实现了其对全局延迟的预期影响。
*   投资回报:这可以通过比较实施模型和添加额外服务器的成本与改善全局延迟性能和用户满意度方面的收益来计算。

[](/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb) [## Mlearning.ai 提交建议

### 如何成为 Mlearning.ai 上的作家

medium.com](/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb)