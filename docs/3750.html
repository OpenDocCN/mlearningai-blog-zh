<html>
<head>
<title>Processing Speech to text in batch using logic apps and Azure Cognitive Speech service</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用logic应用程序和Azure认知语音服务批量处理语音到文本</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/processing-speech-to-text-in-batch-using-logic-apps-and-azure-cognitive-speech-service-540f9ae88b25?source=collection_archive---------7-----------------------#2022-10-15">https://medium.com/mlearning-ai/processing-speech-to-text-in-batch-using-logic-apps-and-azure-cognitive-speech-service-540f9ae88b25?source=collection_archive---------7-----------------------#2022-10-15</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><h1 id="7882" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">批处理音频到文本的转录</h1><h1 id="9db1" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">要求</h1><ul class=""><li id="0e3b" class="jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt bi translated">Azure存储</li><li id="d595" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">样本音频文件</li><li id="9c08" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">Azure认知服务—语音转文本</li><li id="fae2" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">带读取和列表的音频文件容器SAS密钥</li><li id="e0ba" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">用于存储json输出的输出容器，在SAS键中具有读、写和列表权限</li><li id="f50a" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">将样本音频文件上传到容器</li></ul><figure class="ka kb kc kd fd ke er es paragraph-image"><div class="er es jz"><img src="../Images/c554f08f4779a54e058572f0f13a8c9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/0*u0edkPi_BfEclHIQ.jpg"/></div></figure><ul class=""><li id="3740" class="jc jd hh je b jf kh jh ki jj kj jl kk jn kl jp jq jr js jt bi translated">这里是输入文件在容器中的时间</li></ul><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es km"><img src="../Images/bdce8bd7f1998e792847f0b882ea18a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OgsZN4FHEhrr87Pb.jpg"/></div></div></figure><pre class="ka kb kc kd fd kr ks kt ku aw kv bi"><span id="2e48" class="kw if hh ks b fi kx ky l kz la">Note: create the sas key for input container with read and list permission, otherwise you will get invalid container URI error</span></pre><ul class=""><li id="9fd2" class="jc jd hh je b jf kh jh ki jj kj jl kk jn kl jp jq jr js jt bi translated">创建一个逻辑应用程序来处理音频文件</li><li id="624b" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">当任何新文件添加到容器中时，使用Blob连接器触发逻辑应用程序</li><li id="701b" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">这是整个过程</li></ul><figure class="ka kb kc kd fd ke er es paragraph-image"><div class="er es lb"><img src="../Images/9d171ac7cf8affa83c17cd941380cc44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/0*dMs9JWBOEjoX7qNz.jpg"/></div></figure><ul class=""><li id="b82a" class="jc jd hh je b jf kh jh ki jj kj jl kk jn kl jp jq jr js jt bi translated">现在用连接字符串配置blob存储帐户</li><li id="d68e" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">还要指定输入容器</li></ul><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es lc"><img src="../Images/51ef4740f301556a1bbfd7b198ee115e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xnsCY8NKVJQ8TwuA.jpg"/></div></div></figure><ul class=""><li id="62d0" class="jc jd hh je b jf kh jh ki jj kj jl kk jn kl jp jq jr js jt bi translated">现在我们需要引入HTTP actvitity来调用语音转文本API</li></ul><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ld"><img src="../Images/3fd07277d65d8f362e199a802df7f73b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*paWseawMBjroOBsW.jpg"/></div></div></figure><ul class=""><li id="8267" class="jc jd hh je b jf kh jh ki jj kj jl kk jn kl jp jq jr js jt bi translated">将方法用作帖子</li><li id="1674" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">URI:<a class="ae le" href="https://.api.cognitive.microsoft.com/speechtotext/v3.0/transcriptions" rel="noopener ugc nofollow" target="_blank">https://. API . cognitive . Microsoft . com/speechtotext/v 3.0/transcriptions</a></li><li id="5dae" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">现在是标题</li><li id="fbae" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">Ocp-Apim-Subscription-Key:来自认知服务帐户的密钥</li><li id="8f98" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">内容类型:应用程序/json</li><li id="1ac5" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">现在身体</li></ul><pre class="ka kb kc kd fd kr ks kt ku aw kv bi"><span id="1b21" class="kw if hh ks b fi kx ky l kz la">{<br/>  "contentContainerUrl": "https://adbstore.blob.core.windows.net/callcenterinput?sp=rl&amp;st=2022xxxxxxxxxxxxxxxxxx",<br/>  "displayName": "audiobatch1",<br/>  "locale": "en-US",<br/>  "model": null,<br/>  "properties": {<br/>    "destinationContainerUrl": "https://storagename.blob.core.windows.net/callcenterbatchtext?sp=rwl&amp;st=2022xxxxxxxxxxxxxxxxxxxxxx",<br/>    "wordLevelTimestampsEnabled": true<br/>  }<br/>}</span></pre><ul class=""><li id="f4a7" class="jc jd hh je b jf kh jh ki jj kj jl kk jn kl jp jq jr js jt bi translated">我提供存储帐户来存储输出的json文件</li><li id="912d" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">在这种情况下，我们可以处理大量文件</li><li id="d9bf" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">接下来是解析JSON输出</li></ul><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es lf"><img src="../Images/56239a0e2a92e73301c850f519f50369.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HZbfL97L8JW36JRc.jpg"/></div></div></figure><ul class=""><li id="9a57" class="jc jd hh je b jf kh jh ki jj kj jl kk jn kl jp jq jr js jt bi translated">确保选择上方的几何体作为输入</li><li id="31de" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">这里要解析的json是模式</li></ul><pre class="ka kb kc kd fd kr ks kt ku aw kv bi"><span id="8ba3" class="kw if hh ks b fi kx ky l kz la">{<br/>    "properties": {<br/>        "createdDateTime": {<br/>            "type": "string"<br/>        },<br/>        "displayName": {<br/>            "type": "string"<br/>        },<br/>        "lastActionDateTime": {<br/>            "type": "string"<br/>        },<br/>        "links": {<br/>            "properties": {<br/>                "files": {<br/>                    "type": "string"<br/>                }<br/>            },<br/>            "type": "object"<br/>        },<br/>        "locale": {<br/>            "type": "string"<br/>        },<br/>        "model": {<br/>            "properties": {<br/>                "self": {<br/>                    "type": "string"<br/>                }<br/>            },<br/>            "type": "object"<br/>        },<br/>        "properties": {<br/>            "properties": {<br/>                "channels": {<br/>                    "items": {<br/>                        "type": "integer"<br/>                    },<br/>                    "type": "array"<br/>                },<br/>                "diarizationEnabled": {<br/>                    "type": "boolean"<br/>                },<br/>                "profanityFilterMode": {<br/>                    "type": "string"<br/>                },<br/>                "punctuationMode": {<br/>                    "type": "string"<br/>                },<br/>                "wordLevelTimestampsEnabled": {<br/>                    "type": "boolean"<br/>                }<br/>            },<br/>            "type": "object"<br/>        },<br/>        "self": {<br/>            "type": "string"<br/>        },<br/>        "status": {<br/>            "type": "string"<br/>        }<br/>    },<br/>    "type": "object"<br/>}</span></pre><ul class=""><li id="9583" class="jc jd hh je b jf kh jh ki jj kj jl kk jn kl jp jq jr js jt bi translated">现在使用转录api来获取转录的状态</li><li id="dfa9" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">使用解析JSON输出中的解析输出第二个自身变量</li><li id="ca6b" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">提供订阅密钥</li></ul><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es lg"><img src="../Images/78fb0a8280fefb809986e6d10afb5440.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OwZw8-j9B0cJ_C-o.jpg"/></div></div></figure><ul class=""><li id="0529" class="jc jd hh je b jf kh jh ki jj kj jl kk jn kl jp jq jr js jt bi translated">上面的输出应该正在运行。如果失败，检查错误消息</li></ul><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es lg"><img src="../Images/247265e0f335bec7813d81035b6d0765.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JwWEjK6zBg0HL5jD.jpg"/></div></div></figure><ul class=""><li id="751c" class="jc jd hh je b jf kh jh ki jj kj jl kk jn kl jp jq jr js jt bi translated">现在检查目标容器中的输出</li></ul><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es lh"><img src="../Images/1a806f6b7398323452d7b0a1aa375940.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2W8Snm4-kzvWL4Ye.jpg"/></div></div></figure><p id="b57b" class="pw-post-body-paragraph li lj hh je b jf kh lk ll jh ki lm ln jj lo lp lq jl lr ls lt jn lu lv lw jp ha bi translated">原文位于—【github.com】samples 2022/speech batch . MD</p><div class="lx ly ez fb lz ma"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="mb ab dw"><div class="mc ab md cl cj me"><h2 class="bd hi fi z dy mf ea eb mg ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="mh l"><h3 class="bd b fi z dy mf ea eb mg ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="mi l"><p class="bd b fp z dy mf ea eb mg ed ef dx translated">medium.com</p></div></div><div class="mj l"><div class="mk l ml mm mn mj mo kf ma"/></div></div></a></div></div></div>    
</body>
</html>