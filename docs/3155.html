<html>
<head>
<title>Careful Who You Colab With:</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">小心你的合作伙伴:</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/careful-who-you-colab-with-fa8001f933e7?source=collection_archive---------1-----------------------#2022-07-27">https://medium.com/mlearning-ai/careful-who-you-colab-with-fa8001f933e7?source=collection_archive---------1-----------------------#2022-07-27</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/0fddf21c1f03fbb043cb62fbfc557f38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x10eO9EeY85q7ELgzLYmjw.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Abusing Google Colaboratory</figcaption></figure><div class=""/><div class=""><h2 id="b191" class="pw-subtitle-paragraph it hv hw bd b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk dx translated">滥用谷歌联合实验室</h2></div><p id="1e77" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">想象一下，作为一名机器学习(ML)研究人员、数据分析师或教育家，使用Google Colaboratory与同事和/或社区成员共享您的代码。突然你发现你的Google Drive是空的，你的一些私人研究正在被公开。你问自己，“这是怎么发生的？”“我总是小心翼翼，不要中了钓鱼邮件的圈套，”你宣称。</p><p id="5c6d" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">在本文中，我将通过Google联合实验室介绍一种新的威胁媒介，这种威胁媒介会将您的Google Drive数据置于风险之中。通过分享这项研究，我希望ML社区将意识到潜在的威胁，并在合作和分享他们的项目时实践良好的安全性。</p></div><div class="ab cl kh ki go kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="ha hb hc hd he"><h1 id="027b" class="ko kp hw bd kq kr ks kt ku kv kw kx ky jc kz jd la jf lb jg lc ji ld jj le lf bi translated">这项研究是从哪里开始的？</h1><p id="776d" class="pw-post-body-paragraph jl jm hw jn b jo lg ix jq jr lh ja jt ju li jw jx jy lj ka kb kc lk ke kf kg ha bi translated">几个月前，我玩了几个人工智能音乐工具，包括一个名为<a class="ae ll" href="https://openai.com/blog/jukebox/" rel="noopener ugc nofollow" target="_blank">点唱机</a>的<a class="ae ll" href="https://openai.com/" rel="noopener ugc nofollow" target="_blank"> OpenAI </a>项目。这个平台允许用户通过输入一首歌曲和用户希望的任何歌词来训练人工智能。人工智能将创建一首歌曲，歌手根据你提供的歌词演唱。我想让猫王用猫王“多疑的头脑”的风格演唱“混搭爵士”的“宝贝回来了”</p><figure class="ln lo lp lq fd hj er es paragraph-image"><div class="er es lm"><img src="../Images/83f317a5c3809dab1712236426489f52.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*nYlyYnCILk23avlOjILSTg.jpeg"/></div><figcaption class="hq hr et er es hs ht bd b be z dx">Elvis</figcaption></figure><figure class="ln lo lp lq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lr"><img src="../Images/4a696935e863ed0acc9542b6b6081529.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XlcUFYT56kmqFXONwRu1gg.jpeg"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Sir Mix-A-Lot Video “Baby Got Back”</figcaption></figure><p id="c7b6" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">我已经在<a class="ae ll" href="https://dadabots.com/" rel="noopener ugc nofollow" target="_blank">dada bot</a><a class="ae ll" href="https://discord.gg/mw9XfxMB" rel="noopener ugc nofollow" target="_blank">Discord</a>服务器上挂了一段时间了。我跳进了OpenAI Jukebox频道，在那里，一位用户<a class="ae ll" href="https://twitter.com/broccaloo" rel="noopener ugc nofollow" target="_blank">Broca loo，</a>帮我调整了他们与我分享的一台谷歌Colab笔记本电脑中的一些配置。</p><figure class="ln lo lp lq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ls"><img src="../Images/7ba0a7c242bc31b15d4b008b18a5cac5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tk0rBtXqiVkGv3XuTXdpqw.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Shared Colab Notebook Link</figcaption></figure><p id="8b85" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">我打开Colab笔记本，像往常一样开始在Colab中安装我的Google Drive。当弹出以下警告时，我突然想到…</p><figure class="ln lo lp lq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lt"><img src="../Images/c97a59909b473b70b52796f926e37b6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4IB5WYZlDL26ed0IgX3_mQ.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Google Drive Mount Warning</figcaption></figure><p id="0aaa" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">"在允许这种访问之前，一定要检查笔记本代码."我沉思着，“在此之前，我有多少次不假思索地运行Colab笔记本？”"还有多少人完全忽视了这个警告？"我质疑道。</p><p id="6839" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">这是这项安全研究开始的地方。</p></div><div class="ab cl kh ki go kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="ha hb hc hd he"><h1 id="7227" class="ko kp hw bd kq kr ks kt ku kv kw kx ky jc kz jd la jf lb jg lc ji ld jj le lf bi translated">什么是谷歌联合实验室？</h1><p id="b81a" class="pw-post-body-paragraph jl jm hw jn b jo lg ix jq jr lh ja jt ju li jw jx jy lj ka kb kc lk ke kf kg ha bi translated"><em class="lu">如果你已经对Colab有了很好的了解，可以跳到下一节。</em></p><p id="b11c" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">我会让谷歌为我们定义Colab:</p><blockquote class="lv lw lx"><p id="f2aa" class="jl jm lu jn b jo jp ix jq jr js ja jt ly jv jw jx lz jz ka kb ma kd ke kf kg ha bi translated">Colaboratory，简称“Colab”，是谷歌研究院的产品。Colab允许任何人通过浏览器编写和执行任意python代码，特别适合机器学习、数据分析和教育。从技术上来说，Colab是一种托管的Jupyter笔记本服务，无需设置即可使用，同时提供对包括GPU在内的计算资源的免费访问。</p><p id="455f" class="jl jm lu jn b jo jp ix jq jr js ja jt ly jv jw jx lz jz ka kb ma kd ke kf kg ha bi translated">Colab资源不是有保证的，也不是无限的，使用限制有时会波动。</p><p id="420e" class="jl jm lu jn b jo jp ix jq jr js ja jt ly jv jw jx lz jz ka kb ma kd ke kf kg ha bi translated">对更可靠地访问更好的资源感兴趣的用户可能会对<a class="ae ll" href="http://colab.research.google.com/signup?utm_source=faq&amp;utm_medium=link&amp;utm_campaign=seems_too_good" rel="noopener ugc nofollow" target="_blank"> Colab Pro </a>感兴趣。</p><p id="a3df" class="jl jm lu jn b jo jp ix jq jr js ja jt ly jv jw jx lz jz ka kb ma kd ke kf kg ha bi translated">【Jupyter和Colab有什么区别？ l</p><p id="f1a5" class="jl jm lu jn b jo jp ix jq jr js ja jt ly jv jw jx lz jz ka kb ma kd ke kf kg ha bi translated"><a class="ae ll" href="https://jupyter.org/" rel="noopener ugc nofollow" target="_blank"> Jupyter </a>是Colab所基于的开源项目。Colab允许你使用Jupyter笔记本并与其他人分享，而无需下载、安装或运行任何东西。</p></blockquote><p id="ad56" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">在Colab中，用户可以在他们自己的Jupyter笔记本中编写Python代码，并存储在他们的Google Drives中。用户将这些代码写在笔记本的Jupyter单元格中。用户通过按下<code class="du mb mc md me b">excute</code>按钮执行这些单元格中的代码。当用户打开或启动一个笔记本时，它连接到Colab运行时，collab在Linux虚拟机(VM)中为项目分配GPU和其他资源。</p><figure class="ln lo lp lq fd hj er es paragraph-image"><div class="er es mf"><img src="../Images/d092bfc63a3602d44d57219f14906031.png" data-original-src="https://miro.medium.com/v2/resize:fit:628/format:webp/1*GYy8o0yP8Ge9GSZ4oOiafg.png"/></div><figcaption class="hq hr et er es hs ht bd b be z dx">Colab Runtime Connected to the Notebook</figcaption></figure><blockquote class="lv lw lx"><p id="d114" class="jl jm lu jn b jo jp ix jq jr js ja jt ly jv jw jx lz jz ka kb ma kd ke kf kg ha bi translated">我的代码在哪里执行？如果我关闭浏览器窗口，我的执行状态会怎样？</p><p id="2f87" class="jl jm lu jn b jo jp ix jq jr js ja jt ly jv jw jx lz jz ka kb ma kd ke kf kg ha bi translated">代码在您帐户的专用虚拟机中执行。虚拟机在空闲一段时间后会被删除，并且有一个由Colab服务(Google Colab)强制执行的最大生命周期。</p></blockquote><p id="96f6" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">用户也可以将他们的Google Drive安装到他们的运行时中，以访问持久存储。</p><figure class="ln lo lp lq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mg"><img src="../Images/75c190152580f911dd3aa6d2b4f894c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nfZts7jYCJCbjpaU9N_eCQ.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Jupyter Notebook Cell for mounting Google Drive</figcaption></figure><p id="506c" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">用户还可以导入Python库，安装Pip依赖项，并通过笔记本代码将Git存储库克隆到他们的运行时环境中。</p><figure class="ln lo lp lq fd hj er es paragraph-image"><div class="er es mh"><img src="../Images/a3dd8b785b7d422fc58e77910efa8c48.png" data-original-src="https://miro.medium.com/v2/resize:fit:492/format:webp/1*ErNhxPIvFFoVpdbKZXQKVA.png"/></div><figcaption class="hq hr et er es hs ht bd b be z dx">Jupyter Cell pip</figcaption></figure><figure class="ln lo lp lq fd hj er es paragraph-image"><div class="er es mi"><img src="../Images/e078d01627ba5fbbbd5a2c7205cccc3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*49Qubs9cpmmdOIwAar2BOg.png"/></div><figcaption class="hq hr et er es hs ht bd b be z dx">Jupyter Cell Import Python Library' time.'</figcaption></figure><figure class="ln lo lp lq fd hj er es paragraph-image"><div class="er es mj"><img src="../Images/f096dc4ad2a7fbb0cdf66bda3f156e3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*NIbtBqljMDFSWebZfTOA9Q.png"/></div><figcaption class="hq hr et er es hs ht bd b be z dx">Jupyter cell cloning a git repository</figcaption></figure><p id="c7f2" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">一旦连接到Colab运行时，用户还可以访问终端，在那里他们可以运行shell命令并导航他们的Google Drive文件系统(如果安装的话)。</p><figure class="ln lo lp lq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mk"><img src="../Images/54339f10426ff0af409fdf6f812cce45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5iEpXkM2J2EbAyBzbSiGaw.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Google Colab Terminal</figcaption></figure><p id="3dfb" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">Jupyter Notebook为常见的*nix命令提供了几个系统别名或命令快捷方式，如<code class="du mb mc md me b">ls</code>、<code class="du mb mc md me b">cat</code>、<code class="du mb mc md me b">ps</code>、<code class="du mb mc md me b">kill</code>等。要使用它们，用户需要在命令前面加上一个感叹号:<code class="du mb mc md me b">!ls !cat !ps !kill</code></p><figure class="ln lo lp lq fd hj er es paragraph-image"><div class="er es ml"><img src="../Images/1a04ebb0849ed239d6dfe5bf9bf47bc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*A5gNV_Klfx3V2-0CC8e_Jw.png"/></div><figcaption class="hq hr et er es hs ht bd b be z dx">Jupyter System Aliases</figcaption></figure></div><div class="ab cl kh ki go kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="ha hb hc hd he"><h1 id="9cb2" class="ko kp hw bd kq kr ks kt ku kv kw kx ky jc kz jd la jf lb jg lc ji ld jj le lf bi translated">这可能会被滥用吗？</h1><h2 id="1fab" class="mm kp hw bd kq mn mo mp ku mq mr ms ky ju mt mu la jy mv mw lc kc mx my le mz bi translated">网络钓鱼</h2><p id="31de" class="pw-post-body-paragraph jl jm hw jn b jo lg ix jq jr lh ja jt ju li jw jx jy lj ka kb kc lk ke kf kg ha bi translated">对手可以通过向ML研究人员或其他目标发送包含恶意Colab笔记本链接的电子邮件来发起网络钓鱼活动。</p><p id="3e2f" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">对手可能会在AI社区Discord服务器上发布恶意Colab笔记本的链接。</p><h2 id="625a" class="mm kp hw bd kq mn mo mp ku mq mr ms ky ju mt mu la jy mv mw lc kc mx my le mz bi translated">Google Drive数据</h2><p id="43db" class="pw-post-body-paragraph jl jm hw jn b jo lg ix jq jr lh ja jt ju li jw jx jy lj ka kb kc lk ke kf kg ha bi translated">假设对手与目标用户共享一个包含恶意代码的Colab笔记本，用户选择在执行之前不检查每一行代码。在这种情况下，用户正在执行恶意代码。如果用户安装了他们的Google Drive，他们就有可能将访问他们的驱动器的权限交给了对手。对手现在可以渗透、破坏或操纵受害者的Google Drive数据。</p><p id="ba69" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">为了清楚地了解如果对手成功访问受害者的Google Drive，他们可能会访问什么，下面是同意安装其Google Drive时授予的权限:</p><ul class=""><li id="5787" class="na nb hw jn b jo jp jr js ju nc jy nd kc ne kg nf ng nh ni bi translated">查看、编辑、创建和删除您所有的Google Drive文件</li><li id="85cc" class="na nb hw jn b jo nj jr nk ju nl jy nm kc nn kg nf ng nh ni bi translated">查看Google相册中的照片、视频和相册</li><li id="afd4" class="na nb hw jn b jo nj jr nk ju nl jy nm kc nn kg nf ng nh ni bi translated">检索移动客户端配置和实验</li><li id="0409" class="na nb hw jn b jo nj jr nk ju nl jy nm kc nn kg nf ng nh ni bi translated">查看Google人物信息，如个人资料和联系人</li><li id="56ea" class="na nb hw jn b jo nj jr nk ju nl jy nm kc nn kg nf ng nh ni bi translated">查看、编辑、创建和删除您的任何Google Drive文档</li></ul><figure class="ln lo lp lq fd hj er es paragraph-image"><div class="er es no"><img src="../Images/7d1c3b0d3acf09e08bf71b3a76f5ac25.png" data-original-src="https://miro.medium.com/v2/resize:fit:966/format:webp/1*n44NksiPb9SNZHTJ6Q9Xfw.png"/></div><figcaption class="hq hr et er es hs ht bd b be z dx">Google Drive Permissions Granted</figcaption></figure><h2 id="d7af" class="mm kp hw bd kq mn mo mp ku mq mr ms ky ju mt mu la jy mv mw lc kc mx my le mz bi translated">谢尔兹</h2><p id="c373" class="pw-post-body-paragraph jl jm hw jn b jo lg ix jq jr lh ja jt ju li jw jx jy lj ka kb kc lk ke kf kg ha bi translated">恶意代码可能包含一个反向外壳，建立与对手的命令和控制(C2)连接。</p><h2 id="31a4" class="mm kp hw bd kq mn mo mp ku mq mr ms ky ju mt mu la jy mv mw lc kc mx my le mz bi translated">战术、技术和程序(TTP)</h2><p id="198d" class="pw-post-body-paragraph jl jm hw jn b jo lg ix jq jr lh ja jt ju li jw jx jy lj ka kb kc lk ke kf kg ha bi translated">我们如何将此活动映射到对手TTP？我们可以将它们映射到<a class="ae ll" href="https://atlas.mitre.org/" rel="noopener ugc nofollow" target="_blank"> MITRE ATLAS </a>(人工智能系统的对抗性威胁前景)框架。ATLAS是一个关于对手战术、技术和机器学习(ML)系统案例研究的知识库，基于真实世界的观察、ML red团队和安全小组的演示以及学术研究的可能状态。阿特拉斯是仿照<a class="ae ll" href="https://attack.mitre.org/" rel="noopener ugc nofollow" target="_blank">米特里ATT &amp; CK框架</a>设计的，它的战术和技术与ATT &amp; CK的相得益彰。</p><p id="c8a1" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">对于Jupyter笔记本的这种共享，我们可以将其映射到ATT &amp; CK框架上的<em class="lu">初始访问</em>策略和<em class="lu">网络钓鱼</em>技术下。这就是我们上面讨论的网络钓鱼邮件程序。我们也可以映射不一致的服务器链接，作为这种技术的一个过程。</p><p id="759e" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">相反，我们可以根据他们的<em class="lu"> ML供应链折衷</em>技术，将该程序映射到ATLAS框架中的<em class="lu">初始访问</em>策略。为此，我们可能需要添加一个子技术<em class="lu"> Jupyter笔记本共享</em>。</p><p id="2b65" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">将<em class="lu">执行</em>策略映射到ATLAS框架上的<em class="lu">用户执行</em>技术也是有意义的。</p><figure class="ln lo lp lq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es np"><img src="../Images/43da76c21ffceda7b5893da6a7f5e9e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kbb9Vtfidb8up9HXWVgQDQ.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">MITRE ATLAS</figcaption></figure><p id="f5de" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">对手在向他们的目标发送恶意内容时有一些选择。他们可能将恶意代码隐藏在Jupyter单元中，或者隐藏在他们的Jupyter笔记本克隆的Git存储库中。</p></div><div class="ab cl kh ki go kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="ha hb hc hd he"><h1 id="c951" class="ko kp hw bd kq kr ks kt ku kv kw kx ky jc kz jd la jf lb jg lc ji ld jj le lf bi translated">在Jupyter单元中隐藏恶意代码</h1><p id="d1c4" class="pw-post-body-paragraph jl jm hw jn b jo lg ix jq jr lh ja jt ju li jw jx jy lj ka kb kc lk ke kf kg ha bi translated">下面是显示Jupyter笔记本中代码的图片。两个笔记本都包含允许共享者访问受害者谷歌硬盘数据的代码。在第一幅图像中，如果用户知道要查找什么，他们应该相对容易看到恶意内容。他们可能还会意识到，这段代码可能不会完成用户期望的活动。</p><figure class="ln lo lp lq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es nq"><img src="../Images/f86dc22985acb1873837da31cf3ee289.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PT4K6hHlB4qWKZN_w-uJgw.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Easy to Spot Malicious Code</figcaption></figure><p id="e81a" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">下一张图片怎么样？用户可能不得不做大量的代码阅读来发现隐藏在多行ML代码中的恶意内容。请记住，这张图片只显示了完整代码的一小部分。</p><figure class="ln lo lp lq fd hj er es paragraph-image"><div class="er es nr"><img src="../Images/7ed78b5f281ac137f53a5687e448e9a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*tfcCxgdbMua-gqoG0JZhhQ.png"/></div><figcaption class="hq hr et er es hs ht bd b be z dx">Not-so-easy to Spot Malicious Code</figcaption></figure></div><div class="ab cl kh ki go kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="ha hb hc hd he"><h1 id="32d4" class="ko kp hw bd kq kr ks kt ku kv kw kx ky jc kz jd la jf lb jg lc ji ld jj le lf bi translated">通过恶意Jupyter的谷歌硬盘数据过滤代码示例</h1><p id="4075" class="pw-post-body-paragraph jl jm hw jn b jo lg ix jq jr lh ja jt ju li jw jx jy lj ka kb kc lk ke kf kg ha bi translated">我们现在将运行一个Jupyter代码示例，让对手通过<a class="ae ll" href="https://ngrok.com/" rel="noopener ugc nofollow" target="_blank"> Ngrok </a>访问他们目标的Google Drive。Ngrok是一个通过URL将本地主机暴露给互联网的应用程序。</p><p id="e6be" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">下面是每个Jupyter单元格中的代码:</p><ol class=""><li id="50b0" class="na nb hw jn b jo jp jr js ju nc jy nd kc ne kg ns ng nh ni bi translated">安装受害者的谷歌硬盘</li></ol><figure class="ln lo lp lq fd hj er es paragraph-image"><div class="er es nt"><img src="../Images/5fdea2dfa961dbf87b09153e122bb842.png" data-original-src="https://miro.medium.com/v2/resize:fit:820/format:webp/1*UUHIscRaMxhzj7MdVviXsw.png"/></div></figure><ul class=""><li id="38fe" class="na nb hw jn b jo jp jr js ju nc jy nd kc ne kg nf ng nh ni bi translated">这是Colab笔记本的正常行为</li></ul><p id="8c53" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">2.下载并解压Ngrok tarball到受害者的谷歌驱动器</p><figure class="ln lo lp lq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es nu"><img src="../Images/a947a16efac18990471375c7157986f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GJdLsEHutCXVuDhV8PM1VA.png"/></div></div></figure><p id="f615" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">3.将对手的Ngrok API身份验证令牌添加到受害者的Ngrok配置中</p><figure class="ln lo lp lq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es nv"><img src="../Images/2be51bdabc782d817166d063dce477b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t_YgHZyhQt394RHTHkunzQ.png"/></div></div></figure><ul class=""><li id="b52e" class="na nb hw jn b jo jp jr js ju nc jy nd kc ne kg nf ng nh ni bi translated">别担心。这个过期了。</li></ul><p id="a1fc" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">4.在这种情况下，在指定的端口(9999)上启动python服务器，并在同一端口上运行Ngrok</p><figure class="ln lo lp lq fd hj er es paragraph-image"><div class="er es nw"><img src="../Images/bddcd5ab82e4bd575015ee46bd30caf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*Hlft_x4hzpNMjUm5tairFQ.png"/></div></figure><p id="ad91" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">当Ngrok收到来自Colab实例的回调时，它将向对手提供受害者Google Drive的隧道URL。</p><figure class="ln lo lp lq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es nx"><img src="../Images/f0fae5843b6e6faf3018f3500aa8ab67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ToA8vlvZP8Gfz9nGMUsSQw.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Ngrok Agent</figcaption></figure><p id="c19f" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">当受害者导航到隧道URL时，他们的浏览器中会显示受害者的Google Drive目录列表。他们可以导航并下载受害者驱动器中的任何文件。</p></div><div class="ab cl kh ki go kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="ha hb hc hd he"><h1 id="cca9" class="ko kp hw bd kq kr ks kt ku kv kw kx ky jc kz jd la jf lb jg lc ji ld jj le lf bi translated">通过恶意Jupyter反向Shell代码示例</h1><p id="a461" class="pw-post-body-paragraph jl jm hw jn b jo lg ix jq jr lh ja jt ju li jw jx jy lj ka kb kc lk ke kf kg ha bi translated">接下来，我们将运行一个Jupyter代码示例，它在受害者的Google Colab虚拟机中为对手提供了一个反向外壳。</p><ol class=""><li id="f04a" class="na nb hw jn b jo jp jr js ju nc jy nd kc ne kg ns ng nh ni bi translated">安装受害者的谷歌硬盘</li></ol><figure class="ln lo lp lq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ny"><img src="../Images/57c79c60972997867457247694a947d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:838/format:webp/1*7hJmqhp3R7bCLqNYkJVNBw.png"/></div></div></figure><ul class=""><li id="4d4c" class="na nb hw jn b jo jp jr js ju nc jy nd kc ne kg nf ng nh ni bi translated">和以前一样</li></ul><p id="70ad" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">2.执行bash，TCP反向外壳到对手的C2服务器IP地址</p><figure class="ln lo lp lq fd hj er es paragraph-image"><div class="er es nz"><img src="../Images/dc0fd36b9fb5146acc54aee1a15e259a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*j0CkSnfN4ukTEdvYeQYAgg.png"/></div></figure><p id="0f1c" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">当对手收到到他们的C2服务器的TCP连接时，他们可以在受害者的Google Collab容器中执行bash命令。</p><p id="a411" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">可能会有虚拟机逃逸吗？那可能是改天的博客…</p></div><div class="ab cl kh ki go kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="ha hb hc hd he"><h1 id="3034" class="ko kp hw bd kq kr ks kt ku kv kw kx ky jc kz jd la jf lb jg lc ji ld jj le lf bi translated">为什么这很重要？</h1><p id="8959" class="pw-post-body-paragraph jl jm hw jn b jo lg ix jq jr lh ja jt ju li jw jx jy lj ka kb kc lk ke kf kg ha bi translated">对于ML研究人员和其他可能使用Jupyter Notebook协作平台(如Google Colab)的人来说，识别我在本文中描述的威胁向量是至关重要的。</p><p id="9ca6" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">GPU更难找到，而且最近也更贵。谷歌可乐是免费的，可乐专业是便宜的。这就是ML研究人员现在转向像Colab这样的云平台的原因之一。研究人员也喜欢与他人合作和分享他们的工作，就像开源社区中的开发者一样。出于这些和其他原因，我们看到云协作ML框架用户的数量在增长。然而，这些用户大多不是安全专家。这使得用户在使用这些平台时面临更高的风险。</p><p id="f670" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">此外，网络钓鱼很容易。对手擅长此道，可以用最小的成本进行网络钓鱼活动。风险回报比非常适合对手。</p><h1 id="0a94" class="ko kp hw bd kq kr oa kt ku kv ob kx ky jc oc jd la jf od jg lc ji oe jj le lf bi translated">我们能做些什么呢？</h1><h2 id="87f7" class="mm kp hw bd kq mn mo mp ku mq mr ms ky ju mt mu la jy mv mw lc kc mx my le mz bi translated">阅读您的代码</h2><p id="5c54" class="pw-post-body-paragraph jl jm hw jn b jo lg ix jq jr lh ja jt ju li jw jx jy lj ka kb kc lk ke kf kg ha bi translated">这可能会花费用户一些时间，但是阅读和理解代码正在做什么以及恶意代码看起来像什么对于保护他们的数据安全是至关重要的。当Google Drive警告弹出时，询问你是否确定要安装它，让它提醒你取消并返回查看代码。</p><h2 id="5c1a" class="mm kp hw bd kq mn mo mp ku mq mr ms ky ju mt mu la jy mv mw lc kc mx my le mz bi translated">为Colab开发一个代码扫描插件</h2><p id="897c" class="pw-post-body-paragraph jl jm hw jn b jo lg ix jq jr lh ja jt ju li jw jx jy lj ka kb kc lk ke kf kg ha bi translated">这对社区来说可能是一个很好的项目。扫描已知恶意代码的Collab插件可能是耗时的手动代码审查的解决方案。人们可能仍然会小心不要完全相信自动化过程。它可能不完美，可能会错过一些东西。</p><h2 id="c822" class="mm kp hw bd kq mn mo mp ku mq mr ms ky ju mt mu la jy mv mw lc kc mx my le mz bi translated">请谷歌帮忙</h2><p id="bc8d" class="pw-post-body-paragraph jl jm hw jn b jo lg ix jq jr lh ja jt ju li jw jx jy lj ka kb kc lk ke kf kg ha bi translated">也许如果这引起了足够的关注，并且我们很好地请求谷歌，他们可能会创建他们自己的代码扫描插件。除非你问，否则你永远不知道。</p><h2 id="72c7" class="mm kp hw bd kq mn mo mp ku mq mr ms ky ju mt mu la jy mv mw lc kc mx my le mz bi translated">小心你的同事</h2><p id="9f83" class="pw-post-body-paragraph jl jm hw jn b jo lg ix jq jr lh ja jt ju li jw jx jy lj ka kb kc lk ke kf kg ha bi translated">不要自动信任你在ML社区遇到的每个人。记住，网络钓鱼很容易。</p></div><div class="ab cl kh ki go kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="ha hb hc hd he"><h1 id="8326" class="ko kp hw bd kq kr ks kt ku kv kw kx ky jc kz jd la jf lb jg lc ji ld jj le lf bi translated">结论</h1><p id="623f" class="pw-post-body-paragraph jl jm hw jn b jo lg ix jq jr lh ja jt ju li jw jx jy lj ka kb kc lk ke kf kg ha bi translated">我希望这篇文章能够到达ML/AI研究社区，并提供对使用这些惊人的协作平台时存在的威胁的见解。我是ML/AI和安全社区的骄傲成员。我希望我的安全经验和研究有助于保持ML/AI研究的安全，这样它将像以前一样有趣和令人惊奇。</p><p id="db7c" class="pw-post-body-paragraph jl jm hw jn b jo jp ix jq jr js ja jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">一如既往，感谢阅读，袖手旁观更多的酱！</p></div><div class="ab cl kh ki go kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="ha hb hc hd he"><h1 id="926c" class="ko kp hw bd kq kr ks kt ku kv kw kx ky jc kz jd la jf lb jg lc ji ld jj le lf bi translated">参考</h1><p id="09e4" class="pw-post-body-paragraph jl jm hw jn b jo lg ix jq jr lh ja jt ju li jw jx jy lj ka kb kc lk ke kf kg ha bi translated">谷歌。(未注明)。谷歌colab。检索于2022年7月25日，来自<a class="ae ll" href="https://research.google.com/colaboratory/faq.html" rel="noopener ugc nofollow" target="_blank">https://research.google.com/colaboratory/faq.html</a></p><div class="hg hh ez fb hi of"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="og ab dw"><div class="oh ab oi cl cj oj"><h2 class="bd hx fi z dy ok ea eb ol ed ef hv bi translated">Mlearning.ai提交建议</h2><div class="om l"><h3 class="bd b fi z dy ok ea eb ol ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="on l"><p class="bd b fp z dy ok ea eb ol ed ef dx translated">medium.com</p></div></div><div class="oo l"><div class="op l oq or os oo ot ho of"/></div></div></a></div></div></div>    
</body>
</html>