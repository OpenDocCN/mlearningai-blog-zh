<html>
<head>
<title>Use ServiceFoundry to deploy Machine Learning models like a Ninja 🥷</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用ServiceFoundry像忍者🥷一样部署机器学习模型</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/use-servicefoundry-to-deploy-machine-learning-models-like-a-ninja-a912ca550333?source=collection_archive---------3-----------------------#2022-10-19">https://medium.com/mlearning-ai/use-servicefoundry-to-deploy-machine-learning-models-like-a-ninja-a912ca550333?source=collection_archive---------3-----------------------#2022-10-19</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="f695" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">在ServiceFoundry上使用FastAPI部署ML模型的快速指南。</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/e5b7aa42ab7890c5a08f55e05be5fe68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*i1ZA0AJjDpf7dLjq"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Photo by <a class="ae jm" href="https://unsplash.com/@ciabattespugnose?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Lucrezia Carnelos</a> on <a class="ae jm" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6348" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">MLOps是数据科学生命周期中的一个重要阶段。有几种部署ML模型的方法，但是有一些关键点是每个数据科学家都应该考虑的，那就是部署一个模型所花费的时间&amp;将它作为一种服务来使用，以及管理特定项目的基础设施。</p><p id="2ed6" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">ServiceFoundry是一个工具，可帮助将模型部署到生产环境中，将模型推断为API端点或Streamlit/Gradio web应用程序，创建培训工作，对模型进行版本控制并跟踪实验。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="kj kk l"/></div><figcaption class="ji jj et er es jk jl bd b be z dx">A short video to demonstrate the ServiceFoundry &amp; MLFoundry platforms</figcaption></figure><p id="473d" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">让我们在ServiceFoundry上部署一个示例ML模型！</p><p id="ff1d" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">对于这个例子，我使用了在<a class="ae jm" href="https://www.kaggle.com/competitions/new-york-city-taxi-fare-prediction/data" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>上找到的纽约出租车费用数据集。我训练了一个简单的XGBoost回归模型，因为我们必须预测纽约市的出租车费用。你可以在这里查看<a class="ae jm" href="https://www.kaggle.com/code/vishank97/taxi-fare-prediction" rel="noopener ugc nofollow" target="_blank">的全部笔记。</a></p><blockquote class="kl km kn"><p id="4a95" class="jn jo ko jp b jq jr ii js jt ju il jv kp jx jy jz kq kb kc kd kr kf kg kh ki ha bi translated">注意:对于本教程，有一个关于MLFoundry和如何记录模型和实验跟踪的先决条件。我已经在我的文章的<a class="ae jm" rel="noopener" href="/mlearning-ai/tracking-ml-models-with-mlfoundry-5de8520752e6">中解释了如何使用MLFoundry。</a></p></blockquote><p id="d176" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">关于将模型部署为FastAPI服务的分步指南。</p><ol class=""><li id="78f9" class="ks kt hh jp b jq jr jt ju jw ku ka kv ke kw ki kx ky kz la bi translated">首先创建一个<a class="ae jm" href="https://app.develop.truefoundry.tech/" rel="noopener ugc nofollow" target="_blank"> TrueFoundry </a>账户。</li><li id="15a3" class="ks kt hh jp b jq lb jt lc jw ld ka le ke lf ki kx ky kz la bi translated">为项目创建一个新的venv和一个文件夹。</li><li id="335e" class="ks kt hh jp b jq lb jt lc jw ld ka le ke lf ki kx ky kz la bi translated">在您的venv中安装servicefoundry和mlfoundry。</li></ol><pre class="ix iy iz ja fd lg lh li lj aw lk bi"><span id="3e1e" class="ll lm hh lh b fi ln lo l lp lq"> pip install -U — quiet "mlfoundry" "servicefoundry"</span></pre><p id="fba5" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">接下来，我们需要创建以下文件:</p><ol class=""><li id="afd4" class="ks kt hh jp b jq jr jt ju jw ku ka kv ke kw ki kx ky kz la bi translated"><em class="ko"> predict.py </em>:这将是主预测文件。</li><li id="31d9" class="ks kt hh jp b jq lb jt lc jw ld ka le ke lf ki kx ky kz la bi translated"><em class="ko"> main.py </em>:我们将在这个文件中创建FastAPI应用程序。</li><li id="c607" class="ks kt hh jp b jq lb jt lc jw ld ka le ke lf ki kx ky kz la bi translated"><em class="ko"> infer.yaml </em>:我们将在这个yaml文件中存储我们的API键和其他环境变量。</li><li id="2000" class="ks kt hh jp b jq lb jt lc jw ld ka le ke lf ki kx ky kz la bi translated"><em class="ko"> deploy.py </em>:最后，为了将我们的FastAPI应用程序部署到servicefoundry，我们将创建这个文件</li></ol><p id="693b" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">让我们从每个文件开始:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lr kk l"/></div></figure><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lr kk l"/></div></figure><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lr kk l"/></div></figure><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lr kk l"/></div></figure><p id="7b9f" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">当我们运行<em class="ko"> deploy.py </em>时，我们的服务将被部署到servicefoundry</p><p id="5dd4" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">我们可以在这里查看我们的部署<a class="ae jm" href="https://app.develop.truefoundry.tech/applications" rel="noopener ugc nofollow" target="_blank">。它看起来会像这样:</a></p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es ls"><img src="../Images/f58dccec260ecb794d391b42c47484ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3bp1IUYEpTakshZgxGLxdA.png"/></div></div></figure><p id="457c" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">转到选定的项目，我们可以看到我们的部署以及FastAPI端点。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es lt"><img src="../Images/623d6f923f61ec08d4af4b46f8526b90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g4ncYvekPV0cMU7KnH_Mmg.png"/></div></div></figure><p id="8114" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">我们现在就可以去那个端点测试API了！</p><blockquote class="kl km kn"><p id="c1aa" class="jn jo ko jp b jq jr ii js jt ju il jv kp jx jy jz kq kb kc kd kr kf kg kh ki ha bi translated">注意:我们希望在使用这个端点时打开SwaggerUI，但是，如果您有多个端点，默认情况下SwaggerUI不会启动。为此，我们必须将/docs附加到端点URL。</p></blockquote><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es lu"><img src="../Images/9cde588239399e7d4b770fb7df12c744.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HIactiJiGkLhz5K-7vG0rQ.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">We can also use Postman to test the endpoint.</figcaption></figure><p id="977e" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">结论:ServiceFoundry试图减少将ML模型部署到生产中的摩擦和时间，我们可以毫不费力地部署我们的模型。</p><p id="e61f" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">在我接下来的博客中，我将展示我们如何使用Streamlit将我们的模型作为web应用程序部署在servicefoundry中，并部署一个调度作业来训练我们的模型处理新数据。</p><p id="8506" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">参考资料:</p><ol class=""><li id="0c41" class="ks kt hh jp b jq jr jt ju jw ku ka kv ke kw ki kx ky kz la bi translated"><a class="ae jm" rel="noopener" href="/mlearning-ai/tracking-ml-models-with-mlfoundry-5de8520752e6">使用MLFoundry跟踪ML模型</a></li><li id="8bca" class="ks kt hh jp b jq lb jt lc jw ld ka le ke lf ki kx ky kz la bi translated"><a class="ae jm" href="https://github.com/vishank97/new-york-taxi-fare-prediction" rel="noopener ugc nofollow" target="_blank"> GitHub </a> repo包含使用FastAPI服务部署模型的源代码，简化web应用程序和培训工作，如果您想快速入门的话。</li><li id="3bae" class="ks kt hh jp b jq lb jt lc jw ld ka le ke lf ki kx ky kz la bi translated"><a class="ae jm" href="https://docs.truefoundry.com/documentation/" rel="noopener ugc nofollow" target="_blank"> TrueFoundry文档</a></li></ol><div class="lv lw ez fb lx ly"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="lz ab dw"><div class="ma ab mb cl cj mc"><h2 class="bd hi fi z dy md ea eb me ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="mf l"><h3 class="bd b fi z dy md ea eb me ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="mg l"><p class="bd b fp z dy md ea eb me ed ef dx translated">medium.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm jg ly"/></div></div></a></div></div></div>    
</body>
</html>