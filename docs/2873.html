<html>
<head>
<title>Credit Card Fraud Detection</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">信用卡欺诈检测</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/credit-card-fraud-detection-2527ca04c3de?source=collection_archive---------0-----------------------#2022-06-21">https://medium.com/mlearning-ai/credit-card-fraud-detection-2527ca04c3de?source=collection_archive---------0-----------------------#2022-06-21</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="5593" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">使用Streamlit、FastAPI和Docker的端到端机器学习项目。</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/386c6a853ffbb1eceebffa87129e7da2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zsvm31OqQNA9-nnsiTUNSQ.jpeg"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Photo by <a class="ae jm" href="https://unsplash.com/@rupixen?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">rupixen.com</a> on <a class="ae jm" href="https://unsplash.com/s/photos/credit-card?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="b529" class="jn jo hh bd jp jq jr js jt ju jv jw jx in jy io jz iq ka ir kb it kc iu kd ke bi translated"><strong class="ak">简介</strong></h1><h2 id="f6df" class="kf jo hh bd jp kg kh ki jt kj kk kl jx km kn ko jz kp kq kr kb ks kt ku kd kv bi translated">什么是信用卡诈骗？</h2><p id="afb4" class="pw-post-body-paragraph kw kx hh ky b kz la ii lb lc ld il le km lf lg lh kp li lj lk ks ll lm ln lo ha bi translated">据<a class="ae jm" href="https://www.law.cornell.edu/wex/credit_card_fraud#:~:text=Credit%20card%20fraud%20is%20a,or%20removing%20funds%20from%20it." rel="noopener ugc nofollow" target="_blank">法律信息研究所</a>:</p><blockquote class="lp lq lr"><p id="56bb" class="kw kx ls ky b kz lt ii lb lc lu il le lv lw lg lh lx ly lj lk lz ma lm ln lo ha bi translated">信用卡欺诈是一种身份盗窃形式，涉及未经授权获取他人的信用卡信息，目的是将购物费用记入帐户或从帐户中取出资金。</p></blockquote><p id="3e90" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">在这个项目中，我们将开发一个机器学习模型，使用分类算法和技术来准确检测信用卡交易是否欺诈。我们还将使用FastAPI将我们的模型部署为API，并使用Streamlit创建一个前端接口来访问我们的API。</p><p id="f497" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">如果您想查看已完成的项目和源代码，可以访问下面的链接:</p><div class="mb mc ez fb md me"><a href="https://github.com/Nneji123/Credit-Card-Fraud-Detection.git" rel="noopener  ugc nofollow" target="_blank"><div class="mf ab dw"><div class="mg ab mh cl cj mi"><h2 class="bd hi fi z dy mj ea eb mk ed ef hg bi translated">GitHub-nneji 123/信用卡欺诈检测:信用卡欺诈检测论文库…</h2><div class="ml l"><h3 class="bd b fi z dy mj ea eb mk ed ef dx translated">Group 3 Zummit Africa AI/ML团队开展的端到端机器学习项目，用于检测欺诈性信用卡…</h3></div><div class="mm l"><p class="bd b fp z dy mj ea eb mk ed ef dx translated">github.com</p></div></div><div class="mn l"><div class="mo l mp mq mr mn ms jg me"/></div></div></a></div><h1 id="0ebc" class="jn jo hh bd jp jq jr js jt ju jv jw jx in jy io jz iq ka ir kb it kc iu kd ke bi translated">项目大纲</h1><p id="197e" class="pw-post-body-paragraph kw kx hh ky b kz la ii lb lc ld il le km lf lg lh kp li lj lk ks ll lm ln lo ha bi translated">以下是将在本项目中执行的步骤:</p><ol class=""><li id="3744" class="mt mu hh ky b kz lt lc lu km mv kp mw ks mx lo my mz na nb bi translated">数据来源</li><li id="7cb3" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo my mz na nb bi translated">数据分析</li><li id="472f" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo my mz na nb bi translated">模型结构</li><li id="50cd" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo my mz na nb bi translated">模型评估</li><li id="a31f" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo my mz na nb bi translated">使用FastAPI部署模型</li><li id="e59b" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo my mz na nb bi translated">API与Streamlit前端的接口</li><li id="0f74" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo my mz na nb bi translated">用docker-compose组合前端和后端</li></ol><h1 id="bfdc" class="jn jo hh bd jp jq jr js jt ju jv jw jx in jy io jz iq ka ir kb it kc iu kd ke bi translated">数据来源</h1><p id="b149" class="pw-post-body-paragraph kw kx hh ky b kz la ii lb lc ld il le km lf lg lh kp li lj lk ks ll lm ln lo ha bi translated">公开的金融服务数据集很少，尤其是在新兴的移动转账领域。许多像我们这样在欺诈检测领域进行研究的学者重视金融数据集。因为金融交易本质上是私密的，所以没有公开的数据集，这也是问题的一部分。</p><p id="366d" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">使用名为PaySim的模拟器生成的合成数据集被用作构建该项目中使用的模型的数据集。PaySim使用私有数据集中的数据生成一个类似于正常交易操作的合成数据集，并注入恶意行为，以便以后评估欺诈检测方法的性能。</p><div class="mb mc ez fb md me"><a href="https://www.kaggle.com/datasets/ealaxi/paysim1" rel="noopener  ugc nofollow" target="_blank"><div class="mf ab dw"><div class="mg ab mh cl cj mi"><h2 class="bd hi fi z dy mj ea eb mk ed ef hg bi translated">用于欺诈检测的合成财务数据集</h2><div class="ml l"><h3 class="bd b fi z dy mj ea eb mk ed ef dx translated">PaySim移动货币模拟器生成的合成数据集</h3></div><div class="mm l"><p class="bd b fp z dy mj ea eb mk ed ef dx translated">www.kaggle.com</p></div></div><div class="mn l"><div class="nh l mp mq mr mn ms jg me"/></div></div></a></div><h2 id="68c6" class="kf jo hh bd jp kg kh ki jt kj kk kl jx km kn ko jz kp kq kr kb ks kt ku kd kv bi translated">设置我们的环境</h2><p id="efe7" class="pw-post-body-paragraph kw kx hh ky b kz la ii lb lc ld il le km lf lg lh kp li lj lk ks ll lm ln lo ha bi translated">我们将使用<a class="ae jm" href="https://research.google.com/colaboratory/" rel="noopener ugc nofollow" target="_blank">谷歌实验室</a>来执行这个项目。Colab是一种托管的Jupyter笔记本服务，无需设置即可使用，同时提供对包括GPU在内的计算资源的免费访问。</p><p id="bafc" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">为了使用Google Colab加载数据集，我们将使用Kaggle API来下载数据集。您可以通过创建一个Kaggle帐户并下载您的Kaggle JSON认证密钥来访问Kaggle API。</p><blockquote class="lp lq lr"><p id="7aac" class="kw kx ls ky b kz lt ii lb lc lu il le lv lw lg lh lx ly lj lk lz ma lm ln lo ha bi translated"><a class="ae jm" href="https://research.google.com/colaboratory/" rel="noopener ugc nofollow" target="_blank">https://research.google.com/colaboratory/</a></p><p id="5ad6" class="kw kx ls ky b kz lt ii lb lc lu il le lv lw lg lh lx ly lj lk lz ma lm ln lo ha bi translated"><a class="ae jm" href="https://www.kaggle.com/general/74235" rel="noopener ugc nofollow" target="_blank">在Google Colab |数据科学和机器学习中下载kaggle数据的最简单方法</a></p></blockquote><h2 id="a371" class="kf jo hh bd jp kg kh ki jt kj kk kl jx km kn ko jz kp kq kr kb ks kt ku kd kv bi translated">加载数据集</h2><p id="f522" class="pw-post-body-paragraph kw kx hh ky b kz la ii lb lc ld il le km lf lg lh kp li lj lk ks ll lm ln lo ha bi translated">我们现在可以通过在另一个单元格中运行以下代码，用Kaggle API加载数据集:</p><pre class="ix iy iz ja fd ni nj nk nl aw nm bi"><span id="d691" class="kf jo hh nj b fi nn no l np nq"><strong class="nj hi">!</strong>pip install -q kaggle</span></pre><p id="76fc" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">使用Google Colab中的kaggle API上传kaggle.json文件</p><pre class="ix iy iz ja fd ni nj nk nl aw nm bi"><span id="d7ae" class="kf jo hh nj b fi nn no l np nq"><strong class="nj hi">from</strong> google.colab <strong class="nj hi">import</strong> files<br/><br/>files<strong class="nj hi">.</strong>upload()</span></pre><p id="7040" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">这个单元在我们的根目录中创建一个. kaggle隐藏文件夹，并将kaggle.json文件复制到该文件夹中。</p><pre class="ix iy iz ja fd ni nj nk nl aw nm bi"><span id="af7b" class="kf jo hh nj b fi nn no l np nq"><strong class="nj hi">!</strong> mkdir ~/.kaggle<br/><strong class="nj hi">!</strong> cp kaggle.json ~/.kaggle/<br/><strong class="nj hi">!</strong> chmod 600 /root/.kaggle/kaggle.json</span></pre><p id="16b0" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">这个单元将把用于这个项目的数据集下载到Google Colab实例中的/content目录，并解压缩csv文件。</p><pre class="ix iy iz ja fd ni nj nk nl aw nm bi"><span id="3b2d" class="kf jo hh nj b fi nn no l np nq"><strong class="nj hi">!</strong>kaggle datasets download -d ealaxi/paysim1<br/><strong class="nj hi">!</strong>unzip /content/paysim1.zip</span></pre><p id="5a73" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">在我们安装了需求并加载了数据之后，我们就可以对数据集进行一些分析了。</p><h1 id="6a97" class="jn jo hh bd jp jq jr js jt ju jv jw jx in jy io jz iq ka ir kb it kc iu kd ke bi translated">数据分析</h1><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="nr ns l"/></div></figure><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es nt"><img src="../Images/a95862e7cf1b8bf25d67faf11ad36b5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2ln73s_hBxgspioWV-bLNA.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Screenshot by Author: Loaded Data</figcaption></figure><p id="0963" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">我们可以从上面看到，数据集总共包含11列和600多万行。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="nr ns l"/></div></figure><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es nu"><img src="../Images/adcdd19393b6ccedbc9823509d1bcf94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KlSfiKkfs2OVSG6I0shvmg.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Screenshot by Author: Number of fraudulent cases.</figcaption></figure><p id="c0fc" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">数据集也非常不平衡，只有0.12%的交易被标记为欺诈案件。处理不平衡数据时，可以采取一些变通办法，例如:</p><ul class=""><li id="8d5d" class="mt mu hh ky b kz lt lc lu km mv kp mw ks mx lo nv mz na nb bi translated">合成少数过采样技术(SMOTE)</li><li id="0cb5" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo nv mz na nb bi translated">欠采样</li></ul><p id="c86c" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">但是为了简单起见，我们不会在这里应用任何技术。你可以通过下面的链接了解SMOTE、欠采样和处理不平衡数据；</p><div class="mb mc ez fb md me"><a rel="noopener follow" target="_blank" href="/analytics-vidhya/credit-card-fraud-detection-how-to-handle-imbalanced-dataset-1f18b6f881"><div class="mf ab dw"><div class="mg ab mh cl cj mi"><h2 class="bd hi fi z dy mj ea eb mk ed ef hg bi translated">信用卡欺诈检测:如何处理不平衡数据集</h2><div class="ml l"><h3 class="bd b fi z dy mj ea eb mk ed ef dx translated">这篇文章将关注stey-by-step项目及其结果，你可以在我的Github中查看我的代码。</h3></div><div class="mm l"><p class="bd b fp z dy mj ea eb mk ed ef dx translated">medium.com</p></div></div><div class="mn l"><div class="nw l mp mq mr mn ms jg me"/></div></div></a></div><div class="mb mc ez fb md me"><a href="https://machinelearningmastery.com/imbalanced-classification-with-the-fraudulent-credit-card-transactions-dataset/" rel="noopener  ugc nofollow" target="_blank"><div class="mf ab dw"><div class="mg ab mh cl cj mi"><h2 class="bd hi fi z dy mj ea eb mk ed ef hg bi translated">欺诈性信用卡交易数据集的不平衡分类-机器学习…</h2><div class="ml l"><h3 class="bd b fi z dy mj ea eb mk ed ef dx translated">欺诈是信用卡公司的一个主要问题，这是因为完成了大量的交易…</h3></div><div class="mm l"><p class="bd b fp z dy mj ea eb mk ed ef dx translated">machinelearningmastery.com</p></div></div><div class="mn l"><div class="nx l mp mq mr mn ms jg me"/></div></div></a></div><h2 id="29ed" class="kf jo hh bd jp kg kh ki jt kj kk kl jx km kn ko jz kp kq kr kb ks kt ku kd kv bi translated">特征工程</h2><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es ny"><img src="../Images/1599f13c6dc46dab960cf731f647321c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uAiDi9gZArZlTpG4mr_GLw.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Screenshot by Author: Feature Selection</figcaption></figure><p id="f926" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">上图显示了数据集中的列。这是对每列的描述:</p><ul class=""><li id="99d3" class="mt mu hh ky b kz lt lc lu km mv kp mw ks mx lo nv mz na nb bi translated">步骤列:完成一个事务所用的小时数。</li><li id="f15f" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo nv mz na nb bi translated">类型栏:发生的交易类型。这一栏有5个类别，即:'付款'，'转账'，'提现'，'借记'，'提现'。</li><li id="cfe1" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo nv mz na nb bi translated">nameOrig:发件人的姓名/ID。</li><li id="384d" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo nv mz na nb bi translated">oldbalanceOrg:交易发生前的发送方余额。</li><li id="0eee" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo nv mz na nb bi translated">newbalanceOrg:交易发生后的发送方余额。</li><li id="0988" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo nv mz na nb bi translated">nameDest:收件人的姓名/ID。</li><li id="f955" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo nv mz na nb bi translated">oldbalanceDest:交易发生前的接收方余额。</li><li id="1657" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo nv mz na nb bi translated">newbalanceDest:交易发生后的接收方余额。</li><li id="6eca" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo nv mz na nb bi translated">isFraud:这是模拟中欺诈代理进行的交易。</li><li id="a1f8" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo nv mz na nb bi translated">isFlaggedFraud:这种商业模式旨在控制从一个账户到另一个账户的大规模转账，并标记非法企图。此数据集中的非法尝试是指试图在单次交易中转移超过200.000英镑的金额。</li></ul><p id="1d49" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">我们将删除“nameOrig”和“nameDest”列，并使用标签编码将“type”列从分类数据转换为数字数据。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="nr ns l"/></div></figure><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es nz"><img src="../Images/55c14355129245e34e21dce581767137.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IYBRffLmKRHlCETxc-MeWA.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Screenshot by Author: Label Encoding</figcaption></figure><p id="09d1" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">我们还将创建一个“evaluate_model”函数，该函数将用于获取我们的评估模型的度量分数。使用的指标有:</p><ul class=""><li id="f58b" class="mt mu hh ky b kz lt lc lu km mv kp mw ks mx lo nv mz na nb bi translated">准确性得分:准确性是分类问题中使用的一种度量，用于告诉准确预测的百分比。我们通过将正确预测的数量除以预测的总数来计算它。</li><li id="1ebb" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo nv mz na nb bi translated">精度分数:精度量化了实际属于正类的正类预测的数量。</li><li id="d2bc" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo nv mz na nb bi translated">召回分数:召回量化了从数据集中的所有正例中做出的正类预测的数量。</li><li id="1b14" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo nv mz na nb bi translated">F1分数:F-Measure或F1分数提供了一个单一的分数，在一个数字中平衡了精确度和召回率。</li><li id="1d40" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo nv mz na nb bi translated">混淆矩阵:混淆矩阵<strong class="ky hi">是一种总结分类算法</strong>性能的技术。如果每个类中的观测值数量不相等，或者数据集中有两个以上的类，那么分类精度本身就可能会产生误导。</li></ul><blockquote class="lp lq lr"><p id="f772" class="kw kx ls ky b kz lt ii lb lc lu il le lv lw lg lh lx ly lj lk lz ma lm ln lo ha bi translated"><a class="ae jm" href="https://neptune.ai/blog/performance-metrics-in-machine-learning-complete-guide#:~:text=Classification%20models%20have%20discrete%20output,it%20in%20a%20different%20way." rel="noopener ugc nofollow" target="_blank">机器学习中的性能度量【完全指南】— neptune.ai </a></p></blockquote><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="nr ns l"/></div></figure></div><div class="ab cl oa ob go oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ha hb hc hd he"><h1 id="38ac" class="jn jo hh bd jp jq oh js jt ju oi jw jx in oj io jz iq ok ir kb it ol iu kd ke bi translated">模型结构</h1><p id="93a2" class="pw-post-body-paragraph kw kx hh ky b kz la ii lb lc ld il le km lf lg lh kp li lj lk ks ll lm ln lo ha bi translated">鉴于这个项目试图解决一个分类问题(检测交易是否欺诈)，我们将为我们的信用卡检测应用程序建立和评估一个分类模型。</p><p id="fbba" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">你可以通过下面的链接阅读更多关于分类机器学习技术的内容:</p><blockquote class="lp lq lr"><p id="2c86" class="kw kx ls ky b kz lt ii lb lc lu il le lv lw lg lh lx ly lj lk lz ma lm ln lo ha bi translated"><a class="ae jm" href="https://www.edureka.co/blog/classification-in-machine-learning/#:~:text=In%20machine%20learning%2C%20classification%20is,recognition%2C%20document%20classification%2C%20etc." rel="noopener ugc nofollow" target="_blank">机器学习中的分类|分类算法| Edureka </a></p><p id="c7a3" class="kw kx ls ky b kz lt ii lb lc lu il le lv lw lg lh lx ly lj lk lz ma lm ln lo ha bi translated"><a class="ae jm" href="https://machinelearningmastery.com/types-of-classification-in-machine-learning/" rel="noopener ugc nofollow" target="_blank">机器学习中的4类分类任务(machinelearningmastery.com)</a></p></blockquote><h2 id="393f" class="kf jo hh bd jp kg kh ki jt kj kk kl jx km kn ko jz kp kq kr kb ks kt ku kd kv bi translated">逻辑回归</h2><p id="f55f" class="pw-post-body-paragraph kw kx hh ky b kz la ii lb lc ld il le km lf lg lh kp li lj lk ks ll lm ln lo ha bi translated">逻辑回归<strong class="ky hi">根据给定的独立变量数据集</strong>估计某一事件发生的概率，如投票或未投票。由于结果是一个概率，因变量被限制在0和1之间。</p><p id="a0aa" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">我们将把数据集分成训练集和测试集，并使用Sci-Kit Learn库中的LogisticRegression函数来预测信用卡交易的结果。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="nr ns l"/></div></figure><p id="40d4" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">在上面的代码片段中；</p><ul class=""><li id="eaf7" class="mt mu hh ky b kz lt lc lu km mv kp mw ks mx lo nv mz na nb bi translated">我们通过删除“isFraud”列来设置X变量，因为这是我们的目标列。</li><li id="8938" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo nv mz na nb bi translated">“isFraud”列随后被赋给我们的y变量。</li><li id="7321" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo nv mz na nb bi translated">然后将数据分为训练集和测试集，然后对训练集应用逻辑回归。</li><li id="71d5" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo nv mz na nb bi translated">使用我们之前声明的“评估模型”函数，我们然后评估模型。</li></ul><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es om"><img src="../Images/32612e1a92bb9d953e37c77d16601634.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/format:webp/1*x45qiz8_wqI1cpVl8eli6A.png"/></div><figcaption class="ji jj et er es jk jl bd b be z dx">Image by Author: Logistic Regression</figcaption></figure><p id="3316" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">如上图所示，逻辑回归模型的准确率很高，但召回率很低。</p><p id="1914" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">准确性分数不是评估我们模型的好指标，因为数据是高度不平衡的，并且模型倾向于预测非欺诈案件比欺诈案件更准确，因为数据集中有更多的欺诈案件。</p><p id="1376" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">您可以通过以下链接了解有关评估模型准确性的更多信息:</p><blockquote class="lp lq lr"><p id="941b" class="kw kx ls ky b kz lt ii lb lc lu il le lv lw lg lh lx ly lj lk lz ma lm ln lo ha bi translated">机器学习——为什么准确度不是评估分类模型的最佳衡量标准？—交叉验证(stackexchange.com)</p><p id="a7a3" class="kw kx ls ky b kz lt ii lb lc lu il le lv lw lg lh lx ly lj lk lz ma lm ln lo ha bi translated"><a class="ae jm" rel="noopener" href="/@KrishnaRaj_Parthasarathy/ml-classification-why-accuracy-is-not-a-best-measure-for-assessing-ceeb964ae47c"> ML分类——为什么准确度不是评估的最佳标准？？奎师那·拉吉|灵媒</a></p></blockquote><h2 id="269e" class="kf jo hh bd jp kg kh ki jt kj kk kl jx km kn ko jz kp kq kr kb ks kt ku kd kv bi translated">随机森林分类器</h2><p id="e1c8" class="pw-post-body-paragraph kw kx hh ky b kz la ii lb lc ld il le km lf lg lh kp li lj lk ks ll lm ln lo ha bi translated">顾名思义，随机森林是<strong class="ky hi">一种分类器，它包含给定数据集的各个子集上的许多决策树，并取平均值来提高数据集的预测准确性</strong>。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="nr ns l"/></div></figure><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es on"><img src="../Images/6431341350379701c6472482c9347c6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/format:webp/1*ilWIHrccHu_iUs9oNAm6rQ.png"/></div><figcaption class="ji jj et er es jk jl bd b be z dx">Image by Author: Random Forest Classifier</figcaption></figure><p id="c68e" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">我们可以看到，使用不同的度量评估，随机森林分类器表现非常好。我们现在可以将这个模型用于我们的web应用程序。</p><h2 id="f899" class="kf jo hh bd jp kg kh ki jt kj kk kl jx km kn ko jz kp kq kr kb ks kt ku kd kv bi translated">保存我们的模型</h2><p id="3b9c" class="pw-post-body-paragraph kw kx hh ky b kz la ii lb lc ld il le km lf lg lh kp li lj lk ks ll lm ln lo ha bi translated">我们现在可以将随机森林模型保存为pickle文件”。使用joblib。</p><pre class="ix iy iz ja fd ni nj nk nl aw nm bi"><span id="32ae" class="kf jo hh nj b fi nn no l np nq">import joblib<br/>joblib.dump(rfc, "credit_fraud.pkl")</span></pre></div><div class="ab cl oa ob go oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ha hb hc hd he"><h1 id="92bf" class="jn jo hh bd jp jq oh js jt ju oi jw jx in oj io jz iq ok ir kb it ol iu kd ke bi translated">使用FastAPI、Streamlit和Docker部署我们的模型</h1><p id="6a89" class="pw-post-body-paragraph kw kx hh ky b kz la ii lb lc ld il le km lf lg lh kp li lj lk ks ll lm ln lo ha bi translated">在本节中，我们将使用FastAPI将我们保存的模型部署为一个API，并创建一个前端接口来获取来自用户的输入，这些输入将用于预测信用卡交易是否欺诈。Dockerfile和docker-compose文件也将用于编译我们的项目。</p><p id="ed76" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated"><strong class="ky hi">什么是API？</strong></p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es oo"><img src="../Images/d1e52790f5b1ee9c4055e345061b8751.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Pc7vKlRzDEf7ZwzOo7C5A.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Image from <a class="ae jm" href="https://www.altexsoft.com/blog/engineering/what-is-api-definition-types-specifications-documentation/" rel="noopener ugc nofollow" target="_blank">altexsoft.com</a></figcaption></figure><p id="290c" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated"><strong class="ky hi">应用程序接口(API) </strong>是一组用于构建软件应用程序的例程、协议和工具。基本上，API规定了软件组件应该如何交互。</p><p id="4172" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated"><strong class="ky hi">什么是FastAPI？</strong></p><p id="b9ce" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated"><strong class="ky hi"> FastAPI </strong>是一个用Python开发<strong class="ky hi">RESTful API</strong>的Web框架。FastAPI基于<strong class="ky hi"> Pydantic </strong>和类型提示来验证、序列化和反序列化数据，并自动生成<strong class="ky hi"> OpenAPI </strong>文档。它完全支持异步编程，可以与<strong class="ky hi">uvicon</strong>和<strong class="ky hi"> Gunicorn </strong>一起运行。</p><p id="ce23" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">您可以查看FastAPI文档中的这些链接以及它是如何工作的👇</p><blockquote class="lp lq lr"><p id="86c4" class="kw kx ls ky b kz lt ii lb lc lu il le lv lw lg lh lx ly lj lk lz ma lm ln lo ha bi translated"><a class="ae jm" href="https://fastapi.tiangolo.com/" rel="noopener ugc nofollow" target="_blank">法斯塔皮(tiangolo.com)</a></p><p id="3d74" class="kw kx ls ky b kz lt ii lb lc lu il le lv lw lg lh lx ly lj lk lz ma lm ln lo ha bi translated"><a class="ae jm" href="https://realpython.com/fastapi-python-web-apis/" rel="noopener ugc nofollow" target="_blank">使用FastAPI构建Python Web API——真正的Python </a></p><p id="3928" class="kw kx ls ky b kz lt ii lb lc lu il le lv lw lg lh lx ly lj lk lz ma lm ln lo ha bi translated">【github.com】tiangolo/FastAPI:FastAPI框架，高性能，简单易学，代码编写速度快，可投入生产</p></blockquote><p id="ff58" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated"><strong class="ky hi">什么是细流？</strong></p><p id="5fd7" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">Streamlit是Python语言的开源app框架。它<strong class="ky hi">帮助我们在短时间内创建数据科学和机器学习的网络应用</strong>。它兼容主要的Python库，如scikit-learn、Keras、PyTorch、SymPy(latex)、NumPy、pandas、Matplotlib等。</p><p id="f2fb" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">您可以在下面找到有关streamlit的更多信息👇</p><blockquote class="lp lq lr"><p id="8875" class="kw kx ls ky b kz lt ii lb lc lu il le lv lw lg lh lx ly lj lk lz ma lm ln lo ha bi translated"><a class="ae jm" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank">简化it构建和共享数据应用的最快方式</a></p><p id="9c6c" class="kw kx ls ky b kz lt ii lb lc lu il le lv lw lg lh lx ly lj lk lz ma lm ln lo ha bi translated"><a class="ae jm" href="https://www.analyticsvidhya.com/blog/2021/06/build-web-app-instantly-for-machine-learning-using-streamlit/" rel="noopener ugc nofollow" target="_blank">https://www . analyticsvidhya . com/blog/2021/06/build-we b-app-instant-for-machine-learning-using-streamlit/</a></p></blockquote><p id="15a7" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated"><strong class="ky hi">Docker是什么？</strong></p><p id="0bb4" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">Docker是一个开源的容器化平台。它<strong class="ky hi">使我们能够将应用打包到容器中</strong>——标准化的可执行组件，将应用源代码与操作系统(OS)库以及在任何环境中运行该代码所需的依赖项相结合。</p><p id="a3da" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated"><strong class="ky hi">什么是Docker-Compose？</strong></p><p id="0dd5" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">Docker Compose是一个被开发用来帮助定义和共享多容器应用程序的工具。使用Compose，我们可以创建一个YAML文件来定义服务，并且只需一个命令，就可以将所有东西旋转起来或全部拆除。</p><p id="0030" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">关于Docker和docker-compose的更多信息可以在下面找到👇</p><blockquote class="lp lq lr"><p id="312a" class="kw kx ls ky b kz lt ii lb lc lu il le lv lw lg lh lx ly lj lk lz ma lm ln lo ha bi translated"><a class="ae jm" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank">https://www.docker.com/</a></p><p id="540f" class="kw kx ls ky b kz lt ii lb lc lu il le lv lw lg lh lx ly lj lk lz ma lm ln lo ha bi translated"><a class="ae jm" href="https://docs.docker.com/compose/" rel="noopener ugc nofollow" target="_blank">https://docs.docker.com/compose/</a></p></blockquote><h1 id="bf10" class="jn jo hh bd jp jq jr js jt ju jv jw jx in jy io jz iq ka ir kb it kc iu kd ke bi translated">项目结构</h1><p id="a1f2" class="pw-post-body-paragraph kw kx hh ky b kz la ii lb lc ld il le km lf lg lh kp li lj lk ks ll lm ln lo ha bi translated">该项目由两部分组成，一个基于Streamlit的前端和一个基于FastAPI的后端，整个应用程序使用Docker打包。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es op"><img src="../Images/50602ad811077f7a1c1d78ef69cb7152.png" data-original-src="https://miro.medium.com/v2/resize:fit:462/format:webp/1*xCQc1igFwWxqsYTXnLCJJg.png"/></div><figcaption class="ji jj et er es jk jl bd b be z dx">Screenshot by Author: Project Structure</figcaption></figure><h2 id="ef11" class="kf jo hh bd jp kg kh ki jt kj kk kl jx km kn ko jz kp kq kr kb ks kt ku kd kv bi translated">使用Docker设置Streamlit应用程序</h2><p id="325e" class="pw-post-body-paragraph kw kx hh ky b kz la ii lb lc ld il le km lf lg lh kp li lj lk ks ll lm ln lo ha bi translated">Streamlit应用程序将用于向我们的API发出请求，以便在向它发送数据时获得预测。</p><pre class="ix iy iz ja fd ni nj nk nl aw nm bi"><span id="5af4" class="kf jo hh nj b fi nn no l np nq">📦Frontend<br/> ┣ 📂.streamlit<br/> ┃ ┗ 📜config.toml <br/> ┣ 📜Dockerfile<br/> ┣ 📜app.py<br/> ┗  image.png<br/> ┗ 📜requirements.txt</span></pre><p id="b56c" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">在app.py中，您创建自己的网页，并使用<a class="ae jm" href="https://share.streamlit.io/daniellewisdl/streamlit-cheat-sheet/master/app.py" rel="noopener ugc nofollow" target="_blank"> Streamlit widgets </a>来完成此操作。</p><p id="5202" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">对于您的Streamlit应用程序的自定义主题，它们可以在配置文件:<code class="du oq or os nj b">./.streamlit/config.toml</code>中定义。查看此<a class="ae jm" href="https://blog.streamlit.io/introducing-theming/" rel="noopener ugc nofollow" target="_blank">链接</a>了解更多详情。</p><p id="e5d0" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">以下是streamlit应用程序的依赖项:</p><pre class="ix iy iz ja fd ni nj nk nl aw nm bi"><span id="2ce3" class="kf jo hh nj b fi nn no l np nq">numpy==1.21.6<br/>requests==2.23.0<br/>streamlit==1.10.0</span></pre><p id="05e0" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">下面是我用来构建Streamlit应用程序的Dockerfile。它由我在requirements.txt文件中列出的依赖项组成。运行构建命令后，这些依赖项将随其相应的版本一起安装。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="nr ns l"/></div></figure><p id="4b10" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">我们的streamlit应用程序的代码如下所示:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="nr ns l"/></div></figure><p id="9944" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">上面的代码执行以下操作:</p><ul class=""><li id="6593" class="mt mu hh ky b kz lt lc lu km mv kp mw ks mx lo nv mz na nb bi translated">接受用户的输入，</li><li id="1be4" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo nv mz na nb bi translated">将输入作为post请求发送到托管模型的FastAPI应用程序。</li><li id="6cfb" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo nv mz na nb bi translated">当API收到数据时，模型预测交易的结果，并将响应发送回前端，以便显示结果。</li></ul><p id="e7d3" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">构建我的Dockerfile文件的命令是:</p><pre class="ix iy iz ja fd ni nj nk nl aw nm bi"><span id="1970" class="kf jo hh nj b fi nn no l np nq">docker build -t myapp:latest .</span></pre><p id="dff7" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">要运行应用程序，请在终端中使用以下命令:</p><pre class="ix iy iz ja fd ni nj nk nl aw nm bi"><span id="603e" class="kf jo hh nj b fi nn no l np nq">docker run -p 8501:8501 myapp:latest</span></pre><p id="41d5" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">结果应该是这样的:</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es ot"><img src="../Images/7a7c673dc9f88b2e213930ad9dccd8eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pf8It3DFfVtm_y6Ypsgw-Q.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Image by Author: Streamlit Running from Terminal</figcaption></figure><p id="3d54" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">然后你就可以使用网络URL:<a class="ae jm" href="http://localhost:8501/" rel="noopener ugc nofollow" target="_blank">http://localhost:8501/</a>在浏览器中查看你的应用了</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es ou"><img src="../Images/c319cea617df31d3d52c86e69a5bac83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*UUnkrOFMY-1D2bPTKnIVHQ.gif"/></div><figcaption class="ji jj et er es jk jl bd b be z dx">GIF by Author: Streamlit Application</figcaption></figure><h2 id="6ac3" class="kf jo hh bd jp kg kh ki jt kj kk kl jx km kn ko jz kp kq kr kb ks kt ku kd kv bi translated">用FastAPI和Docker设置后端</h2><p id="db2b" class="pw-post-body-paragraph kw kx hh ky b kz la ii lb lc ld il le km lf lg lh kp li lj lk ks ll lm ln lo ha bi translated">我们将使用FastAPI和docker文件将我们的模型部署为API来获得预测。</p><p id="0a9f" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">我们保存为“credit_fraud.pkl”的随机森林模型将用于进行预测。该模型将通过web界面触发，从最终用户提供的测试数据样本中获得预测。</p><p id="6a6c" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">这是我的后端存储库结构:</p><pre class="ix iy iz ja fd ni nj nk nl aw nm bi"><span id="cecf" class="kf jo hh nj b fi nn no l np nq">📦Backend<br/> ┣ 📜Dockerfile<br/> ┣ 📜credit_fraud.pkl<br/> ┣ 📜app.py<br/> ┗ 📜requirements.txt</span></pre><p id="47fd" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">在app.py文件中，加载了模型并创建了一个API，用于从测试数据中获取属性并生成与之相关的预测。</p><p id="e20d" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">这些是我在这个项目中使用的后端依赖:</p><pre class="ix iy iz ja fd ni nj nk nl aw nm bi"><span id="13d1" class="kf jo hh nj b fi nn no l np nq">fastapi==0.68.0<br/>gunicorn==20.1.0<br/>uvicorn==0.14.0<br/>pandas==1.3.1<br/>scikit-learn==1.0.2<br/>scipy==1.8.1<br/>six==1.16.0<br/>joblib==1.0.1<br/>numpy==1.21.6<br/>pydantic==1.9.1<br/>httptools<br/>uvloop</span></pre><p id="70b0" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">这是用于后端的docker文件:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="nr ns l"/></div></figure><p id="b246" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">为了详细说明后端docker文件中的最后一个命令，下面是为<a class="ae jm" href="https://www.uvicorn.org/deployment/" rel="noopener ugc nofollow" target="_blank">uvicon</a>定义的<strong class="ky hi">设置</strong>:</p><p id="ec98" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated"><strong class="ky hi"> —主机0.0.0.0 </strong>定义托管服务器的地址。</p><p id="2399" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated"><strong class="ky hi"> —端口8000 </strong>定义托管服务器的端口。</p><p id="0c45" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated"><strong class="ky hi"> app:app </strong>告诉Uvicorn在哪里可以找到FastAPI ASGI应用程序——例如，“在‘app . py’文件中，您会找到ASGI应用程序，app = FastAPI()。</p><p id="4ad7" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated"><strong class="ky hi"> —重新加载</strong>启用自动重新加载，这样服务器将在对代码库进行更改后重新启动。</p><p id="d4db" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">API的代码如下所示:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="nr ns l"/></div></figure><p id="9aac" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">以下是解释上述代码的步骤:</p><ol class=""><li id="e7c1" class="mt mu hh ky b kz lt lc lu km mv kp mw ks mx lo my mz na nb bi translated">创建了“fraudDetection”模型类，以便定义我们的机器学习模型的所有参数。前两个值是整数类型，其余的是浮点类型。</li><li id="dc16" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo my mz na nb bi translated">接下来，用joblib加载模型，然后保存为一个名为“model”的变量。这个模型对象将用于获得预测。</li><li id="ec70" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo my mz na nb bi translated">“/predict”路由函数声明了一个名为“data”的“fraudDetection”模型类型的参数。该参数可以作为字典来访问。dictionary对象将允许您以键值对的形式访问参数值。</li><li id="7a5b" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo my mz na nb bi translated">现在，您正在保存客户端发送的所有参数值。这些值现在被提供给模型预测函数，您就可以对提供的数据进行预测了。</li></ol><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es ov"><img src="../Images/1a0f96cace8c1bf4908f4d030a21446a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wI_h2REBL9b89x-X9b_CEA.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Image by Author: Data Transfer between API and Streamlit Application</figcaption></figure><p id="353c" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">在终端的“后端”文件夹中，通过执行以下命令构建映像:</p><pre class="ix iy iz ja fd ni nj nk nl aw nm bi"><span id="4a62" class="kf jo hh nj b fi nn no l np nq">$ docker build -t backend .</span></pre><p id="e6a2" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">运行容器:</p><pre class="ix iy iz ja fd ni nj nk nl aw nm bi"><span id="bfa2" class="kf jo hh nj b fi nn no l np nq">$ docker run -p 8000:8000 backend</span></pre><p id="43af" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">在浏览器中，导航至<a class="ae jm" href="http://localhost:8080/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8000/ </a>。您应该看到:</p><pre class="ix iy iz ja fd ni nj nk nl aw nm bi"><span id="c4c9" class="kf jo hh nj b fi nn no l np nq">Credit Card Fraud Detection API 🙌🏻<br/><br/>Note: add "/docs" to the URL to get the Swagger UI Docs or "/redoc"</span></pre><p id="e014" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">如果您导航到<a class="ae jm" href="http://localhost:8080/docs" rel="noopener ugc nofollow" target="_blank">http://localhost:8000/docs</a>，您可以访问API文档</p><p id="f46f" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">您将看到您创建的每条路由的文档，以及一个交互式界面，您可以直接从浏览器测试每个端点。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es ou"><img src="../Images/e5d586a7912161e339aeea6a68170faf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*XUKSj--Z9-UeuS2wGMUQUw.gif"/></div><figcaption class="ji jj et er es jk jl bd b be z dx">GIF by Author: Credit Card Fraud Detection API</figcaption></figure></div><div class="ab cl oa ob go oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ha hb hc hd he"><p id="1f88" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">现在我们将定义一个docker-compose.yml文件，该文件将为我们的API创建一个服务，并为前端Streamlit应用程序创建一个服务。</p><p id="d257" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">Docker-compose是定义多容器应用程序的一个很好的工具，它使你能够配置它们，也使你能够在你的服务之间建立通信。</p><p id="a23c" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">这是docker-compose文件，用于将后端和前端容器连接在一起:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="nr ns l"/></div></figure><p id="e388" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">docker-compose文件已经过配置，因此我们不再需要一次构建不同图像的每个docker文件。我们可以通过运行docker- compose命令一次性完成:</p><pre class="ix iy iz ja fd ni nj nk nl aw nm bi"><span id="5eed" class="kf jo hh nj b fi nn no l np nq">docker-compose up -d --build</span></pre><p id="245b" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">构建服务前端和后端的映像是因为它们还不存在。</p><p id="6bec" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">为了实现前端和后端docker容器之间的通信，创建一个网络并给每个容器一个别名是必要的。</p><p id="0145" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">要查看更改，使用以下命令很有用:</p><pre class="ix iy iz ja fd ni nj nk nl aw nm bi"><span id="a2b4" class="kf jo hh nj b fi nn no l np nq">docker-compose stop</span></pre><p id="1da3" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">然后，如果您没有添加任何新的依赖项，您不需要重新构建您的Streamlit和FastAPI映像，您可以只使用以下命令来查看更改:</p><pre class="ix iy iz ja fd ni nj nk nl aw nm bi"><span id="546b" class="kf jo hh nj b fi nn no l np nq">docker-compose up -d</span></pre></div><div class="ab cl oa ob go oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ha hb hc hd he"><h1 id="c28d" class="jn jo hh bd jp jq oh js jt ju oi jw jx in oj io jz iq ok ir kb it ol iu kd ke bi translated">结论</h1><p id="a566" class="pw-post-body-paragraph kw kx hh ky b kz la ii lb lc ld il le km lf lg lh kp li lj lk ks ll lm ln lo ha bi translated">总之，我们能够建立一个可以检测欺诈性信用卡交易的机器学习模型，使用FastAPI将我们的模型部署为API，使用Streamlit创建一个前端应用程序，并使用docker-compose将这两个应用程序结合起来。</p><blockquote class="lp lq lr"><p id="41a5" class="kw kx ls ky b kz lt ii lb lc lu il le lv lw lg lh lx ly lj lk lz ma lm ln lo ha bi translated">您可以通过下面的<strong class="ky hi"> </strong> <a class="ae jm" href="https://share.streamlit.io/nneji123/credit-card-fraud-detection/main" rel="noopener ugc nofollow" target="_blank"> <strong class="ky hi">链接</strong> </a> <strong class="ky hi">查看部署在streamlit cloud上的最终应用。</strong></p><p id="9e3e" class="kw kx ls ky b kz lt ii lb lc lu il le lv lw lg lh lx ly lj lk lz ma lm ln lo ha bi translated">API部署在Heroku平台上，可以在这里  <strong class="ky hi">找到<a class="ae jm" href="https://credit-fraud-ml-api.herokuapp.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky hi">。</strong></a></strong></p><p id="15e7" class="kw kx ls ky b kz lt ii lb lc lu il le lv lw lg lh lx ly lj lk lz ma lm ln lo ha bi translated">包含源代码的库可以在这里  <strong class="ky hi">找到<a class="ae jm" href="https://github.com/Nneji123/Credit-Card-Fraud-Detection/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky hi">。</strong></a></strong></p></blockquote><h1 id="407b" class="jn jo hh bd jp jq jr js jt ju jv jw jx in jy io jz iq ka ir kb it kc iu kd ke bi translated">参考</h1><p id="e6d0" class="pw-post-body-paragraph kw kx hh ky b kz la ii lb lc ld il le km lf lg lh kp li lj lk ks ll lm ln lo ha bi translated"><a class="ae jm" href="https://testdriven.io/blog/fastapi-streamlit/" rel="noopener ugc nofollow" target="_blank">https://testdriven.io/blog/fastapi-streamlit/</a></p><p id="f960" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated"><a class="ae jm" href="https://rihab-feki.medium.com/deploying-machine-learning-models-with-streamlit-fastapi-and-docker-bb16bbf8eb91" rel="noopener">使用Streamlit、FastAPI和Docker部署机器学习模型|作者Rihab Feki | Medium </a></p></div><div class="ab cl oa ob go oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ha hb hc hd he"><p id="019f" class="pw-post-body-paragraph kw kx hh ky b kz lt ii lb lc lu il le km lw lg lh kp ly lj lk ks ma lm ln lo ha bi translated">你坚持到了文章的结尾！感谢您的阅读，希望您能学到很多，如果您喜欢我的内容，并希望与我联系，您可以通过以下方式联系:</p><ol class=""><li id="f2d9" class="mt mu hh ky b kz lt lc lu km mv kp mw ks mx lo my mz na nb bi translated">跟我上<a class="ae jm" rel="noopener" href="/@ifeanyinneji777"> <em class="ls">中</em>。</a></li><li id="8d9a" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo my mz na nb bi translated">在<a class="ae jm" href="https://www.linkedin.com/in/ifeanyi-nneji" rel="noopener ugc nofollow" target="_blank"><em class="ls">LinkedIn</em></a><em class="ls">和</em> <a class="ae jm" href="https://twitter.com/Neji_14" rel="noopener ugc nofollow" target="_blank"> <em class="ls"> Twitter </em> </a>上与我连线。</li><li id="a277" class="mt mu hh ky b kz nc lc nd km ne kp nf ks ng lo my mz na nb bi translated">在LinkedIn 上与Zummit Africa联系</li></ol><div class="mb mc ez fb md me"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="mf ab dw"><div class="mg ab mh cl cj mi"><h2 class="bd hi fi z dy mj ea eb mk ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="ml l"><h3 class="bd b fi z dy mj ea eb mk ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="mm l"><p class="bd b fp z dy mj ea eb mk ed ef dx translated">medium.com</p></div></div><div class="mn l"><div class="ow l mp mq mr mn ms jg me"/></div></div></a></div></div></div>    
</body>
</html>