# 蜂巢第二部分

> 原文：<https://medium.com/mlearning-ai/hive-part-2-3e521e200f30?source=collection_archive---------3----------------------->

![](img/3c6e3342e7fa6112a0f5d657321e8aa6.png)

[MLearning.ai collaborates with over 500 researchers from 6 continents](https://www.linkedin.com/company/mlearning-ai/)

# 1.配置单元数据类型

配置单元数据类型分为数字类型、字符串类型、杂项类型和复杂类型。下面给出了配置单元数据类型的列表。

## a.数字类型

*   TINYINT (1 字节有符号整数，从-128 到 127)
*   SMALLINT (2 字节有符号整数，从-32，768 到 32，767)
*   INT (4 字节有符号整数，从-2，147，483，648 到 2，147，483，647)
*   BIGINT (8 字节有符号整数，从-9，223，372，036，854，775，808 到 9，223，372，036，854，775，807)
*   FLOAT (4 字节单精度浮点数)
*   DOUBLE (8 字节双精度浮点数)
*   十进制(Hive 0.13.0 引入了用户可定义的精度和标度)

## b.日期/时间类型

*   时间戳
*   日期

## c.字符串类型

*   线
*   可变长字符串
*   茶

## d.杂项类型

*   布尔型
*   二进制的

## e.复杂类型

*   **数组:**

它是使用从零开始的整数进行索引的相似类型的值的集合。

*   **地图:**

它包含使用数组表示法访问字段的键值元组。

*   **结构:**

Hive 中的复杂数据类型，可以存储一组不同数据类型的字段。

# 2.桌子

在 Hive 中，我们可以使用类似于 SQL 的约定来创建一个表。它支持存储表的数据文件的广泛的灵活性。它提供了两种类型的表格:-

-内部表

-外部表

# 内部表

内部表也称为托管表，因为它们的数据生命周期是由配置单元控制的。默认情况下，这些表存储在 hive.metastore.warehouse.dir 定义的目录下的子目录中(即/user/hive/warehouse)。内部表不够灵活，无法与 Pig 等其他工具共享。如果我们试图删除内部表，Hive 会删除表模式和数据。

# 外部表

外部表允许我们从外部创建和访问表和数据。 **external** 关键字用于指定外部表，而 **location** 关键字用于确定加载数据的位置。

因为表是外部的，所以数据不存在于 Hive 目录中。因此，如果我们尝试删除该表，该表的元数据将被删除，但数据仍然存在。

# 3.划分

Hive 中的分区意味着根据特定列(如日期、课程、城市或国家)的值将表分成几个部分。分区的优点是，由于数据存储在片上，查询响应时间变得更快。

Hive 中的分区可以通过两种方式执行

-静态分区

-动态分区

# I .蜂巢静态分区

-在静态或手动分区中，需要在将数据加载到表中时手动传递分区列的值。因此，数据文件不包含分区列。

-如果要在 hive 中使用静态分区，应该在 hive-site.xml 中设置属性集**hive . mapred . mode = strict**该属性默认设置

-静态分区处于严格模式。

# 二。蜂巢动态划分

动态分区为我们提供了灵活性，并根据我们插入到表中的数据自动创建分区。

要使用 DP，我们首先需要实现:

-hive > set hive . exec . dynamic . partition = true；

-hive > set hive . exec . dynamic . partition . mode = non strict；

如果您想要对许多列进行分区，但是不知道有多少列，那么动态分区也是合适的。

# 4.视角

基本上，Apache Hive 视图类似于 Hive 表，是根据需求生成的。

用途 1:过滤数据

用途 2:降低复杂性

# 5.水桶

配置单元中的分桶概念是将数据分成多个范围，这些范围称为桶，为数据提供额外的结构，以便可以用于更高效的查询。存储桶的范围由数据集中一个或多个列的哈希值决定

当分区更加困难时，我们使用分桶的概念。

分桶表还可以更有效地利用整体资源；当在存储桶级别进行连接，而不是对其中一个表进行完整的广播连接时，内存利用率很低。桶的数量越多，需要的内存就越少——但是太多的桶会产生不必要的并行性。一开始可能需要做一些实验，但最终，您会找到高效扫描数据集的理想存储桶数。

分桶的概念基于散列技术。

这里，计算当前列值和所需桶数的模(假设 F(x) % 3)。

现在，基于结果值，数据被存储在相应的桶中。