<html>
<head>
<title>💪Deploying a Pre-Configured virtual machine in Azure for Data Science and AI Development</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">💪在Azure中部署预配置的虚拟机，用于数据科学和人工智能开发</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/deploying-a-pre-configured-virtual-machine-in-azure-for-data-science-and-ai-development-16a4d1d46142?source=collection_archive---------3-----------------------#2021-10-25">https://medium.com/mlearning-ai/deploying-a-pre-configured-virtual-machine-in-azure-for-data-science-and-ai-development-16a4d1d46142?source=collection_archive---------3-----------------------#2021-10-25</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="fa00" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">了解如何在Azure中部署用于数据科学的虚拟机，并预装用于数据分析、机器学习和人工智能培训的工具。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/10b715f2d607945746879b4e8c5f4133.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mxNgJrWSZkp3h1cExWxeRQ.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">💪Deploying a Pre-Configured virtual machine in Azure for Data Science and AI Development</figcaption></figure></div><div class="ab cl js jt go ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="ha hb hc hd he"><p id="0a4a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为数据科学和人工智能开发构建实验室环境不应该很复杂。</p><p id="8607" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在本文中，我们将回顾如何使用Azure Bicep利用基础设施即代码在Azure云平台上构建一个定制的VM镜像来进行数据科学研究。</p><h1 id="e52c" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">解决方案概述</h1><p id="f396" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">我们将创作一个Bicep模板，在Azure中创建一个基于Linux的数据科学虚拟机(DSVM ),其中包括预安装和预配置的流行数据科学工具，以启动构建高级分析的智能应用程序。</p><p id="7ed6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">DSVM是为数据科学定制的虚拟机映像。DSVM支持许多语言，如Python、R、Julia、SQL、C#、Jave、Node.js、F#。</p><p id="19f4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您可以选择纵向扩展虚拟机以及SSH或RDP。</p><h1 id="e2a2" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">部署的资源</h1><ul class=""><li id="ca38" class="lc ld hh ig b ih kx il ky ip le it lf ix lg jb lh li lj lk bi translated">Windows Server 2019虚拟机</li><li id="7e42" class="lc ld hh ig b ih ll il lm ip ln it lo ix lp jb lh li lj lk bi translated">IP地址(公有和私有)</li><li id="2fb3" class="lc ld hh ig b ih ll il lm ip ln it lo ix lp jb lh li lj lk bi translated">虚拟网络和子网</li><li id="54d4" class="lc ld hh ig b ih ll il lm ip ln it lo ix lp jb lh li lj lk bi translated">唱片</li><li id="8c02" class="lc ld hh ig b ih ll il lm ip ln it lo ix lp jb lh li lj lk bi translated">网络安全配置</li></ul><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es lq"><img src="../Images/97a7d32591ba6e151f89292c29ca449d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T0A0_l7lnD-SgcNQCaosDg.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">DSVM solution components</figcaption></figure><h1 id="420e" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">在部署到Azure之前</h1><p id="2e3e" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">确保您具备以下条件:</p><ul class=""><li id="1310" class="lc ld hh ig b ih ii il im ip lr it ls ix lt jb lh li lj lk bi translated">有效的Azure订阅</li><li id="29c3" class="lc ld hh ig b ih ll il lm ip ln it lo ix lp jb lh li lj lk bi translated">Azure二头肌已安装</li><li id="08ae" class="lc ld hh ig b ih ll il lm ip ln it lo ix lp jb lh li lj lk bi translated">Azure PowerShell</li><li id="4275" class="lc ld hh ig b ih ll il lm ip ln it lo ix lp jb lh li lj lk bi translated">Azure订阅中的资源组</li></ul><p id="e176" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在让我们使用Bicep模板在Azure上部署Moodle。</p><h1 id="2ba9" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">1.Azure二头肌模板-参数</h1><p id="b2f0" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">我们将定义以下参数:</p><pre class="jd je jf jg fd lu lv lw lx aw ly bi"><span id="4694" class="lz ka hh lv b fi ma mb l mc md">param location string<br/>param networkInterfaceName string<br/>param networkSecurityGroupName string<br/>param networkSecurityGroupRules array<br/>param subnetName string<br/>param virtualNetworkName string<br/>param addressPrefixes array<br/>param subnets array<br/>param publicIpAddressName string<br/>param publicIpAddressType string<br/>param publicIpAddressSku string<br/>param virtualMachineName string<br/>param virtualMachineComputerName string<br/>param osDiskType string<br/>param virtualMachineSize string<br/>param adminUsername string</span><span id="9d9f" class="lz ka hh lv b fi me mb l mc md">@secure()<br/>param adminPassword string<br/>param patchMode string<br/>param enableHotpatching bool</span></pre><h1 id="6660" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">2.Azure二头肌模板-变量</h1><p id="b5a2" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">我们将定义以下变量:</p><pre class="jd je jf jg fd lu lv lw lx aw ly bi"><span id="1a2d" class="lz ka hh lv b fi ma mb l mc md">var nsgId = resourceId(resourceGroup().name, 'Microsoft.Network/networkSecurityGroups', networkSecurityGroupName)<br/>var vnetId = resourceId(resourceGroup().name, 'Microsoft.Network/virtualNetworks', virtualNetworkName)<br/>var subnetRef = '${vnetId}/subnets/${subnetName}'</span></pre><h1 id="4b61" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">3.Azure二头肌模板—资源</h1><p id="fb80" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">我们将定义以下资源:</p><pre class="jd je jf jg fd lu lv lw lx aw ly bi"><span id="5f19" class="lz ka hh lv b fi ma mb l mc md">// This will be your Primary NIC<br/>resource networkInterfaceName_resource 'Microsoft.Network/networkInterfaces@2021-03-01' = {<br/>  name: networkInterfaceName<br/>  location: location<br/>  properties: {<br/>    ipConfigurations: [<br/>      {<br/>        name: 'ipconfig1'<br/>        properties: {<br/>          subnet: {<br/>            id: subnetRef<br/>          }<br/>          privateIPAllocationMethod: 'Dynamic'<br/>          publicIPAddress: {<br/>            id: pip.id<br/>          }<br/>        }<br/>      }<br/>    ]<br/>    networkSecurityGroup: {<br/>      id: nsgId<br/>    }<br/>  }<br/>  dependsOn: [<br/>    networkSecurityGroupName_resource<br/>    virtualNetworkName_resource<br/>    pip<br/>  ]<br/>}<br/>// Simple Network Security Group<br/>resource networkSecurityGroupName_resource 'Microsoft.Network/networkSecurityGroups@2019-02-01' = {<br/>  name: networkSecurityGroupName<br/>  location: location<br/>  properties: {<br/>    securityRules: networkSecurityGroupRules<br/>  }<br/>}<br/>// This will build a Virtual Network.<br/>resource virtualNetworkName_resource 'Microsoft.Network/virtualNetworks@2020-11-01' = {<br/>  name: virtualNetworkName<br/>  location: location<br/>  properties: {<br/>    addressSpace: {<br/>      addressPrefixes: addressPrefixes<br/>    }<br/>    subnets: subnets<br/>  }<br/>}<br/>// Public IP for your Primary NIC<br/>resource pip 'Microsoft.Network/publicIpAddresses@2019-02-01' = {<br/>  name: publicIpAddressName<br/>  location: location<br/>  properties: {<br/>    publicIPAllocationMethod: publicIpAddressType<br/>  }<br/>  sku: {<br/>    name: publicIpAddressSku<br/>  }<br/>}<br/>// This is the virtual machine that you're building.<br/>resource virtualMachineName_resource 'Microsoft.Compute/virtualMachines@2021-03-01' = {<br/>  name: virtualMachineName<br/>  location: location<br/>  properties: {<br/>    hardwareProfile: {<br/>      vmSize: virtualMachineSize<br/>    }<br/>    storageProfile: {<br/>      osDisk: {<br/>        createOption: 'FromImage'<br/>        managedDisk: {<br/>          storageAccountType: osDiskType<br/>        }<br/>      }<br/>      imageReference: {<br/>        publisher: 'microsoft-dsvm'<br/>        offer: 'dsvm-win-2019'<br/>        sku: 'server-2019'<br/>        version: 'latest'<br/>      }<br/>    }<br/>    networkProfile: {<br/>      networkInterfaces: [<br/>        {<br/>          id: networkInterfaceName_resource.id<br/>        }<br/>      ]<br/>    }<br/>    osProfile: {<br/>      computerName: virtualMachineComputerName<br/>      adminUsername: adminUsername<br/>      adminPassword: adminPassword<br/>      windowsConfiguration: {<br/>        enableAutomaticUpdates: true<br/>        provisionVMAgent: true<br/>        patchSettings: {<br/>          enableHotpatching: enableHotpatching<br/>          patchMode: patchMode<br/>        }<br/>      }<br/>    }<br/>    diagnosticsProfile: {<br/>      bootDiagnostics: {<br/>        enabled: true<br/>      }<br/>    }<br/>  }<br/>}</span></pre><h1 id="7df5" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">4.Azure二头肌模板-输出</h1><p id="97f3" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">我们将定义以下输出:</p><pre class="jd je jf jg fd lu lv lw lx aw ly bi"><span id="232b" class="lz ka hh lv b fi ma mb l mc md">output adminUsername string = adminUsername<br/>output publicIp string = pip.id</span></pre><h1 id="3c7e" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">5.Azure Bicep模板-部署</h1><p id="246a" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">我们将使用下面的命令来部署我们的二头肌模板:</p><pre class="jd je jf jg fd lu lv lw lx aw ly bi"><span id="3629" class="lz ka hh lv b fi ma mb l mc md">$date = Get-Date -Format "MM-dd-yyyy"<br/>$deploymentName = "AzInsiderDeployment"+"$date"</span><span id="987b" class="lz ka hh lv b fi me mb l mc md">New-AzResourceGroupDeployment -Name $deploymentName -ResourceGroupName azinsider-dsvm -TemplateFile .\main.bicep -TemplateParameterFile .\azuredeploy.parameters.json -c</span></pre><p id="2a63" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下图显示了部署的预览:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es mf"><img src="../Images/7a21de492e46e4790057010d9cf57874.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rz09vqelE5lCOKfKirvQJg.png"/></div></div></figure><p id="f223" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后我们将执行部署。下图显示了部署输出:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es mg"><img src="../Images/b6be9d44e97d18ce53a0e057a7da72d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bIgAQy7pEBw0pNlP-mBFew.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">virtual machine in Azure for Data Science and AI Development — Deployment output</figcaption></figure><p id="de6f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，您可以通过RDP访问虚拟机。你可以从Azure门户获得公共IP和私有IP。</p><p id="3dad" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">访问虚拟机后，您将看到所有工具都已准备就绪，可供您进行数据科学和人工智能开发:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es mh"><img src="../Images/af6da82eb1a8eb0172d9c685d3a5d69f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3WfvzbPgnaVuKMpYSBVMQg.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Windows Server 2019 — Data Science virtual machine</figcaption></figure><p id="77f8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您可以参考以下URL来查看此虚拟机中包含的预配置工具的详细信息:</p><div class="mi mj ez fb mk ml"><a href="https://docs.microsoft.com/en-us/azure/machine-learning/data-science-virtual-machine/tools-included?WT.mc_id=AZ-MVP-5000671" rel="noopener  ugc nofollow" target="_blank"><div class="mm ab dw"><div class="mn ab mo cl cj mp"><h2 class="bd hi fi z dy mq ea eb mr ed ef hg bi translated">Azure数据科学虚拟机上包含的工具——Azure数据科学虚拟机</h2><div class="ms l"><h3 class="bd b fi z dy mq ea eb mr ed ef dx translated">数据科学虚拟机是一种在云中探索数据和进行机器学习的简单方法。数据科学…</h3></div><div class="mt l"><p class="bd b fp z dy mq ea eb mr ed ef dx translated">docs.microsoft.com</p></div></div><div class="mu l"><div class="mv l mw mx my mu mz jm ml"/></div></div></a></div><p id="93ca" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">希望你能利用Azure平台的虚拟机扩展能力。当您训练大型模型时，或者当您需要高速计算同时保持相同的操作系统磁盘时，您可以切换到基于GPU的虚拟机。</p><p id="ba0d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">该解决方案的完整代码可以在以下URL中找到。请随意投稿！</p><div class="mi mj ez fb mk ml"><a href="https://github.com/daveRendon/azinsider/tree/main/application-workloads/create-data-science-vm-windows" rel="noopener  ugc nofollow" target="_blank"><div class="mm ab dw"><div class="mn ab mo cl cj mp"><h2 class="bd hi fi z dy mq ea eb mr ed ef hg bi translated">azin sider/应用程序-工作负载/创建-数据-科学-虚拟机-主数据上的windows rendon/azin sider</h2><div class="ms l"><h3 class="bd b fi z dy mq ea eb mr ed ef dx translated">在GitHub上创建一个帐户，为daveRendon/azinsider开发做出贡献。</h3></div><div class="mt l"><p class="bd b fp z dy mq ea eb mr ed ef dx translated">github.com</p></div></div><div class="mu l"><div class="na l mw mx my mu mz jm ml"/></div></div></a></div><p id="33f5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">👉<a class="ae nb" href="http://eepurl.com/gKmLdf" rel="noopener ugc nofollow" target="_blank"> <em class="nc">在此加入</em><strong class="ig hi"><em class="nc">azin sider</em></strong><em class="nc">邮箱列表。</em>T9】</a></p><p id="acb4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="nc">-戴夫·r·</em></p></div></div>    
</body>
</html>