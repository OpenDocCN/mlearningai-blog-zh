<html>
<head>
<title>License Plate Detection with OpenCV — Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用OpenCV-Python实现车牌检测</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/license-plate-detection-with-opencv-python-e14ff6f9f2de?source=collection_archive---------2-----------------------#2021-05-24">https://medium.com/mlearning-ai/license-plate-detection-with-opencv-python-e14ff6f9f2de?source=collection_archive---------2-----------------------#2021-05-24</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="8afe" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这篇博文中，我们将使用OpenCV做一个小项目。在这个项目中，我将尝试解释我们如何从车辆图像中检测出车辆的牌照。博客帖子的内容如下:</p><ul class=""><li id="1183" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">为什么要检测车牌？</li><li id="5da0" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">关于车牌检测的代码部分</li><li id="f34d" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">代码审查和解释</li><li id="3904" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">摘要</li></ul><p id="852d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你可以跟着我学习和复习更多像这样的计算机视觉应用。我们开始吧。</p><p id="b959" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您可以关注我的GitHub个人资料，了解与应用程序相关的代码以及更多内容。</p><p id="5070" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">github:<a class="ae jq" href="https://github.com/keremkargin0" rel="noopener ugc nofollow" target="_blank">https://github.com/keremkargin0</a></p></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><h2 id="9aa8" class="jy jz hh bd ka kb kc kd ke kf kg kh ki ip kj kk kl it km kn ko ix kp kq kr ks bi translated">为什么要检测车牌？</h2><figure class="ku kv kw kx fd ky er es paragraph-image"><div class="er es kt"><img src="../Images/245f9ff626fe51f68a701fcffaf83c75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*zXN9JXm2rARSStzyKInv2A.jpeg"/></div></figure><p id="726c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">车牌检测已经成为最近最流行的应用之一。你可能想知道为什么我们要检测车牌。这也是我为什么要说这个项目可以在哪里实施的原因。</p><p id="a6df" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">例如，当向进入停车场的车辆开罚单时，可以在停车场中使用牌照检测。在这种情况下，当车辆来到栅栏前时，它们的车牌被读取，属于该车牌的车票从系统中创建。在属于相关牌照的车辆在停车场期间，该票证可用于计算费用支付过程。</p><p id="2c63" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">除此之外，我们可能在某个地区寻找属于某个牌照的车辆。为了做到这一点，让我们假设我们也有监控所有路径的摄像机。通过检测经过摄像头的每辆车的牌照并将其保存在一个列表中，如果该车辆与被搜索车辆的牌照相匹配，就可以直接跟踪该车辆。</p><p id="697c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我试图通过与你们分享我想到的几个例子来使这个问题更容易理解。让我们现在开始写代码。然后我会一一描述所有的步骤。</p></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><h2 id="4c44" class="jy jz hh bd ka kb kc kd ke kf kg kh ki ip kj kk kl it km kn ko ix kp kq kr ks bi translated">关于车牌检测的代码部分</h2><figure class="ku kv kw kx fd ky"><div class="bz dy l di"><div class="lb lc l"/></div><figcaption class="ld le et er es lf lg bd b be z dx">License Plate Detection</figcaption></figure></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><h2 id="2749" class="jy jz hh bd ka kb kc kd ke kf kg kh ki ip kj kk kl it km kn ko ix kp kq kr ks bi translated">代码审查和解释</h2><p id="44dc" class="pw-post-body-paragraph ie if hh ig b ih lh ij ik il li in io ip lj ir is it lk iv iw ix ll iz ja jb ha bi translated">在这一节中，我将尝试解释它的含义以及在编写分步代码时的用法。</p><ul class=""><li id="db1b" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">首先，我们导入将在整个项目中使用的必要库。</li></ul><pre class="ku kv kw kx fd lm ln lo lp aw lq bi"><span id="a9df" class="jy jz hh ln b fi lr ls l lt lu">cv2, numpy, pytesseract (to be able to read text in image), imutils</span></pre><ul class=""><li id="e3ba" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">在我们的项目中，我们读取想要检测车牌的车辆的图像，并将其保存为<strong class="ig hi">车牌</strong>变量。</li></ul><pre class="ku kv kw kx fd lm ln lo lp aw lq bi"><span id="2164" class="jy jz hh ln b fi lr ls l lt lu">Here cv2.imread function is used.</span></pre><ul class=""><li id="0013" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">由于我们将对图像进行一些操作，我们首先将图像从bgr转换为灰度格式。</li></ul><pre class="ku kv kw kx fd lm ln lo lp aw lq bi"><span id="da24" class="jy jz hh ln b fi lr ls l lt lu">We apply COLOR_BGR2GRAY using the cv2.cvtColor function.</span></pre><ul class=""><li id="5e09" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">我们对灰度格式的图像进行过滤处理。</li></ul><pre class="ku kv kw kx fd lm ln lo lp aw lq bi"><span id="4e6f" class="jy jz hh ln b fi lr ls l lt lu">In this section, we are using the bilateralFilter. So we do the softening process to the image. You can adjust the softening rate by changing the values here.</span></pre><ul class=""><li id="e556" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">我们正在检测过滤图像中的角点。在这里，我们应用了上面的过滤过程，以使角点确定得更准确，并突出显示车牌。我们保存其角被检测为边缘的图像。</li></ul><pre class="ku kv kw kx fd lm ln lo lp aw lq bi"><span id="686a" class="jy jz hh ln b fi lr ls l lt lu">We use the <strong class="ln hi">Canny </strong>function to find corners. As an argument, it takes the image whose corners will be found, and the minimum and maximum threshold values. Threshold values are as I have adjusted properly to find the corners. By changing these values, you can observe how the corner finding rate changes.</span></pre><ul class=""><li id="27ff" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">我们需要用找到的角在视觉上找到轮廓。因此，在下一步中，我们将裁剪图像以确定车牌所在的区域。</li></ul><pre class="ku kv kw kx fd lm ln lo lp aw lq bi"><span id="7cb2" class="jy jz hh ln b fi lr ls l lt lu">We use cv2.findContours function to find contours. It takes as argument the image whose contours will be found and in addition to it, 2 experimentally accepted arguments. One of them is cv2.RETR_TREE and the other is cv2.CHAIN_APPROX_SIMPLE. You can always use these arguments in the same way.</span></pre><ul class=""><li id="309f" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">我们用找到的轮廓在视觉上捕捉适当的轮廓。为此，我们将使用imutils库。</li></ul><pre class="ku kv kw kx fd lm ln lo lp aw lq bi"><span id="67ff" class="jy jz hh ln b fi lr ls l lt lu">The imutils.grab_contours function captures the contours.</span></pre><ul class=""><li id="0f60" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">找到合适的轮廓后，我们需要列出我们捕捉到的轮廓。因为我们实际上在找一个带盘子的长方形盒子。在这一点上，我们将尝试通过查看我们捕捉到的轮廓来找到这个矩形。作为寻找矩形时的一个重要点，我们应该知道我们寻找的是一个接一个定位的轮廓。如果这些连续的点形成一个矩形，我们可以说板块在这里。</li></ul><pre class="ku kv kw kx fd lm ln lo lp aw lq bi"><span id="c34f" class="jy jz hh ln b fi lr ls l lt lu">We will use the sorted function to sort the contours. It takes the captured <strong class="ln hi">contours</strong> as arguments, by what the contours will be sorted, and whether to sort from largest to smallest or largest to largest. If we say reverse = True, it sorts the entered values in reverse order, ie from greater to less.</span></pre><ul class=""><li id="4908" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">我们编写一个for循环，在我们要寻找的轮廓内找到一个4边闭合的形状。在写这个之前，我们定义一个名为screen的变量。因为我们很快就会在for循环中使用它。</li></ul><pre class="ku kv kw kx fd lm ln lo lp aw lq bi"><span id="613c" class="jy jz hh ln b fi lr ls l lt lu">We will look at every element of the <strong class="ln hi">cnts</strong> variable. Epsilon is an empirically proven value, so you can always use it that way. We start looking for a shape from contours with the approxPolyDP function. The argument True at the end of the function is given because it is a closed shape. We save these values in approx. If we get a situation equal to 4 in approx, congratulations we have found the plate. As a result of this situation, we can break the cycle.</span></pre><ul class=""><li id="e4ba" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">我们将对我们检测到的该板区域应用遮蔽过程。</li></ul><pre class="ku kv kw kx fd lm ln lo lp aw lq bi"><span id="710a" class="jy jz hh ln b fi lr ls l lt lu">We create a canvas called mask that is the same size as the image.</span></pre><ul class=""><li id="6ea4" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">我们要在画布上画一幅画，叫做这个面具。我们希望在屏幕变量中保存板的区域绘制该图。它将坐标信息保存在屏幕变量中。</li></ul><pre class="ku kv kw kx fd lm ln lo lp aw lq bi"><span id="ef7d" class="jy jz hh ln b fi lr ls l lt lu">While doing this drawing, we use the function cv2.drawContours. We turn the plate area white. All remaining areas will be black.</span></pre><ul class=""><li id="1b69" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">我们将把印版区域中的文本粘贴到这个轮廓区域。</li></ul><pre class="ku kv kw kx fd lm ln lo lp aw lq bi"><span id="c1ee" class="jy jz hh ln b fi lr ls l lt lu">We do this with the function cv2.bitwise_and.</span></pre><ul class=""><li id="1aaf" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">我们正在做一些操作来裁剪板块区域。</li><li id="132a" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">因此，使用<strong class="ig hi"><em class="lv"/></strong>pytesseract库，我们从视觉上读取图像中的版材信息并将其打印为文本。</li></ul><pre class="ku kv kw kx fd lm ln lo lp aw lq bi"><span id="4881" class="jy jz hh ln b fi lr ls l lt lu">For this, we use the image_to_string function from the pytesseract library. As an argument, it takes the visual that the text will be read and the language in which this text is to be read. I choose Turkish language to try here. If you want to try it in your own language, you may need to download it additionally. English language is automatically included in the Pytesseract library. You can also do many operations in the English language.</span></pre><ul class=""><li id="7c94" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">最后，我们将这个图版作为文本打印在屏幕上。我们在屏幕上显示车牌图像。</li></ul><figure class="ku kv kw kx fd ky er es paragraph-image"><div class="er es lw"><img src="../Images/8a21d95103a9c7e45bb7ea127fdb45f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*yy-rHBXTBPFey5UUEeDUhQ.png"/></div><figcaption class="ld le et er es lf lg bd b be z dx">Detected Plate</figcaption></figure></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><h2 id="7310" class="jy jz hh bd ka kb kc kd ke kf kg kh ki ip kj kk kl it km kn ko ix kp kq kr ks bi translated">摘要</h2><p id="dfd5" class="pw-post-body-paragraph ie if hh ig b ih lh ij ik il li in io ip lj ir is it lk iv iw ix ll iz ja jb ha bi translated">因此，我们需要看到一辆特定牌照的车辆。当这个条件被满足时，我们在执行一些操作如过滤、遮蔽、确定这个视觉的轮廓之后，使用从视觉中读取文本的功能。因此，我们可以读取车辆的牌照，并在屏幕上以文本形式打印出来。我希望这份申请对你有用。别忘了继续关注下一个应用。</p><p id="a15a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在做这些应用的时候，我受到了下面链接中的课程的启发。</p><p id="439a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae jq" href="https://www.udemy.com/course/opencv-a-ztm-uygulamalarla-goruntu-isleme-2019-18-saat/" rel="noopener ugc nofollow" target="_blank">计算机视觉课程</a></p></div></div>    
</body>
</html>