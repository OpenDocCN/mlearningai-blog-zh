<html>
<head>
<title>From Jupyter Notebook to AWS SageMaker endpoint: Classification and Regression model demo</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从Jupyter笔记本到AWS SageMaker端点:分类和回归模型演示</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/from-jupyter-notebook-to-aws-sagemaker-endpoint-classification-and-regression-model-demo-157fc2ebc429?source=collection_archive---------0-----------------------#2022-04-15">https://medium.com/mlearning-ai/from-jupyter-notebook-to-aws-sagemaker-endpoint-classification-and-regression-model-demo-157fc2ebc429?source=collection_archive---------0-----------------------#2022-04-15</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="0f7c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">从本地主机到云部署ML pipeline一个完整直观的初学者指南，包含轻松构建预测模型的分步实践演示…</p><p id="ae1f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">亲爱的朋友们:</p><p id="bd42" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在本文中，我将分享几个例子，说明我们如何使用<strong class="ig hi"> AWS SageMaker </strong>服务在云上部署本地训练的机器学习模型。通过“<strong class="ig hi">本地培训的</strong>，我们简单地指的是在我们的笔记本电脑/台式机(即AWS云之外)本地培训的<em class="jc"> ML模型。我将向您介绍各个步骤，从训练模型、在AWS基础设施上部署模型，到从本地客户端调用部署以获得实时预测。在开始用例之前，让我们快速浏览一下在SageMaker上构建ML模型的各种方法。此外，我们还将回顾我们将在这里讨论的案例研究中使用的不同AWS服务。</em></p><h2 id="4c9a" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated">介绍</h2><p id="4a0d" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated"><strong class="ig hi"> AWS SageMaker </strong>通过推理管道、批量转换、多模型端点、生产变量的A/B测试、超参数调整、自动缩放等工具，提供了更优雅的方式来训练、测试和部署模型。</p><p id="eb35" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果我们搜索在AWS中部署ML模型的方法，我们会发现相当多的资源谈论在Amazon EC2实例上部署ML模型。<strong class="ig hi">最常见的方式是启动AWS EC2实例来托管我们自己的Flask应用程序和ML模型；其中，客户端(浏览器)将用于将测试数据发送到托管在EC2上的flask服务器，该服务器又调用托管在相同EC2上的模型来获得预测，然后将预测结果发送到客户端。</strong></p><p id="d11e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">但是，这种方法只是使用cloud VM ( EC2)启动应用程序的另一个通用用例，与ML模型部署没有任何具体关系。它不使用任何完全托管/无服务器的设施，以及AWS SageMaker端点可以为ML推断提供的按需可伸缩性(自动伸缩)等好处。此外，EC2实例在资源使用费用和所涉及的管理工作方面也可能代价高昂。我们将遵循下面的架构图中描述的方法，而不是这种传统的方法。用简单的外行话来说，我们首先在本地主机上构建和训练模型，然后进行评估，最后使用<strong class="ig hi"> joblib </strong> dump将模型保存为文件。然后，我们将预先训练好的模型上传到S3 bucket，然后从之前上传到S3的模型文件中创建一个SageMaker模型(即，我们使用SageMaker的内置算法容器来部署本地训练好的模型)。这里，我们使用<strong class="ig hi"> Sagemaker </strong>中内置的<strong class="ig hi"> xgboost </strong>容器映像来托管我们的模型。此外，我们创建<strong class="ig hi"> Sagemaker端点</strong>来服务模型。然后，可以从sagemaker环境或外部的客户端库中调用这个端点。在我们的例子中，我们在sagemaker环境中使用客户端库"<strong class="ig hi"> boto3 </strong>"来验证我们的模型，也从外部环境中验证我们的模型，在外部环境中，我们使用一个本地客户端(即我们场景中的Postman)向云中部署的模型发送一个样本测试数据，并获得对客户端请求的预测—<strong class="ig hi">Amazon Restful http methods</strong>。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kd"><img src="../Images/532cac21ecf4324fa279bf5e615a2391.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*2dejzdE0jhHjFQiy0QFVWA.gif"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Architecture: Localhost to Cloud Deployment (Image by Author)</figcaption></figure><p id="a48d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">注意:- </strong>准备好从外界调用的SageMaker端点<br/>使用如下指定的通道从部署的模型获得实时推理:-<br/>—————————————————<br/>客户端(web浏览器/邮递员/etc)  → <em class="jc">亚马逊API网关</em> → <em class="jc"> Lambda(调用运行时:调用端点) </em> → <em class="jc"> SageMaker模型终点</em> <br/> — — — — — — —</p><h1 id="3252" class="kt je hh bd jf ku kv kw jj kx ky kz jn la lb lc jq ld le lf jt lg lh li jw lj bi translated"><strong class="ak"> AWS服务—重访</strong></h1><p id="0bf6" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">在查看部署示例之前，我们将快速回顾一下所使用的不同AWS服务。</p><p id="4985" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae lk" href="https://aws.amazon.com/sagemaker/" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi"> AWS SageMaker </strong> </a></p><p id="4f93" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">亚马逊SageMaker是一个完全托管的机器学习服务。它帮助数据科学家和开发人员快速准备、构建、训练和部署高质量的机器学习(ML)模型。它提供了一个集成的Jupyter notebook实例，便于访问您的数据源进行探索和分析。</p><p id="4907" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae lk" href="https://aws.amazon.com/s3/?did=ft_card&amp;trk=ft_card" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi">亚马逊S3</strong>T3】</a></p><p id="6d6f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">亚马逊简单存储服务(亚马逊S3)是一种对象存储服务，提供行业领先的可扩展性、数据可用性、安全性和性能。我们可以使用S3来存储任何文件、模型、训练模型的输入数据等。</p><p id="673d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae lk" href="https://aws.amazon.com/lambda/" rel="noopener ugc nofollow" target="_blank">T5】λT7】</a></p><p id="b0df" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">AWS Lambda是一种无服务器计算服务，让您无需配置或管理服务器即可运行代码。只需将您的代码上传为ZIP文件或容器图像，Lambda就会自动精确地分配计算执行能力，并根据传入的请求或事件运行您的代码，适用于任何规模的流量。</p><p id="5fa5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae lk" href="https://aws.amazon.com/api-gateway/" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi"> AWS API网关</strong> </a></p><p id="9f8b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Amazon API Gateway是一个完全托管的服务，使开发人员可以轻松地创建、发布、维护、监控和保护任何规模的API。API充当应用程序从后端服务访问数据、业务逻辑或功能的“前门”。使用API Gateway，您可以创建支持实时双向通信应用程序的RESTful APIs和WebSocket APIs。</p><p id="28a3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae lk" href="https://boto3.amazonaws.com/v1/documentation/api/latest/index.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi"> Boto3 </strong> </a></p><p id="ef8f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是一个用于Python的AWS SDK。您可以使用AWS SDK for Python (Boto3)来创建、配置和管理AWS服务，例如亚马逊弹性计算云(亚马逊EC2)和亚马逊简单存储服务(亚马逊S3)。SDK提供了面向对象的API以及对AWS服务的底层访问。</p><p id="1b71" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae lk" href="https://sagemaker.readthedocs.io/en/stable/index.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi">亚马逊SageMaker Python SDK </strong> </a></p><p id="eae0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">SageMaker Python SDK为使用Amazon SageMaker提供了几个高级抽象。</p><h1 id="f80c" class="kt je hh bd jf ku kv kw jj kx ky kz jn la lb lc jq ld le lf jt lg lh li jw lj bi translated">在SageMaker中部署模型</h1><p id="6a4f" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">简而言之，SageMaker是AWS提供的ML服务，用于在云上编码、训练和部署ML模型。如果我们通读一下<strong class="ig hi"> SageMaker开发者指南</strong>，我们可以了解服务框架是多么的庞大和多样，包括对许多流行算法的内置支持，从<strong class="ig hi">线性学习器、XGBoost、K-NN、K-Means等等。到深度学习框架像Tensorflow，Pytorch，MXNet，</strong>等等。</p><p id="12d2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">回到我们当前的主题<em class="jc">sage maker</em>上的模型部署，需要注意的是<strong class="ig hi">在<strong class="ig hi"> SageMaker </strong>中有多种训练和部署ML模型</strong>的方式</p><ul class=""><li id="1d8e" class="ll lm hh ig b ih ii il im ip ln it lo ix lp jb lq lr ls lt bi translated">在SageMaker内部培训和部署，都使用SageMaker自己的内置算法容器(请注意这些是AWS管理的容器)。</li><li id="b5fc" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">在本地/在SageMaker外部训练我们的模型，然后使用SageMaker内置的算法容器，只部署本地训练好的模型(自带模型类型)。</li><li id="3964" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">使用SageMaker的(AWS管理的)内置算法容器，但根据需要用我们自己的脚本定制培训(自带模型类型)。</li><li id="c513" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">在我们的本地容器(由我们构建和管理)中，以任何方法/或我们自己的算法训练我们的模型，然后将该容器带到SageMaker并部署使用(BYOC-自带容器)。</li></ul><p id="5c68" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">从上面列表的顶部到底部，ML工程师的灵活性增加了，但是所需的复杂性和工作量也增加了，例如，您需要为BYOC类型的部署投入更多的精力。</p><h1 id="f481" class="kt je hh bd jf ku kv kw jj kx ky kz jn la lb lc jq ld le lf jt lg lh li jw lj bi translated">分类演示—在AWS云上部署本地培训的模型</h1><p id="de1f" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">在本文中，<strong class="ig hi">我们将尝试上面列表中的第二种方法，</strong>即<strong class="ig hi">在您的笔记本电脑/台式机上进行本地训练，并将其部署在AWS cloud上</strong>(不必太担心如何使用SageMaker来训练模型)。</p><p id="3933" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">让我们开始吧！</strong></p><p id="2433" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我举了一个众所周知的简单但在ML世界中很流行的分类模型例子——即鸢尾花的类型预测。<br/>由于我们在这里只关注部署，所以我们不打算在EDA、数据准备、超参数调整、模型选择等方面花费时间。因此，我们采用简单的鸢尾花玩具数据集！</p><p id="0125" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">试用本教程的先决条件- </strong></p><p id="1dfc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你需要有一个免费的AWS账户才能使用亚马逊的云服务，包括SageMaker，Lambda，S3等。以及<strong class="ig hi">熟悉在AWS控制台上启动这些服务</strong>。有关如何创建免费AWS帐户并尝试在AWS控制台上启动这些服务的详细信息，可以在互联网上轻松找到。</p><p id="36b6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">重要信息</strong> —请注意<strong class="ig hi"> SageMaker </strong>不是<strong class="ig hi">而是<strong class="ig hi">免费服务</strong>，并根据您运行和使用笔记本实例、存储等资源的时间长短而产生费用。你必须正确清理所有的SageMaker资源，Lambda，S3桶等。在你尝试了这个教程之后。我已经在本文末尾分享了如何清理的细节。</strong></p><p id="451f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">我们构建分类模型(从本地主机到云)的一步一步的方法简单如下。</strong></p><ol class=""><li id="ceeb" class="ll lm hh ig b ih ii il im ip ln it lo ix lp jb lz lr ls lt bi translated">加载数据集并在本地笔记本电脑/台式机中训练模型，无需使用任何云库或SageMaker。</li></ol><p id="0aba" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">2.将训练好的模型文件上传到AWS SageMaker，并在那里部署。</p><p id="e851" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="jc">注:- </em> </strong> <em class="jc">部署包括将模型放置在S3桶中，创建一个SageMaker模型对象，配置和创建端点，以及一些无服务器服务(API gateway和Lambda)从外界触发端点。</em></p><p id="2753" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3.使用一个本地客户端(我们使用Postman)将一个样本测试数据发送到云中部署的模型，并将预测返回给客户端。Restful方法用于此目的。</p><p id="88a8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们仔细阅读下面详细的分步说明。</p><h1 id="285d" class="kt je hh bd jf ku kv kw jj kx ky kz jn la lb lc jq ld le lf jt lg lh li jw lj bi translated">创建和训练模型</h1><ol class=""><li id="60cd" class="ll lm hh ig b ih jy il jz ip ma it mb ix mc jb lz lr ls lt bi translated"><strong class="ig hi">在本地笔记本电脑/台式机/工作站上，使用Jupyter笔记本，在流行的Iris flower数据集上训练一个XGBoost分类模型。</strong></li></ol><p id="14df" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> 2。测试模型，并使用joblib在本地保存模型文件。</strong></p><p id="d14d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">以上两个步骤请参考<strong class="ig hi">iris-model-creation . ipynb</strong>笔记本，可以在我的<a class="ae lk" href="https://github.com/ajayarunachalam/AWS_DEMO_LOCALHOST_2_CLOUD" rel="noopener ugc nofollow" target="_blank"> Github库</a>中找到。</p><p id="3eff" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">从<a class="ae lk" href="https://github.com/ajayarunachalam/AWS_DEMO_LOCALHOST_2_CLOUD" rel="noopener ugc nofollow" target="_blank"> github </a>下载<strong class="ig hi">iris-model-creation . ipynb</strong>到你的笔记本电脑/台式机/工作站，运行它创建模型和<strong class="ig hi">test _ point _ classifier _ sample . CSV</strong>文件。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es md"><img src="../Images/fb6306f6cf60dd844521098d6b8c5384.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*N0TFoYoPPI2FD6QP.jpeg"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Model Creation: Image by Author</figcaption></figure><p id="7ee0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在iris-model-creation笔记本中，基本上我们下载iris flower数据集，在其上运行一个简单的XGBoost模型，测试它，并使用<strong class="ig hi"> joblib </strong> dump将模型保存为本地文件。出于测试目的，我们在‘test _ point _ classifier _ sample . CSV’中显式保存一些样本鸢尾花数据。</p><h1 id="7a76" class="kt je hh bd jf ku kv kw jj kx ky kz jn la lb lc jq ld le lf jt lg lh li jw lj bi translated">在SageMaker中部署模型</h1><p id="d1bc" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">接下来的两个步骤，请参考我的<a class="ae lk" href="https://github.com/ajayarunachalam/AWS_DEMO_LOCALHOST_2_CLOUD" rel="noopener ugc nofollow" target="_blank"> Github资源库</a>中的<strong class="ig hi">iris-model-deployment-AWS . ipynb</strong>笔记本。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es me"><img src="../Images/c8e8e53d669c159c916558b59a07db9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o4ifjA5iEOYd9baZodWhWA.png"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Model deployment: Image by Author</figcaption></figure><p id="c53d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">注意:- </strong>我们必须在SageMaker中上传并运行这个笔记本，<strong class="ig hi">而不是在本地</strong>。</p><p id="4cf0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> 3。在AWS控制台中，创建一个SageMaker笔记本实例，并打开一个Jupyter笔记本。</strong></p><p id="9976" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">将本地训练的模型、test _ point _ classifier _ sample . CSV和iris-model-deployment-AWS . ipynb文件上传到SageMaker笔记本。</p><p id="9113" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> 4。在SageMaker中运行iris-model-deployment-aws笔记本。</strong></p><p id="2a4b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">重要:- </strong>运行笔记本中的所有单元格，除-‘<strong class="ig hi">删除端点</strong>单元格。</p><p id="6d0d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">注意:- </strong>当看到“找不到内核”弹出窗口时，选择并设置conda_python3为内核。</p><p id="2ac0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">iris-model-deployment-AWS</strong>笔记本代码执行以下操作</p><ul class=""><li id="bd32" class="ll lm hh ig b ih ii il im ip ln it lo ix lp jb lq lr ls lt bi translated">加载模型文件，打开它并进行测试，然后将它上传到一个S3存储桶(SageMaker将从那里获取模型工件)。</li><li id="8b14" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">从存储在S3的模型中创建一个SageMaker模型对象。为此，我们将使用SageMaker内置的XGBoost容器，因为该模型是用XGBoost算法在本地训练的。根据您用于建模的算法，您必须正确选择相应的内置容器。SageMaker开发人员指南将帮助您完成必要的步骤。</li><li id="99d8" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">创建端点配置。<em class="jc">端点是外部世界可以通过其使用部署的模型进行预测的接口。</em>关于端点的更多细节可以在<a class="ae lk" href="https://docs.aws.amazon.com/sagemaker/index.html" rel="noopener ugc nofollow" target="_blank"> SageMaker文档</a>中找到。</li><li id="a55e" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">为模型创建一个端点。</li><li id="6743" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">从部署笔记本中调用端点来确认端点，并确认部署的模型工作正常。</li></ul><p id="6be1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">运行笔记本到这一点后，你可以看到在AWS控制台的<strong class="ig hi"> Sagemaker </strong> → <strong class="ig hi">推理</strong> → <strong class="ig hi">端点</strong>下创建的端点。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es md"><img src="../Images/959f73ababd5b09a73fbdf62f4a05586.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sdFGH6vBXrwMhwUT.png"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Endpoint Created: Image by Author</figcaption></figure><p id="39ac" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">您必须记下显示的端点名称。</strong>这将在<strong class="ig hi">创建Lambda函数</strong>时使用，如下节所述。</p><h1 id="c34b" class="kt je hh bd jf ku kv kw jj kx ky kz jn la lb lc jq ld le lf jt lg lh li jw lj bi translated">为端到端通信启动必要的AWS服务</h1><p id="dda7" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">完成上述步骤后，我们将部署模型，并准备好从外部调用SageMaker端点，以从我们部署的模型中获得实时预测。</p><p id="77a7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下图显示了如何使用无服务器AWS架构调用部署的模型。一个客户端脚本调用一个<a class="ae lk" href="https://aws.amazon.com/api-gateway" rel="noopener ugc nofollow" target="_blank"> Amazon API Gateway </a> API动作并传递参数值。API网关是向客户端提供API的层。API Gateway将参数值传递给Lambda函数。Lambda函数解析该值并调用SageMaker模型端点，将参数传递给相同的。模型执行预测任务，并将预测结果返回给Lambda。Lambda函数解析返回值并将其发送回API Gateway。API网关用该值响应客户端。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es mf"><img src="../Images/b4ccce6ca4b8358e3f56712fe2411281.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*f6SCTmVj7CAfMjep.gif"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Serverless AWS Architecture pipeline for calling Deployed model using endpoint: Image by Author</figcaption></figure><p id="37ea" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了我们的目的，我们将使用亚马逊的Rest API网关。代替web浏览器作为客户端，我们将使用<strong class="ig hi"> Postman app </strong>来使事情变得简单(<strong class="ig hi">注:- </strong>如果你想使用浏览器web界面，你需要将Flask打包在一个容器中，该容器需要在SageMaker中放置和运行)。在我们的例子中，将使用Postman发送Restful POST方法调用API网关，并获得响应(预测)。所以，我们需要设置API网关和Lambda。让我们完成剩下的最后几步。</p><p id="a2e8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> 5。创建一个包含以下策略的IAM角色，该策略赋予我们的Lambda函数调用模型端点的权限。</strong></p><pre class="ke kf kg kh fd mg mh mi mj aw mk bi"><span id="cef4" class="jd je hh mh b fi ml mm l mn mo">{<br/>    "Version": "2012-10-17",<br/>    "Statement": [<br/>        {<br/>            "Sid": "VisualEditor0",<br/>            "Effect": "Allow",<br/>            "Action": "sagemaker:InvokeEndpoint",<br/>            "Resource": "*"<br/>        }<br/>    ]<br/>}</span></pre><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es md"><img src="../Images/583aaf186925f255c70bdc5772b0ed78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZqFct4up_NSOlWtG.jpeg"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Create IAM policy: Image by Author</figcaption></figure><p id="1f18" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">选择<strong class="ig hi"> Lambda </strong>作为AWS服务中的用例，同时创建角色并将策略附加到角色。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es mp"><img src="../Images/87e191519b1536beb8ddf1fc2adb9e69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ztSXaP4H82Cz2S36.jpeg"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Create Role: Image by Author</figcaption></figure><p id="bbb1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> 6。用下面提到的python代码创建一个Lambda函数，该函数调用SageMaker运行时“invoke _ endpoint</strong>”<strong class="ig hi">并返回预测。</strong></p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es mq"><img src="../Images/0d618d1253301604167d79c1a9e6abe1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1106/format:webp/1*7sMpmtHB2pu17zqhUrdSRg.png"/></div><figcaption class="kp kq et er es kr ks bd b be z dx">Python snippet of our lambda function: Image by Author</figcaption></figure><p id="dd90" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">从头选择<strong class="ig hi">作者</strong>并给一个函数名，选择<strong class="ig hi">运行时为Python 3.8 </strong>如下图。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es mr"><img src="../Images/bf9ca489579edd262539d96348a97bef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Vvbv6cIvQAHwkK9g.jpeg"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Creating Lambda Function: Image by Author</figcaption></figure><p id="2da3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">选择“使用现有角色”</strong>，并选择您在上一步中创建的角色。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es md"><img src="../Images/7f9aa7d7d0b0de0129b464b7fd9cf05a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*J_brLTsTVvxd3uGA.jpeg"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Creating Lambda Function: Image by Author</figcaption></figure><p id="e736" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在lambda的代码部分下，输入本步骤开始时给出的python代码。<strong class="ig hi">输入代码后记得点击“部署”。</strong></p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es ms"><img src="../Images/e98e79be485e30228d0c137bed6bc2ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*m2u12bnez-jcyLmO.jpeg"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Python snippet of our lambda function: Image by Author</figcaption></figure><p id="8110" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">转到Lambda函数的<strong class="ig hi">配置</strong>选项卡，添加一个环境变量“<strong class="ig hi"> ENDPOINT_NAME </strong>”，并将其值设置为前面步骤中创建的相同端点。注意，Lambda函数的代码中使用了这个环境变量。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es md"><img src="../Images/3ec325d4be94544dc1e1fbdfb6fcfa40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5MU8mHqKUbpKOeTJ.jpeg"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Setting Endpoint Name: Image by Author</figcaption></figure><p id="65b0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这样，我们就完成了<strong class="ig hi">λ函数</strong>的设置。</p><p id="5b59" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> 7。创建一个REST API并集成Lambda函数</strong></p><p id="d768" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在AWS控制台上选择API网关服务，然后选择REST API。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es mt"><img src="../Images/fd56797f250d2464f651847aa4458152.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4E2K_86YvaJyYd6i.jpeg"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Creating REST API: Image by Author</figcaption></figure><p id="bfcf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">点击Build并选择“New API”。在您看到的下一个窗口中，从Actions下拉菜单中选择“Create Resource ”,并输入一个资源名称。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es md"><img src="../Images/8879d49d6d351b2b90bc5fd034261514.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4Ao9utm8ItWR4nzo.jpeg"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Creating REST API: Image by Author</figcaption></figure><p id="b546" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">记下您选择的资源名称。</strong>它将是该服务创建的URL的一部分，稍后我们测试Postman的部署时会用到。这里，我们选择资源名为“irisprediction”。创建资源后，从操作下拉菜单中选择“创建方法”。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es md"><img src="../Images/dfcb420997a35a297267b1331f408be3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rz1vKmzUQv0QX_Zw.jpeg"/></div></div></figure><p id="6934" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">选择POST方法和“Lambda函数”作为集成类型。输入您在前面步骤中创建的Lambda函数的名称。然后，从操作下拉菜单中选择“部署API”。选择部署阶段“新阶段”并给出某个阶段名称。我选择输入“测试”。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es mu"><img src="../Images/1eed3abc01abffd9a067c1e00aca0537.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9fdlPBgp7bPlU4Dg.jpeg"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Creating REST API: Image by Author</figcaption></figure><p id="8172" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后，最后当你点击“部署”，你会得到一个“调用网址”，如下所示。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es md"><img src="../Images/1e174973aca86adf87d5aa9c38317be1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NBXHF6eNDTRcW8gt.png"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Creating REST API: Image by Author</figcaption></figure><p id="bd5a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">请记下窗口上显示的URL“调用URL”。</strong>它将在Postman中用于联系API网关，如下所述。</p><p id="6c6d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，我们已经完成了端到端通信路径的部署和设置。</p><h1 id="0e34" class="kt je hh bd jf ku kv kw jj kx ky kz jn la lb lc jq ld le lf jt lg lh li jw lj bi translated">从本地客户端测试最终部署</h1><p id="da5b" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated"><strong class="ig hi"> 8。最后，使用笔记本电脑中的Postman应用程序，将Iris flower测试数据发布到API gateway，并从AWS cloud返回预测结果。</strong></p><p id="a117" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">示例URL: ( <strong class="ig hi">)记住替换为您在前面的步骤中创建API时获得的API URL，并在末尾附加资源名称。</strong>)</p><p id="7e0c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">例如，如果您得到的调用URL是<br/><strong class="ig hi">https://kmnia 554 df . execute-API . us-east-1 . Amazon AWS . com/test/</strong></p><p id="662e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后在上面的URL后面追加资源名，在postman中使用。例如，在我们的例子中，它是“<strong class="ig hi"> irisprediction </strong>”。您可以看到下面给出的完整示例URL的屏幕截图。</p><p id="16c9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用方法:贴</p><p id="8730" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在正文中，原始输入可以如下给出:</p><p id="0d9d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">{ " data ":" 5.099999999999999645 e+00，3.299999999999999822e+00，1.699999999999956 e+00，5.00000000000000 e-01 " }</p><p id="248c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">样本数据可以参考<strong class="ig hi">test _ point _ classifier _ sample . CSV</strong>。作为数据给出的四个数值参数不过是鸢尾花数据点的样本<em class="jc">萼片长度</em>、<em class="jc">萼片宽度</em>、<em class="jc">花瓣长度</em>和<em class="jc">花瓣宽度</em>。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es mv"><img src="../Images/88ade8226b1039c2381cd3d165368fc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qtoJ3S6qzKD8Z-oO.jpeg"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Classifier model prediction output retrieved from Postman App POST request: Image by Author</figcaption></figure><h1 id="68fe" class="kt je hh bd jf ku kv kw jj kx ky kz jn la lb lc jq ld le lf jt lg lh li jw lj bi translated">回归演示—在AWS云上部署本地培训的模型</h1><p id="69b8" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">对于这个回归任务，<strong class="ig hi">我们将尝试第二种方法，</strong>(即在本地/在SageMaker外部训练我们的模型，然后使用SageMaker的内置算法容器来部署本地训练的模型(<em class="jc">自带模型类型</em>))。</p><p id="a8c7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们开始吧！</p><p id="d2de" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我在ML社区中举了一个非常简单和流行的回归模型的例子——例如，房价的预测。<br/>由于我们在这里只关注部署，我们不会在数据集探索性数据分析、数据准备、超参数调整、模型选择等方面花费太多时间。因此，我们采用简单的房屋预测数据集！</p><p id="47e3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">我们构建回归模型(从本地主机到云)的一步一步的方法简单如下。</strong></p><ol class=""><li id="77e1" class="ll lm hh ig b ih ii il im ip ln it lo ix lp jb lz lr ls lt bi translated">加载数据集并在本地笔记本电脑/台式机/工作站中训练模型，无需使用任何云库或SageMaker。</li></ol><p id="8374" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">2.将训练好的模型文件上传到AWS SageMaker并在那里部署。部署包括将模型放在S3桶中，创建一个SageMaker模型对象，配置和创建端点，以及一些无服务器服务(API gateway和Lambda)来从外部触发端点。</p><p id="e1a2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3.使用一个本地客户端(这里，我们使用Postman)将一个样本测试数据发送到云中部署的模型，并将预测返回给客户端。Restful http方法在这方面帮助了我们。</p><p id="5be5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们按照下面的讨论详细地看一下每一个步骤。</p><h1 id="d3c5" class="kt je hh bd jf ku kv kw jj kx ky kz jn la lb lc jq ld le lf jt lg lh li jw lj bi translated">训练模型</h1><ol class=""><li id="f06f" class="ll lm hh ig b ih jy il jz ip ma it mb ix mc jb lz lr ls lt bi translated"><strong class="ig hi">在本地笔记本电脑/台式机/工作站，使用Jupyter笔记本，在流行的房价数据集上训练一个XGBoost回归模型。</strong></li></ol><p id="a0da" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> 2。测试模型，并使用joblib在本地保存模型文件。</strong></p><p id="9589" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">以上两个步骤请参考我的<a class="ae lk" href="https://github.com/ajayarunachalam/AWS_DEMO_LOCALHOST_2_CLOUD" rel="noopener ugc nofollow" target="_blank"> Github库</a>中的<strong class="ig hi">房价模型创建. ipynb </strong>笔记本。</p><p id="4c75" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">从<a class="ae lk" href="https://github.com/ajayarunachalam/AWS_DEMO_LOCALHOST_2_CLOUD" rel="noopener ugc nofollow" target="_blank"> github </a>下载“house-price-model-creation . ipynb”到你的笔记本电脑，运行它创建模型，以及'<strong class="ig hi">test _ point _ regression _ sample . CSV '</strong>文件。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es mw"><img src="../Images/58c68dd48ab0c9d6364929a366a18a70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bTsmkkjKVCQk6CextlqELQ.png"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Building XGBoost Regressor Model: Image by Author</figcaption></figure><p id="5bf5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在房价模型创建笔记本中，基本上我们下载房价数据集，在其上运行一个简单的XGBoost模型，测试它，并使用joblib dump将模型保存为一个本地文件。出于测试目的，我们在“test _ point _ regression _ sample . CSV”中保存了一些示例房价数据。</p><h1 id="df3c" class="kt je hh bd jf ku kv kw jj kx ky kz jn la lb lc jq ld le lf jt lg lh li jw lj bi translated">在SageMaker中部署模型</h1><p id="1cef" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">接下来的两步，请参考我的<a class="ae lk" href="https://github.com/ajayarunachalam/AWS_DEMO_LOCALHOST_2_CLOUD" rel="noopener ugc nofollow" target="_blank"> Github资源库</a>中的<strong class="ig hi">房价-车型-部署-aws.ipynb </strong>笔记本。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es mx"><img src="../Images/3c1954375fadeb4f0fb0a4af6f6108db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_2-eP7PEDh_ATr9_2LGTfg.png"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Regressor Model Deployment: Image by Author</figcaption></figure><p id="bda6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">我们必须在SageMaker中上传并运行此笔记本，而不是在本地。</strong></p><p id="534d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> 3。在AWS控制台中，创建一个SageMaker笔记本实例，并打开一个Jupyter笔记本。</strong></p><p id="7215" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">将本地训练好的模型、<strong class="ig hi">test _ point _ regression _ sample . CSV</strong>和<strong class="ig hi">house-price-model-deployment-AWS . ipynb</strong>文件上传到sagemaker笔记本。</p><p id="c579" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> 4。在SageMaker中运行“房价-车型-部署-aws”笔记本。</strong></p><p id="6922" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">重要—</strong>运行笔记本中的所有单元格，除了最后一个— <strong class="ig hi">“删除端点”。</strong></p><p id="c5ad" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当你看到弹出“没有找到内核”时，选择并设置conda_python3为内核。</p><p id="c131" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">该笔记本代码执行以下操作:-</p><ul class=""><li id="b859" class="ll lm hh ig b ih ii il im ip ln it lo ix lp jb lq lr ls lt bi translated">加载模型文件，打开它&amp; test，然后将它上传到S3存储桶(SageMaker将从那里获取模型工件)。</li><li id="c6e2" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">从存储在S3的模型中创建一个SageMaker模型对象。为此，我们将使用SageMaker内置的XGBoost容器，因为该模型是用XGBoost算法在本地训练的。根据您用于建模的算法，您必须正确选择相应的内置容器，并处理与之相关的细微差别。SageMaker开发人员指南应该对此有所帮助。</li><li id="f975" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">创建端点配置。端点是一个接口，外部世界可以通过它使用部署的模型进行预测。关于端点的更多细节可以在SageMaker文档中找到。</li><li id="c32f" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">为模型创建一个端点。</li><li id="77dc" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">从部署笔记本中调用端点来确认端点，模型工作正常。</li></ul><p id="d380" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">运行笔记本到此时，你可以看到在AWS控制台的<strong class="ig hi"> Sagemaker </strong> → <strong class="ig hi">推理</strong> → <strong class="ig hi">端点</strong>下创建的端点。</p><p id="9382" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">您必须记下显示的端点名称。</strong>这将在创建下一节描述的Lambda函数时使用。</p><h1 id="107e" class="kt je hh bd jf ku kv kw jj kx ky kz jn la lb lc jq ld le lf jt lg lh li jw lj bi translated">为端到端通信启动必要的AWS服务</h1><p id="c6e3" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">完成上述步骤后，我们将部署模型，并准备好从外部调用SageMaker端点，以从部署的模型中获得实时预测。进一步的步骤与部署我们的分类模型时完成的步骤相同。有关更详细的解释，请参考前面的分类器演示教程练习—“为端到端通信启动必要的AWS服务”一节。</p><p id="5912" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">注意:-我们使用亚马逊的Rest API网关</strong>作为我们的目的&amp;而不是web浏览器作为客户端，我们将使用<strong class="ig hi"> Postman App </strong>以保持简单(如果您想使用浏览器web界面，您需要将Flask打包在一个容器中，该容器需要放在SageMaker中并在其中运行)。在我们的例子中，Postman将用于发送Restful POST方法来调用API网关并获得响应(预测)。所以，我们需要设置API网关和Lambda。让我们完成剩下的几个步骤。</p><p id="54cc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> 5。创建一个包含以下策略的IAM角色，该策略赋予Lambda函数调用模型端点的权限。</strong></p><pre class="ke kf kg kh fd mg mh mi mj aw mk bi"><span id="4bbb" class="jd je hh mh b fi ml mm l mn mo">{<br/>    "Version": "2012-10-17",<br/>    "Statement": [<br/>        {<br/>            "Sid": "VisualEditor0",<br/>            "Effect": "Allow",<br/>            "Action": "sagemaker:InvokeEndpoint",<br/>            "Resource": "*"<br/>        }<br/>    ]<br/>}</span></pre><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es md"><img src="../Images/28fea68685b23fc05f5544f6eb3fc751.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NE5V8TaUShzUIWJB.jpeg"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Create IAM policy: Image by Author</figcaption></figure><p id="beaa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在创建角色并将策略附加到角色时，选择Lambda作为AWS服务中的用例。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es mp"><img src="../Images/4989890b31e6ac459ac2baf59129bbbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*PmJ-8-7rVxbn6aEj.jpeg"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Create Role: Image by Author</figcaption></figure><p id="c115" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> 6。用下面提到的python代码创建一个Lambda函数，调用SageMaker运行时“invoke_endpoint ”,并返回预测。</strong></p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es my"><img src="../Images/3a2330e97ed5c47ee63f4dec5c7f60b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*BKLrOvIR3dohl4S3jLhpmg.png"/></div><figcaption class="kp kq et er es kr ks bd b be z dx">Python snippet of our lambda function: Image by Author</figcaption></figure><p id="116b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">选择“从头开始创作”并给出一个函数名，选择运行时为Python 3.8，如下所示。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es mr"><img src="../Images/5a400dfa8a24a3eb9530cccab6e0798d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QMJkV-lF_BEWMN5F.jpeg"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Creating Lambda Function: Image by Author</figcaption></figure><p id="9ca2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">选择“使用现有角色”</strong>并选择您在上一步中创建的角色。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es md"><img src="../Images/fc11388f6e8e7a446efa66799088c7e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*aSVqa6l_DuOMn1Q1.jpeg"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Creating Lambda Function: Image by Author</figcaption></figure><p id="5eb3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在lambda的代码部分下，输入本步骤开始时给出的python代码。输入代码后，记得点击“部署”。接下来，转到<strong class="ig hi"> Lambda函数</strong>的<strong class="ig hi">配置</strong>选项卡，添加一个环境变量“ENDPOINT_NAME ”,并将其值设置为在上述步骤中创建的相同端点。注意，Lambda函数的代码中使用了这个环境变量。这就完成了Lambda函数的设置。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es mz"><img src="../Images/e474178b92b66dbc9d876e442c481e60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XeFn_X_h7a1sTxO7R6hVyg.png"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Setting Endpoint Name: Image by Author</figcaption></figure><p id="29e7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> 7。创建一个REST API并集成Lambda函数</strong></p><p id="4bdb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在AWS控制台上选择API网关服务，然后选择REST API。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es mt"><img src="../Images/644d905d2de70f0af7d3fac2b0aff2c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QeKmHtHXy40o9nad.jpeg"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Creating REST API along with Lambda Integration: Image by Author</figcaption></figure><p id="f6d1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">点击Build并选择“New API”。在您看到的下一个窗口中，从Actions下拉菜单中选择“Create Resource ”,并输入一个资源名称。<strong class="ig hi">记下您选择的资源名称。它将是该服务创建的URL的一部分，稍后我们测试Postman的部署时会用到。这里，我们选择资源名为“房价预测”。创建资源后，从操作下拉菜单中选择“创建方法”。</strong></p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es na"><img src="../Images/d54d14a7a6841a4fc88de624ca7e3e5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*obaY6yoK0CdtFfXrPnmZmw.png"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Creating REST API along with Lambda Integration: Image by Author</figcaption></figure><p id="da26" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">选择POST方法和“Lambda函数”作为集成类型。输入您在前面步骤中创建的Lambda函数的名称。然后，从操作下拉菜单中选择“部署API”。选择部署阶段“新阶段”并给出某个阶段名称。我选择输入“测试”。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es mu"><img src="../Images/0495ea70a57034a65032281ec568b778.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3Bc_MsKQEuYBw2TJ.jpeg"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Creating REST API along with Lambda Integration: Image by Author</figcaption></figure><p id="7ec9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后，最后当你点击“部署”，你会得到一个“调用网址”，如下所示。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es md"><img src="../Images/3f8a47a9db4e915b1c9ea3dd4ca74042.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NRQhSMCkSAdAAUl8.png"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Creating REST API along with Lambda Integration: Image by Author</figcaption></figure><p id="5ac4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">请记下窗口上显示的URL“调用URL”。</strong>它将在Postman中用于联系API网关，如下所述。</p><p id="cec5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，我们已经完成了端到端通信路径的部署和设置。</p><h1 id="8aed" class="kt je hh bd jf ku kv kw jj kx ky kz jn la lb lc jq ld le lf jt lg lh li jw lj bi translated">从本地客户端测试最终部署</h1><p id="5477" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated"><strong class="ig hi"> 8。最后，使用笔记本电脑中的Postman应用程序，将房价测试数据发布到API gateway，并从AWS cloud返回预测结果。</strong></p><p id="9dee" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">示例URL : ( <strong class="ig hi">记住替换为您在前面的步骤中创建API时获得的API URL，并在末尾附加资源名称。</strong>)</p><p id="482c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">例如，如果您得到的调用URL是<br/><strong class="ig hi">https://kmnia 554 df . execute-API . us-east-1 . Amazon AWS . com/test/</strong></p><p id="0e36" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">将资源名称附加到上面的URL，并在postman中使用。例如，在我们的例子中，它是“<strong class="ig hi">房价预测</strong>”。您可以看到下面给出的完整示例URL的屏幕截图。</p><p id="7fcf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用方法:贴</p><p id="d5ba" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在正文中，原始输入可以如下给出:</p><p id="7300" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">{ "数据":" 3.77E-02，8.00E+01，1.52E+00，0.00E+00，4.04E-01，7.27E+00，3.83E+01，7.31E+00，2.00E+00，3.29E+02，1.26E+01，3.92E+02，6.62E+00"}</p><p id="eaa5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">样本数据可以参考“<strong class="ig hi">test _ point _ regression _ sample . CSV</strong>”。作为数据给出的13个数字参数不过是一些特征，如<strong class="ig hi"> crim </strong> —按城镇划分的人均犯罪率、<strong class="ig hi"> zn </strong> —超过25，000平方英尺的住宅用地比例、<strong class="ig hi"> indus </strong> —每个城镇的非零售商业用地比例、<strong class="ig hi"> chas </strong> —查理斯河虚拟变量(= 1 if tract bounds river否则为0)，<strong class="ig hi"> nox </strong> —氮氧化物浓度(每1000万分之一)，<strong class="ig hi"> rm </strong> —每所住宅的平均房间数，<strong class="ig hi">年龄</strong>—1940年之前建造的自有住房的比例，<strong class="ig hi"> dis </strong> —到五个波士顿就业中心的距离的加权平均值，<strong class="ig hi"> rad </strong> —放射状公路的可达性指数，<strong class="ig hi">税收</strong> —每万美元的全值财产税税率 <strong class="ig hi">黑人</strong> — 1000(Bk — 0.63)其中Bk是按城镇划分的黑人比例，<strong class="ig hi"> lstat </strong> —波士顿房价数据点的较低的人口状况(百分比)。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es nb"><img src="../Images/7684efce7a34390188464b270cf4800e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xRLm56Dhr0iiijs2wITEqw.png"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Regression model prediction output retrieved from Postman App POST request: Image by Author</figcaption></figure><p id="588d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">AWS SageMaker上的模型部署(分类和回归)实践教程到此结束。因此，简而言之，从推理结果中注意到:—</p><ul class=""><li id="df7f" class="ll lm hh ig b ih ii il im ip ln it lo ix lp jb lq lr ls lt bi translated">当我们将<strong class="ig hi">测试数据</strong>发送到我们的<strong class="ig hi">分类器模型</strong>时，我们成功地<strong class="ig hi">调用了部署的模型端点</strong>，并接收回鸢尾花类型预测，作为所提供示例的“<strong class="ig hi"> Setosa </strong>”。</li><li id="0964" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">当我们将<strong class="ig hi">测试数据</strong>发送到我们的<strong class="ig hi">回归器模型</strong>时，我们成功<strong class="ig hi">调用了部署的模型端点</strong>，并接收回给定数据点的房价预测值为“<strong class="ig hi"> 28.42 </strong>”。</li></ul><p id="dce4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">因此，我们已经使用SageMaker在AWS云上成功部署了一个本地训练的模型，并看到了它在实时推理方面的工作！！！</strong></p><p id="6ae7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在最后，也是最重要的一步是<strong class="ig hi">清理我们已经创建并启动的AWS资源</strong>，因为如果你让任何资源运行或占用空间，你将被收取所有时间的费用，因为资源停留在那里。</p><h1 id="efca" class="kt je hh bd jf ku kv kw jj kx ky kz jn la lb lc jq ld le lf jt lg lh li jw lj bi translated">重要-清理，否则你支付费用！！！</h1><ol class=""><li id="2e1f" class="ll lm hh ig b ih jy il jz ip ma it mb ix mc jb lz lr ls lt bi translated">对于SageMaker，记得删除笔记本实例、端点、端点配置和模型。更多详情请参考<a class="ae lk" href="https://docs.aws.amazon.com/sagemaker/latest/dg/ex1-cleanup.html" rel="noopener ugc nofollow" target="_blank">参考</a>。</li><li id="f797" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lz lr ls lt bi translated">转到Lambda service并删除您创建的函数。</li><li id="9fcd" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lz lr ls lt bi translated">转到Cloudwatch服务，选择“日志组”并删除您在那里找到的日志组。</li><li id="0001" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lz lr ls lt bi translated">转到IAM服务并删除您为此教程创建的角色和策略。</li><li id="0e94" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lz lr ls lt bi translated">删除我们推出的API网关。</li></ol><h1 id="e7bb" class="kt je hh bd jf ku kv kw jj kx ky kz jn la lb lc jq ld le lf jt lg lh li jw lj bi translated">结论</h1><p id="ae5b" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">我强烈建议读者用他们的免费层AWS帐户来尝试这种实践，以便更好地理解整个工作流程。此外，这也可以很容易地适应/扩展到您的数据集/业务问题。在本文中，我们学习了如何将ML模型从本地主机部署到AWS云基础设施。我们已经看到了分类和回归问题的图解。我们还浏览了在SageMaker上构建机器学习模型的各种方法。我们还浏览了我们的示例所需的不同AWS服务的用法。通过本教程，您可以了解从训练模型开始到在AWS基础设施上部署模型，以及从本地客户端(AWS外部)调用部署以获得实时预测的各个步骤。</p><p id="aaf7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你喜欢这篇博文，请用掌声鼓励我发表更多内容👏</p><p id="eff7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">干杯:)感谢阅读！！！</p><p id="2ed4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">本教程的完整代码可以在<a class="ae lk" href="https://github.com/ajayarunachalam/AWS_DEMO_LOCALHOST_2_CLOUD" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><h1 id="2a80" class="kt je hh bd jf ku kv kw jj kx ky kz jn la lb lc jq ld le lf jt lg lh li jw lj bi translated">让我们连接起来</h1><p id="507c" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">你可以在ajay.arunachalam08@gmail.com的<em class="jc">找到我；</em>通过<a class="ae lk" href="https://www.linkedin.com/in/ajay-arunachalam-4744581a/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>联系</p><p id="2f5d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">关于作者</strong></p><p id="2259" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我是一名拥有<strong class="ig hi"> Scrum Master认证</strong>的数据科学经理。另外，<strong class="ig hi"> AWS认证的机器学习专家&amp; AWS认证的云解决方案架构师</strong>。我在<strong class="ig hi">电信</strong>、<strong class="ig hi">零售</strong>、<strong class="ig hi">银行</strong>和<strong class="ig hi">医疗</strong>部门工作过。根据我处理现实世界商业问题的经验，我完全承认，找到良好的表示是设计系统的关键，该系统可以解决有趣的挑战性现实世界问题，超越人类水平的智能，并最终为我们解释我们不理解的复杂数据。为了实现这一点，我总是设想学习算法可以从未标记和标记的数据中学习特征表示，在有和/或没有人类交互的情况下被引导，并且在不同的抽象级别上，以便弥合低级数据和高级抽象概念之间的差距。我也确实相信人工智能系统的不透明性是当前的需要。考虑到这一点，我一直努力使人工智能民主化，并且更倾向于建立可解释的模型。我的兴趣是建立实时人工智能驱动的解决方案，大规模的机器学习/深度学习，生产可解释的模型，深度强化学习，计算机视觉和自然语言处理，特别是学习良好的表示。</p><p id="a472" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">参考</p><p id="2924" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae lk" href="https://docs.aws.amazon.com/sagemaker/index.html" rel="noopener ugc nofollow" target="_blank">https://docs.aws.amazon.com/sagemaker/index.html</a></p><div class="nc nd ez fb ne nf"><a href="https://github.com/aws/amazon-sagemaker-examples" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab dw"><div class="nh ab ni cl cj nj"><h2 class="bd hi fi z dy nk ea eb nl ed ef hg bi translated">GitHub-AWS/Amazon-sage maker-示例:示例📓Jupyter笔记本电脑展示了如何构建…</h2><div class="nm l"><h3 class="bd b fi z dy nk ea eb nl ed ef dx translated">例子📓展示如何使用🧠亚马逊建立、训练和部署机器学习模型的Jupyter笔记本电脑…</h3></div><div class="nn l"><p class="bd b fp z dy nk ea eb nl ed ef dx translated">github.com</p></div></div><div class="no l"><div class="np l nq nr ns no nt kn nf"/></div></div></a></div><div class="nc nd ez fb ne nf"><a rel="noopener follow" target="_blank" href="/geekculture/84af8989d065"><div class="ng ab dw"><div class="nh ab ni cl cj nj"><h2 class="bd hi fi z dy nk ea eb nl ed ef hg bi translated">使用AWS SageMaker在云中部署本地培训的模型</h2><div class="nm l"><h3 class="bd b fi z dy nk ea eb nl ed ef dx translated">一个详细的一步一步的例子指南。</h3></div><div class="nn l"><p class="bd b fp z dy nk ea eb nl ed ef dx translated">medium.com</p></div></div><div class="no l"><div class="nu l nq nr ns no nt kn nf"/></div></div></a></div><div class="nc nd ez fb ne nf"><a href="https://aws.amazon.com/sagemaker/" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab dw"><div class="nh ab ni cl cj nj"><h2 class="bd hi fi z dy nk ea eb nl ed ef hg bi translated">机器学习-亚马逊网络服务</h2><div class="nm l"><h3 class="bd b fi z dy nk ea eb nl ed ef dx translated">让更多的人通过选择工具用ML进行创新——集成的数据开发环境…</h3></div><div class="nn l"><p class="bd b fp z dy nk ea eb nl ed ef dx translated">aws.amazon.com</p></div></div><div class="no l"><div class="nv l nq nr ns no nt kn nf"/></div></div></a></div><div class="nc nd ez fb ne nf"><a href="https://docs.aws.amazon.com/sagemaker/latest/dg/howitworks-nbexamples.html" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab dw"><div class="nh ab ni cl cj nj"><h2 class="bd hi fi z dy nk ea eb nl ed ef hg bi translated">笔记本示例</h2><div class="nm l"><h3 class="bd b fi z dy nk ea eb nl ed ef dx translated">您的笔记本实例包含Amazon SageMaker提供的示例笔记本。示例笔记本包含的代码…</h3></div><div class="nn l"><p class="bd b fp z dy nk ea eb nl ed ef dx translated">docs.aws.amazon.com</p></div></div></div></a></div><div class="nc nd ez fb ne nf"><a href="https://docs.aws.amazon.com/sagemaker/latest/dg/how-it-works-deployment.html" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab dw"><div class="nh ab ni cl cj nj"><h2 class="bd hi fi z dy nk ea eb nl ed ef hg bi translated">在Amazon SageMaker中部署一个模型</h2><div class="nm l"><h3 class="bd b fi z dy nk ea eb nl ed ef dx translated">在你训练好你的机器学习模型后，你可以使用Amazon SageMaker来部署它，以获得任何…</h3></div><div class="nn l"><p class="bd b fp z dy nk ea eb nl ed ef dx translated">docs.aws.amazon.com</p></div></div><div class="no l"><div class="nw l nq nr ns no nt kn nf"/></div></div></a></div><div class="nc nd ez fb ne nf"><a href="https://sagemaker.readthedocs.io/en/stable/model.html" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab dw"><div class="nh ab ni cl cj nj"><h2 class="bd hi fi z dy nk ea eb nl ed ef hg bi translated">型号- sagemaker 2.85.0文档</h2><div class="nm l"><h3 class="bd b fi z dy nk ea eb nl ed ef dx translated">role()-AWS IAM角色(名称或完整ARN)。亚马逊SageMaker培训工作和API创造了亚马逊…</h3></div><div class="nn l"><p class="bd b fp z dy nk ea eb nl ed ef dx translated">sagemaker.readthedocs.io</p></div></div></div></a></div><div class="nc nd ez fb ne nf"><a href="https://www.analyticsvidhya.com/blog/2020/11/deployment-of-ml-models-in-cloud-aws-sagemaker%E2%80%8Ain-built-algorithms/" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab dw"><div class="nh ab ni cl cj nj"><h2 class="bd hi fi z dy nk ea eb nl ed ef hg bi translated">AWS SageMaker |在AWS SageMaker上部署ML模型</h2><div class="nm l"><h3 class="bd b fi z dy nk ea eb nl ed ef dx translated">企业建立自己的内部服务器并在存储上花费巨额预算的日子已经一去不复返了…</h3></div><div class="nn l"><p class="bd b fp z dy nk ea eb nl ed ef dx translated">www.analyticsvidhya.com</p></div></div><div class="no l"><div class="nx l nq nr ns no nt kn nf"/></div></div></a></div><div class="nc nd ez fb ne nf"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="ng ab dw"><div class="nh ab ni cl cj nj"><h2 class="bd hi fi z dy nk ea eb nl ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="nm l"><h3 class="bd b fi z dy nk ea eb nl ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="nn l"><p class="bd b fp z dy nk ea eb nl ed ef dx translated">medium.com</p></div></div><div class="no l"><div class="ny l nq nr ns no nt kn nf"/></div></div></a></div></div></div>    
</body>
</html>