<html>
<head>
<title>How to train custom object detection model using TensorFlow Object Detection API — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用TensorFlow对象检测API训练自定义对象检测模型—第1部分</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/how-to-train-custom-object-detection-model-using-tensorflow-object-detection-api-part-1-511a61c1316e?source=collection_archive---------4-----------------------#2022-09-03">https://medium.com/mlearning-ai/how-to-train-custom-object-detection-model-using-tensorflow-object-detection-api-part-1-511a61c1316e?source=collection_archive---------4-----------------------#2022-09-03</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="0245" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在本文中，我将指导您使用TensorFlow对象检测API创建自定义对象检测模型。</p><p id="afeb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了让文章简短，我把教程分成了3个部分。在本部分中，我将向您展示如何在系统中安装和测试支持GPU的TensorFlow和TFOD库。</p><p id="93cc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">完成本教程后，您将了解:</p><ol class=""><li id="9dc8" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">使用图形处理器安装TFOD2</li><li id="7d5c" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">为自定义对象检测准备和注释图像数据</li><li id="14af" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">从TFOD模型动物园配置模型</li><li id="1776" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">对模型进行培训和测试</li></ol><figure class="jr js jt ju fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es jq"><img src="../Images/57fdf2fb13285e78a7d687d3078a4cbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j4rWQ6d4UCRzHsZmNrk0jg.jpeg"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx">TensorFlow Object Detection API</figcaption></figure><p id="0ca3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这篇文章中，我使用Ubuntu机器来安装软件包并训练对象检测模型。下面是我的机器和我将要使用的库的规格。</p><ul class=""><li id="dc60" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb kg ji jj jk bi translated">操作系统:Ubuntu 20.04 LTS</li><li id="840f" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb kg ji jj jk bi translated">Python : 3.9</li><li id="5b88" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb kg ji jj jk bi translated">TensorFlow : 2.9.0</li><li id="f483" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb kg ji jj jk bi translated">TFOD : v2</li></ul><h1 id="4c4e" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">用GPU安装TensorFlow对象检测API</h1><p id="0cd8" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">如果您还没有安装启用了GPU的TensorFlow，请查看我的<a class="ae lk" rel="noopener" href="/@errolpereira06/how-to-install-tensorflow-2-x-with-cuda-and-cudnn-on-ubuntu-20-04-lts-b73c209d8e88"> <strong class="ig hi">帖子</strong> </a>进行安装。我还提供了一个bash脚本，它将为您处理安装。</p><p id="0351" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦TensorFlow安装在您的系统上，并且您已经在GPU机器上进行了测试，我们将继续安装TensorFlow的对象检测API。</p><p id="931d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">首先，从这个<a class="ae lk" href="https://github.com/tensorflow/models" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi"> repo </strong> </a>克隆本地系统中的TensorFlow对象检测模型库</p><p id="1597" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">克隆存储库后，使用以下命令安装protobuff库。如果你还没有激活你的conda环境，现在是激活它的好时机。</p><pre class="jr js jt ju fd ll lm ln lo aw lp bi"><span id="25c6" class="lq ki hh lm b fi lr ls l lt lu">conda activate tensorflow<br/>sudo apt install protobuf-compiler<br/>pip3 install cython<br/>pip3 install pycocotools &lt;/code&gt;&lt;/p&gt;</span></pre><p id="ac55" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">将protobuff库安装完毕后，将cd放入您的<strong class="ig hi">TF _ repo _ PATH/model/research</strong>文件夹中，并运行以下命令。</p><pre class="jr js jt ju fd ll lm ln lo aw lp bi"><span id="2d24" class="lq ki hh lm b fi lr ls l lt lu">protoc object_detection/protos/*.proto — python_out=.</span></pre><p id="c93a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">上述命令不会产生任何输出。TFOD的下一个依赖项是COCO API安装。对于这第一个克隆可可仓库在一个文件夹以外的模型文件夹。克隆repo后，使用以下命令构建coco API，然后将构建后生成的pycocotools文件夹复制到<strong class="ig hi"> model/research/ </strong>文件夹中。</p><pre class="jr js jt ju fd ll lm ln lo aw lp bi"><span id="2711" class="lq ki hh lm b fi lr ls l lt lu">git clone <a class="ae lk" href="https://github.com/cocodataset/cocoapi.git." rel="noopener ugc nofollow" target="_blank">https://github.com/cocodataset/cocoapi.git.</a><br/>cd cocoapi/PythonAPI<br/>make<br/>cp -r pycocotools PATH_TO_TF/TensorFlow/models/research/</span></pre><p id="8ed0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦coco API安装完成，我们将继续在conda环境中设置和安装异议检测库。从“研究”文件夹运行以下命令以开始安装。</p><pre class="jr js jt ju fd ll lm ln lo aw lp bi"><span id="a24c" class="lq ki hh lm b fi lr ls l lt lu">cp object_detection/packages/tf2/setup.py .<br/>python -m pip install — use-feature=2020-resolver .</span></pre><h1 id="9083" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">测试对象检测应用编程接口</h1><p id="6740" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">现在我们已经在系统中安装了API，让我们继续测试它。运行以下命令，该命令将触发使用TensorFlow Model Zoo中的一个模型执行的一系列测试，并将显示如下所示的类似输出。该命令需要从研究文件夹中运行。</p><pre class="jr js jt ju fd ll lm ln lo aw lp bi"><span id="c202" class="lq ki hh lm b fi lr ls l lt lu">python object_detection/builders/model_builder_tf2_test.py</span></pre><figure class="jr js jt ju fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es lv"><img src="../Images/9cefe4556f76cee767ec001b659b0a78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ddPxyU3gX-K3QMkJh7GCig.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx">Successful installation output</figcaption></figure><p id="62a8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果您想查看对象检测的运行情况，可以运行research/object _ detection/colab _ notebooks/object _ detection _ tutorial . ipynb中的笔记本。</p><figure class="jr js jt ju fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es lw"><img src="../Images/cad38358edc24c09de6175a6ab532c8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pLP8U269My3FYrxT1yiuCQ.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx">Object detection demo</figcaption></figure><p id="c774" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你已经做到了，恭喜你。在下一篇文章中，我将向您展示我们如何准备数据集来训练自定义对象检测模型。</p><div class="lx ly ez fb lz ma"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="mb ab dw"><div class="mc ab md cl cj me"><h2 class="bd hi fi z dy mf ea eb mg ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="mh l"><h3 class="bd b fi z dy mf ea eb mg ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="mi l"><p class="bd b fp z dy mf ea eb mg ed ef dx translated">medium.com</p></div></div><div class="mj l"><div class="mk l ml mm mn mj mo ka ma"/></div></div></a></div></div></div>    
</body>
</html>