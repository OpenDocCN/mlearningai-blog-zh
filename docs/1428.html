<html>
<head>
<title>Detect and Blur faces using OpenCV and Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用OpenCV和Python检测和模糊人脸</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/detect-and-blur-faces-using-opencv-and-python-3e5e7abf26af?source=collection_archive---------3-----------------------#2021-12-14">https://medium.com/mlearning-ai/detect-and-blur-faces-using-opencv-and-python-3e5e7abf26af?source=collection_archive---------3-----------------------#2021-12-14</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/6801d69c0dc95f2ecb1df04fb889505f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sjdur7aJQwRakBdRAxHRDQ.jpeg"/></div></div></figure><p id="a6f8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在本文中，您将学习如何使用OpenCV和Python来检测和模糊人脸。</p><blockquote class="jn jo jp"><p id="7801" class="ip iq jq ir b is it iu iv iw ix iy iz jr jb jc jd js jf jg jh jt jj jk jl jm ha bi translated">代码:</p></blockquote><figure class="ju jv jw jx fd ii"><div class="bz dy l di"><div class="jy jz l"/></div></figure><blockquote class="jn jo jp"><p id="ee67" class="ip iq jq ir b is it iu iv iw ix iy iz jr jb jc jd js jf jg jh jt jj jk jl jm ha bi translated">详细解释:</p></blockquote><ol class=""><li id="d206" class="ka kb hh ir b is it iw ix ja kc je kd ji ke jm kf kg kh ki bi translated">使用pip安装OpenCV:</li></ol><p id="e3ef" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> <em class="jq"> pip安装opencv-python </em> </strong></p><p id="8423" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">OpenCV-Python是一个Python库，旨在解决计算机视觉问题。</p><p id="8ba1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">2.要导入的模块:</p><p id="02ca" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> <em class="jq">导入cv2 </em> </strong></p><p id="d671" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">3.为了捕捉视频，我们创建了一个<strong class="ir hi"> VideoCapture </strong>对象:cap。</p><p id="4ce9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">此方法的参数可以是设备索引或视频文件的名称。由于我们需要实时视频流，我们将给出设备索引作为参数:0</p><p id="bbeb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">4.<strong class="ir hi"> <em class="jq"> cv2。cascade classifier(cv2 . data . Haar cascades+' Haar cascade _ frontal face _ default . XML '):</em></strong></p><p id="8b25" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">OpenCV已经在XML文件中包含了许多预先训练好的人脸、眼睛、微笑等分类器。<em class="jq">' Haar scade _ frontal face _ default . XML '</em>是一个人脸分类器。</p><p id="cc9c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">要下载预先训练好的<em class="jq">Haar cascade _ frontal face _ default . XML</em>分类器、<a class="ae kj" href="https://github.com/opencv/opencv/blob/master/data/haarcascades/haarcascade_frontalface_default.xml" rel="noopener ugc nofollow" target="_blank"> <strong class="ir hi"> <em class="jq">点击这里</em> </strong> </a>。将其保存到您的工作目录中。</p><p id="af17" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在我们将这个分类器加载到我们的<em class="jq">‘model’</em>变量中。</p><p id="e355" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">5.<strong class="ir hi"> <em class="jq"> while </em> </strong>循环将一直运行，直到遇到中断。一旦' cv2.waitKey(10) == 13 '返回true，循环将结束。</p><p id="b743" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">6.<strong class="ir hi"> <em class="jq"> cap.waitKey(时间单位为毫秒)</em> </strong></p><p id="4381" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这种方法用于在显示图像(我们认为是视频)时暂停图像。</p><p id="9acc" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">此外，当我们按下“Enter”键时，该函数将返回13(键码值), while循环将中断。</p><p id="60c3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">7.<strong class="ir hi"> <em class="jq"> cv2.imshow("窗口的标题"，图片):</em> </strong></p><p id="f992" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">此方法用于在窗口中显示图像。</p><p id="ca3a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">8.<strong class="ir hi"> <em class="jq"> face_blur() </em> </strong>函数:</p><p id="81d6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们将捕获的照片作为参数传递给face_blur()函数。</p><p id="43a0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">9.<strong class="ir hi"> <em class="jq">【检测多尺度(图像)</em> </strong>方法:</p><p id="57f0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">检测图像中的人脸。</p><p id="18b5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">该方法将为每个检测到的面返回一个矩形:</p><p id="2e2c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">x坐标、y坐标、宽度和高度</p><p id="89e3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">因为可以检测多个面，所以该方法将返回一个二维数组。</p><p id="6d91" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">10.如果没有检测到人脸，我们将按原样返回照片。</p><p id="e6fa" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">11.如果检测到人脸，我们将对每个人脸运行以下代码:</p><p id="b063" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"><em class="jq">crop _ photo = cv2 . blur(photo[nface[1]:nface[1]+nface[3]，nface[0]:nface[0]+nface[2]]，(20，20)) </em> </strong></p><p id="0d72" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"><em class="jq">photo[nface[1]:nface[1]+nface[3]，nface[0]:nface[0]+nface[2]]= crop _ photo</em></strong></p><p id="aa1b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">12.现在，对于每个n接口:</p><p id="9c11" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> nface[0] = x坐标</strong></p><p id="cf62" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> nface[1] = y坐标</strong></p><p id="13f1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> nface[2] = width </strong></p><p id="07bb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> nface[3] = height </strong></p><p id="c564" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">13.<strong class="ir hi"> <em class="jq">切片运算符(:)</em> </strong></p><p id="156b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">列表[开始:结束]</p><p id="b643" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">返回从索引<em class="jq">开始</em>到索引<em class="jq">结束的列表部分。</em></p><p id="497e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">因此，photo[nface[1]:nface[1]+nface[3]，nface[0]:nface[0]+nface[2]]就是照片中包含第n张脸的部分。</strong></p><p id="b9b4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">14.<strong class="ir hi"> <em class="jq"> cv2.blur(image，ksize) </em> </strong></p><p id="c0a0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这种方法模糊了图像。</p><p id="5cba" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> ksize: </strong>一个表示模糊内核大小的元组。</p><p id="d21a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> <em class="jq">因此，cv2 . blur(photo[nface[1]:nface[1]+nface[3]，nface[0]:nface[0]+nface[2]]，(20，20))将返回照片中包含第n张脸的部分的模糊图像。</em>T25】</strong></p><p id="3f53" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这存储在变量<em class="jq"> crop_photo </em>中。</p><p id="fe73" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">15.于是，最后<strong class="ir hi"><em class="jq">photo[nface[1]:nface[1]+nface[3]，nface[0]:nface[0]+nface[2]]= crop _ photo</em></strong></p><p id="51d1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">原始照片中检测到面部的部分被裁剪和模糊的照片替换。</strong></p><h1 id="fa81" class="kk kl hh bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated"><strong class="ak">输出:</strong></h1><figure class="ju jv jw jx fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es li"><img src="../Images/e53bb57814bcf882d32e4654142d0c8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_Ev5i-km-VbOrVW6aowZUQ.png"/></div></div></figure><p id="7182" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">希望你喜欢这篇文章。编码快乐！😊</p><div class="lj lk ez fb ll lm"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="ln ab dw"><div class="lo ab lp cl cj lq"><h2 class="bd hi fi z dy lr ea eb ls ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="lt l"><h3 class="bd b fi z dy lr ea eb ls ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="lu l"><p class="bd b fp z dy lr ea eb ls ed ef dx translated">medium.com</p></div></div><div class="lv l"><div class="lw l lx ly lz lv ma in lm"/></div></div></a></div></div></div>    
</body>
</html>