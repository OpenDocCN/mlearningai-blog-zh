<html>
<head>
<title>#1 Python ML Dev Tricks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">#1 Python ML开发技巧</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/1-python-ml-dev-tricks-e1a29ee3f709?source=collection_archive---------0-----------------------#2022-05-15">https://medium.com/mlearning-ai/1-python-ml-dev-tricks-e1a29ee3f709?source=collection_archive---------0-----------------------#2022-05-15</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="c49a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Pip像NPM一样安装|笔记本电脑的符号链接|空间</p><p id="09c8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我不时收集一些我喜欢分享的小妙招。大多数情况下，实际的解决方案已经存在于互联网的某个地方，但是解决方案的第一步是承认存在一个实际的问题，对吗？这个博客远远超过了我的Evernote笔记，公开了我的建议！</p><p id="e7a7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">坐下来，因为你刚好赶上每周一次的代码治疗。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es jc"><img src="../Images/c06d31815b4b510031138752dd008fd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*4LBgd9N7GjLJqpVP.jpg"/></div><figcaption class="jk jl et er es jm jn bd b be z dx">Jerry has issues, and so do you</figcaption></figure><p id="9bf8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你是否厌倦了通过<strong class="ig hi"> pip </strong>安装依赖项，然后手动将<strong class="ig hi">版本号</strong>添加到<strong class="ig hi"> requirements.txt </strong>中？</p><p id="e7c1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你是否有许多<strong class="ig hi"> Jupyter笔记本</strong>到处乱放，但是由于python的<strong class="ig hi">导入上下文中断</strong>而不敢<strong class="ig hi">将它们藏在子文件夹</strong>中？</p><p id="efc6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你是否曾经安装了<strong class="ig hi"> Spacy </strong>而不得不<strong class="ig hi">单独安装en_core_web_sm </strong>？如果你在<strong class="ig hi">生产</strong>中需要这种能力呢？</p><h1 id="f0a2" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">1.NPM一直都有</h1><p id="5c48" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">每个社区都有重要的经验可以借鉴。几年前，我涉足了全栈开发，尝试了Node.js和NPM。NPM是Javascript的pip，也就是软件包经理。NPM惯例是有一个<strong class="ig hi"> package.json </strong>文件保存你的项目使用的各种库依赖版本(一个requirements.txt等价物)。开发人员通常不会手动编辑这个文件。那你怎么更新它呢？</p><pre class="jd je jf jg fd kr ks kt ku aw kv bi"><span id="dec4" class="kw jp hh ks b fi kx ky l kz la">npm install library —-save</span></pre><p id="0c59" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">save参数将新库及其版本附加到package.json文件中。很酷吧？<br/>还有其他选项，例如将不适合生产的包保存为开发包等等。</p><h1 id="ff9a" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">如何与皮普一起做到这一点？</h1><p id="54a9" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">你不能。pip文档中的任何参数都不会编辑您的需求。但是在你垂头丧气地离开之前，这里有一个我在SO上找到的小片段来实现这一点:<br/><a class="ae lb" href="https://stackoverflow.com/a/49079378" rel="noopener ugc nofollow" target="_blank">https://stackoverflow.com/a/49079378</a></p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="lc ld l"/></div><figcaption class="jk jl et er es jm jn bd b be z dx">Here’s the same snippet</figcaption></figure><h2 id="a55a" class="kw jp hh bd jq le lf lg ju lh li lj jy ip lk ll kc it lm ln kg ix lo lp kk lq bi translated">功能分解</h2><p id="ce4f" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">1.pip install $1  — $1是库名的占位符变量(这只是第一个命令行参数。一些bash脚本总是有用的:))</p><p id="907c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">2.<strong class="ig hi"> pip冻结</strong> —这将输出所有已安装的库</p><p id="44a6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3.<strong class="ig hi"> grep $1 </strong> —将该行与pip冻结输出<br/> 4中的库和版本相匹配。<strong class="ig hi">&gt;&gt;requirements.txt</strong>—将grep结果附加到requirements . txt</p><h2 id="467b" class="kw jp hh bd jq le lf lg ju lh li lj jy ip lk ll kc it lm ln kg ix lo lp kk lq bi translated">实际怎么用？</h2><p id="ddb2" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">将它添加到您的。zshrc文件或您的。bashrc取决于你最喜欢的外壳。这将允许您从命令行调用该函数。为了马上使用它，请</p><pre class="jd je jf jg fd kr ks kt ku aw kv bi"><span id="8911" class="kw jp hh ks b fi kx ky l kz la">source ~/.zshrc </span></pre><p id="48b7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你想知道为什么不在每次安装后做以下事情？</p><pre class="jd je jf jg fd kr ks kt ku aw kv bi"><span id="46f6" class="kw jp hh ks b fi kx ky l kz la">pip freeze &gt; requirements.txt</span></pre><p id="1b0f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">可以在这里阅读:<a class="ae lb" rel="noopener" href="/@tomagee/pip-freeze-requirements-txt-considered-harmful-f0bce66cf895">https://medium . com/@ tomagee/pip-freeze-requirements-txt-considered-habitable-f 0 BCE 66 cf 895</a></p><p id="efdd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">此外，如果你有任何其他建议或任何其他保留意见，请在评论区与我们分享。</p><h1 id="00e5" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">2.笔记本内部模块如何复用？</h1><p id="a16a" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">这不是关于是否使用Jupyter笔记本的争论。我认为它们绝对值得用于<strong class="ig hi">数据探索</strong>和<strong class="ig hi"> EDA </strong>，但是我只停留在这些用例上。如果不小心的话，笔记本也会导致混乱的代码和混乱的项目结构，特别是因为很难重用笔记本内部模块的代码。我们将通过符号链接改变项目结构来解决代码重用问题。</p><p id="d7ed" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我喜欢的项目结构是什么？我自己也写不出更好的了(<a class="ae lb" href="https://towardsdatascience.com/manage-your-data-science-project-structure-in-early-stage-95f91d4d0600" rel="noopener" target="_blank">看完</a>！).以下是它的简写:</p><pre class="jd je jf jg fd kr ks kt ku aw kv bi"><span id="63d7" class="kw jp hh ks b fi kx ky l kz la">app/ -&gt; your python code<br/>notebooks/ <br/>tests/<br/>models/ -&gt; models you create <br/>data/ -&gt; current data </span></pre><p id="9b38" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你的笔记本在你的<em class="lr">笔记本</em>文件夹中，那么问题是什么？事情是这样的，如果你想导入驻留在<em class="lr"> app/ </em>的代码，你会遇到问题，因为python导入方案不允许。</p><p id="60bc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">假设您在<em class="lr"> app/utils.py </em>下有一个很棒的方法，可以对文本进行一些预处理。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="lc ld l"/></div></figure><p id="47db" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您还有一台EDA笔记本，位于<em class="lr"> notebooks/EDA.ipynb </em></p><p id="fd3b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们从<em class="lr"> jupyter笔记本</em>开始，尝试导入。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="er es ls"><img src="../Images/a7b9484f0defd3e9daa29515677aa7be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5SRcuXPE2NyIu8MeIzGOQA.png"/></div></div><figcaption class="jk jl et er es jm jn bd b be z dx">That’s a bummer</figcaption></figure><p id="ae84" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为什么会这样？因为app所在的文件夹是笔记本文件夹的同级文件夹。那么，我们可以将此笔记本移出笔记本子文件夹，这样它将“看到”应用程序包，或者我们可以像这样移动到正确的上下文:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="er es lx"><img src="../Images/a504de7758ce5bea8477b076ce8c5eff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d5AbLCGxACF-y92pgqemGg.png"/></div></div><figcaption class="jk jl et er es jm jn bd b be z dx">We can change the working directory and try again — it works</figcaption></figure><p id="905f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">或者，我们可以在笔记本文件夹中有一个指向“app”包的符号链接！</strong></p><h1 id="b252" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">救援的象征性链接</h1><p id="7b13" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">什么是符号链接？它类似于一个文件，是指向另一个文件/文件夹的指针。这是一个Linux视角，Linux中的一切都被建模为一个文件——这里有一个<a class="ae lb" href="https://en.wikipedia.org/wiki/Everything_is_a_file" rel="noopener ugc nofollow" target="_blank"> wiki </a>来证明这一点。符号链接几乎无处不在，是一个需要熟悉的重要概念。</p><p id="b9ed" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如何实现这一壮举？</p><pre class="jd je jf jg fd kr ks kt ku aw kv bi"><span id="544f" class="kw jp hh ks b fi kx ky l kz la">$ cd notebooks<br/>$ ln -s ../app # this is the actual symlink creation</span></pre><p id="e611" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，您可以拥有与主文件夹相同的上下文，但在子文件夹中，无需更改任何代码行！此外，您可以随意添加其他重要文件夹的附加符号链接，如<em class="lr">模型/ </em>、<em class="lr">数据/ </em>等。</p><p id="e5da" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对此有几个警告:</p><ol class=""><li id="08c6" class="ly lz hh ig b ih ii il im ip ma it mb ix mc jb md me mf mg bi translated">IDE有时会显示重复的搜索结果，包括来自<em class="lr">应用/ </em>和<em class="lr">笔记本/应用</em>的结果</li><li id="33b0" class="ly lz hh ig b ih mh il mi ip mj it mk ix ml jb md me mf mg bi translated">是否提交这些符号链接是一个偏好问题，取决于你的开发团队是否使用相同的操作系统</li></ol><p id="c0aa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">和以前一样，如果你遇到了这个问题，如果你有改进，请分享。</p><h1 id="634e" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">3.空间环境</h1><p id="e73b" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">多亏了这篇文章，我才意识到我知道如何用心打字<em class="lr">！我知道你没有多少注意力了，所以我就简单说一下。<br/>你安装Spacy，然后尝试使用它的POS标记方法。</em></p><p id="f8b6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我已经为这个例子复制了Spacy的<a class="ae lb" href="https://spacy.io/usage/linguistic-features" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="er es mm"><img src="../Images/8e061512e6cee354b04f1e0c88fb9a11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CnKgEWO5zA-CmUnx1WVl8g.png"/></div></div></figure><p id="6b1a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">是的，我忘了这一步</p><pre class="jd je jf jg fd kr ks kt ku aw kv bi"><span id="b723" class="kw jp hh ks b fi kx ky l kz la">$ python -m spacy download en_core_web_sm</span></pre><p id="85ea" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">人无完人，对吧？不对！</p><p id="14d9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为什么这甚至是一个问题？你会如何制作？您可以将这一行添加到Dockerfile文件中。但是有一种方法可以做到这一点，就像上帝的意图一样，在requirements.txt后面附加一行。</p><pre class="jd je jf jg fd kr ks kt ku aw kv bi"><span id="2750" class="kw jp hh ks b fi kx ky l kz la"># this will download en_core_web_sm! </span><span id="7b6c" class="kw jp hh ks b fi mn ky l kz la"><a class="ae lb" href="https://github.com/explosion/spacy-models/releases/download/en_core_web_sm-3.0.0/en_core_web_sm-3.0.0.tar.gz" rel="noopener ugc nofollow" target="_blank">https://github.com/explosion/spacy-models/releases/download/en_core_web_sm-3.0.0/en_core_web_sm-3.0.0.tar.gz</a></span><span id="e18f" class="kw jp hh ks b fi mn ky l kz la"># other packages </span></pre><p id="0afe" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">只需<em class="lr">pip install-r requirements . txt</em>就可以了！</p><h1 id="846c" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">摘要</h1><p id="c6f1" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">我希望你喜欢它，请使用以上所有的谷物盐，结果可能会有所不同，我不负责以任何方式造成的任何伤害。话虽如此，这些确实帮助了我，现在它们更容易找到和分享。</p><div class="mo mp ez fb mq mr"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="ms ab dw"><div class="mt ab mu cl cj mv"><h2 class="bd hi fi z dy mw ea eb mx ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="my l"><h3 class="bd b fi z dy mw ea eb mx ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="mz l"><p class="bd b fp z dy mw ea eb mx ed ef dx translated">medium.com</p></div></div><div class="na l"><div class="nb l nc nd ne na nf ji mr"/></div></div></a></div></div></div>    
</body>
</html>