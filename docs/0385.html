<html>
<head>
<title>Web Scraper Race</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">刮刀滚道</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/web-scraper-race-e345fdd161bc?source=collection_archive---------6-----------------------#2021-04-02">https://medium.com/mlearning-ai/web-scraper-race-e345fdd161bc?source=collection_archive---------6-----------------------#2021-04-02</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="e367" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">相对较小的项目使用<strong class="ig hi"> <em class="jc">【美苏】【刺儿】</em></strong><em class="jc"/><strong class="ig hi"><em class="jc">硒</em> </strong>。</p><p id="58d0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们需要数据来进行数据科学项目。幸运的是，互联网充满了数据。我们可以通过从数据源获取现成的数据或调用API来获得这些数据。有时他们在付费墙后面，或者数据不是最新的。那么获取数据的唯一途径就是从网站。对于简单的任务，复制和粘贴就行了。但是对于跨多个页面的大型数据来说，这是不切实际的。在这些情况下，网络抓取可以帮助你提取任何你想要数据。这可以通过几种方式来实现。python有几个包可以满足这一特定需求。</p><p id="dc50" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这些套装中<strong class="ig hi"><em class="jc">beautiful soup</em></strong>和<strong class="ig hi"> <em class="jc"> Scrapy </em> </strong>是最受欢迎的。Scrapy是一个专门为从网络下载、清理和保存数据而创建的工具，它将端到端地帮助你；BeautifulSoup是一个较小的软件包，它只能帮助你从网页中获取信息，而对于其他任务，它依赖于其他软件包。另一方面，Scrapy有一个围绕这个特定目的构建的框架。另一个流行的选择是<strong class="ig hi"> <em class="jc">硒</em> </strong>。尽管Selenium不是为此而构建的，但它是用于自动化网站测试的。这样做的一个副产品是，我们可以用它来清理网页。</p><p id="b440" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在本文中，我将通过抓取一个目标网站来分析Python中三个最流行的web抓取工具，这样你就可以选择最适合你的项目的工具。作为旁注，在抓取时要始终保持尊重和道德意识，并遵守目标网站根目录上robots.txt中的说明。</p><p id="af42" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在让我解释一下我的过程。我没有为Beautifulsoup使用多重处理，多重处理可以一次发送多个请求，从而加快处理速度。我也不会为Scrapy部署蜘蛛，尽管这不是首选方式。本文的目的是获得相对较小的项目的性能度量。在这个测试中，两者都利用请求库来获取html，然后处理响应。</p><p id="037e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我用jupyter笔记本进行分析。我的目标网站是http://books.toscrape.com/。我用Beautifulsoup，Selenium和Scrapy刮了31次前20页。然后看处理时间。所有的处理时间都以秒为单位。Beautifulsoup正在使用bs4昵称。</p><p id="397e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是平均值、标准差、最小值、最大值和四分位数。对于高到低值，颜色代码在行之间从绿色变为深紫色。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/5cbd75cc8e1a3f2f995c90a414a41b64.png" data-original-src="https://miro.medium.com/v2/resize:fit:532/format:webp/1*FfQlb8w9HLnZ5lwf6-OtLg.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx">performance metrics</figcaption></figure><p id="a8b7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">从表中，我们看到bs4和scrapy通过查看平均值，以巨大的优势击败了selenium。Scrapy在原始数方面更快。<strong class="ig hi">scrapy和bs4在这个设置上的差别并不大</strong>。</p><p id="ca9c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Scrapy可以更快，如果使用其全部潜力，即设置蜘蛛和运行没有依赖，我用了。然而，对于较小的项目来说，这有点矫枉过正。对于不需要经常单独使用的较小项目，则没有必要。Scrapy太强大了，因此设置起来更复杂。</p><p id="f2fd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了可视化，这里是这些数据点的分布，仓大小为15。这再次证实了调查结果。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es jq"><img src="../Images/cc8077db338965b1001641f8c369172f.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*0kM9HFleo8YsxNfpoqNMTA.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx">distribution of run time in seconds</figcaption></figure><p id="1ab2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">此外，这里是这些数据点的归一化密度，仓大小为15。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="er es jr"><img src="../Images/934ade3b480a889ac5e0d40dfb64e28f.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/format:webp/1*87cGCJgJBJVdvEV7CgAl6Q.png"/></div></div><figcaption class="jm jn et er es jo jp bd b be z dx">normalized distribution of run time</figcaption></figure><p id="d79a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们概括一下比较:</p><h1 id="a0cc" class="jw jx hh bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated"><strong class="ak">美丽的声音:</strong></h1><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es ku"><img src="../Images/7f55611d2228f05c2fa4ab31641a1275.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/1*VXJpe3cTab4LRQasj6VrMw.jpeg"/></div><figcaption class="jm jn et er es jo jp bd b be z dx">bs4</figcaption></figure><p id="8787" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">优点</strong>它速度快，用户友好，效率高。</p><p id="6c87" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">缺点是它不能解析使用JavaScript的现代网页，没有很多可用的插件，不能处理XPath表达式等等。</p><p id="523a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">使用</strong>进行快速定位。</p><h1 id="634f" class="jw jx hh bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated"><strong class="ak">刺儿头:</strong></h1><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es ku"><img src="../Images/5dc17a1aad5305eb3b819d29af33b4e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/1*5CyVKgaBaoiJ3JBiPoPJxQ.jpeg"/></div><figcaption class="jm jn et er es jo jp bd b be z dx">scrapy</figcaption></figure><p id="64f6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">优点</strong>它速度快、效率高、具有强大的后处理、自动化、管道和中间件、恢复能力、可以一次处理多个请求、拥有强大的社区和良好的文档记录。</p><p id="1e80" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">缺点是对初学者不友好，学习曲线更陡，不需要太多资源。</p><p id="2008" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">需要可复用的抓取脚本时使用</strong>，最适合复杂的抓取。</p><h1 id="b86f" class="jw jx hh bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated"><strong class="ak">硒:</strong></h1><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es ku"><img src="../Images/be1c05bdc9e733825c18f4677006cd58.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/1*W9FS8e8HEcqiidZ6OSkdtA.png"/></div><figcaption class="jm jn et er es jo jp bd b be z dx">selenium</figcaption></figure><p id="88a4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">优点</strong>它能处理基于核心JavaScript的web应用，能发出AJAX/PJAX请求，用户输入处理更好。</p><p id="fa4b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">缺点</strong>它不是为报废而造的，对报废来说效率不高。</p><p id="9b68" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当这是从复杂网站提取数据的唯一选项时使用。</p><p id="df03" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所以，归根结底是你的用例场景，没有一个最终的解决方案。当情况需要时，将所有这些保存在您的数据科学工具包中会很方便。他们都有自己的长处和短处。</p></div><div class="ab cl kv kw go kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ha hb hc hd he"><p id="d89b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">另一方面，熊猫可以用来刮网站，如果它包含表。</p><pre class="jf jg jh ji fd lc ld le lf aw lg bi"><span id="d366" class="lh jx hh ld b fi li lj l lk ll">import pandas as pd</span><span id="3896" class="lh jx hh ld b fi lm lj l lk ll"># get data and store to dataframe<br/>df = pd.read_html('http://example.com/')</span></pre></div><div class="ab cl kv kw go kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ha hb hc hd he"><p id="1b80" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，既然这个问题已经解决了，让我们来看看我用来得到结果的代码。文件可以在GitHub的这里<a class="ae jd" href="https://github.com/tamjid-ahsan/web-scraper-race" rel="noopener ugc nofollow" target="_blank">找到。</a></p><p id="45e2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">美丽的声音:</strong></p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="f8e2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">硒:</strong></p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="413a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">刺儿头:</strong></p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="3934" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在我已经有了所有的列表，让我们把它们转换成pandas数据框架并做一些分析。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="a208" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这就是我如何得出以上所有发现和数据的。</p><p id="aea9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">今天到此为止。下次见！</p></div></div>    
</body>
</html>