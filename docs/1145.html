<html>
<head>
<title>Significant Influence of the Moving Average Function on
the Backtest Results of the RSI Crossover Strategy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">移动平均函数对RSI交叉策略回测结果的显著影响</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/significant-influence-of-the-moving-average-function-on-the-backtest-results-of-the-rsi-crossover-efbabb07904d?source=collection_archive---------2-----------------------#2021-10-11">https://medium.com/mlearning-ai/significant-influence-of-the-moving-average-function-on-the-backtest-results-of-the-rsi-crossover-efbabb07904d?source=collection_archive---------2-----------------------#2021-10-11</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="1cb4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在我之前的文章中，“<a class="ae jc" rel="noopener" href="/geekculture/wow-backtest-rsi-crossover-strategy-in-elasticsearch-1cdf837a72a1">哇！回测RSI交叉策略在Elasticsearch </a>中，我们介绍了如何使用Elasticsearch实现相对强弱指标(RSI)指标来获得回测结果。本文中RSI的计算使用简单移动平均线(SMA)函数。然而，RSI的原始作者J. Welles Wilder使用了他自己的平滑方法，这是指数平均的一种不同形式。在本文中，我们将使用不同的移动平均函数进行深入研究，并考察哪一个可以获得更好的回测结果。建议读者快速浏览一下我之前的文章，对RSI和使用Elasticsearch的实现细节有一个基本的了解。<br/>RSI指标发表在1978年怀尔德的《技术交易系统新概念》一书中。这本书还介绍了其他众所周知的指标，包括抛物线转向指标，平均真实范围(ATR)，和概念定向运动(ADX)。RSI是一个动量指标，它的等式可以写成这样，其中MA <em class="jd">增益，n </em>和MA <em class="jd">损失，n </em>分别是近期收益的移动平均线和近期损失的移动平均线。默认情况下，周期n为14。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/01478620d4fe58eccff0851e4444c694.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z5gGeQAKP91qn_bra0b7ZA.jpeg"/></div></div></figure><p id="e0f4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">RSI交叉策略定义了RSI在指定值的交叉，以指示超买(&gt; 70)和超卖(&lt; 30) signals. For other RSI values, just wait for the signal. Now, using different types of moving average functions will produce different RSI values and have a significant impact on the backtest results. Wilder’s smoothing method for the recent gain (Gain<em class="jd"> t </em>)在时间<em class="jd"> t </em>可以写成如下，其中变量<em class="jd"> t </em>代表时间<em class="jd"> t </em>的时间戳。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jq"><img src="../Images/82ebdc61135554da94bc80c71ba87b66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dRJlgi6jUmmPv0CCd9xs7A.jpeg"/></div></div></figure><p id="a6d8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">根据维基百科中的<a class="ae jc" href="https://en.wikipedia.org/wiki/Moving_average#Exponential_moving_average" rel="noopener ugc nofollow" target="_blank">移动平均文档，怀尔德的平滑平均属于修正移动平均(MMA)、运行移动平均(RMA)、或平滑移动平均(SMMA)的类型。当<em class="jd"> n </em> =14时，SMMA的第一个有效值是前14个周期增益的平均值。此后，在时间戳<em class="jd"> t </em>的SMMA将等于当前增益的1/14加上前一个时间戳的SMMA的13/14。</a></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jq"><img src="../Images/c75a5e42d20152528542f1f8122d9dfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pPrTaWhy7ywq59uvzN6SlA.jpeg"/></div></div></figure><p id="6d5c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">根据文章，EWMA可以这样写，其中<em class="jd"> N </em>是EWMA时期，<em class="jd"> n </em>是SMMA时期。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jr"><img src="../Images/8b421d19ab670f21f3edd69204fab7b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SQPH4qR1t368KPtrv-4nbg.jpeg"/></div></div></figure><p id="8554" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所以n期SMMA相当于2 <em class="jd"> n </em> -1指数移动平均线(EWMA)。由于<em class="jd"> n </em> =14是RSI的默认值，所以在使用EWMA时，<em class="jd"> N </em>应该是<em class="jd"> </em> 27、<em class="jd"> α </em> =0.071428571。在本文中，我们试图说明移动平均线函数对RSI指标的影响是显著的。用图表来观察数值的变化要容易得多。在本文中，我们尝试将回溯测试应用于免佣金的交易所交易基金(ETF ),并将重点放在作为分析工具的弹性搜索上。下面的例子随机选择“富达国际多因子ETF”。它的股票代码是FDEV。将运行另外10只随机选择的ETF，稍后将显示最终结果。数据选自投资者交易所IEX提供的2021年2月1日至2021年5月31日的时间范围。在下面的两个图表中，不同类型的移动平均线函数的RSI与每日收盘价一起绘制。第一个图表显示了SMMA14和EWMA27L的RSI，其中27L表示计算使用了更长的移动窗口，大约110个数据点，用于Elasticsearch的EWMA函数。基本上，根据上述等式，当前的EWMA计算包括所有先前的数据点。RSI_EWMA27L和RSI_SMMA14两条线一开始有一点空隙，后来在2021–03–30左右重叠。读者应注意使用足够数量的数据点来计算第一个有效的RSI值。但是，RSI_SMMA14不敏感，不会产生任何高于70或低于30的值。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es js"><img src="../Images/80aa104fafc570bf148f7f1c197286e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gNAX-1Up2Po2E31sT_FZMA.jpeg"/></div></div></figure><p id="b4ff" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">第二张图显示了SMA14和EWMA27S的RSI，其中27表示计算使用更短的移动窗口，27个数据点，用于Elasticsearch的EWMA函数。EWMA27S的RSI似乎过于敏感，会产生大量信号，而SMA14的RSI只能接受。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jt"><img src="../Images/9da575f6831f1822c2a69bdb5a6c708a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sNuMTvjOSGVRWL31PpuNNw.jpeg"/></div></div></figure><p id="08d9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们描述一下使用Elasticsearch的实现。假设有一个用数据填充的Elasticsearch索引，其使用的数据映射与上一篇论文中描述的相同。以下步骤演示了REST API请求体的代码。</p><blockquote class="ju jv jw"><p id="e913" class="ie if jd ig b ih ii ij ik il im in io jx iq ir is jy iu iv iw jz iy iz ja jb ha bi translated">通过搜索操作收集所有相关文件</p></blockquote><p id="fc17" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用带有“must”子句的“bool”查询来收集符号为FDEV且日期在2021–02–01和2021–05–31之间的文档。由于移动平均的计算，额外数据调整为1.5个月(从2020年12月15日到2021年1月31日)。</p><pre class="jf jg jh ji fd ka kb kc kd aw ke bi"><span id="0b3c" class="kf kg hh kb b fi kh ki l kj kk">{<br/>    "query": {<br/>        "bool": {<br/>            "must": [<br/>                {"range": {"date": {"gte": "2020-12-15", "lte": "2021-05-31"}}},<br/>                {"term": {"symbol": "FDEV"}}<br/>            ]<br/>        }<br/>   },</span></pre><blockquote class="ju jv jw"><p id="930e" class="ie if jd ig b ih ii ij ik il im in io jx iq ir is jy iu iv iw jz iy iz ja jb ha bi translated">从交易日中选择凭证</p></blockquote><p id="23e3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用名为Backtest_RSIs的“date_histogram”聚合，参数“field”为“date ”,参数“interval”为“1d ”,提取基金每天的价格。然后是一个名为SDaily的“bucket_selector”聚合，通过选择文档数大于0的存储桶来过滤空存储桶(非交易日)。</p><pre class="jf jg jh ji fd ka kb kc kd aw ke bi"><span id="ce54" class="kf kg hh kb b fi kh ki l kj kk">    "aggs": {<br/>        "Backtest_RSIs": {<br/>            "date_histogram": {<br/>                "field": "date",<br/>                "interval": "1d",<br/>                "format": "yyyy-MM-dd"<br/>            },<br/>             "SDaily": {<br/>                 "bucket_selector": {<br/>                     "buckets_path": {"count":"_count"},<br/>                         "script": "params.count &gt; 0"<br/>                }<br/>            },</span></pre><blockquote class="ju jv jw"><p id="f177" class="ie if jd ig b ih ii ij ik il im in io jx iq ir is jy iu iv iw jz iy iz ja jb ha bi translated">提取收盘价</p></blockquote><p id="91f5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一个名为Close的“平均”聚合，用于检索收盘价，因为后续的管道聚合不能直接使用文档字段。</p><pre class="jf jg jh ji fd ka kb kc kd aw ke bi"><span id="0614" class="kf kg hh kb b fi kh ki l kj kk">            "aggs": {<br/>                "Close": {<br/>                    "avg": {"field": "close"}<br/>                },</span></pre><blockquote class="ju jv jw"><p id="48eb" class="ie if jd ig b ih ii ij ik il im in io jx iq ir is jy iu iv iw jz iy iz ja jb ha bi translated">计算连续两个交易日的收盘价之差</p></blockquote><p id="3b8c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用名为DClose的“衍生”聚合，并使用参数“buckets_path”指定每日收盘值，以计算与前一个值的差异。</p><pre class="jf jg jh ji fd ka kb kc kd aw ke bi"><span id="5fc6" class="kf kg hh kb b fi kh ki l kj kk">                "DClose": {<br/>                    "derivative": {"buckets_path": "Close"}<br/>                },</span></pre><blockquote class="ju jv jw"><p id="6785" class="ie if jd ig b ih ii ij ik il im in io jx iq ir is jy iu iv iw jz iy iz ja jb ha bi translated">消除没有DClose值的文档</p></blockquote><p id="13df" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用名为SDClose的“bucket_selector”聚合来筛选出没有DClose值的存储桶。</p><pre class="jf jg jh ji fd ka kb kc kd aw ke bi"><span id="91d8" class="kf kg hh kb b fi kh ki l kj kk">                "DClose": {<br/>                    "derivative": {"buckets_path": "Close"}<br/>                },</span></pre><blockquote class="ju jv jw"><p id="586b" class="ie if jd ig b ih ii ij ik il im in io jx iq ir is jy iu iv iw jz iy iz ja jb ha bi translated">确定每日值相对于之前的数据是盈利还是亏损</p></blockquote><p id="645d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用两个名为Gain和Loss的“bucket_script”聚合，并使用参数“buckets_path”指定DClose聚合的结果来确定值。两个值都必须是正值或零值。</p><pre class="jf jg jh ji fd ka kb kc kd aw ke bi"><span id="bcc2" class="kf kg hh kb b fi kh ki l kj kk">                "Gain": {<br/>                    "bucket_script": {<br/>                        "buckets_path": {DClose": "DClose"},<br/>                        "script": "(params.DClose &gt; 0) ? params.DClose : 0"<br/>                    }<br/>                }, <br/>                "Loss": {<br/>                    "bucket_script": {<br/>                        "buckets_path": {"DClose": "DClose"}, <br/>                        "script": "(params.DClose &lt; 0) ? -params.DClose : 0"<br/>                    }<br/>                },</span></pre><blockquote class="ju jv jw"><p id="4aac" class="ie if jd ig b ih ii ij ik il im in io jx iq ir is jy iu iv iw jz iy iz ja jb ha bi translated">计算盈亏的14天简单移动平均线</p></blockquote><p id="0539" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用两个“移动_fn”聚合，命名为GainSMA14和LossSMA14，参数window为14，参数“buckets_path”分别为增益和损耗。参数“shift”设置为1，以包括当天和过去13个交易日的数据。SMA是使用未加权平均函数(MovingFunctions.unweightedAvg)计算的。</p><pre class="jf jg jh ji fd ka kb kc kd aw ke bi"><span id="263b" class="kf kg hh kb b fi kh ki l kj kk">                "GainSMA14": {<br/>                    "moving_fn": {<br/>                        "script": "MovingFunctions.unweightedAvg(values)", <br/>                        "window": 14, "buckets_path": "Gain", "shift":1<br/>                    }<br/>                },<br/>                "LossSMA14": {<br/>                    "moving_fn": {<br/>                        "script": "MovingFunctions.unweightedAvg(values)", <br/>                        "window": 14, "buckets_path": "Loss", "shift":1<br/>                    }<br/>                },</span></pre><blockquote class="ju jv jw"><p id="1fbf" class="ie if jd ig b ih ii ij ik il im in io jx iq ir is jy iu iv iw jz iy iz ja jb ha bi translated">计算收益和损失的27天指数移动平均线</p></blockquote><p id="8978" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用四个名为GainEWMA27S、LossEWMA27S、GainEWMA27L和LossEWMA27L的“移动_fn”聚合，对于较短的移动窗口，参数window为27，对于较长的移动窗口，参数window为110。参数“buckets_path”分别作为增益和损耗。参数“shift”设置为1，以包括当天和过去交易日的数据。EWMA通过使用α值等于0.071428571的指数移动平均函数(MovingFunctions.ewma)来计算。</p><pre class="jf jg jh ji fd ka kb kc kd aw ke bi"><span id="4d5c" class="kf kg hh kb b fi kh ki l kj kk">                "GainEWMA27S": {<br/>                    "moving_fn": {<br/>                        "script": "MovingFunctions.ewma(values, 0.071428571)", <br/>                        "window": 27, "buckets_path": "Gain", "shift":1<br/>                    }<br/>                },<br/>                "LossEWMA27S": {<br/>                    "moving_fn": {<br/>                        "script": "MovingFunctions.ewma(values, , 0.071428571)", <br/>                        "window": 27, "buckets_path": "Loss", "shift":1<br/>                    }<br/>               },<br/>               "GainEWMA27L": {<br/>                   "moving_fn": {<br/>                       "script": "MovingFunctions.ewma(values, 0.071428571)", <br/>                       "window": 110, "buckets_path": "Gain", "shift":1<br/>                   }<br/>               },<br/>               "LossEWMA27L": {<br/>                   "moving_fn": {<br/>                       "script": "MovingFunctions.ewma(values, , 0.071428571)", <br/>                       "window": 110, "buckets_path": "Loss", "shift":1<br/>                   }<br/>               },</span></pre><blockquote class="ju jv jw"><p id="df24" class="ie if jd ig b ih ii ij ik il im in io jx iq ir is jy iu iv iw jz iy iz ja jb ha bi translated">计算RSI</p></blockquote><p id="fd49" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用三个名为RSISMA14、RSIEWMA27S和RSIEWMA27L的“bucket_script”聚合，并使用参数“buckets _ path”来指定它们的GainSMA和LossSMA的结果。然后根据脚本中它们的方程计算出相应的RSI指标。</p><pre class="jf jg jh ji fd ka kb kc kd aw ke bi"><span id="668d" class="kf kg hh kb b fi kh ki l kj kk">                "RSISMA14": {<br/>                    "bucket_script": {<br/>                        "buckets_path": {"GainSMA14": "GainSMA14", "LossSMA14": "LossSMA14"}, <br/>                        "script": "100 - 100/(1+params.GainSMA14/params.LossSMA14)"<br/>                    }<br/>                },                 <br/>                "RSIEWMA27S": {<br/>                    "bucket_script": {<br/>                        "buckets_path": {"GainEWMA27S": "GainEWMA27S", "LossEWMA27S": "LossEWMA27S"}, <br/>                        "script": "100 - 100/(1+params.GainEWMA27S/params.LossEWMA27S)"<br/>                    }<br/>                }, <br/>                "RSIEWMA27L": {<br/>                    "bucket_script": {<br/>                        "buckets_path": {"GainEWMA27L": "GainEWMA27L", "LossEWMA27L": "LossEWMA27L"}, <br/>                        "script": "100 - 100/(1+params.GainEWMA27L/params.LossEWMA27L)"<br/>                    }<br/>                },</span></pre><blockquote class="ju jv jw"><p id="bca0" class="ie if jd ig b ih ii ij ik il im in io jx iq ir is jy iu iv iw jz iy iz ja jb ha bi translated">由于SMMA14的定义涉及到它之前的值，所以在Elasticsearch中没有办法指定这样的公式。如果读者知道怎么做，请发表评论贡献你的作品。SMMA14和交叉交易策略的计算将在Python程序中完成。该计划包括四个部分。</p></blockquote><p id="81a1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">◆使用JSON格式读取包含Elasticsearch REST API请求体的开始日期、结束日期、符号标记和文件名的命令行参数。<br/> ◆根据参数从Elasticsearch服务器获取数据。<br/> ◆解析响应数据，处理买卖交易。<br/> ◆报告每个RSI的回溯测试统计数据。<br/>主要功能如下所示:</p><pre class="jf jg jh ji fd ka kb kc kd aw ke bi"><span id="b68c" class="kf kg hh kb b fi kh ki l kj kk">def main(argv):<br/>    input_file, start_date, end_date, symbol = get_opt(argv)<br/>    resp = get_data(input_file, start_date, end_date, symbol)<br/>    transactions = parse_data(resp, start_date)<br/>    report(transactions, 'RSISMA14')<br/>    report(transactions, 'RSIEWMA27S')<br/>    report(transactions, 'RSISMMA14')</span></pre><p id="950d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在本文中，只显示了SMMA的代码段和买入或卖出信号的确定。读者可以进一步参考GitHub上的开源项目<a class="ae jc" href="https://github.com/wtwong316/Backtest_RSIs" rel="noopener ugc nofollow" target="_blank"> Backtest_RSIs </a>。parse_data函数如下所示。最后，事务数组将包含有效信号。由于RSIEWMA27L的RSI相当于RSISMMA14的RSI，所以跳过RSIEWMA27L的交易。</p><pre class="jf jg jh ji fd ka kb kc kd aw ke bi"><span id="ccaf" class="kf kg hh kb b fi kh ki l kj kk"># parse the response data and refine the buy/sell signal<br/>def parse_data(resp, start_date):<br/>    result = json.loads(resp)<br/>    if "status" in result:<br/>        print("Return status: %s, error: %s" % (result['status'], result['error']))<br/>        sys.exit(-1)<br/>    aggregations = result['aggregations']<br/>    if aggregations and 'Backtest_RSIs' in aggregations:<br/>        Backtest_RSI = aggregations['Backtest_RSIs']<br/>        transactions = []<br/>        initGain = 0<br/>        initLoss = 0<br/>        wsGain = 0<br/>        wsLoss = 0<br/>        count = 0<br/>        if Backtest_RSI and 'buckets' in Backtest_RSI:<br/>            for bucket in Backtest_RSI['buckets']:<br/>                transaction = {}<br/>                transaction['date'] = bucket['key_as_string']<br/>                transaction['Close'] = bucket['Close']['value']<br/>                transaction['RSISMA14'] = "hold" if 'RSISMA14' not in bucket else ("buy" if bucket['RSISMA14']['value'] &lt; 30 else   ("sell" if bucket['RSISMA14']['value'] &gt; 70 else "hold"))<br/>                transaction['RSIEWMA27S'] = "hold" if 'RSIEWMA27S' not in bucket else ("buy" if bucket['RSIEWMA27S']['value'] &lt; 30 else                        ("sell" if bucket['RSIEWMA27S']['value'] &gt; 70 else "hold"))</span><span id="f8b4" class="kf kg hh kb b fi kl ki l kj kk">                count += 1<br/>                if count &lt;= 14:<br/>                    initGain += bucket['Gain']['value']<br/>                    initLoss += bucket['Loss']['value']<br/>                    wsGain = initGain/count<br/>                    wsLoss = initLoss/count<br/>                else:<br/>                    wsGain = (13 * wsGain + bucket['Gain']['value'])/14<br/>                    wsLoss = (13 * wsLoss + bucket['Loss']['value'])/14<br/>                    wsRSI = 100 - 100/(1+wsGain/wsLoss)<br/>                    transaction['RSISMMA14'] = "buy" if wsRSI &lt; 30 else ("sell" if wsRSI &gt; 70 else "hold")</span><span id="95a7" class="kf kg hh kb b fi kl ki l kj kk">                if transaction['date'] &gt;= start_date:<br/>                    transactions.append(transaction)</span></pre><p id="b1b2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了确保一次买入并持有一股，在持有的股票卖出之前不发生交易，我们使用布尔变量“hold”来确保交易满足以下条件。<br/> ◆A买入信号在持有标志为假时生效<br/> ◆A卖出信号在持有标志为真时生效<br/>读者可以进一步参考开源项目中的交易策略报告功能。python程序提供交易策略的统计数据，包括整个买卖交易的“赢”和“输”，如下所示:</p><pre class="jf jg jh ji fd ka kb kc kd aw ke bi"><span id="d9d3" class="kf kg hh kb b fi kh ki l kj kk">$ ./backtest_rsis.sh -i backtest_rsis.json -s FDEV -b 2021-02-01 -e 2021-05-31<br/>input_file 'backtest_rsis.json', start_date '2021-02-01', end_Date '2021-05-31', symbol 'FDEV'<br/>--------------------------------------------------------------------<br/>RSISMA14<br/>number of buy:             1<br/>number of sell:            1<br/>number of win:             1<br/>number of lose:            0<br/>total profit:           0.97<br/>profit/transaction:     0.97<br/>maximum buy price:     27.03<br/>profit percent:         3.61%<br/>--------------------------------------------------------------------<br/>RSIEWMA27S<br/>number of buy:             1<br/>number of sell:            1<br/>number of win:             1<br/>number of lose:            0<br/>total profit:           0.83<br/>profit/transaction:     0.83<br/>maximum buy price:     27.12<br/>profit percent:         3.05%<br/>--------------------------------------------------------------------<br/>RSISMMA14<br/>number of buy:             0<br/>number of sell:            0<br/>number of win:             0<br/>number of lose:            0<br/>total profit:           0.00<br/>maximum buy price:      0.00 <br/>--------------------------------------------------------------------</span></pre><p id="debc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">以下三个表格收集了从2021年2月1日到2021年5月31日使用RSISMA14和RSIEWMA27S随机挑选的11只ETF的所有统计数据，用于RSI交叉交易策略。使用SMMA14时未生成有效交易。从观察的角度来看，RSISMA14可以提供更好的交易结果。使用RSIEWMA27S时，11只基金中有4只没有有效的交易信号。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es km"><img src="../Images/9ecab713a6995f0e71c3c19b6be946e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z7MvG7fX8M6_qE2eP79H_A.jpeg"/></div></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es km"><img src="../Images/dd909c9867297686c1289f2944244e9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lLHci1VOxsKWu0UZJH_QXw.jpeg"/></div></div></figure><p id="5aa6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果在SMMA14的情况下考虑降低交叉值的标准，比如下限是35，上限是65，那么可以获得更好的交易结果。下表显示11个交易中有7个交易有效。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es km"><img src="../Images/9ff81a976b472e8aa296e544026cbf54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9F6ufve3TMeQcyAyX7T8pQ.jpeg"/></div></div></figure><p id="6072" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果在交易中只考虑这7只基金，那么使用35和65作为两个边界的SMMA14的总回报略好于SMA14。EWMA27S的总回报比另外两个少。简而言之，如题，均线函数对RSI交叉策略的回测结果影响显著。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kn"><img src="../Images/469b5aa626160d0ac2c26ace41e47c61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ivd_WBsJzwg45ikKvFk5-Q.jpeg"/></div></div></figure><p id="b7a5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">备注:<br/>一、感谢IEX(投资者交易所)提供ETF数据，GitHub提供开源项目存储。<br/>二。本文基于一种技术思路，不构成任何投资建议。读者在使用时必须承担自己的责任。<br/>三。文章可能还有错误，恳请读者指正。<br/>四。感兴趣的读者可以参考作者撰写的《弹性搜索的基本技巧》一书。《高级弹性搜索7.0》，2019年8月，Packt，ISBN: 9781789957754。</p></div></div>    
</body>
</html>