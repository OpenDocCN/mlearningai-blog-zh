<html>
<head>
<title>An Alliance: Python and R (Seaborn and ggplot2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一个联盟:Python和R (Seaborn和ggplot2)</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/an-alliance-python-and-r-seaborn-and-ggplot2-233864b77bc4?source=collection_archive---------3-----------------------#2022-05-30">https://medium.com/mlearning-ai/an-alliance-python-and-r-seaborn-and-ggplot2-233864b77bc4?source=collection_archive---------3-----------------------#2022-05-30</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/d9128c3eb77fc0669245306bf5a3d28e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aUS2CEZuHigxOUI-4BpSJQ.png"/></div></div></figure><p id="b427" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">处理数据意味着在大多数情况下，你的数据将被可视化，以将信息传达给目标受众。python和R编程语言内置了有助于数据可视化的库。两个流行的库是seaborn和ggplot2，前者是基于python的Matplotlib库构建的，后者是基于r。</p><p id="17b6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn">在python中加载seaborn</em></p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="b7ee" class="jx jy hh jt b fi jz ka l kb kc">import seaborn as sns<br/>import matplotlib.pyplot as plt<br/>%matplotlib inline</span></pre><p id="af06" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn">加载R中的gg plot 2</em></p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="0048" class="jx jy hh jt b fi jz ka l kb kc">library(ggplot2)</span></pre><p id="c83a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在我的<a class="ae kd" rel="noopener" href="/mlearning-ai/data-tales-art-in-data-visualization-a07d3e5562e7">文章中，</a>我写了一些库的默认语法对数据可视化没有帮助，但是有一些参数可以通过添加额外的语法来调整。在python中，这些语法没有分割地连接在一起，编程语言一起读取它们，但在R中，这些语法必须用+号连接，程序才能将它们一起识别为完整的命令，否则它只读取第一个语法。</p><p id="ee36" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">一些需要额外语法的参数有:</p><ol class=""><li id="ace4" class="ke kf hh ir b is it iw ix ja kg je kh ji ki jm kj kk kl km bi translated"><strong class="ir hi">风格:</strong>风格是剧情的背景主题，决定了剧情的外观。在seaborn中，使用<code class="du kn ko kp jt b">sns.set_style()</code>命令设置风格，而在R中，通过选择<code class="du kn ko kp jt b">theme_classic()</code>、<code class="du kn ko kp jt b">theme_void()</code>、<code class="du kn ko kp jt b">theme_bw()</code>等设置背景主题。</li></ol><p id="3dfe" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 2。大小:</strong>图的大小有助于捕捉可能丢失的信息，尤其是在创建包含大量分类变量的图时。调整地块的宽度和高度有助于透视一切。在ggplot2中，尺寸被自动设置以适应绘图，而在seaborn中，尺寸可以通过应用<code class="du kn ko kp jt b">plt.subplots(figsize=( , ))</code>来设置</p><p id="c85e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 3。方向:</strong>设置绘图方向为垂直或水平。在seaborn中，使用R中的<code class="du kn ko kp jt b">orient='h'/ orient='v'</code>设置方向，可以使用<code class="du kn ko kp jt b">coordflip()</code>设置方向，当方向设置为水平时，分类x轴成为y轴，数字y轴成为x轴。</p><p id="55e6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 4。颜色:</strong>绘图的颜色可以改变，以遵循特定的调色板或设置为特定的颜色。当填充或色调设置为变量时，也可以手动设置颜色，而不是使用调色板。</p><p id="7f88" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 5。轴样式:</strong>轴样式调整轴标签和轴刻度。</p><p id="89a7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">6。图例:图例用于显示填充的分类变量。在大多数绘图中，图例放在绘图网格之外会更好看。</p><p id="59ef" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">7 .<strong class="ir hi">。剧情标题:</strong>在某些情况下，添加剧情标题有助于读者理解剧情的脉络。</p><p id="f115" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">用图书馆创造情节</strong></p><p id="0409" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">让我们并排比较一下这些库，看看使用tips数据集时这些图是什么样子。</p><p id="d804" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn">巨蟒</em></p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="1cde" class="jx jy hh jt b fi jz ka l kb kc">df = sns.load_dataset("tips")<br/>df.head()</span></pre><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kq"><img src="../Images/7d4394dd2b8faba6d8fc45a96da04ac1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CZWd0noimWqSbb37CP_RaQ.png"/></div></div></figure><p id="e150" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn"> R </em></p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="1513" class="jx jy hh jt b fi jz ka l kb kc">df &lt;- tbl_df(tips)<br/>head(df)</span></pre><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kr"><img src="../Images/ceb339dc0ca38e5d0e93d2221f7f76e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Km-uhSsCr-3zSx1d6WCr2g.png"/></div></div></figure><p id="1194" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">条形图</strong></p><p id="3ec5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn">海风码</em></p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="548d" class="jx jy hh jt b fi jz ka l kb kc">sns.set_style("whitegrid")<br/>bar,ax = plt.subplots(figsize=(8,6))<br/>ax = sns.barplot(x='day', y='total_bill', hue= 'sex', data=df, ci=None, palette='Set1',orient='v')<br/>ax.set_title("Bill spent on each day", fontsize=20)<br/>ax.set_xlabel ("day", fontsize=15)<br/>ax.set_ylabel ("bill ($)", fontsize=15)<br/>ax.tick_params(axis='x', labelsize=15)<br/>ax.tick_params(axis='y', labelsize=15)<br/>plt.legend(bbox_to_anchor=(1.05, 1), loc=2, borderaxespad=0., fontsize=15)<br/>ax.grid(False)</span></pre><p id="a3e0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn"> ggplot2代码</em></p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="c117" class="jx jy hh jt b fi jz ka l kb kc">ggplot(df, aes(x= day, y = total_bill, fill=sex))+<br/>scale_colour_brewer(palette = 2)+<br/>  geom_bar(stat = "identity", position = position_dodge(.9),  width = 0.9)+theme_classic()+ggtitle("Bill spent on each day")+<br/>  xlab(NULL)+ylab("total_bill($)")+theme(title=element_text(size=15, face='bold'), axis.text.x = element_text(size = 15, face = "bold"), axis.text.y = element_text(size = 15, face = "bold"), axis.title.y = element_text(size=15, face='bold'))</span></pre><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ks"><img src="../Images/522c0dc1f94736b39fb0c0d0211b220b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F7FdW6a7QJSBLUG1eBxQnA.png"/></div></div></figure><p id="a7c0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">比较这些图，seaborn图固定在一个网格框中，而ggplot2图只有x和y轴线。seaborn的x轴上的分类变量是根据一周中的天数排列的，而ggplot2是按字母顺序排列的。</p><p id="4e52" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">箱线图</strong></p><p id="1ab0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn"> seaborn </em></p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="1f40" class="jx jy hh jt b fi jz ka l kb kc">sns.set_style("whitegrid")<br/>bar,ax = plt.subplots(figsize=(8,6))<br/>ax = sns.boxplot(x="day", y="total_bill", data=df, palette='Set1')<br/>ax.set_title("Bill spent on each day", fontsize=20)<br/>ax.set_xlabel ("day", fontsize=15)<br/>ax.set_ylabel ("bill ($)", fontsize=15)<br/>ax.tick_params(axis='x', labelsize=15)<br/>ax.tick_params(axis='y', labelsize=15)<br/>ax.grid(False)</span></pre><p id="acc8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn"> ggplot2 </em></p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="0dc8" class="jx jy hh jt b fi jz ka l kb kc">ggplot(df, aes(day, total_bill, fill=day))+<br/>  stat_boxplot(aes(day, total_bill), geom='errorbar', linetype=1, width=0.5)+ggtitle("Bill spent on each day")+<br/> geom_boxplot( aes(day, total_bill),outlier.shape=1)+theme_classic()+xlab(NULL)+ylab("total_bill($)")+theme(legend.text = element_blank(), legend.title = element_blank(),<br/>        legend.key = element_blank(), legend.position = "none", title=element_text(size=15, face='bold'), axis.text.x = element_text(size = 15, face = "bold"), axis.text.y = element_text(size = 15, face = "bold"), axis.title.y = element_text(size=15, face='bold'))</span></pre><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kt"><img src="../Images/6de46d37ae65836fea07bf0e8eb048f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TjbiSg55FbS0wCuY15lcjQ.png"/></div></div></figure><p id="3b33" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">内核密度图</strong></p><p id="4b05" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn"> seaborn </em></p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="43cd" class="jx jy hh jt b fi jz ka l kb kc">bar,ax = plt.subplots(figsize=(8,6))<br/>ax=sns.kdeplot(data=df, x="total_bill", hue='sex', palette='Set1')<br/>ax.set_ylabel ('', fontsize=20)<br/>ax.set_xlabel ('Total bill ($)', fontsize=20)<br/>ax.tick_params(axis='x', labelsize=20)<br/>ax.tick_params(axis='y', labelsize=20)<br/>ax.grid(False)</span></pre><p id="b84c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn"> ggplot2 </em></p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="aefd" class="jx jy hh jt b fi jz ka l kb kc">ggplot(df, aes(total_bill, col=sex)) +<br/>  geom_density()+theme_classic()+xlab('total bill($)')+ylab(NULL)+<br/>  theme(title=element_text(size=15, face='bold'), axis.text.x = element_text(size = 15, face = "bold"), <br/>        axis.text.y = element_text(size = 15, face = "bold"), axis.title.y = element_text(size=15, face='bold'))</span></pre><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ku"><img src="../Images/4ce6af380f0fad402d92aad5dcd13fc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MYmTqXjFnzrGxT1b0YMVbQ.png"/></div></div></figure><p id="4f3a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">seaborn的y轴刻度KDE图有三个小数位，而ggplot2的y轴刻度有两个小数位。</p><p id="b099" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">小提琴剧情</strong></p><p id="44a5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn"> seaborn </em></p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="17bd" class="jx jy hh jt b fi jz ka l kb kc">sns.set_style("whitegrid")<br/>g=sns.catplot(x="sex", y="total_bill",<br/>                hue="smoker", col="time",<br/>                data=df, kind="violin",<br/>                height=7, aspect=.8);</span></pre><p id="b997" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn"> ggplot2 </em></p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="a236" class="jx jy hh jt b fi jz ka l kb kc">ggplot(df, aes(x = sex, y= total_bill, fill=smoker))+facet_grid(~time)+<br/>  geom_violin(alpha= 0.9) +<br/>  theme_classic()+theme(title=element_text(size=15, face='bold'), axis.text.x = element_text(size = 15, face = "bold"), <br/>        axis.text.y = element_text(size = 15, face = "bold"), axis.title.y = element_text(size=15, face='bold'))</span></pre><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kv"><img src="../Images/7af6d08902edd7a72e2d134945b44ea4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*av-JUzdwjh8eFPVcls6TwQ.png"/></div></div></figure><p id="8b63" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">散点图</strong></p><p id="ca8e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn"> seaborn </em></p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="bde3" class="jx jy hh jt b fi jz ka l kb kc">sns.set_style("whitegrid")<br/>bar,ax = plt.subplots(figsize=(8,8))<br/>sns.scatterplot(data=df, x="total_bill", y="tip", hue='sex', palette='Set1')<br/>ax.set_title("Bills and Tips", fontsize=20)<br/>ax.set_xlabel ("total bill($)", fontsize=15)<br/>ax.set_ylabel ("tip($)", fontsize=15)<br/>ax.tick_params(axis='x', labelsize=15)<br/>ax.tick_params(axis='y', labelsize=15)<br/>plt.legend(bbox_to_anchor=(1.05, 1), loc=2, borderaxespad=0., fontsize=15)<br/>ax.grid(False)</span></pre><p id="12e4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn"> ggplot2 </em></p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="3915" class="jx jy hh jt b fi jz ka l kb kc">ggplot(df, aes(x = total_bill, y = tip)) +<br/>    geom_point(aes(color = factor(sex)))+theme_classic()+ggtitle("Bills and Tips")+ylab('tip($)')+xlab('total bill($)')+<br/>theme(title=element_text(size=15, face='bold'), axis.text.x = element_text(size = 15, face = "bold"), <br/>        axis.text.y = element_text(size = 15, face = "bold"), axis.title.y = element_text(size=15, face='bold'))</span></pre><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kw"><img src="../Images/054e496b7965d3f33ce02b853dc0c4f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ahaumLSd3xkJqFn6A5sZ4A.png"/></div></div></figure><p id="6877" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> Corrplot </strong></p><p id="9d25" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn"> seaborn </em></p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="85d2" class="jx jy hh jt b fi jz ka l kb kc">#compute correlation<br/>corr_matrix = df.corr()<br/>corr_matrix<br/>sns.heatmap(corr_matrix, annot=True)<br/>plt.show()</span></pre><p id="e57d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn"> ggplot2 </em></p><pre class="jo jp jq jr fd js jt ju jv aw jw bi"><span id="1abc" class="jx jy hh jt b fi jz ka l kb kc">#calculate pairwise<br/>res &lt;- cor(df1, method = "pearson")<br/>corrplot(res, method="color")</span></pre><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kx"><img src="../Images/68416faad802a6d38c06715d2913e28d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PVB4WIlDiOJMYE2EDmmoKg.png"/></div></div></figure><p id="f9a8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">当ggplot2 corrplot从-1到+1读取时，seaborn corrplot保持数字标度上的坡向相关值。</p><p id="15d9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">不同图书馆制作的这些图有许多相似之处，也有许多不同之处。总的来说，ggplot2的剧情图形在视觉上比seaborn更清晰。这两个图书馆提供了很多，这完全取决于个人风格和偏好。</p><div class="ky kz ez fb la lb"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="lc ab dw"><div class="ld ab le cl cj lf"><h2 class="bd hi fi z dy lg ea eb lh ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="li l"><h3 class="bd b fi z dy lg ea eb lh ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="lj l"><p class="bd b fp z dy lg ea eb lh ed ef dx translated">medium.com</p></div></div><div class="lk l"><div class="ll l lm ln lo lk lp in lb"/></div></div></a></div></div></div>    
</body>
</html>