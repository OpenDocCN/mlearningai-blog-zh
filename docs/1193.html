<html>
<head>
<title>Handling audio data for machine learning</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为机器学习处理音频数据</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/handling-audio-data-for-machine-learning-7ba225f183cb?source=collection_archive---------2-----------------------#2021-10-23">https://medium.com/mlearning-ai/handling-audio-data-for-machine-learning-7ba225f183cb?source=collection_archive---------2-----------------------#2021-10-23</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/8f48640cec408a588c1c2bf48a8353e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1106/format:webp/1*aCvNzmcyh_08movrF1mYyg.jpeg"/></div></figure><p id="2fb4" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">这篇文章的主要目的是阐明准备音频数据进行分析的过程以及与音频数据相关的复杂概念。</p><p id="c1bd" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">我发现在做一个关于鸟类声音识别的个人项目时，处理音频数据很乏味。让它变得如此困难的事实是，有许多与音频相关的概念，人们必须理解才能按照他们的要求自由地操纵它。最重要的是，与计算机视觉和自然语言处理相比，使用机器学习或音频识别的音频数据分析较少进行。</p></div><div class="ab cl jj jk go jl" role="separator"><span class="jm bw bk jn jo jp"/><span class="jm bw bk jn jo jp"/><span class="jm bw bk jn jo"/></div><div class="ha hb hc hd he"><h1 id="55f9" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">目录</h1><ol class=""><li id="950f" class="ko kp hh in b io kq is kr iw ks ja kt je ku ji kv kw kx ky bi translated">什么是音频数据？</li><li id="d3db" class="ko kp hh in b io kz is la iw lb ja lc je ld ji kv kw kx ky bi translated">加载数据</li><li id="4bf5" class="ko kp hh in b io kz is la iw lb ja lc je ld ji kv kw kx ky bi translated">数据争论和扩充</li><li id="7947" class="ko kp hh in b io kz is la iw lb ja lc je ld ji kv kw kx ky bi translated">特征提取和可视化</li></ol></div><div class="ab cl jj jk go jl" role="separator"><span class="jm bw bk jn jo jp"/><span class="jm bw bk jn jo jp"/><span class="jm bw bk jn jo"/></div><div class="ha hb hc hd he"><h1 id="2211" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">什么是音频数据？</h1><p id="4f82" class="pw-post-body-paragraph il im hh in b io kq iq ir is kr iu iv iw le iy iz ja lf jc jd je lg jg jh ji ha bi translated">首先，音频数据是一种非结构化数据，需要花费大量精力来处理和准备分析。但是一旦它被转换成可管理的格式，它会提供大量有用的信息</p><h2 id="86ad" class="lh jr hh bd js li lj lk jw ll lm ln ka iw lo lp ke ja lq lr ki je ls lt km lu bi translated">常见术语的分类:</h2><p id="4b65" class="pw-post-body-paragraph il im hh in b io kq iq ir is kr iu iv iw le iy iz ja lf jc jd je lg jg jh ji ha bi translated"><strong class="in hi">音频</strong>:以波的形式传播的振动</p><p id="c715" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">采样</strong>:将连续信号转换成数字信号</p><p id="cf2f" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">样本</strong>:通常表示某一时间点的振幅值</p><p id="3498" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">采样率</strong>:每秒记录的音频样本数(单位为赫兹)</p><p id="ada3" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">振幅</strong>:声波的高度值</p><p id="5851" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">频率/音高</strong>:每秒产生的总波数</p><blockquote class="lv lw lx"><p id="0319" class="il im ly in b io ip iq ir is it iu iv lz ix iy iz ma jb jc jd mb jf jg jh ji ha bi translated">我们通常通过将声波转换成一系列数字样本来表示数字音频。</p></blockquote><p id="6402" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">时域</strong>:在该域中，音频信号是振幅(y轴)随时间(x轴)变化的波。</p><p id="367a" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">频域</strong>:在该域中，音频信号被表示为一系列频率(x轴)及其相关功率(y轴)</p><h2 id="adc4" class="lh jr hh bd js li lj lk jw ll lm ln ka iw lo lp ke ja lq lr ki je ls lt km lu bi translated">常用的声音格式:</h2><p id="5dfe" class="pw-post-body-paragraph il im hh in b io kq iq ir is kr iu iv iw le iy iz ja lf jc jd je lg jg jh ji ha bi translated">有三种最常用的数字音频格式:</p><ul class=""><li id="f8bc" class="ko kp hh in b io ip is it iw mc ja md je me ji mf kw kx ky bi translated"><strong class="in hi"> wav </strong>(波形音频文件)格式</li><li id="d939" class="ko kp hh in b io kz is la iw lb ja lc je ld ji mf kw kx ky bi translated"><strong class="in hi"> mp3 </strong> (MPEG-1音频层3)格式</li><li id="652a" class="ko kp hh in b io kz is la iw lb ja lc je ld ji mf kw kx ky bi translated"><strong class="in hi"> WMA </strong> (Windows Media音频)格式</li></ul><p id="a565" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">为了避免mp3音频压缩造成的信息丢失，我们更倾向于使用wav音频格式进行数据分析。</p></div><div class="ab cl jj jk go jl" role="separator"><span class="jm bw bk jn jo jp"/><span class="jm bw bk jn jo jp"/><span class="jm bw bk jn jo"/></div><div class="ha hb hc hd he"><h1 id="fe68" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">加载数据</h1><p id="d4f7" class="pw-post-body-paragraph il im hh in b io kq iq ir is kr iu iv iw le iy iz ja lf jc jd je lg jg jh ji ha bi translated">我们先来听一个Python中的音频文件。</p><pre class="mg mh mi mj fd mk ml mm mn aw mo bi"><span id="2cb8" class="lh jr hh ml b fi mp mq l mr ms">import IPython.display as ipd</span><span id="1410" class="lh jr hh ml b fi mt mq l mr ms">ipd.Audio('D:/wavAudio/1.wav')</span></pre><figure class="mg mh mi mj fd ii er es paragraph-image"><div class="er es mu"><img src="../Images/94f62801d9d6321c31ce445f4e60436b.png" data-original-src="https://miro.medium.com/v2/resize:fit:782/format:webp/1*ScYnh9nrTxCiV9VFVKFmTg.png"/></div><figcaption class="mv mw et er es mx my bd b be z dx">Audio Player — Image by Author</figcaption></figure><p id="a340" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">Librosa库提供了加载和处理音频数据的实用工具。</p><pre class="mg mh mi mj fd mk ml mm mn aw mo bi"><span id="de43" class="lh jr hh ml b fi mp mq l mr ms">import librosa</span><span id="cef2" class="lh jr hh ml b fi mt mq l mr ms">signal, sample_rate = librosa.load('D:/wavAudio/1.wav',sr = None) <br/># sr = None makes sure the native sample rate of audio is used.</span></pre><p id="8db3" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">Librosa产生一个标准化的音频时间序列样本数组。</p></div><div class="ab cl jj jk go jl" role="separator"><span class="jm bw bk jn jo jp"/><span class="jm bw bk jn jo jp"/><span class="jm bw bk jn jo"/></div><div class="ha hb hc hd he"><h1 id="4397" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">数据争论和扩充</h1><ul class=""><li id="5ec6" class="ko kp hh in b io kq is kr iw ks ja kt je ku ji mf kw kx ky bi translated">音频中的无声部分给数据增加了不必要的噪音(哦，讽刺！).让我们移除它们。</li></ul><pre class="mg mh mi mj fd mk ml mm mn aw mo bi"><span id="b787" class="lh jr hh ml b fi mp mq l mr ms">def removeSilence(signal):<br/>    return signal[librosa.effects.split(signal)[0][0] : librosa.effects.split(signal)[0][-1]]</span></pre><ul class=""><li id="f827" class="ko kp hh in b io ip is it iw mc ja md je me ji mf kw kx ky bi translated">对于每个超过10秒的音频片段，让我们将它们分成5秒的片段，以获得更多的训练实例。</li></ul><pre class="mg mh mi mj fd mk ml mm mn aw mo bi"><span id="f8a0" class="lh jr hh ml b fi mp mq l mr ms">from pydub import AudioSegment</span><span id="a0c2" class="lh jr hh ml b fi mt mq l mr ms">def create_chunks(audio,filename):<br/>    if len(audio) &lt; 10000:<br/>        return "Audio too small"<br/>    chunk_no = 0<br/>    t1 = 0<br/>    for step in range(0,len(audio),5000):<br/>        t2 = step<br/>        if step == 0:<br/>            t1 = step<br/>            continue<br/>        curr_chunk = audio[t1:t2]<br/>        chunk_no += 1<br/>        curr_chunk.export(filename + '-' + str(chunk_no) + '.wav', format="wav")<br/>        t1 ,t2 = t2, t1</span><span id="af7f" class="lh jr hh ml b fi mt mq l mr ms">for wav in os.listdir('D:/wavAudio/'):<br/>    audio = AudioSegment.from_wav('D:/wavAudio/' + wav)<br/>    create_chunks(audio,wav[:-4])</span></pre><blockquote class="lv lw lx"><p id="370f" class="il im ly in b io ip iq ir is it iu iv lz ix iy iz ma jb jc jd mb jf jg jh ji ha bi translated">在进行我的项目时，我面临着一个恼人但常见的困境，即没有足够的数据。与表格数据不同，处理非结构化数据的好处(可能是唯一的好处)是可以在不引入大量偏差的情况下扩充数据。</p></blockquote><ul class=""><li id="83df" class="ko kp hh in b io ip is it iw mc ja md je me ji mf kw kx ky bi translated">我已经列出了一些最常见的音频数据增强。我的首选是<em class="ly">响度</em>、<em class="ly">噪音、</em>和<em class="ly">偏移。</em></li></ul><pre class="mg mh mi mj fd mk ml mm mn aw mo bi"><span id="25ce" class="lh jr hh ml b fi mp mq l mr ms">import nlpaug.augmenter.audio as naa</span><span id="bc3e" class="lh jr hh ml b fi mt mq l mr ms">signal, sample_rate = librosa.load('D:/C Drive Documents/Bird_Sound_Recognition/Data for each bird/data/xeno-canto-dataset/AshyPrinia/' + 'DNPrinia570426.wav',sr = None)</span><span id="8ef6" class="lh jr hh ml b fi mt mq l mr ms">plt.figure(figsize = (10,10))</span><span id="4083" class="lh jr hh ml b fi mt mq l mr ms">plt.subplot(6,1,1)<br/>plt.title("Crop")<br/>librosa_display.waveplot(naa.CropAug(sampling_rate=sample_rate).augment(signal), sr=sample_rate, alpha=0.75)</span><span id="1d02" class="lh jr hh ml b fi mt mq l mr ms">plt.subplot(6,1,2)<br/>plt.title("Masking")<br/>librosa_display.waveplot(naa.MaskAug(sampling_rate=sample_rate, mask_with_noise=False).augment(signal), sr=sample_rate, alpha=0.75)</span><span id="6659" class="lh jr hh ml b fi mt mq l mr ms">plt.subplot(6,1,3)<br/>plt.title("Increasing speed")<br/>librosa_display.waveplot(naa.SpeedAug().augment(signal), sr=sample_rate, alpha=0.75)</span><span id="b803" class="lh jr hh ml b fi mt mq l mr ms">plt.subplot(6,1,4)<br/>plt.title("Increasing volume")<br/>librosa_display.waveplot(naa.LoudnessAug().augment(signal), sr=sample_rate, alpha=0.75)</span><span id="a5cf" class="lh jr hh ml b fi mt mq l mr ms">plt.subplot(6,1,5)<br/>plt.title("Adding white noise")<br/>librosa_display.waveplot(naa.NoiseAug().augment(signal), sr=sample_rate, alpha=0.75)</span><span id="45c2" class="lh jr hh ml b fi mt mq l mr ms">plt.subplot(6,1,6)<br/>plt.title("Shifting the signal by some time")<br/>librosa_display.waveplot(naa.ShiftAug(sampling_rate=sample_rate).augment(signal), sr=sample_rate, alpha=0.75)</span><span id="bd8c" class="lh jr hh ml b fi mt mq l mr ms">plt.tight_layout()<br/>plt.show()</span></pre><figure class="mg mh mi mj fd ii er es paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="er es mz"><img src="../Images/87d55d0cba0c561c73e65de10e20ae54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3LGYdegr4ZQnTTiAeg1M2A.png"/></div></div><figcaption class="mv mw et er es mx my bd b be z dx">Different types of augmentation on audio — Image by Author</figcaption></figure></div><div class="ab cl jj jk go jl" role="separator"><span class="jm bw bk jn jo jp"/><span class="jm bw bk jn jo jp"/><span class="jm bw bk jn jo"/></div><div class="ha hb hc hd he"><h1 id="e9f9" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">特征提取和可视化</h1><h2 id="f5ae" class="lh jr hh bd js li lj lk jw ll lm ln ka iw lo lp ke ja lq lr ki je ls lt km lu bi translated"><strong class="ak">普通波形图</strong></h2><ul class=""><li id="2058" class="ko kp hh in b io kq is kr iw ks ja kt je ku ji mf kw kx ky bi translated">让我们首先想象一下最常见的振幅与时间关系曲线图</li></ul><pre class="mg mh mi mj fd mk ml mm mn aw mo bi"><span id="ad01" class="lh jr hh ml b fi mp mq l mr ms">plt.figure(figsize = (10,15))<br/>librosa.display.waveplot(signal,sr=sample_rate, max_points=50000.0, x_axis='time', offset=0.0, max_sr=1000)<br/>plt.show()</span></pre><figure class="mg mh mi mj fd ii er es paragraph-image"><div class="er es ne"><img src="../Images/730c7def39fb5f4490b4c427b827f8cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1054/format:webp/1*bXMx3KnnFwdKpgGX1sdn_A.png"/></div><figcaption class="mv mw et er es mx my bd b be z dx">Image by Author</figcaption></figure><p id="518e" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">这个情节没有给我们很多信息。让我们进一步处理音频。</p><h2 id="ba67" class="lh jr hh bd js li lj lk jw ll lm ln ka iw lo lp ke ja lq lr ki je ls lt km lu bi translated"><strong class="ak">傅立叶变换</strong></h2><ul class=""><li id="8c37" class="ko kp hh in b io kq is kr iw ks ja kt je ku ji mf kw kx ky bi translated">现在，让我们对音频信号进行傅立叶变换，以显示信号中的频率信息。</li></ul><p id="b4eb" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">简单地说，傅立叶变换是音频信号从时域到频域的变换。</p><figure class="mg mh mi mj fd ii er es paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="er es nf"><img src="../Images/dbd4c1cb71e42762a7392dd248d73f66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0KlFjJwH0zGaX5DSY9ZPlg.jpeg"/></div></div><figcaption class="mv mw et er es mx my bd b be z dx">Image from <a class="ae ng" href="https://aavos.eu/glossary/fourier-transform/" rel="noopener ugc nofollow" target="_blank">AAVOS</a></figcaption></figure><p id="5ca6" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">我们通常执行短时傅立叶变换，它对信号的每个小段/窗口执行变换，这对于捕捉信号的时变特性是有用的。</p><pre class="mg mh mi mj fd mk ml mm mn aw mo bi"><span id="c459" class="lh jr hh ml b fi mp mq l mr ms">signal, sample_rate = librosa.load('D:/wavAudio/1.wav',sr = None)</span><span id="c5af" class="lh jr hh ml b fi mt mq l mr ms">print(librosa.stft(signal))</span></pre><figure class="mg mh mi mj fd ii er es paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="er es nh"><img src="../Images/a7d431dd1b189ceed829ff940528273c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/format:webp/1*_EaIYKk1JqwW6tlFAffyxQ.png"/></div></div></figure><h2 id="83d2" class="lh jr hh bd js li lj lk jw ll lm ln ka iw lo lp ke ja lq lr ki je ls lt km lu bi translated"><strong class="ak">谱图</strong></h2><p id="3689" class="pw-post-body-paragraph il im hh in b io kq iq ir is kr iu iv iw le iy iz ja lf jc jd je lg jg jh ji ha bi translated">声谱图显示了一段时间内不同频率值的信号强度或响度(分贝)。</p><pre class="mg mh mi mj fd mk ml mm mn aw mo bi"><span id="7c46" class="lh jr hh ml b fi mp mq l mr ms"># Plot spectogram<br/>plt.figure(figsize=(10, 4))<br/>D = librosa.amplitude_to_db(np.abs(librosa.stft(signal)), ref=np.max)<br/># amplitude_to_db converts an amplitude spectrogram to dB-scaled spectrogram<br/>librosa.display.specshow(D, y_axis='linear')<br/>plt.colorbar(format='%+2.0f dB')<br/>plt.title('Linear-frequency power spectrogram')<br/>plt.show()</span></pre><figure class="mg mh mi mj fd ii er es paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="er es ni"><img src="../Images/af7071b9171e24bada84184ffc235fc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/1*m22PNNsJRWOrPnhXsFetjg.png"/></div></div><figcaption class="mv mw et er es mx my bd b be z dx">Image by Author</figcaption></figure><h2 id="208e" class="lh jr hh bd js li lj lk jw ll lm ln ka iw lo lp ke ja lq lr ki je ls lt km lu bi translated"><strong class="ak">梅尔光谱图</strong></h2><p id="ae05" class="pw-post-body-paragraph il im hh in b io kq iq ir is kr iu iv iw le iy iz ja lf jc jd je lg jg jh ji ha bi translated">mel谱图是转换为mel标度的谱图。</p><pre class="mg mh mi mj fd mk ml mm mn aw mo bi"><span id="62c1" class="lh jr hh ml b fi mp mq l mr ms">mel_scale_frequency = 2595 * log(1 + frequency/700)</span></pre><p id="6286" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><em class="ly">我开发的一个函数将音频信号和采样率作为输入，生成</em> mel-spectrogram <em class="ly">图像并存储在目标路径中。</em></p><pre class="mg mh mi mj fd mk ml mm mn aw mo bi"><span id="db9d" class="lh jr hh ml b fi mp mq l mr ms">def mel_spectogram_generator(audio_name,signal,sample_rate,augmentation,target_path):<br/>    S = librosa.feature.melspectrogram(y=signal,sr=sample_rate,<br/>                                    n_fft=N_FFT,<br/>                                    hop_length=HOP_SIZE, <br/>                                    n_mels=N_MELS, <br/>                                    htk=True, <br/>                                    fmin=FMIN, <br/>                                    fmax=sample_rate/2)</span><span id="6860" class="lh jr hh ml b fi mt mq l mr ms">plt.figure(figsize=(10, 4))<br/>    librosa.display.specshow(librosa.power_to_db(S**2,ref=np.max), fmin=FMIN,y_axis='linear')<br/>    plt.axis('off')<br/>    plt.savefig(target_path + augmentation + audio_name[:-4] + '.png',bbox_inches='tight',transparent=True, pad_inches=0)<br/>    plt.clf()<br/>    plt.close("all")<br/>    gc.collect()</span></pre><p id="73d7" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><em class="ly">生成音频信号和增强音频信号的mel频谱图。</em></p><pre class="mg mh mi mj fd mk ml mm mn aw mo bi"><span id="94fe" class="lh jr hh ml b fi mp mq l mr ms"># Parameters initialization<br/>N_FFT = 1024         <br/>HOP_SIZE = 1024       <br/>N_MELS = 128            <br/>WIN_SIZE = 1024      <br/>WINDOW_TYPE = 'hann' <br/>FEATURE = 'mel'      <br/>FMIN = 1400</span><span id="540e" class="lh jr hh ml b fi mt mq l mr ms">folder_path = 'D:/C Drive Documents/Bird_Sound_Recognition/Data for each bird/data/xeno-canto-dataset/White-throatedKingfisher/'</span><span id="ddb9" class="lh jr hh ml b fi mt mq l mr ms">for wav in os.listdir(folder_path):<br/>    signal, sample_rate = librosa.load(folder_path + str(wav) ,sr = None)</span><span id="4319" class="lh jr hh ml b fi mt mq l mr ms">mel_spectogram_generator(wav,signal,sample_rate,'',folder_path)<br/>    print(wav)<br/>    mel_spectogram_generator(wav,naa.LoudnessAug().augment(signal),sample_rate,'Loud',folder_path)<br/>    print('Loud' + wav)<br/>    mel_spectogram_generator(wav,naa.NoiseAug().augment(signal),sample_rate,'Noise',folder_path)<br/>    print('Noise' + wav)<br/>    mel_spectogram_generator(wav,naa.ShiftAug(sampling_rate=sample_rate).augment(signal),sample_rate,'Shift',folder_path)<br/>    print('Shift' + wav)</span></pre><p id="dd6d" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><em class="ly">让我们看看如何可视化单个音频信号的梅尔频谱图</em></p><pre class="mg mh mi mj fd mk ml mm mn aw mo bi"><span id="5759" class="lh jr hh ml b fi mp mq l mr ms"># Plot mel-spectrogram<br/>N_FFT = 1024         <br/>HOP_SIZE = 1024       <br/>N_MELS = 128            <br/>WIN_SIZE = 1024      <br/>WINDOW_TYPE = 'hann' <br/>FEATURE = 'mel'      <br/>FMIN = 0</span><span id="bee6" class="lh jr hh ml b fi mt mq l mr ms">S = librosa.feature.melspectrogram(y=signal,sr=sample_rate,<br/>                                    n_fft=N_FFT,<br/>                                    hop_length=HOP_SIZE, <br/>                                    n_mels=N_MELS, <br/>                                    htk=True, <br/>                                    fmin=FMIN, <br/>                                    fmax=sample_rate/2)</span><span id="151b" class="lh jr hh ml b fi mt mq l mr ms">plt.figure(figsize=(10, 4))<br/>librosa.display.specshow(librosa.power_to_db(S**2,ref=np.max), fmin=FMIN,y_axis='linear')<br/>plt.colorbar(format='%+2.0f dB')<br/>plt.title('Mel-scaled spectrogram')<br/>plt.show()</span></pre><figure class="mg mh mi mj fd ii er es paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="er es ni"><img src="../Images/03d01e6c8078f8eb238d9aa2aba26fa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/1*UBZ9AxWlrfDYhwlt0LubvQ.png"/></div></div><figcaption class="mv mw et er es mx my bd b be z dx">Image by Author</figcaption></figure><blockquote class="lv lw lx"><p id="0b4c" class="il im ly in b io ip iq ir is it iu iv lz ix iy iz ma jb jc jd mb jf jg jh ji ha bi translated">在用于音频识别的卷积神经网络中，频谱图通常不用作输入图像。相反，我们使用mel光谱图，因为据说它在人类可以感知的频率范围内。</p></blockquote><h2 id="945e" class="lh jr hh bd js li lj lk jw ll lm ln ka iw lo lp ke ja lq lr ki je ls lt km lu bi translated">梅尔频率倒谱系数(MFCC)</h2><blockquote class="lv lw lx"><p id="abae" class="il im ly in b io ip iq ir is it iu iv lz ix iy iz ma jb jc jd mb jf jg jh ji ha bi translated">MFCC作为一种音乐信息检索方法。信号的mel频率倒谱系数(MFCCs)是一小组特征(通常约10–20)，它们简明地描述了频谱包络的整体形状。在MIR中，常用来形容音色。——<a class="ae ng" href="https://musicinformationretrieval.com/mfcc.html" rel="noopener ugc nofollow" target="_blank">https://musicinformationretrieval.com/mfcc.html</a></p></blockquote><pre class="mg mh mi mj fd mk ml mm mn aw mo bi"><span id="af1f" class="lh jr hh ml b fi mp mq l mr ms">def mfcc_features(signal,sample_rate):<br/>    return np.mean(librosa.feature.mfcc(y=signal, sr=sample_rate, n_mfcc=20).T,axis=0).tolist()</span><span id="6aa3" class="lh jr hh ml b fi mt mq l mr ms">mfcc_features(signal,sample_rate)</span></pre><figure class="mg mh mi mj fd ii er es paragraph-image"><div class="er es nj"><img src="../Images/92da739b4d64cf53d80069e213a59e5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/format:webp/1*uyh-3mVf55grjrh1RfZSBg.png"/></div><figcaption class="mv mw et er es mx my bd b be z dx">MFCC Features — Image by Author</figcaption></figure><p id="737e" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">我们得到一组20个特征，它们封装了音频信号中的所有信息。太棒了。将这些输入特征(以及标签)输入任何专注于分类的机器学习模型，包括你自己的人工神经网络(如果你有足够的音频剪辑来利用这一点的话！).</p></div><div class="ab cl jj jk go jl" role="separator"><span class="jm bw bk jn jo jp"/><span class="jm bw bk jn jo jp"/><span class="jm bw bk jn jo"/></div><div class="ha hb hc hd he"><blockquote class="lv lw lx"><p id="2a33" class="il im ly in b io ip iq ir is it iu iv lz ix iy iz ma jb jc jd mb jf jg jh ji ha bi translated">免责声明:我没有音频信号处理方面的专业知识。</p></blockquote><p id="8f05" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">说到这里，我试图从我如何着手开发自己的音频识别项目(<a class="ae ng" href="https://github.com/msvrk/Bird_Sound_Recognition" rel="noopener ugc nofollow" target="_blank">https://github.com/msvrk/Bird_Sound_Recognition</a>)来解释所有的基本概念和方法。我唯一的目的是通过提供一个简单的指南来帮助任何不熟悉音频数据的人。</p><p id="dee9" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><em class="ly">最后，永远记住</em> …</p><figure class="mg mh mi mj fd ii er es paragraph-image"><div class="er es nk"><img src="../Images/a2935cc08956a75fa219478017f7b8d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*2zXxVMbTo-sUZpGWU-DKeg.jpeg"/></div><figcaption class="mv mw et er es mx my bd b be z dx">Image from <a class="ae ng" href="https://www.pinterest.com/pin/616500636467787144/" rel="noopener ugc nofollow" target="_blank">Pinterest</a></figcaption></figure></div></div>    
</body>
</html>