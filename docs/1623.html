<html>
<head>
<title>Writing better Machine Learning evaluation protocols (Regression)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编写更好的机器学习评估协议(回归)</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/writing-better-machine-learning-evaluation-protocols-regression-4efa804f3587?source=collection_archive---------2-----------------------#2022-01-13">https://medium.com/mlearning-ai/writing-better-machine-learning-evaluation-protocols-regression-4efa804f3587?source=collection_archive---------2-----------------------#2022-01-13</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="e7dc" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">用这个真正使你的ML管道变得清晰</h2></div><p id="23e2" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">当你训练机器学习模型时，你可以在模型中采取的最重要的步骤之一是决定正确的评估协议。您选择评估模型性能的方式会改变您的学习算法的结果。谈到回归，大多数人倾向于坚持MSE或r MSE。这些都是伟大的算法，但它们并非没有缺陷。还有流行的R度量，它在允许我们比较模型方面做得很好(并且调整了R，它修改了brother)。但这还不是全部。有时在机器学习中，你可能最终会编写自己的回归指标。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div class="er es js"><img src="../Images/4cd332d25fab157f07e10cfd0e3b34b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/format:webp/1*ggGHlP4UVQBpWV6FjiUulw.png"/></div><figcaption class="ka kb et er es kc kd bd b be z dx">An example of all the different error metrics available to us w/ just sklearn</figcaption></figure><p id="8959" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">其中许多彼此非常相似。然而，像泊松偏差这样的指标是他们自己的事。将它们进行比较可能会给你提供一些非常有趣的见解。我处理过这样的运行，其中一个模型具有更好的R /MSE，但是泊松误差更差。只犯错误不会告诉你全部情况。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es ke"><img src="../Images/89990105e015c689ff4b9aa7a19b0eec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RJAnDiq3JnGh69aEcVL4Cg.png"/></div></div><figcaption class="ka kb et er es kc kd bd b be z dx">By the end of this article, you will be able to generate similar-looking reports for your comparison.</figcaption></figure><p id="fa9c" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这两个表都是使用相同的数据集生成的。唯一的区别是模型本身。看到结果，你会选择哪个？想一想，并在下面的评论中分享。</p><p id="e9c5" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在你已经看到了标准MSE/RMSE/R之外的世界，请继续阅读。在本文中，我将分享如何生成这样的报告的代码。您可以复制粘贴我分享的代码，但是我建议您也考虑一下何时应该使用哪种度量标准，以及如何在我这里分享的基础上进行改进。</p><h1 id="69c8" class="kj kk hh bd kl km kn ko kp kq kr ks kt in ku io kv iq kw ir kx it ky iu kz la bi translated">设置基础</h1><p id="b408" class="pw-post-body-paragraph iw ix hh iy b iz lb ii jb jc lc il je jf ld jh ji jj le jl jm jn lf jp jq jr ha bi translated">显然，您希望从设置基础开始。为此，我们采取了以下措施:</p><pre class="jt ju jv jw fd lg lh li lj aw lk bi"><span id="e2b1" class="ll kk hh lh b fi lm ln l lo lp">names=["RFR","Lasso","ElasticNet","KNR"]</span><span id="e594" class="ll kk hh lh b fi lq ln l lo lp">models=[RandomForestRegressor(),Lasso(),ElasticNet(),neighbors.KNeighborsRegressor()]</span><span id="71d9" class="ll kk hh lh b fi lq ln l lo lp">bestScore=100000</span><span id="7570" class="ll kk hh lh b fi lq ln l lo lp">scoring = ['neg_mean_squared_error','explained_variance','max_error','neg_mean_absolute_error',</span><span id="74cd" class="ll kk hh lh b fi lq ln l lo lp">'neg_root_mean_squared_error',</span><span id="49c5" class="ll kk hh lh b fi lq ln l lo lp">'neg_mean_squared_log_error',</span><span id="3f70" class="ll kk hh lh b fi lq ln l lo lp">'neg_median_absolute_error',</span><span id="7eda" class="ll kk hh lh b fi lq ln l lo lp">'r2',</span><span id="9161" class="ll kk hh lh b fi lq ln l lo lp">'neg_mean_poisson_deviance',</span><span id="3b05" class="ll kk hh lh b fi lq ln l lo lp">'neg_mean_gamma_deviance']</span></pre><p id="f87b" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">注意，我们没有对值进行硬编码，而是将它们保存在变量中。这解决了几个目的。一个是这使得以后修改代码更加容易。想要添加新型号/删除弱型号？只需调整型号和名称列表。想要添加您自己的时髦指标/来自其他来源的指标吗？改变你的得分列表。其次，它使你的代码更短。我可以将它们作为一个列表来引用，而不是打出20个模型。由于您必须重复使用您的分析，这种便利性真的增加了。</p><h1 id="af72" class="kj kk hh bd kl km kn ko kp kq kr ks kt in ku io kv iq kw ir kx it ky iu kz la bi translated">写出你的误差函数</h1><p id="769a" class="pw-post-body-paragraph iw ix hh iy b iz lb ii jb jc lc il je jf ld jh ji jj le jl jm jn lf jp jq jr ha bi translated">现在我们已经设置了组件，是时候编写误差计算函数了。</p><pre class="jt ju jv jw fd lg lh li lj aw lk bi"><span id="5c59" class="ll kk hh lh b fi lm ln l lo lp">def error_metrics(i, train_data, train_targ, kfold):<br/>    """<br/>    Compute all the relevant metrics. <br/>    <a class="ae lr" href="http://twitter.com/params" rel="noopener ugc nofollow" target="_blank">@params</a><br/>    <a class="ae lr" href="http://twitter.com/i" rel="noopener ugc nofollow" target="_blank">@i</a>-model number<br/>    <a class="ae lr" href="http://twitter.com/train_data" rel="noopener ugc nofollow" target="_blank">@train_data</a>: X values (predictors)<br/>    <a class="ae lr" href="http://twitter.com/train_targ" rel="noopener ugc nofollow" target="_blank">@train_targ</a>: predictions (y vals)<br/>    <a class="ae lr" href="http://twitter.com/kfold" rel="noopener ugc nofollow" target="_blank">@kfold</a>: k value for cross val</span><span id="1aed" class="ll kk hh lh b fi lq ln l lo lp">"""<br/>    <br/>    model=[models[i]]<br/>    error_metrics = pd.DataFrame()<br/>    # define the function used to evaluate a given configuration<br/>    for scor in scoring:<br/>        score = []<br/>        for mod in model:<br/>            result=""<br/>            try: <br/>              result = model_selection.cross_val_score(estimator= mod, X=train_data, y=train_targ,cv=kfold,scoring=scor )<br/>              score.append(result.mean())<br/>            except Exception:<br/>              score.append("Error not Applicable")</span><span id="5b9e" class="ll kk hh lh b fi lq ln l lo lp">error_metrics[scor] =pd.Series(score)<br/>        <br/>    return error_metrics</span></pre><p id="de46" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">大部分都相对简单。但是现在我们还不支持自定义错误度量。我们如何做到这一点？看看“尝试-例外”部分。当我们尝试交叉验证部分时，我们的自定义/非scikit错误将导致异常。我们可以再加一张支票。如果scor是我们的特殊指标之一，我们将添加一个意外情况来运行计算。如果你想要最好的实现方式，请联系我。但是我建议你先自己动手。这是很好的练习。你可以随时向我寻求评论、指点和讨论。快乐编码。</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es ls"><img src="../Images/425de30ec96f41c4808f2a39d14470dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mlu4bpFwnJhMs5Y4mjP1PA.png"/></div></div><figcaption class="ka kb et er es kc kd bd b be z dx">Writing such functions/ideas in my pipelines are a huge part of my work</figcaption></figure><p id="a993" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如果你喜欢这篇文章，看看我的其他内容。我定期在Medium、YouTube、Twitter和Substack上发帖(所有链接都在下面)。我专注于人工智能、机器学习、技术和软件开发。如果你正在准备编码面试，看看:<a class="ae lr" href="https://codinginterviewsmadesimple.substack.com/" rel="noopener ugc nofollow" target="_blank">编码面试变得简单</a>，我的免费每周时事通讯。如果你也有任何有趣的项目/想法，请随时联系我。</p><p id="0c42" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">以下是我的Venmo和Paypal对我工作的金钱支持。任何数额都值得赞赏，并有很大帮助。捐赠解锁独家内容，如论文分析、特殊代码、咨询和模拟面试的折扣率:</p><p id="d7ca" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">https://account.venmo.com/u/FNU-Devansh<a class="ae lr" href="https://account.venmo.com/u/FNU-Devansh" rel="noopener ugc nofollow" target="_blank"/></p><p id="f0aa" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">贝宝:【paypal.me/ISeeThings T4】</p><h1 id="e87f" class="kj kk hh bd kl km kn ko kp kq kr ks kt in ku io kv iq kw ir kx it ky iu kz la bi translated">向我伸出手</h1><p id="f665" class="pw-post-body-paragraph iw ix hh iy b iz lb ii jb jc lc il je jf ld jh ji jj le jl jm jn lf jp jq jr ha bi translated">如果那篇文章让你对联系我感兴趣，那么这一部分就是为你准备的。你可以在任何平台上联系我，或者查看我的其他内容。如果你想讨论家教，发短信给我。如果你想支持我的工作，请使用我的免费Robinhood推荐链接。我们都有免费的股票，对你没有风险。因此，不使用它只是失去免费的钱。</p><p id="9910" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">查看我在Medium上的其他文章。:<a class="ae lr" href="https://rb.gy/oaojch" rel="noopener ugc nofollow" target="_blank">https://rb.gy/zn1aiu</a></p><p id="4de6" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我的YouTube:<a class="ae lr" href="https://rb.gy/88iwdd" rel="noopener ugc nofollow" target="_blank">https://rb.gy/88iwdd</a></p><p id="339d" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在LinkedIn上联系我。我们来连线:<a class="ae lr" href="https://rb.gy/f7ltuj" rel="noopener ugc nofollow" target="_blank">https://rb.gy/m5ok2y</a></p><p id="2fe9" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我的insta gram:<a class="ae lr" href="https://rb.gy/gmvuy9" rel="noopener ugc nofollow" target="_blank">https://rb.gy/gmvuy9</a></p><p id="c182" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我的推特:<a class="ae lr" href="https://twitter.com/Machine01776819" rel="noopener ugc nofollow" target="_blank">https://twitter.com/Machine01776819</a></p><p id="d599" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如果你正在准备编码/技术面试:<a class="ae lr" href="https://codinginterviewsmadesimple.substack.com/" rel="noopener ugc nofollow" target="_blank">https://codinginterviewsmadesimple.substack.com/</a></p><p id="4b48" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">获得罗宾汉的免费股票:<a class="ae lr" href="https://www.youtube.com/redirect?redir_token=QUFFLUhqa0xDdC1jTW9nSU91WXlCSFhEVkJ0emJvN1FaUXxBQ3Jtc0ttWkRObUdfem1DZzIyZElfcXVZNGlVNE1xSUc4aVhSVkxBVGtHMWpmei1lWWVKNzlDUXVJR24ydHBtWG1PSXNaMlBMWDQycnlIVXNMYjJZWjdXcHNZQWNnaFBnQUhCV2dNVERQajFLTTVNMV9NVnA3UQ%3D%3D&amp;q=https%3A%2F%2Fjoin.robinhood.com%2Ffnud75&amp;v=WAYRtSj0ces&amp;event=video_description" rel="noopener ugc nofollow" target="_blank">https://join.robinhood.com/fnud75</a></p><div class="lt lu ez fb lv lw"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="lx ab dw"><div class="ly ab lz cl cj ma"><h2 class="bd hi fi z dy mb ea eb mc ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="md l"><h3 class="bd b fi z dy mb ea eb mc ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="me l"><p class="bd b fp z dy mb ea eb mc ed ef dx translated">medium.com</p></div></div><div class="mf l"><div class="mg l mh mi mj mf mk jy lw"/></div></div></a></div></div></div>    
</body>
</html>