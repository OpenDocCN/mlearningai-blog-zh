<html>
<head>
<title>Build a Smart Image Captioning Web App with just 100 lines of code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">仅用100行代码构建一个智能图像字幕Web应用程序</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/build-a-smart-image-captioning-web-app-with-just-100-lines-of-code-565a4fba9cc8?source=collection_archive---------3-----------------------#2022-11-20">https://medium.com/mlearning-ai/build-a-smart-image-captioning-web-app-with-just-100-lines-of-code-565a4fba9cc8?source=collection_archive---------3-----------------------#2022-11-20</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex ie if ig ih"><div class="bz dy l di"><div class="ii ij l"/></div></figure><p id="4c65" class="pw-post-body-paragraph ik il hh im b in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ha bi translated">图像字幕是自动生成图像文本描述的过程。这项任务很困难，因为它需要理解图像的内容，而这些内容通常是复杂和抽象的。图像字幕是机器学习的一个流行应用，并且已经被用于改善网站和应用的用户体验。在本文中，我们将讨论如何在TrueFoundry上部署图像字幕模型。</p><p id="67d7" class="pw-post-body-paragraph ik il hh im b in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ha bi translated">TrueFoundry是部署机器学习模型的一个很好的平台。该平台不仅管理部署下的基础设施和技术，还提供了易于使用的API和各种可用于部署模型的web应用程序。这使得它成为希望快速高效地部署其模型的数据科学家和机器学习工程师的绝佳选择。</p><p id="1d1a" class="pw-post-body-paragraph ik il hh im b in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ha bi translated">在本文中，我们将使用来自<a class="ae ji" href="https://huggingface.co/nlpconnect/vit-gpt2-image-captioning" rel="noopener ugc nofollow" target="_blank"> Huggingface </a>的vit-gp T2-图像字幕模型来预测图像的字幕。这个模型是一个最先进的机器学习模型，已经在一个大型图像和字幕数据集上进行了训练。该模型可用于为作为输入提供的图像生成标题。然后，生成的标题作为输出返回。该模型是图像字幕的最佳选择，因为它准确而高效。</p><p id="8f21" class="pw-post-body-paragraph ik il hh im b in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ha bi translated">让我们从代码开始吧！</p><p id="9a8b" class="pw-post-body-paragraph ik il hh im b in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ha bi translated">我们将首先创建3个文件夹、一些python文件和一个requirements.txt文件:</p><ol class=""><li id="c14b" class="jj jk hh im b in io ir is iv jl iz jm jd jn jh jo jp jq jr bi translated"><em class="js">演示</em>:这将存储和部署我们的streamlit应用程序。我们将在这个目录中创建<em class="js"> demo.py、demo _ deploy . py&amp;demo . YAML</em>文件。</li><li id="76d4" class="jj jk hh im b in jt ir ju iv jv iz jw jd jx jh jo jp jq jr bi translated"><em class="js">预测</em>:这将存储和部署我们的FastAPI端点。我们将在这个目录中创建<em class="js"> main.py、deploy.py、predict . py&amp;predict . YAML</em>文件。</li><li id="5b69" class="jj jk hh im b in jt ir ju iv jv iz jw jd jx jh jo jp jq jr bi translated"><em class="js"> sample_images </em>:我们将存储一些样本图像，为我们的web应用程序添加标题。</li></ol><figure class="jy jz ka kb fd ih"><div class="bz dy l di"><div class="kc ij l"/></div></figure><p id="e96e" class="pw-post-body-paragraph ik il hh im b in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ha bi translated">通过运行以下pip命令安装所有库:</p><p id="c944" class="pw-post-body-paragraph ik il hh im b in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ha bi translated"><code class="du kd ke kf kg b">pip install -r requirements.txt</code></p><p id="5a0a" class="pw-post-body-paragraph ik il hh im b in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ha bi translated">最终的目录应该如下所示:</p><figure class="jy jz ka kb fd ih er es paragraph-image"><div class="er es kh"><img src="../Images/03db9940fd50aaa5ab5daea9bf156db5.png" data-original-src="https://miro.medium.com/v2/resize:fit:570/format:webp/1*e0mbQAhAvAVeVRxDhyG2eg.png"/></div><figcaption class="kk kl et er es km kn bd b be z dx">Image Captioning Directory</figcaption></figure><p id="57c1" class="pw-post-body-paragraph ik il hh im b in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ha bi translated">让我们添加python文件的代码:</p><figure class="jy jz ka kb fd ih"><div class="bz dy l di"><div class="kc ij l"/></div></figure><figure class="jy jz ka kb fd ih"><div class="bz dy l di"><div class="kc ij l"/></div></figure><figure class="jy jz ka kb fd ih"><div class="bz dy l di"><div class="kc ij l"/></div></figure><figure class="jy jz ka kb fd ih"><div class="bz dy l di"><div class="kc ij l"/></div></figure><figure class="jy jz ka kb fd ih"><div class="bz dy l di"><div class="kc ij l"/></div></figure><figure class="jy jz ka kb fd ih"><div class="bz dy l di"><div class="kc ij l"/></div></figure><figure class="jy jz ka kb fd ih"><div class="bz dy l di"><div class="kc ij l"/></div></figure><p id="398a" class="pw-post-body-paragraph ik il hh im b in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ha bi translated">一旦python文件准备就绪，我们可以首先通过运行以下命令来部署FastAPI端点:</p><p id="b95a" class="pw-post-body-paragraph ik il hh im b in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ha bi translated"><code class="du kd ke kf kg b">python predict/deploy.py</code></p><p id="dfe1" class="pw-post-body-paragraph ik il hh im b in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ha bi translated">这将部署服务TrueFoundry，我们可以在TrueFoundry的<a class="ae ji" href="https://app.truefoundry.com/deployments" rel="noopener ugc nofollow" target="_blank">仪表板</a>中进行检查。</p><figure class="jy jz ka kb fd ih er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es ko"><img src="../Images/0eca66b2f323a89898d7b7276627ddc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oQ4w9uKgDs9OQCtnQoXZtQ.png"/></div></div></figure><p id="b035" class="pw-post-body-paragraph ik il hh im b in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ha bi translated">点击你的项目，你会看到类似这样的东西。</p><figure class="jy jz ka kb fd ih er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es kt"><img src="../Images/bbe76dec1156bb0edb018b90c38347ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GHC8j_ojKlPTVFBV52jalQ.png"/></div></div></figure><p id="a298" class="pw-post-body-paragraph ik il hh im b in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ha bi translated">点击端点URL，在我的例子中是这个<a class="ae ji" href="https://image-caption-demo-demo-projects.tfy-ctl-euwe1-production.production.truefoundry.com/" rel="noopener ugc nofollow" target="_blank"> Streamlit网站</a>。</p><p id="6389" class="pw-post-body-paragraph ik il hh im b in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ha bi translated">哒哒！您的图像字幕Web应用程序现已上线！Streamlit使您的web应用程序响应迅速，因此您可以从任何想要的设备访问它。</p><p id="425d" class="pw-post-body-paragraph ik il hh im b in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ha bi translated">现在，让我们在web应用程序中测试图像标题本身。我会从我的电脑上传一张狗的照片。</p><figure class="jy jz ka kb fd ih er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es ku"><img src="../Images/5bf2abffeba8ea1541dd10365f5e7f28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Kn9gR6PKgtDZRyU7TAmuQ.jpeg"/></div></div><figcaption class="kk kl et er es km kn bd b be z dx">Test Image uploaded</figcaption></figure><figure class="jy jz ka kb fd ih er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es kv"><img src="../Images/07caef690007ef8b09549726ef6f6e3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s5GRsSbsUbReTVFVOcXptQ.png"/></div></div><figcaption class="kk kl et er es km kn bd b be z dx">Captioned Image</figcaption></figure><p id="0129" class="pw-post-body-paragraph ik il hh im b in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ha bi translated">如你所见，预测的字幕似乎非常准确。我们可以尝试上传多张图片或者尝试图片网址。请试用我的web应用程序，如果您有任何问题/建议，请告诉我！</p><p id="1818" class="pw-post-body-paragraph ik il hh im b in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ha bi translated">参考资料:</p><ol class=""><li id="67ce" class="jj jk hh im b in io ir is iv jl iz jm jd jn jh jo jp jq jr bi translated"><a class="ae ji" rel="noopener" href="/mlearning-ai/tracking-ml-models-with-mlfoundry-5de8520752e6">使用MLFoundry跟踪ML模型</a></li><li id="206b" class="jj jk hh im b in jt ir ju iv jv iz jw jd jx jh jo jp jq jr bi translated"><a class="ae ji" rel="noopener" href="/mlearning-ai/use-servicefoundry-to-deploy-machine-learning-models-like-a-ninja-a912ca550333">使用ServiceFoundry部署ML模型</a></li><li id="283e" class="jj jk hh im b in jt ir ju iv jv iz jw jd jx jh jo jp jq jr bi translated"><a class="ae ji" href="https://github.com/vishank97/image-captioning" rel="noopener ugc nofollow" target="_blank"> GitHub </a> repo包含使用FastAPI服务部署模型的源代码，简化web应用程序和培训工作，如果你想快速入门的话。</li><li id="799d" class="jj jk hh im b in jt ir ju iv jv iz jw jd jx jh jo jp jq jr bi translated"><a class="ae ji" href="https://docs.truefoundry.com/documentation/" rel="noopener ugc nofollow" target="_blank"> TrueFoundry文档</a></li></ol><div class="kw kx ez fb ky kz"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="la ab dw"><div class="lb ab lc cl cj ld"><h2 class="bd hi fi z dy le ea eb lf ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="lg l"><h3 class="bd b fi z dy le ea eb lf ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="lh l"><p class="bd b fp z dy le ea eb lf ed ef dx translated">medium.com</p></div></div><div class="li l"><div class="lj l lk ll lm li ln ki kz"/></div></div></a></div></div></div>    
</body>
</html>