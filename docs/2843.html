<html>
<head>
<title>RegEx in PowerBI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">PowerBI中的RegEx</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/regex-in-powerbi-e5b77ed8b976?source=collection_archive---------0-----------------------#2022-06-17">https://medium.com/mlearning-ai/regex-in-powerbi-e5b77ed8b976?source=collection_archive---------0-----------------------#2022-06-17</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/25cd9f23bba92f8b19d6df69482b574f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T9lZJANXbPt3UDRvwMCLTw.png"/></div></div></figure><p id="5f14" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi jn translated"><span class="l jo jp jq bm jr js jt ju jv di"> R </span> egEx或正则表达式是文本分析的重要工具之一。然而，在Power BI中，使用现有的Power BI工具实现RegEx并不容易。</p><p id="1dc1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在本文中，我将描述一种借助Python在Power BI中实现RegEx的方法！</p><h1 id="c338" class="jw jx hh bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">什么是RegEx？</h1><p id="3f3e" class="pw-post-body-paragraph ip iq hh ir b is ku iu iv iw kv iy iz ja kw jc jd je kx jg jh ji ky jk jl jm ha bi translated">正则表达式是用于匹配文本中指定模式以提取子字符串的特殊字符。</p><p id="75e5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在数据分析中，RegEx通常用于从长文本中找到一些关键词，或者检查文本是否与所需的模式匹配。</p><h1 id="518f" class="jw jx hh bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">要求</h1><p id="2e2c" class="pw-post-body-paragraph ip iq hh ir b is ku iu iv iw kv iy iz ja kw jc jd je kx jg jh ji ky jk jl jm ha bi translated">在我们开始之前，确保您已经在Power BI中安装了Python和设置。</p><p id="14e2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您可以在以下链接中了解如何操作。</p><div class="kz la ez fb lb lc"><a rel="noopener follow" target="_blank" href="/mlearning-ai/python-in-power-bi-66a80590ecc0"><div class="ld ab dw"><div class="le ab lf cl cj lg"><h2 class="bd hi fi z dy lh ea eb li ed ef hg bi translated">权力商业智能中的蟒蛇</h2><div class="lj l"><h3 class="bd b fi z dy lh ea eb li ed ef dx translated">通过集成Python，增强Power BI仪表板的功能。逐步使用Python来获取、转换和…</h3></div><div class="lk l"><p class="bd b fp z dy lh ea eb li ed ef dx translated">medium.com</p></div></div><div class="ll l"><div class="lm l ln lo lp ll lq in lc"/></div></div></a></div></div><div class="ab cl lr ls go lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ha hb hc hd he"><h1 id="3ed2" class="jw jx hh bd jy jz ly kb kc kd lz kf kg kh ma kj kk kl mb kn ko kp mc kr ks kt bi translated">步骤总结</h1><ol class=""><li id="4024" class="md me hh ir b is ku iw kv ja mf je mg ji mh jm mi mj mk ml bi translated">检索数据</li><li id="4100" class="md me hh ir b is mm iw mn ja mo je mp ji mq jm mi mj mk ml bi translated">转换数据</li><li id="fef1" class="md me hh ir b is mm iw mn ja mo je mp ji mq jm mi mj mk ml bi translated">使用正则表达式运行Python脚本</li></ol><blockquote class="mr ms mt"><p id="8687" class="ip iq mu ir b is it iu iv iw ix iy iz mv jb jc jd mw jf jg jh mx jj jk jl jm ha bi translated">在<!-- -->这个例子中，我想计算推特文本中的标签数量(#)。</p></blockquote><h1 id="b3bc" class="jw jx hh bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">第1步:获取数据</h1><p id="a556" class="pw-post-body-paragraph ip iq hh ir b is ku iu iv iw kv iy iz ja kw jc jd je kx jg jh ji ky jk jl jm ha bi translated">本文中使用的数据来自</p><div class="kz la ez fb lb lc"><a href="https://www.kaggle.com/datasets/datatattle/covid-19-nlp-text-classification/download" rel="noopener  ugc nofollow" target="_blank"><div class="ld ab dw"><div class="le ab lf cl cj lg"><h2 class="bd hi fi z dy lh ea eb li ed ef hg bi translated">卡格尔:您的数据科学之家</h2><div class="lj l"><h3 class="bd b fi z dy lh ea eb li ed ef dx translated">Kaggle是世界上最大的数据科学社区，拥有强大的工具和资源来帮助您实现数据…</h3></div><div class="lk l"><p class="bd b fp z dy lh ea eb li ed ef dx translated">www.kaggle.com</p></div></div></div></a></div><p id="d5cd" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这些数据是在疫情期间从推特上收集的，将情绪分为非常积极、积极、中立、消极和非常消极。</p><p id="7004" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">此数据集包含41157行和5列。</p><figure class="my mz na nb fd ii er es paragraph-image"><div class="ab fe cl nc"><img src="../Images/6f70517360d2179acf55b9a335d1cb70.png" data-original-src="https://miro.medium.com/v2/format:webp/1*7sxeSn8QVQEHim0dmifedQ.png"/></div><figcaption class="nd ne et er es nf ng bd b be z dx">Data sample</figcaption></figure><ul class=""><li id="6c8a" class="md me hh ir b is it iw ix ja nh je ni ji nj jm nk mj mk ml bi translated">下载数据集并解压缩文件，你会发现2。csv文件。</li><li id="6976" class="md me hh ir b is mm iw mn ja mo je mp ji mq jm nk mj mk ml bi translated">打开Power BI，然后单击获取数据</li></ul><figure class="my mz na nb fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es nl"><img src="../Images/9bc20cbc663059de04f2ced172159b78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c1HhscqUvsQCA-MV64oPVA.png"/></div></div></figure><ul class=""><li id="d558" class="md me hh ir b is it iw ix ja nh je ni ji nj jm nk mj mk ml bi translated">从文本/CSV文件中获取数据</li></ul><figure class="my mz na nb fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es nm"><img src="../Images/4714756e9095a5f25efac386f5c99bc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5TgQRfdNqNZ8UwXUVogJbw.png"/></div></div></figure><ul class=""><li id="1377" class="md me hh ir b is it iw ix ja nh je ni ji nj jm nk mj mk ml bi translated">选择下载的文件并加载</li></ul><h1 id="459e" class="jw jx hh bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">第2步:转换数据</h1><p id="09c8" class="pw-post-body-paragraph ip iq hh ir b is ku iu iv iw kv iy iz ja kw jc jd je kx jg jh ji ky jk jl jm ha bi translated">我将添加一个新的Hashtag列，即在Twitter文本中找到的Hashtag数。</p><p id="7a01" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">1.单击转换数据</p><figure class="my mz na nb fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es nn"><img src="../Images/cd4e48b164dedba0f70ff5059a2fc973.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ry7TKbRqy-tJgp3nQbwpLQ.png"/></div></div></figure><p id="4b93" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">2.选择查询“Corona_NLP_train”</p><figure class="my mz na nb fd ii er es paragraph-image"><div class="er es no"><img src="../Images/cae5706e7f38e3792c20dbc1a31a5b9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:918/format:webp/1*SnEeLWC8XtY4zW1-EAdzzg.png"/></div></figure><p id="fda4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，您已经准备好添加新列了。</p><h1 id="3ac6" class="jw jx hh bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">第3步:用正则表达式运行Python脚本3</h1><p id="9121" class="pw-post-body-paragraph ip iq hh ir b is ku iu iv iw kv iy iz ja kw jc jd je kx jg jh ji ky jk jl jm ha bi translated">在这一步，我将运行一个执行正则表达式的Python脚本。</p><ol class=""><li id="e6c5" class="md me hh ir b is it iw ix ja nh je ni ji nj jm mi mj mk ml bi translated">在“转换”选项卡下，单击“运行Python脚本”。</li></ol><figure class="my mz na nb fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es np"><img src="../Images/ee63bc9d0fd400372fd89bef059ece47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QjUQNCtrx65gpCVe55pcJA.png"/></div></div></figure><p id="ea3f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">2.您将看到一个新的运行Python脚本窗口。在此处编写代码，然后单击“确定”。</p><pre class="my mz na nb fd nq nr ns nt aw nu bi"><span id="0f8b" class="nv jx hh nr b fi nw nx l ny nz">dataset['Hashtag'] = dataset['OriginalTweet'].str.count(r'(?&lt;=#)\w+')</span></pre><figure class="my mz na nb fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es oa"><img src="../Images/639e230434d16b10c0e23f8a8b0925e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*591ZWYSMscANv6-eJ0jd1g.png"/></div></div></figure><p id="9fd9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">代码说明</strong></p><ul class=""><li id="2bb8" class="md me hh ir b is it iw ix ja nh je ni ji nj jm nk mj mk ml bi translated">数据将是一个“数据集”数据框架，所以你可以用熊猫函数来操作它。</li><li id="4fbe" class="md me hh ir b is mm iw mn ja mo je mp ji mq jm nk mj mk ml bi translated">创建一个新的数据框架列，Hashtag。该列的值来自RegEx结果。</li><li id="32be" class="md me hh ir b is mm iw mn ja mo je mp ji mq jm nk mj mk ml bi translated">计算推特文本中符合<strong class="ir hi">的字符串出现次数(？≤#)\w+ </strong>模式。</li></ul><p id="f5bb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">3.运行Python脚本后，结果将是一个表。单击以展开表格。确保未选中“使用原始列名作为前缀”。</p><figure class="my mz na nb fd ii er es paragraph-image"><div class="er es ob"><img src="../Images/28c0e94c9e4f971ed38d8198307b99c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1130/format:webp/1*iPAgRqI4E_lOBV6yz_FAuA.png"/></div></figure><figure class="my mz na nb fd ii er es paragraph-image"><div class="er es oc"><img src="../Images/276ab88da478c50b19e926a0af9ece7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*QJf3ken4CkIw8xJqLe9PRg.png"/></div></figure><p id="2502" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">4.您将看到数据转换的结果，这些步骤以APPLIED STEPS的形式添加。</p><figure class="my mz na nb fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es od"><img src="../Images/9dad1a7020b034be916f052f3552f422.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*is7EfiNVZ3R_00pZ62cftA.png"/></div></div></figure><p id="b51f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">就这样了。！</p><h1 id="b3e4" class="jw jx hh bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">结论</h1><p id="dae0" class="pw-post-body-paragraph ip iq hh ir b is ku iu iv iw kv iy iz ja kw jc jd je kx jg jh ji ky jk jl jm ha bi translated">您可以使用运行Python脚本在Power BI中创建一个包含正则表达式的新列。起初听起来可能很难，但当一切都准备好了，你可以在短时间内完成。使用这个RegEx可以可视化和分析更多维度的文本数据。</p><p id="1d4e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">希望你喜欢阅读这篇文章。如果你想看更多这样的文章，请关注我。</p><div class="kz la ez fb lb lc"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="ld ab dw"><div class="le ab lf cl cj lg"><h2 class="bd hi fi z dy lh ea eb li ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="lj l"><h3 class="bd b fi z dy lh ea eb li ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="lk l"><p class="bd b fp z dy lh ea eb li ed ef dx translated">medium.com</p></div></div><div class="ll l"><div class="oe l ln lo lp ll lq in lc"/></div></div></a></div></div></div>    
</body>
</html>