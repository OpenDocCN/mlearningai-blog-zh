<html>
<head>
<title>Exponentially Weighted Average</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">指数加权平均值</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/exponentially-weighted-average-5eed00181a09?source=collection_archive---------1-----------------------#2022-03-25">https://medium.com/mlearning-ai/exponentially-weighted-average-5eed00181a09?source=collection_archive---------1-----------------------#2022-03-25</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="274a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">指数加权移动平均(EWMA)通常用作时间序列的平滑技术。然而，由于几个计算优势(快速、低内存成本)，EWMA是深度学习中许多优化算法的幕后，包括带动量的梯度下降、RMSprop、Adam等。</p><p id="1444" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了计算EWMA，必须定义一个参数β。此参数决定了当前观测值在EWMA计算中的重要性。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/6b58c792144eae46f3d9d0529b57eb3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0Np_TG6bosfrdloN.png"/></div></div></figure><p id="5a81" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们以2019年法国巴黎的<a class="ae jo" href="https://academic.udayton.edu/kissock/http/Weather/default.htm" rel="noopener ugc nofollow" target="_blank">气温为例(【1】)。</a></p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jp"><img src="../Images/ccb5bc4afe48d05644cf4524f3a50fc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A7o3Qq0MIWfxk41xSkONLA.png"/></div></div></figure><p id="049c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">定义:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es jq"><img src="../Images/46917e8eadbd1761013f868418e27248.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/0*xM3jDg9ZkRtuBVtC.png"/></div></figure><p id="e474" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对于本例，假设β = 0.9，因此EWA旨在将当天的温度与之前的温度相结合。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es jr"><img src="../Images/b76cd92e2028a26cafdd7a55ed8beae1.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*bSzCh5XeCbxZBgBBkdrClg.png"/></div></figure><p id="7ac2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">通常，为了计算给定权重参数β的EWA，我们使用</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es js"><img src="../Images/c4fdbd15f6e9fa18439b81f4d30f2ec1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/format:webp/1*mp7MhtyiDbu7GIg9jOIzSw.png"/></div></figure><p id="34a1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果我们用红色绘制，我们可以看到我们得到的是每日温度的移动平均值，它就像一条平滑的，噪音较小的曲线。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jt"><img src="../Images/cb2f881572c7afe3ad956a3862f494b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J6aHWoHMGCndgn5PqimtWg.png"/></div></div></figure><p id="9ce4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们解释一下这个通用等式:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es ju"><img src="../Images/ab7f9e63f2fb5d920561168b84c9b2a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/format:webp/1*NRqSPCSHtMiAbqEr5n4cPQ.png"/></div></figure><p id="b55b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们可以看到，β的值决定了前一个值(趋势)有多重要，(1-β)决定了当前值有多重要。</p><p id="4b05" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">取β = 0.98的值并用绿色绘制，注意曲线更加平滑<em class="jv"/>，因为现在的趋势更重要(当前温度值不太重要)，所以当温度变化时，它会适应得更慢。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jt"><img src="../Images/d4bf7c51c1cf57ee15f5436d98140bc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZSY0GWAmJ3CeJ11GTotN9Q.png"/></div></div></figure><p id="11af" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们尝试另一个极端，设置β = 0.5，这样你得到的图是<em class="jv">噪音</em>，因为它更容易受当前温度的影响(这包括异常值)。</p><p id="b90e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">但是它能更快地适应温度的变化。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jt"><img src="../Images/5f4fe16021ca414fb0072e4eca78751f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u3MIYRnLguhjvM0tr72wBA.png"/></div></div></figure><p id="7c26" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你想理解参数β的含义，你可以想想它的值</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es jw"><img src="../Images/a34d568c6edc436b1c4652e41fc8c4cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:340/format:webp/0*7PpE2WbTj_U3Gd1a.png"/></div></figure><p id="9c0a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">作为用来适应你的EWA的观察数字。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es jx"><img src="../Images/922c79414087a8eda98012d10f07040e.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/format:webp/1*IwkNmsust3jLC3Aerekznw.png"/></div></figure><p id="1d0d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了更深入地了解这个算法实际上做了什么。</p><p id="4f32" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们用主方程展开第三项(W₃):</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es jy"><img src="../Images/eed40fd55edf08a3284ccb3a8cc83543.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/format:webp/1*pGT4fiWJnsp6IypLnZ0LMA.png"/></div></figure><p id="1276" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">插件W₁在W₂，然后在W₃:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es jz"><img src="../Images/fe810754bec1d79d9fae0c2513b155c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*ikJVQhSjQcn_m5S_UAhzHw.png"/></div></figure><p id="c186" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">简化</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es ka"><img src="../Images/58484c64c5a780d5e80f434adbef631a.png" data-original-src="https://miro.medium.com/v2/resize:fit:748/format:webp/1*sr5YMg5G4NZyjNMDgjyUBw.png"/></div></figure><p id="630b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这里很清楚β = 0.9的滚动参数在EWA是什么，我们可以看到旧的观测值被赋予较低的权重。随着数据点变老，权重呈指数下降，因此得名指数加权。</p><p id="1b95" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一般来说，我们有:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es kb"><img src="../Images/fff30c86b24407171424097b3b6f9759.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*moexmnh0QdzqefO0kT4WRQ.png"/></div></div></figure><p id="b4d3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">或者封闭公式:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es kc"><img src="../Images/eb2de180e953370ed891c33322252797.png" data-original-src="https://miro.medium.com/v2/resize:fit:878/format:webp/1*0upOeNUX0jsLIMkjNgVgpg.png"/></div></figure><p id="158d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你是视觉学习者，这是另一种方法:</p><p id="12b3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用点积(*)重写Wₜ:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es kd"><img src="../Images/0cde2ff0cdcd4432ba57b63fe84063e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*krVR3LBJbwHvxAO0U6Nsog.png"/></div></div></figure><p id="5340" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">进而认为Wₜ是以下两个情节的产物:</p><ul class=""><li id="c75c" class="ke kf hh ig b ih ii il im ip kg it kh ix ki jb kj kk kl km bi translated">指数权重</li><li id="9d06" class="ke kf hh ig b ih kn il ko ip kp it kq ix kr jb kj kk kl km bi translated">温度</li></ul><p id="3df5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在该图中，我们看到当t增加时权重如何衰减:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jt"><img src="../Images/cb7906654e16a40f6cbe1ef949ffd1c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U5UQdlk4F11ERO6AloHpRg.png"/></div></div></figure><p id="1d14" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后画出温度</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jt"><img src="../Images/2adf06969ef67a8f43ad71b5041215d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*alxGubVnxBvr1tVqf1g0bg.png"/></div></div></figure><p id="204b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在为了得到Wₜ，只需将每个点(重量和温度)相乘并相加，对每个t都这样做，我们就得到洋红色曲线。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jt"><img src="../Images/d650127a327e5ce0321479637d9c950d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jvr1ixNjQLtXCSn0H1NbYA.png"/></div></div></figure><h1 id="f7ad" class="ks kt hh bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">参考资料:</h1><ul class=""><li id="0609" class="ke kf hh ig b ih lq il lr ip ls it lt ix lu jb kj kk kl km bi translated">[1] <a class="ae jo" href="https://academic.udayton.edu/kissock/http/Weather/default.htm" rel="noopener ugc nofollow" target="_blank">代顿大学—环境保护署平均每日温度档案。</a></li><li id="1259" class="ke kf hh ig b ih kn il ko ip kp it kq ix kr jb kj kk kl km bi translated">[2] <em class="jv">改善深度神经网络:超参数调整、正则化和优化</em>—Andrew NG在线课程:<a class="ae jo" href="https://www.coursera.org/learn/neural-networks-deep-learning?specialization=deep-learning" rel="noopener ugc nofollow" target="_blank">https://www . coursera . org/learn/Neural-Networks-Deep-learning？专业化=深度学习</a></li><li id="ebaf" class="ke kf hh ig b ih kn il ko ip kp it kq ix kr jb kj kk kl km bi translated">【https://github.com/tobias-chc/Exponentially-WA】GitHub库:<a class="ae jo" href="https://github.com/tobias-chc/Exponentially-WA" rel="noopener ugc nofollow" target="_blank"/></li></ul><div class="lv lw ez fb lx ly"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="lz ab dw"><div class="ma ab mb cl cj mc"><h2 class="bd hi fi z dy md ea eb me ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="mf l"><h3 class="bd b fi z dy md ea eb me ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="mg l"><p class="bd b fp z dy md ea eb me ed ef dx translated">medium.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm jm ly"/></div></div></a></div></div></div>    
</body>
</html>