<html>
<head>
<title>Why not hack your news? A simple guide to using the New York Times API in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么不黑掉你的新闻？Python中使用纽约时报API的简单指南</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/why-not-hack-your-news-a-simple-guide-to-using-the-new-york-times-api-in-python-fb2709491e96?source=collection_archive---------4-----------------------#2021-10-13">https://medium.com/mlearning-ai/why-not-hack-your-news-a-simple-guide-to-using-the-new-york-times-api-in-python-fb2709491e96?source=collection_archive---------4-----------------------#2021-10-13</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="e136" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">无论你是在寻找一个有趣的研究项目，还是厌倦了滚动——这个工具正是你所需要的</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/ab736e26ddb6e699a5e48cca677a71e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5JU6co55YzPXKisA"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Photo by <a class="ae jm" href="https://unsplash.com/@jakaylatoney?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jakayla Toney</a> on <a class="ae jm" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d1cd" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">《纽约时报》是全球最知名、最受信赖的报纸之一。这是一个很好的资源来了解最新的政治，浏览电影评论，或者试试你的运气对他们的商业新闻做一些自然语言处理。</p><p id="ee04" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">如果我告诉您，您可以使用纽约时报API从纽约时报网站获取所有这些数据，会怎么样？下面是怎么做的。</p><h2 id="2988" class="kj kk hh bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated">第一步:在纽约时报开发者平台上创建一个账户</h2><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es le"><img src="../Images/089bf1229058c812b5470e905ef96bfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t2u_0FHoQSpBK8i7j1NOBg.png"/></div></div></figure><p id="f4ce" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">首先你需要在<a class="ae jm" href="https://developer.nytimes.com/accounts/create" rel="noopener ugc nofollow" target="_blank">纽约时报开发者平台</a>上做一个账号。幸运的是，这是完全免费的。</p><p id="4eac" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">创建帐户后，点击屏幕右上角的电子邮件地址，在下拉菜单中选择“应用程序”。现在，选择蓝色的“+新应用”图标，给你的新应用命名。</p><p id="646f" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">有两个部分值得一提。首先，向下滚动到APIs *部分。你可以在这里看到，纽约时报API有许多不同的功能，你可以为你的应用程序启用或禁用:关于热门故事的数据，最多人观看或分享的文章，书籍和电影评论以及畅销书排行榜，文章元数据或NYT档案。出于演示的目的，本文中我将只关注<strong class="jp hi">文章搜索</strong>特性。如果您想继续学习本教程，请确保您启用了此功能。</p><p id="982d" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">一旦你启用了<strong class="jp hi">文章搜索</strong>功能，回到API密匙部分，复制你的API密匙。</p><h2 id="f1ef" class="kj kk hh bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated">步骤2:设置您的Python脚本</h2><p id="64b6" class="pw-post-body-paragraph jn jo hh jp b jq lf ii js jt lg il jv jw lh jy jz ka li kc kd ke lj kg kh ki ha bi translated">为了能够访问Python中的API，需要使用Python模块<a class="ae jm" href="https://pypi.org/project/pynytimes/" rel="noopener ugc nofollow" target="_blank"> <em class="lk"> pynytimes </em> </a> <em class="lk">。</em>您可以通过在命令行中键入:</p><pre class="ix iy iz ja fd ll lm ln lo aw lp bi"><span id="9c66" class="kj kk hh lm b fi lq lr l ls lt">pip install pynytimes</span></pre><p id="f83a" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">当您安装了<em class="lk"> pynytimes </em>之后，您需要导入该模块。您可以通过在Python脚本的顶部键入以下内容来实现这一点:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lu lv l"/></div></figure><p id="08c2" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">现在，您需要设置您的API。还记得我们在上一节中创建的API键吗？复制您的密钥，并将其插入到您的代码中(括号只是一个占位符，不要在您的代码中使用):</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lu lv l"/></div></figure><p id="0871" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">恭喜你！您现在已经成功地设置了纽约时报API！那很容易，不是吗？</p><h2 id="d01f" class="kj kk hh bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated">步骤3:编写第一个查询</h2><p id="bbf5" class="pw-post-body-paragraph jn jo hh jp b jq lf ii js jt lg il jv jw lh jy jz ka li kc kd ke lj kg kh ki ha bi translated">现在有趣的部分可以开始了。使用文章搜索API，我们可以搜索纽约时报网站上当前列出的所有文章，并根据关键字、标题、出版日期、位置、来源、新闻台等进行过滤。让我们首先构建一个简单的查询来提取2020年发表的包含关键字“气候变化”的所有观点:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lu lv l"/></div></figure><p id="4b6f" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">请注意，“来源”、“新闻服务台”和“出版日期”并不是筛选搜索的唯一方式。<a class="ae jm" href="https://developer.nytimes.com/docs/articlesearch-product/1/overview" rel="noopener ugc nofollow" target="_blank">API文档</a>提供了关键字和可能值的综合列表，包括材料类型、地理位置、文档类型、作者等等。</p><h2 id="bc73" class="kj kk hh bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated">步骤4:为分析准备好数据</h2><p id="aa67" class="pw-post-body-paragraph jn jo hh jp b jq lf ii js jt lg il jv jw lh jy jz ka li kc kd ke lj kg kh ki ha bi translated">我们现在已经成功地从网站上检索到了我们感兴趣的文章。然而，输出是嵌套列表和字典的组合——仍然有些晦涩，并且不太用户友好。还包括很多我们不感兴趣的数据。在这一节中，我将展示如何检索我们想要的信息，将它们存储为pandas数据框，并以excel或CSV格式导出它们。</p><p id="27d0" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">让我们看看查询输出的结构。这是一个包含多个(在某些情况下是嵌套的)词典的大列表。为了提取相关信息，我使用了<em class="lk">地图功能。这个函数允许我在一个列表的任何元素上执行一个给定的函数。这是从嵌套字典或列表中检索信息的一个极好的特性。<em class="lk">λ函数</em>检索我感兴趣的查询输出元素的字典值:</em></p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lu lv l"/></div></figure><p id="c800" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated"><em class="lk">地图函数</em>返回一个地图对象。要将数据输入数据框，我们仍然需要将它们转换成列表:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lu lv l"/></div></figure><p id="d3b7" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">数据也可以导出为选择的格式:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lu lv l"/></div></figure></div><div class="ab cl lw lx go ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ha hb hc hd he"><p id="aff5" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">整个代码可以在<a class="ae jm" href="https://github.com/evadrichter/nyt_api" rel="noopener ugc nofollow" target="_blank">这里</a>访问。</p></div></div>    
</body>
</html>