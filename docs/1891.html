<html>
<head>
<title>Predicting house prices with machine learning</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用机器学习预测房价</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/finding-the-most-underpriced-house-in-tokyo-8cc980cbc350?source=collection_archive---------7-----------------------#2022-02-08">https://medium.com/mlearning-ai/finding-the-most-underpriced-house-in-tokyo-8cc980cbc350?source=collection_archive---------7-----------------------#2022-02-08</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/735d3842006d83f2e96bf8a1565b8d45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*o_W1NloID5Xdrf1r"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Photo by <a class="ae it" href="https://unsplash.com/@yukato?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Yu Kato</a> on <a class="ae it" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="9b48" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我现在的公寓合同快到期了，我正在找一个新的地方举办令人惊叹的晚宴。我首先想到的是，像一个正常人一样，在网上查房子，找一个房地产经纪人给我看房子。但那太无聊了，我对自己说，我是一名数据科学家，所以我应该知道得更多。</p><h1 id="fe39" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">目标</h1><p id="6627" class="pw-post-body-paragraph iu iv hh iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr ha bi translated">我们的目标是<strong class="iw hi"> <em class="kv">尽快找到东京</em> </strong>最便宜的房子，因为我需要在2022年3月底之前搬出去！以免我无家可归，我们用一个最简单的机器学习模型:正则化线性回归(岭回归)。我们使用正则化，因为有些变量需要一次性编码，我们不希望系数爆炸。</p><p id="814f" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们使用线性回归的另一个原因是，我们希望建立一个相对可解释的模型来理解房价背后的驱动因素。(对不起多层感知器，无论怎样你都会是我的最爱)</p><h1 id="cace" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">方法</h1><p id="76ad" class="pw-post-body-paragraph iu iv hh iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr ha bi translated">我们将运行线性回归，根据一组独立变量来预测每套房子的月租金。具有最大正误差的房子(最高估的房子)将是最低估的房子，因为我们的模型给出了较大的预测，但实际价格较低。这所房子将是一个不言而喻的，也许我的下一所房子？</p><h1 id="c1e2" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">数据采购</h1><p id="c7db" class="pw-post-body-paragraph iu iv hh iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr ha bi translated">我写了一段代码，从东京的几个房产网站上刮了217389套房子。原始数据是如此的混乱，所以我就不告诉你数据处理的步骤了。最后，每个房屋的数据包括以下内容:</p><figure class="kx ky kz la fd ii er es paragraph-image"><div class="er es kw"><img src="../Images/82b92501b6df61d532e9d7521342115e.png" data-original-src="https://miro.medium.com/v2/resize:fit:548/format:webp/1*jQn8SQfsK-hmV-wLarX0uw.png"/></div><figcaption class="ip iq et er es ir is bd b be z dx">Image by author</figcaption></figure><p id="7b43" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi"><strong class="iw hi">id</strong>: Unique identifier of each house assigned in pre-processing<br/><strong class="iw hi">label</strong>: shows house type: single house, condo, etc.<br/><strong class="iw hi">local</strong>: shows the locality of the house: Cities (23 wards) and suburbs of Tokyo<br/><strong class="iw hi">stats_1/2/3_station/distance</strong>: Shows the nearest (or 2nd, 3rd nearest) station to the house and walking distance to the station (minutes)<br/><strong class="iw hi">age</strong>: Age of the building<br/><strong class="iw hi">no_of_floors</strong>: total # floors of the building the house belongs to<br/><strong class="iw hi">new_arrival</strong>: whether the house is newly listed on the website<br/><strong class="iw hi">floor</strong>: Floor of the house<br/><strong class="iw hi">rent</strong>: Monthly rent of the house<br/><strong class="iw hi">admin</strong>: Monthly administration fee (管理費)<br/><strong class="iw hi">deposit</strong>: you know what this means<br/><strong class="iw hi">gratuity</strong>: One-time fee that you need to pay to the house owner to show that you are grateful for moving to their house (makes no sense right?) (礼金)<br/><strong class="iw hi">layout</strong>: layout of the house. Think of this as 2 bedrooms, 3 bedrooms, etc.<br/><strong class="iw hi">area</strong>: Square meter area of the house</p><h1 id="0b36" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">建模</h1><p id="53bd" class="pw-post-body-paragraph iu iv hh iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr ha bi translated">在我们的模型中，因变量将是(租金+管理费用)，因为这是你每月支付的费用。我们的自变量将是年龄、楼层、楼层号、区域和当地(地点:东京地区内的城市)。该位置将被一次性编码。</p><figure class="kx ky kz la fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lb"><img src="../Images/2048014f869879ad21fa13516b1c3f66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*M5lbrDebmQrDlggN"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Photo by <a class="ae it" href="https://unsplash.com/@dotzero?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Alexander Smagin</a> on <a class="ae it" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="7786" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">成果1:总体</h1><p id="72e1" class="pw-post-body-paragraph iu iv hh iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr ha bi translated">我们看看实际和预测的房价:</p><figure class="kx ky kz la fd ii er es paragraph-image"><div class="er es lc"><img src="../Images/910895368c1c3cef208dbfe8574b604c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*5UZiBDbTZPo6PO-LnaOwCQ.png"/></div><figcaption class="ip iq et er es ir is bd b be z dx">Actual vs. predicted house prices in Tokyo (Image by author)</figcaption></figure><p id="31a6" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">该模型的R2约为84%，考虑到我们能够在5分钟内实现该模型，这已经不错了。你可以看到预测相对于实际价格是弯曲的。我很确定像深度学习这样的非线性模型会给我们非常高的R2(欢迎回到多层感知器！)</p><h1 id="506c" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">结果2:房价的驱动因素</h1><p id="4468" class="pw-post-body-paragraph iu iv hh iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr ha bi translated">我们现在来看看每个变量是如何影响预测的:</p><figure class="kx ky kz la fd ii er es paragraph-image"><div class="er es ld"><img src="../Images/99d7b8697f7c6782f3ea6153ec472fdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:436/format:webp/1*hlR_tvTTP9jrX4RiPU49uQ.png"/></div><figcaption class="ip iq et er es ir is bd b be z dx">Variables and associated coefficients. Image by author</figcaption></figure><p id="fa53" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">正如你在上面看到的，随着建筑的老化，租金每年下降800日元(7美元)。</p><p id="b60a" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">有趣的一点是，与房屋的实际楼层(1，000日元，9美元)相比，建筑物的总楼层数(约1，200日元，11美元)更有影响力。所以，如果你想找一个高楼层的房子，最好是在靠近顶层的矮房子里。(例如，10层建筑的10层应比20层建筑的10层便宜)</p><p id="feb4" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这个模型的最重要的结果是，在东京，1平方米的房屋面积需要大约2200日元(20美元)。不错吧！</p><p id="e9df" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi">In addition to the above variables, we have one-hot encoded the locality (city) of the house fed it to the model. Looking at the coefficients we get for the one-hot encoded variables, we can understand the housing premium for each city within Tokyo. Can you guess the most expensive city (区) in the Tokyo area? Below it is:</p><figure class="kx ky kz la fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es le"><img src="../Images/02b61f4e50669b6a658c1dd71e098632.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cc5wYyt5PdVY9wbeaP2MTQ.png"/></div></div></figure><p id="94a9" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">米奈特是东京地区生活成本最高的城市，因为仅仅住在这个城市，你就需要每月支付大约4万日元(350美元)。其次是涩谷、千代田、中央。另一方面，有一些23区以内的城市比郊区便宜。例如，足立医院比国立医院便宜(上面没有显示，因为它不在23个病房中)，而足立医院更靠近中心。如果你关心访问，搬到足立是很有意义的。</p><h1 id="dd63" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">结果3:价格最低的房子</h1><p id="0876" class="pw-post-body-paragraph iu iv hh iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr ha bi translated">现在我们正处于最后阶段，去寻找导致这个项目开始的原因:最被低估的房子。为此，我们检查实际价格和预测价格之间的误差。相对误差最高的房子是:</p><figure class="kx ky kz la fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lf"><img src="../Images/250f843ec5271f24dec17ce2a9b1e825.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SRLB8cb2jRYqG0O8lyuF8g.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Image by author</figcaption></figure><p id="6a42" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这套房子的租金是50k日元(430美元)，但我们的模型告诉我们它应该是178k日元(1500美元)……对于品川65平方米的3DK<strong class="iw hi"><em class="kv"/></strong>单房来说，这确实看起来非常便宜。我想这个模式是可行的，但是这个房子绝对不是我的风格。我可能会选择一栋可以俯瞰隅田川的海滨别墅，因为你知道，参加晚宴的客人不会自己招待自己。</p><figure class="kx ky kz la fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lg"><img src="../Images/ab7d15fa05e1fef571f88d04e4b34197.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kJQm6sAYBfmOi3bF"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Photo by <a class="ae it" href="https://unsplash.com/@jackzhang904?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jack Zhang</a> on <a class="ae it" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="b3f5" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">结论</h1><p id="f3d3" class="pw-post-body-paragraph iu iv hh iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr ha bi translated">我喜欢将数据科学用于日常任务，比如本文的主题:寻找价格最低的房子。我们的简单模型很好地预测了R2为84%的东京房价。然而，对模型结果应该持保留态度，如何解释结果取决于个人。</p><p id="1c1e" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">由于搜集的数据非常丰富，下一步可能是建立一个使用火车站作为节点的图形卷积网络来预测房价。这个模型会考虑房子的连通性。</p><p id="d0a2" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">另一个未来的项目是预测布局(1K，1LDK等。)使用计算机视觉的房子的图像。有了这个，大量的劳动力可以减少。</p><p id="d4cf" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">继续探索！</p><figure class="kx ky kz la fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lh"><img src="../Images/11bd7a4d0d474621f923a0a7b32ae9cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0yf-RCt2MaHSYiAn"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Photo by <a class="ae it" href="https://unsplash.com/@jezar?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jezael Melgoza</a> on <a class="ae it" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class="li lj ez fb lk ll"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="lm ab dw"><div class="ln ab lo cl cj lp"><h2 class="bd hi fi z dy lq ea eb lr ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="ls l"><h3 class="bd b fi z dy lq ea eb lr ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="lt l"><p class="bd b fp z dy lq ea eb lr ed ef dx translated">medium.com</p></div></div><div class="lu l"><div class="lv l lw lx ly lu lz in ll"/></div></div></a></div><p id="bc16" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><a class="ae it" rel="noopener" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb">成为作家</a></p></div></div>    
</body>
</html>