<html>
<head>
<title>Step by step guide to setup Tensorflow with GPU support on windows 10</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在windows 10上设置支持GPU的Tensorflow的分步指南</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/step-by-step-guide-to-setup-tensorflow-with-gpu-support-on-windows-10-ad3a492ac67f?source=collection_archive---------3-----------------------#2022-05-05">https://medium.com/mlearning-ai/step-by-step-guide-to-setup-tensorflow-with-gpu-support-on-windows-10-ad3a492ac67f?source=collection_archive---------3-----------------------#2022-05-05</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="6272" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你好！希望你今天心情好。在本文中，我们将使用TensorFlow 2.8建立一个新的anaconda环境，使用NVIDIA CUDA 11.6和CUDNN 8.3以及Python 3.8提供GPU支持</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/9691edebd18599a490ac8f7a0e1388a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CzaXvX-bkpBUbMqy57GTGA.jpeg"/></div></div></figure><p id="6744" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我知道在TensorFlow上获得CUDA支持是一个棘手的问题，这就是为什么在不同的平台上有关于如何正确完成的帖子和视频，这篇文章是另一种方法。希望你能按照指南一步一步来，并享受结果！</p><p id="6bb2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">深呼吸，让我们开始吧！</strong></p><h1 id="c1c1" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated"><strong class="ak">步骤:</strong></h1><p id="26c2" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">让我们简单看一下所有步骤</p><ol class=""><li id="d363" class="ks kt hh ig b ih ii il im ip ku it kv ix kw jb kx ky kz la bi translated"><strong class="ig hi"> NVIDIA显卡驱动</strong>:你可以从这个<a class="ae lb" href="https://www.nvidia.com/download/index.aspx" rel="noopener ugc nofollow" target="_blank">链接</a>下载与你的GPU匹配的驱动。您需要选择您的显卡和操作系统，以便能够下载正确的驱动程序</li><li id="4a98" class="ks kt hh ig b ih lc il ld ip le it lf ix lg jb kx ky kz la bi translated"><strong class="ig hi"> Visual Studio 2019社区版—针对C++运行时</strong>:这里可以从官网<a class="ae lb" href="https://visualstudio.microsoft.com/downloads/" rel="noopener ugc nofollow" target="_blank">下载。</a></li><li id="6d9d" class="ks kt hh ig b ih lc il ld ip le it lf ix lg jb kx ky kz la bi translated"><strong class="ig hi">蟒蛇</strong>:你可以在这里从<a class="ae lb" href="https://www.anaconda.com/" rel="noopener ugc nofollow" target="_blank">获得最新版本的蟒蛇。</a></li><li id="b9c8" class="ks kt hh ig b ih lc il ld ip le it lf ix lg jb kx ky kz la bi translated"><strong class="ig hi">Windows 10的CUDA工具包</strong>:你可以从这个<a class="ae lb" href="https://developer.nvidia.com/cuda-toolkit-archive" rel="noopener ugc nofollow" target="_blank">链接</a>下载CUDA工具包。请注意，在决定下载的版本之前，请查看此表以了解支持您的驱动程序版本的CUDA版本</li><li id="3045" class="ks kt hh ig b ih lc il ld ip le it lf ix lg jb kx ky kz la bi translated"><strong class="ig hi"> CUDNN </strong> : CUDNN是一组C/C++库，在CUDA之上公开了深度神经网络功能。所有深度学习框架都使用CUDNN来使用NVIDIA GPU——包括TensorFlow。你可以从<a class="ae lb" href="https://developer.nvidia.com/cuda-toolkit-archive" rel="noopener ugc nofollow" target="_blank">这个</a>下载你的CUDNN。</li><li id="6b0a" class="ks kt hh ig b ih lc il ld ip le it lf ix lg jb kx ky kz la bi translated">新的conda环境:安装好以上所有东西后，我们创建一个新的环境，然后变魔术</li></ol><h2 id="91b5" class="lh jq hh bd jr li lj lk jv ll lm ln jz ip lo lp kd it lq lr kh ix ls lt kl lu bi translated">我的设置:</h2><p id="2824" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">操作系统:Windows 10企业版</p><p id="9162" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">显卡:NVIDIA GeForce 940MX</p><p id="d60f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">图形驱动程序版本:511.23</p><h1 id="8763" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">步骤1: NVIDIA显卡驱动程序安装</h1><p id="dd12" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">这是从https://www.nvidia.com/download/index.aspx下载的我的设置示例:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lv"><img src="../Images/fa5fb8d4a1e11102f36c0554bdcaf424.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yx6bLPlGgBbybndK9geErg.jpeg"/></div></div></figure><p id="c4ef" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦您找到并下载了适合您机器的安装二进制文件，只需双击该文件即可运行它。根据提示多次单击“下一步”,恭喜您已经完成了第1步。</p><h1 id="29ab" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">步骤2: Visual Studio 2019安装</h1><p id="d7b2" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">我使用的是社区版，这是一个完整的开发环境，而且完全免费！如果你有任何其他执照(专业或企业)也很好。从<a class="ae lb" href="https://visualstudio.microsoft.com/downloads/" rel="noopener ugc nofollow" target="_blank">https://visualstudio.microsoft.com/downloads/</a>下载visual studio安装程序，双击该文件，确保已经安装了突出显示的(“使用C++”的桌面开发)工作负载。这将安装所需的C++工具链。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lw"><img src="../Images/8b325f0e6044bd13730a9859bba3c1b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cSifsI7ckAt_3zdwN7-UMA.jpeg"/></div></div></figure><p id="fedf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这将需要一段时间来安装，等待它完成。<strong class="ig hi">在进入下一步</strong>之前重启电脑。</p><h1 id="5762" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">步骤3: Anaconda安装</h1><p id="f61f" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">Anaconda是一个python发行版，允许您在一台机器上拥有多个python环境。这使您可以自由地使用多个独立的python版本，而不依赖于可能存在包冲突的全局环境。从https://www.anaconda.com/<a class="ae lb" href="https://www.anaconda.com/" rel="noopener ugc nofollow" target="_blank">下载安装程序，完成常规选项的步骤。</a></p><h1 id="f8d6" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">步骤4: CUDA工具包</h1><p id="326c" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">从<a class="ae lb" href="https://developer.nvidia.com/cuda-toolkit-archive" rel="noopener ugc nofollow" target="_blank">https://developer.nvidia.com/cuda-toolkit-archive</a>选择适合你机器的CUDA工具包版本。下载安装程序，然后点击下一步，直到完成。我为我的windows 10下载了CUDA toolkit版本11.6。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lx"><img src="../Images/61ac8fc64c815bf9991dbf17f755a631.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pEa1XujJrBGGzrnwVEx7Wg.jpeg"/></div></div></figure><h1 id="6b5f" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">第五步:CUDNN库</h1><p id="a2c5" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">现在您应该安装CUDNN库，tensorflow使用它来使用CUDA在GPU上创建深度神经网络。访问页面<a class="ae lb" href="https://developer.nvidia.com/rdp/cudnn-download" rel="noopener ugc nofollow" target="_blank">https://developer.nvidia.com/rdp/cudnn-download</a>并下载适用于您的CUDA版本的CUDNN。请注意，为了访问下载页面，您需要有一个NVIDIA开发者帐户(可以免费创建)</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ly"><img src="../Images/a12d630d4739fb7919fc1caf32fd460f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SuGC-jLBKv6qppkiKnfezA.jpeg"/></div></div></figure><p id="89b1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下载如上所示的zip文件，并将内容解压缩到您想要的任何目录中。打开解压后的文件夹，同时打开另一个explorer窗口，路径如下:<strong class="ig hi">C:\ Program Files \ NVIDIA GPU Computing Toolkit \ CUDA</strong>。在这个文件夹里，你会找到一个文件夹，里面是你当前的CUDA工具包版本，比如对我来说是<strong class="ig hi"> <em class="jc"> v11.6 </em> </strong>。像这样从解压缩的文件夹中复制文件。在下表中，ALL_CAPS值指的是特定于您的环境的特定参数。例如CUDA_VERSION指的是你下载的CUDA版本，同样EXTRACTED_FOLDER指的是你解压CUDNN库zip文件的路径。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lz"><img src="../Images/b4ef98b0a77d9e8f924e8d45d7aafa99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VbbiugawFYq6Ex-C90WmAw.jpeg"/></div></div></figure><p id="aee0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">请注意，您需要复制上述文件夹的文件<strong class="ig hi">，而不是文件夹本身</strong>。</p><p id="e2e5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，让我们验证您已经在机器上创建了下面列出的环境变量。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ma"><img src="../Images/c9e6ad5a1020d705c3d30f177abc2d18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C3d-avAr1-UYXeU4hSGh5A.jpeg"/></div></div></figure><p id="cc7e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是我的:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mb"><img src="../Images/06e6d82411e1a0009df4214849f82534.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gtt7oeuqjNKFGj3fbvizpA.jpeg"/></div></div></figure><p id="c389" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你需要知道如何在Windows 10上访问和设置环境变量，请阅读<a class="ae lb" rel="noopener" href="/@melika.sce/how-to-add-a-new-path-to-environment-variables-in-windows-10-af1d5197ac2e">这篇</a>小文章来帮助你。</p><h1 id="046e" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">第六步:创造康达环境</h1><p id="7640" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">我们到了！还剩下一些小碎步，你可以做到！</p><p id="12a8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了用Python版创建conda环境，在开始菜单中键入Anaconda提示符并打开它。</p><p id="f581" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在用下面的命令创建一个任意名称的环境，我的环境名称是gpu</p><pre class="je jf jg jh fd mc md me mf aw mg bi"><span id="3a8c" class="lh jq hh md b fi mh mi l mj mk">conda create --name gpu python=3.8</span></pre><p id="89de" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">激活您的环境</p><pre class="je jf jg jh fd mc md me mf aw mg bi"><span id="c14a" class="lh jq hh md b fi mh mi l mj mk">conda activate gpu</span></pre><p id="bf1d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后我们可以安装TensorFlow</p><pre class="je jf jg jh fd mc md me mf aw mg bi"><span id="23cb" class="lh jq hh md b fi mh mi l mj mk">pip install --upgrade tensorflow-gpu</span></pre><p id="e877" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">开放vs代码</p><pre class="je jf jg jh fd mc md me mf aw mg bi"><span id="1bf2" class="lh jq hh md b fi mh mi l mj mk">code</span></pre><p id="8450" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在检查是否一切正常:</p><pre class="je jf jg jh fd mc md me mf aw mg bi"><span id="b894" class="lh jq hh md b fi mh mi l mj mk">import sys<br/>import tensorflow.keras<br/>import tensorflow as tf<br/>import numpy as np</span><span id="995d" class="lh jq hh md b fi ml mi l mj mk">print(f"Tensor Flow Version: {tf.__version__}")<br/>print(f"Keras Version: {tensorflow.keras.__version__}")<br/>print()<br/>print(f"Python {sys.version}")<br/>print("GPUs Available: ", len(tf.config.experimental.list_physical_devices('GPU')))<br/>tf.test.is_built_with_cuda()<br/>tf.test.is_gpu_available(cuda_only=False, min_cuda_compute_capability=None)</span></pre><p id="896d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">恭喜你！</p><p id="ba4f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你做到了:)</p><p id="5bb6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">评论，如果你面临任何问题。</p><div class="mm mn ez fb mo mp"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="mq ab dw"><div class="mr ab ms cl cj mt"><h2 class="bd hi fi z dy mu ea eb mv ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="mw l"><h3 class="bd b fi z dy mu ea eb mv ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="mx l"><p class="bd b fp z dy mu ea eb mv ed ef dx translated">medium.com</p></div></div><div class="my l"><div class="mz l na nb nc my nd jn mp"/></div></div></a></div></div></div>    
</body>
</html>