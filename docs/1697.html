<html>
<head>
<title>DNN model inference on Odroid XU4 using OpenVINO ARM plugin and OpenCV DNN</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用OpenVINO ARM插件和OpenCV DNN在Odroid XU4上进行DNN模型推理</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/dnn-model-inference-on-odroid-xu4-using-openvino-arm-plugin-and-opencv-dnn-fcac932471e4?source=collection_archive---------5-----------------------#2022-01-20">https://medium.com/mlearning-ai/dnn-model-inference-on-odroid-xu4-using-openvino-arm-plugin-and-opencv-dnn-fcac932471e4?source=collection_archive---------5-----------------------#2022-01-20</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/54c06462ef1774b4cacdffe11e435edf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QmX1DP73I6xhvmi9"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Photo by <a class="ae it" href="https://unsplash.com/@ray30?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">ray rui</a> on <a class="ae it" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1b6a" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">最近，我接到一个任务，在移动机器人上部署一个用于物体检测的DNN模型。由于空间和功耗是我们最关心的问题，我们决定使用小型低功耗单板计算机(SBC) Odroid XU4。对于对象检测任务，我们决定使用免费可用的流行预训练模型。为了执行推理，我们正在寻找一个平台，它可以支持来自各种DNN框架的模型，如tensorflow、caffe、keras、onnx等。我们决定使用OpenCV来完成这项任务。它有dnn模块，可以使用流行的dnn框架中的模型来加载和执行推理。OpenCV默认使用自己的dnn后端进行推理，但是如果它是用OpenVINO支持构建的，我们可以使用OpenVINO推理引擎后端来实现更快的推理。OpenVINO最近通过专用的<a class="ae it" href="https://github.com/openvinotoolkit/openvino_contrib/tree/master/modules/arm_plugin" rel="noopener ugc nofollow" target="_blank"> ARM cpu插件</a>增加了ARM cpu支持。因此我们决定在我们的项目中使用OpenVINO toolkit和OpenCV dnn框架。现在我们的任务是构建并安装带有ARM cpu插件的OpenVINO工具包，然后构建带有OpenVINO支持的OpenCV。</p></div><div class="ab cl js jt go ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="ha hb hc hd he"><h1 id="5006" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">Odroid XU4</h1><p id="0838" class="pw-post-body-paragraph iu iv hh iw b ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn lb jp jq jr ha bi translated">Odroid XU4是一款SBC <a class="ae it" href="https://www.hardkernel.com/" rel="noopener ugc nofollow" target="_blank">硬核</a>。它的大小相当于一张信用卡。其基于ARM的主板配有Mali GPU。它有2 GB的内存，支持MicroSD卡或eMMC来启动操作系统。它支持android和linux操作系统。更多细节可以在<a class="ae it" href="https://wiki.odroid.com/odroid-xu4/odroid-xu4" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><figure class="ld le lf lg fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lc"><img src="../Images/3c792327952cbf1059c07a9610d89b38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Os6DpODAGbR-Z6lEjIjd0g.jpeg"/></div></div></figure><h1 id="1e69" class="jz ka hh bd kb kc lh ke kf kg li ki kj kk lj km kn ko lk kq kr ks ll ku kv kw bi translated">奥本维诺</h1><figure class="ld le lf lg fd ii er es paragraph-image"><div class="er es lm"><img src="../Images/df6e76af8d198edabf4cf705f42ce1c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*K5OS-Fk0-uJGKPvZGxoxzQ.png"/></div></figure><p id="f32e" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><a class="ae it" href="https://docs.openvinotoolkit.org/latest/index.html" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hi"> OpenVINO toolkit </strong> </a>(开放式视觉推理和神经网络优化)是英特尔开发的免费工具包，用于加速深度学习模型在英特尔硬件上的部署。OpenVINO是一个跨平台工具，支持“一次编写，随处部署”的方法。因此，使用OpenVINO toolkit编写的代码与硬件无关。它可以部署在英特尔平台上，包括CPU、集成GPU、英特尔Movidius VPU和FPGAs。最近OpenVINO发布了<a class="ae it" href="https://github.com/openvinotoolkit/openvino_contrib/tree/master/modules/arm_plugin" rel="noopener ugc nofollow" target="_blank"> ARM cpu插件</a>。这使得在使用OpenVINO API的ARM设备上能够进行dnn推理。</p><h1 id="ec7f" class="jz ka hh bd kb kc lh ke kf kg li ki kj kk lj km kn ko lk kq kr ks ll ku kv kw bi translated">OpenCV DNN模块</h1><figure class="ld le lf lg fd ii er es paragraph-image"><div class="er es ln"><img src="../Images/20293d7d4e683a46ede38c1046a45918.png" data-original-src="https://miro.medium.com/v2/resize:fit:360/format:webp/1*9shaRGoECg-brmOt52TfCA.png"/></div></figure><p id="1ddb" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi"> OpenCV </strong> ( <em class="lo">开源计算机视觉库</em>)是广泛流行的计算机视觉开源库。除了传统的计算机视觉模块，它现在还有一个用于DNN模型推理的<a class="ae it" href="https://docs.opencv.org/4.5.2/d2/d58/tutorial_table_of_content_dnn.html" rel="noopener ugc nofollow" target="_blank"> DNN模块</a>。在DNN模块中，OpenCV提供了使用OpenVINO推理后端而不是OpenCV后端的规定。更多细节可以在这里找到<a class="ae it" href="https://docs.opencv.org/4.5.2/db/d30/classcv_1_1dnn_1_1Net.html#a7f767df11386d39374db49cd8df8f59e" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl js jt go ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="ha hb hc hd he"><h1 id="9432" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">Odroid-XU4上的OpenVINO和OpenCV安装</h1><p id="4cfa" class="pw-post-body-paragraph iu iv hh iw b ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn lb jp jq jr ha bi translated">OpenVINO的预构建二进制文件不可用于Odroid XU4，ARM CPU插件也不可作为OpenVINO工具包的一部分，它需要从源代码构建。此外，为了将OpenVINO后端集成到OpenCV dnn中，OpenCV需要从源代码构建。因此，我们需要按照这个顺序从Odroid-XU4的源代码中构建OpenVINO和OpenCV。</p><p id="4c2c" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们使用的是为Odroid XU4定制的Ubuntu mate 18.04的最新版本。这个操作系统镜像可以从<a class="ae it" href="https://odroid.in/ubuntu_18.04lts/XU3_XU4_MC1_HC1_HC2/ubuntu-18.04.3-4.14-mate-odroid-xu4-20190929.img.xz" rel="noopener ugc nofollow" target="_blank">这里</a>下载。可以使用<a class="ae it" href="https://www.balena.io/etcher/" rel="noopener ugc nofollow" target="_blank">蚀刻机</a>或<a class="ae it" href="http://dn.odroid.com/DiskImager_ODROID/Win32DiskImager-odroid-v1.3.zip" rel="noopener ugc nofollow" target="_blank">win32 disk manager</a>等工具在存储卡上刷新操作系统映像，如此处<a class="ae it" href="https://wiki.odroid.com/odroid-xu4/getting_started/os_installation_guide?redirect=1#installation" rel="noopener ugc nofollow" target="_blank">所示</a>。</p><p id="4cf8" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">更新源列表和升级包。</p><pre class="ld le lf lg fd lp lq lr ls aw lt bi"><span id="ef00" class="lu ka hh lq b fi lv lw l lx ly"><em class="lo">sudo apt-get update<br/>sudo apt-get upgrade</em></span></pre><h2 id="9d5a" class="lu ka hh bd kb lz ma mb kf mc md me kj jf mf mg kn jj mh mi kr jn mj mk kv ml bi translated">从源代码打开VINO building</h2><p id="c7a3" class="pw-post-body-paragraph iu iv hh iw b ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn lb jp jq jr ha bi translated">我们将通过安装它的依赖项来开始构建Openvino。我广泛参考了<a class="ae it" href="https://opencv.org/how-to-run-yolov4-using-openvino-and-opencv-on-arm/" rel="noopener ugc nofollow" target="_blank">这篇文章</a>作为参考。OpenVINO的安装说明也在其Github页面<a class="ae it" href="https://github.com/openvinotoolkit/openvino/wiki/BuildingForLinux#build-on-linux-systems" rel="noopener ugc nofollow" target="_blank">这里</a>提供。</p><pre class="ld le lf lg fd lp lq lr ls aw lt bi"><span id="ba2e" class="lu ka hh lq b fi lv lw l lx ly">sudo apt-get install -y --no-install-recommends build-essential python3-dev python3-pip git git-lfs scons wget xz-utils cmake libusb-1.0-0-dev libgtk-3-dev libavcodec-dev libavformat-dev libswscale-dev libgstreamer1.0-dev libgstreamer-plugins-base1.0-dev libpython3-dev</span></pre><p id="ad9c" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在，为了构建OpenVINO，我们需要cmake或更高版本，如这里的<a class="ae it" href="https://github.com/openvinotoolkit/openvino/wiki/BuildingForLinux#software-requirements" rel="noopener ugc nofollow" target="_blank">所示</a>，但它的二进制文件不可用，因此我们从源代码构建它。</p><pre class="ld le lf lg fd lp lq lr ls aw lt bi"><span id="12b2" class="lu ka hh lq b fi lv lw l lx ly">wget <a class="ae it" href="https://www.cmake.org/files/v3.14/cmake-3.14.3.tar.gz" rel="noopener ugc nofollow" target="_blank">https://www.cmake.org/files/v3.14/cmake-3.14.3.tar.gz</a><br/>tar xf cmake-3.14.3.tar.gz<br/>make -j2<br/>sudo make install</span></pre><p id="6705" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在我们从github获取OpenVINO及其ARM插件源代码。在此之前，我们将做一个单独的目录，使我们的工作在同一个地方。</p><pre class="ld le lf lg fd lp lq lr ls aw lt bi"><span id="4f4b" class="lu ka hh lq b fi lv lw l lx ly">cd /home/odroid/Desktop<br/>mkdir arm<br/>cd arm</span></pre><p id="cc9e" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">克隆openvino和openvino_contrib github repos。Arm插件源代码位于openvino_contrib下。</p><pre class="ld le lf lg fd lp lq lr ls aw lt bi"><span id="7a04" class="lu ka hh lq b fi lv lw l lx ly">git clone --recurse-submodules --shallow-submodules --depth 1 <a class="ae it" href="https://github.com/openvinotoolkit/openvino.git" rel="noopener ugc nofollow" target="_blank">https://github.com/openvinotoolkit/openvino.git</a></span><span id="c825" class="lu ka hh lq b fi mm lw l lx ly">git clone --recurse-submodules --shallow-submodules --depth 1 <a class="ae it" href="https://github.com/openvinotoolkit/openvino_contrib.git" rel="noopener ugc nofollow" target="_blank">https://github.com/openvinotoolkit/openvino_contrib.git</a></span></pre><p id="049a" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">创建构建和安装目录。</p><pre class="ld le lf lg fd lp lq lr ls aw lt bi"><span id="3457" class="lu ka hh lq b fi lv lw l lx ly">cd openvino<br/>mkdir openvino_build<br/>mkdir openvino_install</span></pre><p id="13f3" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">使用cmake指定项目生成选项。</p><pre class="ld le lf lg fd lp lq lr ls aw lt bi"><span id="cb4d" class="lu ka hh lq b fi lv lw l lx ly">cmake -DCMAKE_BUILD_TYPE=Release \<br/>      -DCMAKE_INSTALL_PREFIX="/home/odroid/Desktop/arm/openvino/openvino_install" \<br/>      -DTHREADING=SEQ \<br/>      -DIE_EXTRA_MODULES=/home/odroid/Desktop/arm/openvino_contrib/modules/arm_plugin \<br/>      -DTHREADS_PTHREAD_ARG="-pthread" .. \<br/>      -DCMAKE_INSTALL_LIBDIR=lib \<br/>      -DCMAKE_CXX_FLAGS=-latomic \<br/>      -DENABLE_TESTS=OFF \<br/>      -DENABLE_BEH_TESTS=OFF \<br/>      -DENABLE_FUNCTIONAL_TESTS=OFF</span></pre><p id="7c9f" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">注意CMAKE_INSTALL_PREFIX指定安装目录。IE_EXTRA_MODULES选项非常重要，因为它指定了附加openvino模块的位置。我们将<strong class="iw hi"> arm_plugin </strong>目录路径的路径指定为额外模块。这将强制构建arm_plugin源代码，并将arm_plugin与OpenVINO推理引擎连接起来。</p><p id="c0bd" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">以上命令将配置项目。配置完成后，我们会看到消息“配置完成”，“生成完成”，如下所示。</p><figure class="ld le lf lg fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mn"><img src="../Images/f35116329de5fd0917dc47408cd8c293.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I6XPDjl1IHyaF1UEuByPYg.png"/></div></div></figure><p id="8c32" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">创建交换空间</strong></p><p id="7361" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">一旦OpenVINO构建的配置完成，下一步就是实际构建。现在Odroid XU4是一个单板机，它的资源有限，只有2 GB内存。正如我们所知，在构建make项目时，我们可以使用'-j '选项来指定作业的数量。给1个以上的工作压倒了XU4它卡住了，而建设。这主要是因为耗尽了整个RAM。补救措施是为XU4提供一个交换空间。我们将XU4配置为使用一个u盘作为SWAP ( <a class="ae it" href="https://hackviking.com/2016/03/09/odroid-swap-on-usb-stick/" rel="noopener ugc nofollow" target="_blank">参考博客</a>)。</p><p id="e133" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">检查交换空间。</p><figure class="ld le lf lg fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mo"><img src="../Images/8a5b62d44a937b0680346336f12487f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UMzkTKDv_mFKiejmJYNZ0A.png"/></div></div></figure><p id="1e65" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">连接u盘，使用<strong class="iw hi"> dmesg查找设备名称。</strong>它有form /dev/sd*。对我们来说是<strong class="iw hi"> /dev/sda </strong>。现在将usb配置为交换空间，如下所示。</p><pre class="ld le lf lg fd lp lq lr ls aw lt bi"><span id="f0ba" class="lu ka hh lq b fi lv lw l lx ly">odroid@odroid:~$ sudo fdisk /dev/sda<br/>[sudo] password for odroid:</span><span id="0b54" class="lu ka hh lq b fi mm lw l lx ly">Welcome to fdisk (util-linux 2.31.1).<br/>Changes will remain in memory only, until you decide to write them.<br/>Be careful before using the write command.</span><span id="a010" class="lu ka hh lq b fi mm lw l lx ly">Command (m for help): d<br/>Selected partition 1<br/>Partition 1 has been deleted.</span><span id="0b0c" class="lu ka hh lq b fi mm lw l lx ly">Command (m for help): n<br/>Partition type<br/>   p   primary (0 primary, 0 extended, 4 free)<br/>   e   extended (container for logical partitions)<br/>Select (default p):</span><span id="134e" class="lu ka hh lq b fi mm lw l lx ly">Using default response p.<br/>Partition number (1-4, default 1): <br/>First sector (2048-30463999, default 2048): <br/>Last sector, +sectors or +size{K,M,G,T,P} (2048-30463999, default 30463999):</span><span id="5c6a" class="lu ka hh lq b fi mm lw l lx ly">Created a new partition 1 of type 'Linux' and of size 14.5 GiB.<br/>Partition #1 contains a swap signature.</span><span id="16b3" class="lu ka hh lq b fi mm lw l lx ly">Do you want to remove the signature? [Y]es/[N]o: Y</span><span id="f465" class="lu ka hh lq b fi mm lw l lx ly">The signature will be removed by a write command.</span><span id="82f1" class="lu ka hh lq b fi mm lw l lx ly">Command (m for help): w<br/>The partition table has been altered.<br/>Calling ioctl() to re-read partition table.<br/>Syncing disks.</span><span id="2901" class="lu ka hh lq b fi mm lw l lx ly">odroid@odroid:~$ mkswap /dev/sda1<br/>Setting up swapspace version 1, size = 14.5 GiB (15596515328 bytes)<br/>no label, UUID=4ceb01f1-e4b3-4928-96ab-743779ba65d9</span></pre><p id="4237" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi"> /dev/sda1 </strong>是我们创建的分区。您可以使用<strong class="iw hi"> fdisk </strong>中的<strong class="iw hi">p’</strong>命令来检查它的名称</p><p id="f64a" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">注<strong class="iw hi"> UUID。</strong>现在用root权限打开<strong class="iw hi">/etc/fstab</strong>(sudo pluma/etc/fstab)并添加以下行。</p><pre class="ld le lf lg fd lp lq lr ls aw lt bi"><span id="3099" class="lu ka hh lq b fi lv lw l lx ly">UUID=4ceb01f1-e4b3-4928-96ab-743779ba65d9   none    swap    sw    0   0</span></pre><p id="b9a0" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">您可以使用任何其他编辑器来编辑/etc/fstab。</p><p id="88c1" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">最后启用交换。</p><pre class="ld le lf lg fd lp lq lr ls aw lt bi"><span id="e42d" class="lu ka hh lq b fi lv lw l lx ly">sudo swapon /dev/sda1</span></pre><p id="320a" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们可以检查是否启用了交换，如下所示。</p><figure class="ld le lf lg fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mp"><img src="../Images/3f7d0828195b4fc3a012c0c64647958a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_5RGzDiFErQlJxfgi_PyTA.png"/></div></div></figure><p id="b40a" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这里的解释了创建交换的过程<a class="ae it" href="https://hackviking.com/2016/03/09/odroid-swap-on-usb-stick/" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="b5a4" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在我们已经准备好构建我们的项目了。</p><p id="fadc" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">构建OpenVINO </strong></p><pre class="ld le lf lg fd lp lq lr ls aw lt bi"><span id="4aaf" class="lu ka hh lq b fi lv lw l lx ly">make -j2</span></pre><p id="ace7" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">建筑将持续一段时间。它将以下列消息结束。</p><pre class="ld le lf lg fd lp lq lr ls aw lt bi"><span id="e4c8" class="lu ka hh lq b fi lv lw l lx ly">[100%] Building CXX object docs/snippts/CMakeFiles/ie_docs_snippets.dir/movidius-programming-guide.cpp.o<br/>[100%] Building CXX object docs/snippets/CMakeFiles/ie_docs_snippets.dir/nGraphTutorial.cpp.o<br/>[100%] Building CXX object docs/snippets/CMakeFiles/ie_docs_snippets.dir/protecting_model_guide.cpp.o<br/>[100%] Linking CXX static library ../../../bin/armv7l/Release/lib/libie_docs_snippets.a<br/>[100%] Built target ie_docs_snippets<br/>Scanning dependencies of target onnx_custom_op<br/>[100%] Building CXX object docs/onnx_custom_op/CMakeFiles/onnx_custom_op.dir/onnx_custom_op.cpp.o<br/>[100%] Linking CXX static library ../../../bin/armv7l/Release/lib/libonnx_custom_op.a<br/>[100%] Built target onnx_custom_op<br/>Scanning dependencies of target template_extension<br/>[100%] Building CXX object docs/template_extension/CMakeFiles/template_extension.dir/cpu_kernel.cpp.o<br/>[100%] Building CXX object docs/template_extension/CMakeFiles/template_extension.dir/extension.cpp.o<br/>[100%] Building CXX object docs/template_extension/CMakeFiles/template_extension.dir/op.cpp.o<br/>[100%] Building CXX object docs/template_extension/CMakeFiles/template_extension.dir/fft_kernel.cpp.o<br/>[100%] Building CXX object docs/template_extension/CMakeFiles/template_extension.dir/fft_op.cpp.o<br/>[100%] Linking CXX shared module ../../../bin/armv7l/Release/lib/libtemplate_extension.so<br/>[100%] Built target template_extension</span></pre><p id="f735" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">安装OpenVINO </strong></p><p id="64bd" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">安装OpenVINO并复制<strong class="iw hi"> libarmPlugin.so </strong>文件</p><pre class="ld le lf lg fd lp lq lr ls aw lt bi"><span id="f945" class="lu ka hh lq b fi lv lw l lx ly">make install</span><span id="5e41" class="lu ka hh lq b fi mm lw l lx ly">cp /home/odroid/Desktop/arm/openvino/bin/armv7l/Release/lib/libarmPlugin.so \<br/>   /home/odroid/Desktop/arm/openvino/openvino_install/deployment_tools/inference_engine/lib/armv7l/</span></pre><p id="0b39" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">搞定了。！！！！！</p><p id="bd15" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们已经用ARM插件完成了OpenVINO的构建。现在我们需要构建OpenCV，同时通知OpenCV关于ARM推断插件。</p><h1 id="637a" class="jz ka hh bd kb kc lh ke kf kg li ki kj kk lj km kn ko lk kq kr ks ll ku kv kw bi translated">使用OpenVINO后端构建OpenCV</h1><p id="a8a9" class="pw-post-body-paragraph iu iv hh iw b ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn lb jp jq jr ha bi translated">安装生成依赖项。</p><pre class="ld le lf lg fd lp lq lr ls aw lt bi"><span id="304e" class="lu ka hh lq b fi lv lw l lx ly">sudo add-apt-repository "deb <a class="ae it" href="http://ports.ubuntu.com/ubuntu-ports" rel="noopener ugc nofollow" target="_blank">http://ports.ubuntu.com/ubuntu-ports</a> xenial-security main"</span><span id="fc0b" class="lu ka hh lq b fi mm lw l lx ly">sudo apt -y install build-essential cmake gfortran pkg-config unzip software-properties-common doxygen<br/>sudo apt -y install libblas-dev libblas-test liblapack-dev libatlas-base-dev libopenblas-base libopenblas-dev</span><span id="a5be" class="lu ka hh lq b fi mm lw l lx ly">sudo apt -y install libblas-dev libblas-test liblapack-dev libatlas-base-dev libopenblas-base libopenblas-dev<br/>sudo apt -y install libjpeg-dev libpng-dev libtiff-dev libavcodec-dev libavformat-dev libswscale-dev libv4l-dev<br/>sudo apt -y install libxvidcore-dev libx264-dev<br/>sudo apt -y install libgtk2.0-dev libgtk-3-dev libcanberra-gtk*<br/>sudo apt -y install libtiff5-dev libeigen3-dev libtheora-dev libvorbis-dev sphinx-common libtbb-dev yasm libopencore-amrwb-dev<br/>sudo apt -y install libopenexr-dev libgstreamer-plugins-base1.0-dev libgstreamer1.0-dev libavutil-dev libavfilter-dev<br/>sudo apt -y install libavresample-dev ffmpeg libdc1394-22-dev libwebp-dev<br/>sudo apt -y install libjpeg8-dev libxine2-dev libfaac-dev libmp3lame-dev libopencore-amrnb-dev libprotobuf-dev<br/>sudo apt -y install protobuf-compiler libgoogle-glog-dev libgflags-dev libgphoto2-dev libhdf5-dev<br/>sudo apt -y install qt5-default v4l-utils<br/>sudo apt -y install libtbb2</span></pre><p id="9dc4" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">克隆OpenCV Github repos。</p><pre class="ld le lf lg fd lp lq lr ls aw lt bi"><span id="6c06" class="lu ka hh lq b fi lv lw l lx ly">cd /home/odroid/Desktop/arm</span><span id="a7d3" class="lu ka hh lq b fi mm lw l lx ly">git clone --recurse-submodules --shallow-submodules --depth 1 <a class="ae it" href="https://github.com/opencv/opencv.git" rel="noopener ugc nofollow" target="_blank">https://github.com/opencv/opencv.git</a></span><span id="46af" class="lu ka hh lq b fi mm lw l lx ly">git clone --recurse-submodules --shallow-submodules --depth 1 <a class="ae it" href="https://github.com/opencv/opencv_contrib.git" rel="noopener ugc nofollow" target="_blank">https://github.com/opencv/opencv_contrib.git</a></span></pre><p id="7b29" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">创建构建、安装和python目录。</p><pre class="ld le lf lg fd lp lq lr ls aw lt bi"><span id="0bdd" class="lu ka hh lq b fi lv lw l lx ly">cd opencv<br/>mkdir opencv_build<br/>mkdir opencv_install<br/>mkdir opencv_python</span></pre><p id="6955" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">使用cmake配置生成项目</p><pre class="ld le lf lg fd lp lq lr ls aw lt bi"><span id="1f80" class="lu ka hh lq b fi lv lw l lx ly">cd opencv_build</span><span id="d08c" class="lu ka hh lq b fi mm lw l lx ly">cmake -DCMAKE_BUILD_TYPE=Release \<br/>      -DCMAKE_INSTALL_PREFIX="/home/odroid/Desktop/arm/opencv/opencv_install" \<br/>      -DOPENCV_CONFIG_INSTALL_PATH="cmake" \<br/>      -DOPENCV_ENABLE_NONFREE=ON \<br/>      -DOPENCV_EXTRA_MODULES_PATH=/home/odroid/Desktop/arm/opencv_contrib/modules \<br/>      -DWITH_IPP=OFF \<br/>      -DBUILD_TESTS=OFF \<br/>      -DBUILD_PERF_TESTS=OFF \<br/>      -DOPENCV_ENABLE_PKG_CONFIG=ON \<br/>      -DOPENCV_GENERATE_PKGCONFIG=ON \<br/>      -DPYTHON3_PACKAGES_PATH="/home/odroid/Desktop/arm/opencv/opencv_install/python" \<br/>      -DPKG_CONFIG_EXECUTABLE="/usr/bin/arm-linux-gnueabihf-pkg-config" \<br/>      -DBUILD_opencv_python2=OFF \<br/>      -DBUILD_opencv_python3=ON \<br/>      -DOPENCV_PYTHON3_INSTALL_PATH=/home/odroid/Desktop/arm/opencv/opencv_python \<br/>      -DPYTHON_EXECUTABLE=/usr/bin/python3.6 \<br/>      -DPYTHON2_EXECUTABLE=/usr/bin/python2.7 \<br/>      -DPYTHON3_EXECUTABLE=/usr/bin/python3.6 \<br/>      -DPYTHON_PACKAGES_PATH=/usr/lib/python3/dist-packages \<br/>      -DPYTHON_LIBRARY=/usr/lib/python3.6/config-3.6m-arm-linux-gnueabihf/libpython3.6m.so \<br/>      -DPYTHON3_INCLUDE_PATH="/usr/include/python3.6" \<br/>      -DINSTALL_PYTHON_EXAMPLES=ON \<br/>      -DBUILD_DOCS=ON \<br/>      -DBUILD_TIFF=ON \<br/>      -DWITH_FFMPEG=ON \<br/>      -DWITH_GSTREAMER=ON \<br/>      -DWITH_TBB=ON \<br/>      -DBUILD_TBB=ON \<br/>      -DWITH_V4L=ON \<br/>      -DWITH_PNG=ON \<br/>      -DWITH_JPEG=ON \<br/>      -DWITH_WEBP=ON \<br/>      -DWITH_GTK=ON \<br/>      -DWITH_QT=ON \<br/>      -DWITH_LIBV4L=ON \<br/>      -DWITH_VTK=OFF \<br/>      -DWITH_OPENGL=OFF \<br/>      -DBUILD_NEW_PYTHON_SUPPORT=ON \<br/>      -DBUILD_TESTS=OFF \<br/>      -DBUILD_EXAMPLES=ON \<br/>      -DPYTHON3_NUMPY_INCLUDE_DIRS="/usr/local/lib/python3.6/dist-packages/numpy/core/include" \<br/>      -DPYTHON3_LIMITED_API=ON \<br/>      -DOPENCV_SKIP_PYTHON_LOADER=ON \<br/>      -DENABLE_NEON=ON \<br/>      -DCPU_BASELINE="NEON" \<br/>      -DWITH_INF_ENGINE=ON \<br/>      -DWITH_NGRAPH=ON \<br/>      -Dngraph_DIR="/home/odroid/Desktop/arm/openvino/openvino_build/ngraph" \<br/>      -DINF_ENGINE_RELEASE=2021030000 \<br/>      -DInferenceEngine_DIR="/home/odroid/Desktop/arm/openvino/openvino_build" \<br/>      -DINF_ENGINE_LIB_DIRS="/home/odroid/Desktop/arm/openvino/bin/armv7l/Release/lib" \<br/>      -DINF_ENGINE_INCLUDE_DIRS="/home/odroid/Desktop/arm/openvino/inference-engine/include" \<br/>      -DCMAKE_FIND_ROOT_PATH="/home/odroid/Desktop/arm/openvino" \<br/>      -DENABLE_CXX11=ON ..</span></pre><p id="677f" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">一些值得注意的选项是</p><p id="1b45" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">CMAKE_INSTALL_PREFIX:构建的二进制文件的安装目录</p><p id="b7ee" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">OPENCV _ EXTRA _ MODULES _ PATH:OPENCV额外模块的路径。DNN模块驻留在opencv_contrig repo中，因此我们指定了它。</p><p id="cfc4" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">BUILD_opencv_python3:是否构建opencv python3绑定</p><p id="1c02" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">OPENCV _ python 3 _ INSTALL _ PATH:OPENCV python二进制文件的安装路径</p><p id="3351" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">OpenVINO的特定选项是将其与opencv链接的关键。WITH_INF_ENGINE，WITH_NGRAPH，ngraph_DIR，INF_ENGINE_RELEASE，INF _ ENGINE _ LIB，INF_ENGINE_LIB_DIRS，INF_ENGINE_INCLUDE_DIRS，CMAKE_FIND_ROOT_PATH。</p><p id="0c78" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这将给出以下配置。</p><pre class="ld le lf lg fd lp lq lr ls aw lt bi"><span id="d44f" class="lu ka hh lq b fi lv lw l lx ly">-- General configuration for OpenCV 4.5.3-pre =====================================<br/>--   Version control:               438e2dc<br/>-- <br/>--   Extra modules:<br/>--     Location (extra):            /home/odroid/Desktop/arm/opencv_contrib/modules<br/>--     Version control (extra):     8eec886<br/>-- <br/>--   Platform:<br/>--     Timestamp:                   2021-06-13T20:51:26Z<br/>--     Host:                        Linux 4.14.180-178 armv7l<br/>--     CMake:                       3.14.3<br/>--     CMake generator:             Unix Makefiles<br/>--     CMake build tool:            /usr/bin/make<br/>--     Configuration:               Release<br/>-- <br/>--   CPU/HW features:<br/>--     Baseline:                    NEON<br/>--       required:                  NEON<br/>-- <br/>--   C/C++:<br/>--     Built as dynamic libs?:      YES<br/>--     C++ standard:                11<br/>--     C++ Compiler:                /usr/bin/c++  (ver 7.5.0)<br/>--     C++ flags (Release):         -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wuninitialized -Wsuggest-override -Wno-delete-non-virtual-dtor -Wno-comment -Wimplicit-fallthrough=3 -Wno-strict-overflow -fdiagnostics-show-option -pthread -fomit-frame-pointer -ffunction-sections -fdata-sections  -mfpu=neon -fvisibility=hidden -fvisibility-inlines-hidden -O3 -DNDEBUG  -DNDEBUG<br/>--     C++ flags (Debug):           -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wuninitialized -Wsuggest-override -Wno-delete-non-virtual-dtor -Wno-comment -Wimplicit-fallthrough=3 -Wno-strict-overflow -fdiagnostics-show-option -pthread -fomit-frame-pointer -ffunction-sections -fdata-sections  -mfpu=neon -fvisibility=hidden -fvisibility-inlines-hidden -g  -O0 -DDEBUG -D_DEBUG<br/>--     C Compiler:                  /usr/bin/cc<br/>--     C flags (Release):           -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wuninitialized -Wno-comment -Wimplicit-fallthrough=3 -Wno-strict-overflow -fdiagnostics-show-option -pthread -fomit-frame-pointer -ffunction-sections -fdata-sections  -mfpu=neon -fvisibility=hidden -O3 -DNDEBUG  -DNDEBUG<br/>--     C flags (Debug):             -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wuninitialized -Wno-comment -Wimplicit-fallthrough=3 -Wno-strict-overflow -fdiagnostics-show-option -pthread -fomit-frame-pointer -ffunction-sections -fdata-sections  -mfpu=neon -fvisibility=hidden -g  -O0 -DDEBUG -D_DEBUG<br/>--     Linker flags (Release):      -Wl,--gc-sections -Wl,--as-needed  <br/>--     Linker flags (Debug):        -Wl,--gc-sections -Wl,--as-needed  <br/>--     ccache:                      NO<br/>--     Precompiled headers:         NO<br/>--     Extra dependencies:          dl m pthread rt<br/>--     3rdparty dependencies:<br/>-- <br/>--   OpenCV modules:<br/>--     To be built:                 alphamat aruco barcode bgsegm bioinspired calib3d ccalib core cvv datasets dnn dnn_objdetect dnn_superres dpm face features2d flann freetype fuzzy hdf hfs highgui img_hash imgcodecs imgproc intensity_transform line_descriptor mcc ml objdetect optflow phase_unwrapping photo plot python3 quality rapid reg rgbd saliency sfm shape stereo stitching structured_light superres surface_matching text tracking video videoio videostab wechat_qrcode xfeatures2d ximgproc xobjdetect xphoto<br/>--     Disabled:                    world<br/>--     Disabled by dependency:      -<br/>--     Unavailable:                 cudaarithm cudabgsegm cudacodec cudafeatures2d cudafilters cudaimgproc cudalegacy cudaobjdetect cudaoptflow cudastereo cudawarping cudev gapi java julia matlab ovis python2 ts viz<br/>--     Applications:                examples apps<br/>--     Documentation:               doxygen<br/>--     Non-free algorithms:         YES<br/>-- <br/>--   GUI: <br/>--     QT:                          YES (ver 5.9.5)<br/>--       QT OpenGL support:         NO<br/>--     GTK+:                        YES (ver 3.22.30)<br/>--       GThread :                  YES (ver 2.56.4)<br/>--       GtkGlExt:                  NO<br/>-- <br/>--   Media I/O: <br/>--     ZLib:                        /usr/lib/arm-linux-gnueabihf/libz.so (ver 1.2.11)<br/>--     JPEG:                        /usr/lib/arm-linux-gnueabihf/libjpeg.so (ver 80)<br/>--     WEBP:                        /usr/lib/arm-linux-gnueabihf/libwebp.so (ver encoder: 0x020e)<br/>--     PNG:                         /usr/lib/arm-linux-gnueabihf/libpng.so (ver 1.6.34)<br/>--     TIFF:                        build (ver 42 - 4.2.0)<br/>--     JPEG 2000:                   build (ver 2.4.0)<br/>--     OpenEXR:                     /usr/lib/arm-linux-gnueabihf/libImath.so /usr/lib/arm-linux-gnueabihf/libIlmImf.so /usr/lib/arm-linux-gnueabihf/libIex.so /usr/lib/arm-linux-gnueabihf/libHalf.so /usr/lib/arm-linux-gnueabihf/libIlmThread.so (ver 2_2)<br/>--     HDR:                         YES<br/>--     SUNRASTER:                   YES<br/>--     PXM:                         YES<br/>--     PFM:                         YES<br/>-- <br/>--   Video I/O:<br/>--     DC1394:                      YES (2.2.5)<br/>--     FFMPEG:                      YES<br/>--       avcodec:                   YES (57.107.100)<br/>--       avformat:                  YES (57.83.100)<br/>--       avutil:                    YES (55.78.100)<br/>--       swscale:                   YES (4.8.100)<br/>--       avresample:                YES (3.7.0)<br/>--     GStreamer:                   YES (1.14.5)<br/>--     v4l/v4l2:                    YES (linux/videodev2.h)<br/>-- <br/>--   Parallel framework:            pthreads<br/>-- <br/>--   Trace:                         YES (with Intel ITT)<br/>-- <br/>--   Other third-party libraries:<br/>--     Lapack:                      NO<br/>--     Inference Engine:            YES (2021030000 / 0.0.0)<br/>--         * libs:                  /home/odroid/Desktop/arm/openvino/bin/armv7l/Release/lib/libinference_engine.so<br/>--         * includes:              /home/odroid/Desktop/arm/openvino/inference-engine/include<br/>--     nGraph:                      YES (0.0.0+458435a)<br/>--         * libs:                  /home/odroid/Desktop/arm/openvino/bin/armv7l/Release/lib/libngraph.so<br/>--         * includes:              /home/odroid/Desktop/arm/openvino/ngraph/core/include<br/>--     Eigen:                       YES (ver 3.3.4)<br/>--     Custom HAL:                  YES (carotene (ver 0.0.1))<br/>--     Protobuf:                    build (3.5.1)<br/>-- <br/>--   OpenCL:                        YES (no extra features)<br/>--     Include path:                /home/odroid/Desktop/arm/opencv/3rdparty/include/opencl/1.2<br/>--     Link libraries:              Dynamic load<br/>-- <br/>--   Python 3:<br/>--     Interpreter:                 /usr/bin/python3.6 (ver 3.6.9)<br/>--     Libraries:                   /usr/lib/python3.6/config-3.6m-arm-linux-gnueabihf/libpython3.6m.so (ver 3.6.9)<br/>--     numpy:                       /usr/local/lib/python3.6/dist-packages/numpy/core/include (ver 1.19.5)<br/>--     install path:                /home/odroid/Desktop/arm/opencv/opencv_python<br/>-- <br/>--   Python (for build):            /usr/bin/python3.6<br/>-- <br/>--   Java:                          <br/>--     ant:                         NO<br/>--     JNI:                         NO<br/>--     Java wrappers:               NO<br/>--     Java tests:                  NO<br/>-- <br/>--   Install to:                    /home/odroid/Desktop/arm/opencv/opencv_install<br/>-- -----------------------------------------------------------------<br/>-- <br/>-- Configuring done<br/>-- Generating done<br/>-- Build files have been written to: /home/odroid/Desktop/arm/opencv/opencv_build</span><span id="32c9" class="lu ka hh lq b fi mm lw l lx ly">---------------------------------------------------------------------------------------</span></pre><p id="faf2" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">构建opencv</p><pre class="ld le lf lg fd lp lq lr ls aw lt bi"><span id="0b4f" class="lu ka hh lq b fi lv lw l lx ly">make -j2</span></pre><p id="6063" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这将启动构建过程。这需要一段时间。最后，您将收到类似如下的消息。</p><figure class="ld le lf lg fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mq"><img src="../Images/c49a46460f33f484c13f56398c87f592.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4XXeMtOrkwXfJAD5Y55JKw.png"/></div></div></figure><p id="1869" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">安装opencv</p><pre class="ld le lf lg fd lp lq lr ls aw lt bi"><span id="19bb" class="lu ka hh lq b fi lv lw l lx ly">make install</span></pre><p id="add5" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">Opencv构建完成！！！</p><p id="867f" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在为了使用opecv和openvino库，我们必须导出它们的路径。遵循两行就可以了。</p><pre class="ld le lf lg fd lp lq lr ls aw lt bi"><span id="b67c" class="lu ka hh lq b fi lv lw l lx ly">export PYTHONPATH=$PYTHONPATH:/home/odroid/Desktop/arm/opencv/opencv_install/python</span><span id="22c9" class="lu ka hh lq b fi mm lw l lx ly">export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/home/odroid/Desktop/arm/opencv/opencv_install/lib/:/home/odroid/Desktop/arm/openvino/openvino_install/deployment_tools/ngraph/lib/:/home/odroid/Desktop/arm/openvino/openvino_install/deployment_tools/inference_engine/lib/armv7l</span></pre><h1 id="6d7c" class="jz ka hh bd kb kc lh ke kf kg li ki kj kk lj km kn ko lk kq kr ks ll ku kv kw bi translated">对象检测示例</h1><p id="63f2" class="pw-post-body-paragraph iu iv hh iw b ix kx iz ja jb ky jd je jf kz jh ji jj la jl jm jn lb jp jq jr ha bi translated">现在让我们用一个简单的对象检测例子来测试我们的安装。关注<a class="ae it" href="https://ebenezertechs.com/mobilenet-ssd-using-opencv-3-4-1-deep-learning-module-python/" rel="noopener ugc nofollow" target="_blank">这篇</a>博客。代码可以从<a class="ae it" href="https://github.com/djmv/MobilNet_SSD_opencv" rel="noopener ugc nofollow" target="_blank">这里</a>下载。博客很好地解释了代码。默认情况下，这段代码使用opencv后端进行模型推断。为了使用OpenVINO，我们在加载模型后添加了下面一行。</p><pre class="ld le lf lg fd lp lq lr ls aw lt bi"><span id="ba33" class="lu ka hh lq b fi lv lw l lx ly">net.setPreferableBackend(cv2.dnn.DNN_BACKEND_INFERENCE_ENGINE)</span></pre><p id="872a" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们运行对象检测应用程序的样本测试代码可以在<a class="ae it" href="https://github.com/GauravPatel89/MobilNet_SSD_opencv" rel="noopener ugc nofollow" target="_blank">这里</a>找到。下载这个<a class="ae it" href="https://github.com/GauravPatel89/MobilNet_SSD_opencv" rel="noopener ugc nofollow" target="_blank">库</a>中的文件，并按照自述文件中所示运行。以下是网络摄像头输入的输出。</p><figure class="ld le lf lg fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mr"><img src="../Images/b21108b259e5a21d7007d909ce513183.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tTW2EVL5MA5A1v69u6yZAQ.png"/></div></div></figure><p id="66cf" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这只是一个例子。一旦建立了DNN框架，就可以在OpenCV和OpenVINO框架上运行各种dnn模型。样品可以在<a class="ae it" href="https://github.com/opencv/opencv/tree/master/samples/dnn" rel="noopener ugc nofollow" target="_blank">这里</a>和<a class="ae it" href="https://docs.openvino.ai/latest/openvino_docs_IE_DG_Samples_Overview.html" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p></div><div class="ab cl js jt go ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="ha hb hc hd he"><h1 id="8f19" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">参考</h1><ol class=""><li id="a735" class="ms mt hh iw b ix kx jb ky jf mu jj mv jn mw jr mx my mz na bi translated"><a class="ae it" href="https://opencv.org/how-to-run-yolov4-using-openvino-and-opencv-on-arm/" rel="noopener ugc nofollow" target="_blank">https://opencv . org/how-to-run-yolov 4-using-open vino-and-opencv-on-arm/</a></li><li id="f069" class="ms mt hh iw b ix nb jb nc jf nd jj ne jn nf jr mx my mz na bi translated"><a class="ae it" href="https://github.com/openvinotoolkit/openvino_contrib/tree/master/modules/arm_plugin" rel="noopener ugc nofollow" target="_blank">https://github . com/openvinotoolkit/open vino _ contrib/tree/master/modules/arm _ plugin</a></li><li id="aa1e" class="ms mt hh iw b ix nb jb nc jf nd jj ne jn nf jr mx my mz na bi translated"><a class="ae it" href="https://www.pyimagesearch.com/2019/09/16/install-opencv-4-on-raspberry-pi-4-and-raspbian-buster/" rel="noopener ugc nofollow" target="_blank">https://www . pyimagesearch . com/2019/09/16/install-opencv-4-on-raspberry-pi-4-and-raspbian-buster/</a></li><li id="a431" class="ms mt hh iw b ix nb jb nc jf nd jj ne jn nf jr mx my mz na bi translated"><a class="ae it" href="https://ebenezertechs.com/mobilenet-ssd-using-opencv-3-4-1-deep-learning-module-python/" rel="noopener ugc nofollow" target="_blank">https://ebenezer techs . com/mobilenet-SSD-using-opencv-3-4-1-deep-learning-module-python/</a></li><li id="00fd" class="ms mt hh iw b ix nb jb nc jf nd jj ne jn nf jr mx my mz na bi translated">https://github.com/sclable/openvino_opencv<a class="ae it" href="https://github.com/sclable/openvino_opencv" rel="noopener ugc nofollow" target="_blank"/></li><li id="16ad" class="ms mt hh iw b ix nb jb nc jf nd jj ne jn nf jr mx my mz na bi translated">【https://hackviking.com/2016/03/09/odroid-swap-on-usb-stick/ T4】</li></ol><div class="ng nh ez fb ni nj"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="nk ab dw"><div class="nl ab nm cl cj nn"><h2 class="bd hi fi z dy no ea eb np ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="nq l"><h3 class="bd b fi z dy no ea eb np ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="nr l"><p class="bd b fp z dy no ea eb np ed ef dx translated">medium.com</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx in nj"/></div></div></a></div></div></div>    
</body>
</html>