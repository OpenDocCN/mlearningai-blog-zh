<html>
<head>
<title>The Promise of ONNX</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ONNX的承诺</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/the-promise-of-onnx-d43c371f913d?source=collection_archive---------0-----------------------#2022-07-30">https://medium.com/mlearning-ai/the-promise-of-onnx-d43c371f913d?source=collection_archive---------0-----------------------#2022-07-30</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="611e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">机器学习框架是一种工具，它使开发人员能够创建模型来完成给定的任务，例如图像分类或自然语言处理。ML框架中一些最熟悉的例子是PyTorch和TensorFlow。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es jc"><img src="../Images/5bbfff94f2a63fe00ac1ce94a0da11f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*FpSVm3lUHxuu0zjc8zqGhA.png"/></div></figure><p id="fdf1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">ONNX(Open Neural Network EXchange)</strong>是一个开源标准，它定义了一组通用的运算符和一种文件格式，使人工智能开发人员能够使用各种框架、工具、运行时和编译器的模型。</p><blockquote class="jk jl jm"><p id="8a33" class="ie if jn ig b ih ii ij ik il im in io jo iq ir is jp iu iv iw jq iy iz ja jb ha bi translated"><strong class="ig hi">在这篇文章中，我将谈论:</strong></p><p id="5b44" class="ie if jn ig b ih ii ij ik il im in io jo iq ir is jp iu iv iw jq iy iz ja jb ha bi translated">为什么要创建ONNX？</p><p id="ac46" class="ie if jn ig b ih ii ij ik il im in io jo iq ir is jp iu iv iw jq iy iz ja jb ha bi translated">什么是ONNX？</p><p id="306b" class="ie if jn ig b ih ii ij ik il im in io jo iq ir is jp iu iv iw jq iy iz ja jb ha bi translated">ONNX的承诺</p><p id="b508" class="ie if jn ig b ih ii ij ik il im in io jo iq ir is jp iu iv iw jq iy iz ja jb ha bi translated">承诺的实现</p></blockquote><h1 id="5cce" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">【ONNX为什么会被创造出来？</h1><p id="51c0" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">机器学习/深度学习的出现导致为处理深度学习/机器学习模型的执行而引入的框架/库的数量呈指数级增长。</p><p id="8a4f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这一增长的主要驱动力是，</p><p id="e55b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">(a)硬件供应商，他们开发了自己的框架，以实现纵向集成，并使其硬件模型的开发更加容易</p><p id="1583" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">和</p><p id="0056" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">(b)软件供应商，他们开发自己的框架以实现特定用例的最佳性能</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es ku"><img src="../Images/cfa7b9da3856e4f9641119ba1023ffc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J44RfZaVpdIst8zia_J83g.png"/></div></div></figure><p id="0717" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">用于开发深度学习模型的可用框架数量的激增导致了生态系统的碎片化，并使得跨框架或硬件生态系统工作变得困难。必须选择在何处开发和培训模型，并且在数据科学管道的后期转移到不同的框架或不同的硬件生态系统几乎是不可能的。这是由于框架与不同硬件的编译器的兼容性，但我们将把编译器的故事留待以后再说。</p><p id="7e11" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">ONNX的诞生是为了消除框架之间以及不同硬件生态系统之间的互操作性惯性。</p><p id="4025" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在本文的其余部分，我们将探索解决框架过多的问题的方法是否是在组合中引入另一个框架？</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es kz"><img src="../Images/67cf0787aa57f5adf3a2e86706548fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h4EWQXEzuoTQOhCk1bchHQ.png"/></div></div></figure><h1 id="e702" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">什么是ONNX？</h1><p id="8c34" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">ONNX是一个开放规范，由以下定义组成:</p><h2 id="64c6" class="la js hh bd jt lb lc ld jx le lf lg kb ip lh li kf it lj lk kj ix ll lm kn ln bi translated"><strong class="ak">计算图形模型的文件格式</strong></h2><p id="01e4" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated"><strong class="ig hi">模型:</strong>是一个包含版本信息和元数据的非循环计算数据流图。</p><p id="0514" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">图形:</strong>包含模型中数据流图形的名称、构成图形的计算节点列表、图形的输入和输出。</p><p id="c11d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">计算节点:</strong>图中每个计算节点接受<a class="ae lo" href="https://github.com/onnx/onnx/blob/main/docs/IR.md#standard-data-types" rel="noopener ugc nofollow" target="_blank">定义类型</a>的零个或多个输入，一个或多个定义类型的输出，以及特定节点对其输入执行的操作类型。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es lp"><img src="../Images/e3c19ed9b91286a08e0f819bb7c0495e.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/format:webp/1*BJTLzXm6m8FrhvjKBJBJyQ.png"/></div><figcaption class="lq lr et er es ls lt bd b be z dx">Figure 2: An example ONNX graph</figcaption></figure><h2 id="1618" class="la js hh bd jt lb lc ld jx le lf lg kb ip lh li kf it lj lk kj ix ll lm kn ln bi translated">标准数据类型</h2><p id="0c56" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">ONNX作为一个标准支持以下数据类型列表:<br/> <strong class="ig hi">张量类型:</strong></p><ul class=""><li id="1914" class="lu lv hh ig b ih ii il im ip lw it lx ix ly jb lz ma mb mc bi translated">Int8、Int16、Int32、Int64</li><li id="88ae" class="lu lv hh ig b ih md il me ip mf it mg ix mh jb lz ma mb mc bi translated">量化整数</li><li id="5f30" class="lu lv hh ig b ih md il me ip mf it mg ix mh jb lz ma mb mc bi translated">Uint8、uint16、uint32、uint64</li><li id="4fd2" class="lu lv hh ig b ih md il me ip mf it mg ix mh jb lz ma mb mc bi translated">浮点16，浮点，双精度</li><li id="f6f6" class="lu lv hh ig b ih md il me ip mf it mg ix mh jb lz ma mb mc bi translated">弯曲件</li><li id="8ab3" class="lu lv hh ig b ih md il me ip mf it mg ix mh jb lz ma mb mc bi translated">线</li><li id="8b28" class="lu lv hh ig b ih md il me ip mf it mg ix mh jb lz ma mb mc bi translated">复杂64，复杂128</li></ul><p id="a718" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">非张量类型:</strong></p><ul class=""><li id="70b1" class="lu lv hh ig b ih ii il im ip lw it lx ix ly jb lz ma mb mc bi translated">顺序</li><li id="7095" class="lu lv hh ig b ih md il me ip mf it mg ix mh jb lz ma mb mc bi translated">地图</li><li id="7a9f" class="lu lv hh ig b ih md il me ip mf it mg ix mh jb lz ma mb mc bi translated">运算符(内置/自定义)</li></ul><h2 id="e475" class="la js hh bd jt lb lc ld jx le lf lg kb ip lh li kf it lj lk kj ix ll lm kn ln bi translated">经营者</h2><p id="975f" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">ONNX图中的每个计算节点执行特定的操作，并产生一个或多个输出。ONNX标准定义了ONNX图形支持的<a class="ae lo" href="https://github.com/onnx/onnx/blob/main/docs/Operators.md" rel="noopener ugc nofollow" target="_blank">操作符</a>的正式列表。该运算符列表不断发展，并通过ONNX Opsets保持更新。</p><p id="5f2f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">每个增量ONNX Opset都增加了对新运算符的支持，并改进了现有的运算符列表。</p><p id="9767" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这个规范是一个开放的标准，每个人都可以同意，因此可以从任何框架转换到ONNX。</p><h1 id="a31e" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">ONNX的承诺</h1><p id="c11b" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">ONNX的核心设计理念是:</p><ul class=""><li id="f528" class="lu lv hh ig b ih ii il im ip lw it lx ix ly jb lz ma mb mc bi translated">互用性</li><li id="05e4" class="lu lv hh ig b ih md il me ip mf it mg ix mh jb lz ma mb mc bi translated">轻便</li></ul><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es mi"><img src="../Images/12428623ac5701f49ccd68a77f1e82d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4GN3Dq6UKL0b0aBOgs0Bog.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx">Figure 3: The Promise of ONNX</figcaption></figure><p id="c498" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">ONNX旨在通过提供一个有效的接口将模型从一个框架转换到另一个框架，成为不同框架之间的中介。<em class="jn">下面的图4 </em>列出了将模型从一些最常见的框架转换成ONNX格式的工具。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es mj"><img src="../Images/a56596e6e04ff2d697f33f1cab348527.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*lLBgb7LoUAazJ7hJ6vw2aQ.png"/></div><figcaption class="lq lr et er es ls lt bd b be z dx">Figure 4: Onnx Conversion support</figcaption></figure><h1 id="1359" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">诺言的实现</h1><p id="7895" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">实际上，从任何框架到ONNX的模型转换都是一个挑战。主要障碍之一是这些框架的表面积不同。</p><p id="f313" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">转换库面临的挑战是跟上ONNX及其每个版本的源代码库的变化趋势(每年大约4-6次)</p><p id="4ee3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">从一个框架到另一个框架的模型转换归结为能够表示原始模型的底层数学运算。图5显示了每个框架中定义的唯一操作符的数量。ONNX支持PyTorch支持的大约13%的操作符。这极大地限制了可以实际转换为ONNX的模型数量。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="er es mk"><img src="../Images/b473b455bd98f6d270f9a2fc45e82b80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U3mjXr7S56_6_o3mCmdkOw.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx">Figure 5: Number of operators per framework</figcaption></figure><p id="1940" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">值得注意的是，PyTorch等框架上的1000多个操作符在特定操作的功能上也有一定程度的重复，这也回避了一个问题，即ONNX等框架是否应该支持所有操作的全局超集？</p><p id="598b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了解决运营商覆盖的问题，ONNX采取了不同的策略，而不是在所有这些框架上追逐永无止境的运营商列表。</p><p id="562b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> ONNX函数</strong>使用ONNX中的原始/现有操作符帮助表达复杂操作。每一个即将到来的ONNX版本都将增加新的功能，并且比以往任何时候都更容易<a class="ae lo" href="https://github.com/onnx/onnx/blob/main/docs/AddNewOp.md#step1_new_operator_or_function" rel="noopener ugc nofollow" target="_blank">根据需要添加自己的功能</a>。这有助于限制需要维护的操作符的数量，也有利于编译器开发人员，因为它减少了为硬件优化少量操作符的范围和工作量。</p><blockquote class="jk jl jm"><p id="ecae" class="ie if jn ig b ih ii ij ik il im in io jo iq ir is jp iu iv iw jq iy iz ja jb ha bi translated">运算符是用于定义ONNX模型的基本构件。凭借丰富的操作符，ONNX可以描述来自各种框架的大多数DNN和ML模型。<strong class="ig hi">函数可以用更原始的运算符来表达复杂的运算符</strong>。ONNX规范包括一组支持许多模型的核心运算符。添加所有可能的操作符并不是我们的目标，但是我们会根据需要添加更多的操作符来满足不断发展的需求。</p></blockquote><p id="dea6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我不能夸大上述与前一个时代的<strong class="ig hi"> CISC Vs RISC </strong>战争的相似性。我们不仅可以坐在前排看这是如何发生的，而且还有机会真正影响这个有影响力的行业的方向，这个行业已经通过促进开源项目和推动人工智能软件的边界塑造了技术的未来。</p><p id="82ac" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">活着是多么美好的时光啊！！！</p><h2 id="4eaf" class="la js hh bd jt lb lc ld jx le lf lg kb ip lh li kf it lj lk kj ix ll lm kn ln bi translated"><a class="ae lo" href="https://mlearning.substack.com/about" rel="noopener ugc nofollow" target="_blank">T5【成为作家】m learning . aiT7】</a></h2><div class="ml mm ez fb mn mo"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="mp ab dw"><div class="mq ab mr cl cj ms"><h2 class="bd hi fi z dy mt ea eb mu ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="mv l"><h3 class="bd b fi z dy mt ea eb mu ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="mw l"><p class="bd b fp z dy mt ea eb mu ed ef dx translated">medium.com</p></div></div><div class="mx l"><div class="my l mz na nb mx nc ji mo"/></div></div></a></div></div></div>    
</body>
</html>