<html>
<head>
<title>Run an MLFlow project in less than 5 minutes on Kubernetes with K3ai</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用K3ai在Kubernetes上运行MLFlow项目不到5分钟</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/run-a-training-job-on-kubernetes-using-mlflow-in-four-clicks-5c209e186fbe?source=collection_archive---------3-----------------------#2021-11-05">https://medium.com/mlearning-ai/run-a-training-job-on-kubernetes-using-mlflow-in-four-clicks-5c209e186fbe?source=collection_archive---------3-----------------------#2021-11-05</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="a266" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jc">部署整个人工智能基础设施堆栈以学习或运行您的CI/CD管道的四个步骤。</em></p><blockquote class="jd je jf"><p id="88d5" class="ie if jc ig b ih ii ij ik il im in io jg iq ir is jh iu iv iw ji iy iz ja jb ha bi translated">“傻瓜忽视复杂性。实用主义者深受其害。有些可以避免。天才们会移除它。”艾伦·海瑞泽斯。</p></blockquote><figure class="jk jl jm jn fd jo er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es jj"><img src="../Images/ed9fb9e511f86500369100fee4a674c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IbKWo2h0TQRx4NQJD3Afnw.jpeg"/></div></div><figcaption class="jv jw et er es jx jy bd b be z dx">Photo by <a class="ae jz" href="https://unsplash.com/@xavi_cabrera?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Xavi Cabrera</a> on <a class="ae jz" href="https://unsplash.com/s/photos/surprise?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="38f6" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">介绍</h1><p id="8da9" class="pw-post-body-paragraph ie if hh ig b ih ky ij ik il kz in io ip la ir is it lb iv iw ix lc iz ja jb ha bi ld translated">学习人工智能的最大障碍之一是如何使用它的一些工具。</p><p id="be78" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在大多数情况下，您最终会偶然发现一个Jupiter笔记本或一个python脚本，您最终不得不对您的Kubernetes集群执行……<em class="jc">不，等等，反对什么</em>？</p><p id="9c54" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">哦，你是说我们忘记了我们这个超级简单的例子有一大堆你从未听说过的需求？</p><p id="510e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">比如:</p><ul class=""><li id="68a8" class="lm ln hh ig b ih ii il im ip lo it lp ix lq jb lr ls lt lu bi translated">你需要一个Kubernetes集群和我们超级简单的清单…</li><li id="0cc0" class="lm ln hh ig b ih lv il lw ip lx it ly ix lz jb lr ls lt lu bi translated">下载并配置头盔和运行这个图表…但是不要担心，这将是超级容易的，只要做这200步，然后…</li></ul><p id="fddc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">是的，你可以使用minikube，microk8s，kubeadm，或者其他什么……哦，是的，这些都非常简单，对吧，但是我告诉过你需要其他的依赖项吗，比如<em class="jc"> kubectl，helm </em>或者在你安装了这些工具之后，简单的了解一下<em class="jc">的所有东西？？另外，你得到了那些的正确版本吗？<br/>你的目标是专注于人工智能，但这种方法意味着甚至在能够部署你感兴趣的人工智能工具之前就学习基础设施的基础知识，显然你会遇到所有可能的错误和失误…</em></p><blockquote class="jd je jf"><p id="8b93" class="ie if jc ig b ih ii ij ik il im in io jg iq ir is jh iu iv iw ji iy iz ja jb ha bi translated">所以，这是个交易:<br/>我们能把它变得更简单吗？是的，我们可以</p></blockquote><figure class="jk jl jm jn fd jo er es paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="er es ma"><img src="../Images/55ba7884ca485d492d8f959b1eb7df32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t7UCbeffAExqmznMnTzx_w.jpeg"/></div></div><figcaption class="jv jw et er es jx jy bd b be z dx">Photo by <a class="ae jz" href="https://unsplash.com/@simmerdownjpg?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Jackson Simmer</a> on <a class="ae jz" href="https://unsplash.com/s/photos/problem?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="ee49" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">输入使用案例</h1><p id="bd3e" class="pw-post-body-paragraph ie if hh ig b ih ky ij ik il kz in io ip la ir is it lb iv iw ix lc iz ja jb ha bi translated">Alex是个好奇的人，想学点机器学习。他发现了MLFlow，并相信这是他想要开始的。通过查看文档，他发现可以在Conda或docker映像(需要构建)中或者直接在他的笔记本电脑上以python库的形式运行它。<br/>那太好了，但Alex是一个试图成为MLOp的DevOps，所以他已经知道他的“目标”将是Kubernetes。<br/> Alex的理想目标是获得如下所示的流程:</p><ol class=""><li id="a8bc" class="lm ln hh ig b ih ii il im ip lo it lp ix lq jb mb ls lt lu bi translated">Kubernetes部署</li></ol><p id="9459" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">2.MLFlow部署(K8s上？)</p><p id="b929" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3.以MLFlow的公共示例为例，针对新部署的MLFLow服务器运行它</p><blockquote class="jd je jf"><p id="6f16" class="ie if jc ig b ih ii ij ik il im in io jg iq ir is jh iu iv iw ji iy iz ja jb ha bi translated"><strong class="ig hi">无需担心基础设施、部署、清单等问题..</strong></p></blockquote><p id="fc8b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">第一个问题是，像minikube或microk8s这样的“本地”解决方案很好，但Alex想要更灵活的东西，甚至不一定是本地的。</p><p id="6bc7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Alex知道一个简单、轻量级的工具，允许他进行实验。</p><p id="5df8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">该工具命名为</strong><a class="ae jz" href="https://k3ai.in" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi">K3ai</strong></a><strong class="ig hi">。</strong></p><p id="e0d8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用K3ai，他知道他可以创建一个Kubernetes集群，部署选择的ai工具，并最终执行用于训练的代码，但更好的是，因为K3ai可以在任何上游k8上工作，它可以很容易地嵌入到Alex CI/CD环境中。</p><p id="7a51" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，这是每个人都可以遵循的步骤，以完成Alex用例。</p><h1 id="b8a0" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤1 — K3ai配置</h1><p id="fec7" class="pw-post-body-paragraph ie if hh ig b ih ky ij ik il kz in io ip la ir is it lb iv iw ix lc iz ja jb ha bi translated">要事第一，对吗？</p><p id="e8ed" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们在我们的Linux机器上下载K3ai:</p><pre class="jk jl jm jn fd mc md me mf aw mg bi"><span id="d182" class="mh kb hh md b fi mi mj l mk ml">curl -sfL <a class="ae jz" href="https://get.k3ai.in" rel="noopener ugc nofollow" target="_blank">https://get.k3ai.in</a> | sh -</span></pre><p id="cf60" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">或者干脆看视频:</p><figure class="jk jl jm jn fd jo"><div class="bz dy l di"><div class="mm mn l"/></div></figure><p id="e638" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">好了，我们已经安装了K3ai，现在让我们进入配置。</p><pre class="jk jl jm jn fd mc md me mf aw mg bi"><span id="0692" class="mh kb hh md b fi mi mj l mk ml">k3ai up</span></pre><p id="3db4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">或者，让我们再看一遍视频:</p><figure class="jk jl jm jn fd jo"><div class="bz dy l di"><div class="mm mn l"/></div></figure><h1 id="9e1e" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤2 —部署集群</h1><p id="f823" class="pw-post-body-paragraph ie if hh ig b ih ky ij ik il kz in io ip la ir is it lb iv iw ix lc iz ja jb ha bi translated">没有什么比部署完整的K8s集群更简单的了</p><pre class="jk jl jm jn fd mc md me mf aw mg bi"><span id="c01a" class="mh kb hh md b fi mi mj l mk ml">k3ai cluster deploy --type k3s --name mycluster</span></pre><p id="8e7f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">是的，你甚至可以在选项中进行选择，请查看:</p><pre class="jk jl jm jn fd mc md me mf aw mg bi"><span id="8ca6" class="mh kb hh md b fi mi mj l mk ml">k3ai cluster list --all</span></pre><p id="fcd4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们看一下集群部署:</p><figure class="jk jl jm jn fd jo"><div class="bz dy l di"><div class="mm mn l"/></div></figure><h1 id="2026" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤3-部署MLFLow</h1><p id="46f9" class="pw-post-body-paragraph ie if hh ig b ih ky ij ik il kz in io ip la ir is it lb iv iw ix lc iz ja jb ha bi translated">好的，集群已经启动，我们不需要<strong class="ig hi">学习任何东西，如果不是简单地<strong class="ig hi">一个命令</strong>的话，但是让我们在我们新创建的集群上部署MLFLow。</strong></p><pre class="jk jl jm jn fd mc md me mf aw mg bi"><span id="5b7d" class="mh kb hh md b fi mi mj l mk ml">k3ai plugin deploy --name mlflow --target mycluster</span></pre><p id="fcdc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">至于集群，让我们检查插件列表:</p><pre class="jk jl jm jn fd mc md me mf aw mg bi"><span id="6475" class="mh kb hh md b fi mi mj l mk ml">k3ai plugin list --all</span></pre><p id="e1ec" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">哦，顺便问一下，插件完成了吗？是的，所以你可以登录<strong class="ig hi"> http:// &lt;你的笔记本电脑IP &gt; :3500 </strong></p><p id="ba57" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">好了，让我们用一段视频来回顾一下这一步:</p><figure class="jk jl jm jn fd jo"><div class="bz dy l di"><div class="mm mn l"/></div></figure><h1 id="f98d" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤4——在上面运行我们的代码</h1><p id="8791" class="pw-post-body-paragraph ie if hh ig b ih ky ij ik il kz in io ip la ir is it lb iv iw ix lc iz ja jb ha bi translated">那我们要跑什么？MLFLOW <a class="ae jz" href="https://github.com/mlflow/mlflow/tree/master/examples/xgboost" rel="noopener ugc nofollow" target="_blank">这里</a>的xgboost教程怎么样？</p><p id="1e9b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了让你的生活变得超级简单，K3ai作为它的快速入门克隆<a class="ae jz" href="https://github.com/k3ai/quickstart" rel="noopener ugc nofollow" target="_blank">这里</a></p><p id="0305" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所以让我们简单地输入:</p><pre class="jk jl jm jn fd mc md me mf aw mg bi"><span id="1890" class="mh kb hh md b fi mi mj l mk ml">k3ai run --source <a class="ae jz" href="https://github.com/k3ai/quickstart" rel="noopener ugc nofollow" target="_blank">https://github.com/k3ai/quickstart</a> --backend mlflow --target mycluster</span></pre><p id="6246" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">等一分钟左右，现在担心K3ai会告诉你一旦做了一切，并检查你的MLFLOW用户界面…你会感谢我，因为亚历克斯做了！</p><p id="a698" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">还没被说服让我给你看:</p><figure class="jk jl jm jn fd jo"><div class="bz dy l di"><div class="mm mn l"/></div></figure><p id="4669" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">是的，4个步骤，用你选择的工具训练你的代码，现在有人可能真的会说学习人工智能超级简单！。</p><blockquote class="jd je jf"><p id="bef2" class="ie if jc ig b ih ii ij ik il im in io jg iq ir is jh iu iv iw ji iy iz ja jb ha bi translated">K3ai是一个由一个人维护的开源项目，所以如果你喜欢你刚刚阅读的内容，你喜欢这个想法，请在这个项目上加一颗星，这对我意义重大！在<a class="ae jz" href="https://github.com/k3ai/k3ai" rel="noopener ugc nofollow" target="_blank">https://github.com/k3ai/k3ai</a>检查项目</p></blockquote></div></div>    
</body>
</html>