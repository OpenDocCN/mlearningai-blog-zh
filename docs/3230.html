<html>
<head>
<title>Data Manipulation Using Dplyr In R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在R中使用Dplyr进行数据操作</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/data-manipulation-using-dplyr-in-r-9f930580f0e3?source=collection_archive---------1-----------------------#2022-08-07">https://medium.com/mlearning-ai/data-manipulation-using-dplyr-in-r-9f930580f0e3?source=collection_archive---------1-----------------------#2022-08-07</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="9268" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi jc translated">数据科学家将数据转化为信息，并将信息转化为洞察力。Dplyr是数据科学家最重要的工具，这就是为什么它经常被称为数据操作的语法，因为它提供了一组一致而有效的动词，用于解决最常见的数据操作挑战，如排列、汇总、过滤、变异和选择数据。Dplyr是tidyverse库的一部分，tidy verse库是为数据科学家设计的R包的集合，它们共享共同的设计理念、语法和数据结构。在本文中，我们将涵盖以下主题。</p><ul class=""><li id="654f" class="jl jm hh ig b ih ii il im ip jn it jo ix jp jb jq jr js jt bi translated">使用<code class="du ju jv jw jx b">filter(dataset, ...)</code>函数过滤数据集</li><li id="df73" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">使用<code class="du ju jv jw jx b">select(dataset, ...)</code>功能选择列</li><li id="8e53" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">使用<code class="du ju jv jw jx b">mutate(dataset, ... )</code>功能创建一个新列</li><li id="060a" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">使用<code class="du ju jv jw jx b">arrange(dataset, ...)</code>功能排列数据集</li><li id="e4c6" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">使用<code class="du ju jv jw jx b">summarise(dataset, ...)</code>函数汇总数据集</li><li id="26ed" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">使用<code class="du ju jv jw jx b">rename(dataset, ...)</code>功能重命名列名</li><li id="1fba" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">使用管道操作符将不同的数据操作函数链接到一个命令中。</li></ul><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kd"><img src="../Images/1d98ef73eb28d54b44a921092f977de2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*K-Ak3pSNy87FoAVY"/></div></div><figcaption class="kp kq et er es kr ks bd b be z dx">Photo by <a class="ae kt" href="https://unsplash.com/@jeshoots?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">JESHOOTS.COM</a> on <a class="ae kt" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="fdb4" class="ku kv hh bd kw kx ky kz la lb lc ld le ip lf lg lh it li lj lk ix ll lm ln lo bi translated">安装和加载软件包</h2><p id="e897" class="pw-post-body-paragraph ie if hh ig b ih lp ij ik il lq in io ip lr ir is it ls iv iw ix lt iz ja jb ha bi translated">我们将使用以下命令安装并加载<code class="du ju jv jw jx b">tidyverse </code>和<code class="du ju jv jw jx b">gapminder</code>包。</p><figure class="ke kf kg kh fd ki"><div class="bz dy l di"><div class="lu lv l"/></div></figure><ul class=""><li id="5d88" class="jl jm hh ig b ih ii il im ip jn it jo ix jp jb jq jr js jt bi translated">使用<code class="du ju jv jw jx b">head(gapminder, n = 5)</code>功能打印数据集的前五行。</li><li id="f6e9" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">使用<code class="du ju jv jw jx b">tail(gapminder, n = 5)</code>功能打印数据集的最后五行。</li><li id="d884" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">使用<code class="du ju jv jw jx b">summary(gapminder)</code>功能打印数据集摘要</li><li id="2f1e" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">使用<code class="du ju jv jw jx b">dim(gapminder)</code>功能打印数据集的尺寸</li></ul><figure class="ke kf kg kh fd ki"><div class="bz dy l di"><div class="lu lv l"/></div></figure><ul class=""><li id="c173" class="jl jm hh ig b ih ii il im ip jn it jo ix jp jb jq jr js jt bi translated"><code class="du ju jv jw jx b">gapminder </code>数据集有<code class="du ju jv jw jx b">1704 </code>行和<code class="du ju jv jw jx b">6</code>列。</li><li id="dff7" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">前三列是<code class="du ju jv jw jx b">country</code>、<code class="du ju jv jw jx b">continent</code>和<code class="du ju jv jw jx b">year</code></li><li id="331b" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">第4列是<code class="du ju jv jw jx b">lifeEx </code>，表示<code class="du ju jv jw jx b">life expectancy at birth</code></li><li id="d9fc" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">第五列是<code class="du ju jv jw jx b">pop </code>，意思是<code class="du ju jv jw jx b">total population</code></li><li id="a291" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">第6列是<code class="du ju jv jw jx b">gdpPercap </code>，意思是<code class="du ju jv jw jx b">per-capita GDP</code></li></ul><h1 id="7416" class="lw kv hh bd kw lx ly lz la ma mb mc le md me mf lh mg mh mi lk mj mk ml ln mm bi translated">过滤器</h1><p id="d760" class="pw-post-body-paragraph ie if hh ig b ih lp ij ik il lq in io ip lr ir is it ls iv iw ix lt iz ja jb ha bi translated"><code class="du ju jv jw jx b">filter(dataframe, col_1 &gt; value_1, col_2 == value_2, ...)</code></p><ul class=""><li id="233f" class="jl jm hh ig b ih ii il im ip jn it jo ix jp jb jq jr js jt bi translated">第一个论点是<code class="du ju jv jw jx b">dataframe</code>。</li><li id="423f" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">下一个参数是一个条件或由逗号分隔的条件链。条件的格式是<code class="du ju jv jw jx b">col_1 &gt; value_1</code>，其中<code class="du ju jv jw jx b">col_1 </code>是列的名称，然后是可以是六个关系符号(<code class="du ju jv jw jx b">&lt;, &gt;, ≤, ≥, ==, !=</code>)之一的<code class="du ju jv jw jx b">&gt;</code>，最后一部分是列的值<code class="du ju jv jw jx b">value_1 </code>。</li><li id="ed82" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">这些条件评估为布尔值(<code class="du ju jv jw jx b">TRUE, FALSE</code>)导致该行是否是结果集的一部分。</li><li id="6af7" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">过滤<code class="du ju jv jw jx b">continent == “Asia”</code>的记录</li><li id="825a" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">过滤<code class="du ju jv jw jx b">continent == “Asia”</code>和<code class="du ju jv jw jx b">year == 1992</code>的记录</li><li id="f2ec" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">过滤<code class="du ju jv jw jx b">continent == “Asia”</code>和<code class="du ju jv jw jx b">year == 1992</code>以及<code class="du ju jv jw jx b">country == ‘Pakistan’</code>的记录</li><li id="030e" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">过滤<code class="du ju jv jw jx b">continent == “Asia”</code>和<code class="du ju jv jw jx b">year == 1992</code>以及<code class="du ju jv jw jx b">country == ‘Pakistan’ | country == 'China'</code>的记录</li><li id="2420" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">过滤<code class="du ju jv jw jx b">continent == “Asia”</code>和<code class="du ju jv jw jx b">year == 1992</code>以及<code class="du ju jv jw jx b">country == ‘Pakistan’ | country == 'China' | country == ‘India’ | country == ‘United States’</code>的记录</li></ul><figure class="ke kf kg kh fd ki"><div class="bz dy l di"><div class="lu lv l"/></div></figure><h1 id="0252" class="lw kv hh bd kw lx ly lz la ma mb mc le md me mf lh mg mh mi lk mj mk ml ln mm bi translated">挑选</h1><p id="d1b5" class="pw-post-body-paragraph ie if hh ig b ih lp ij ik il lq in io ip lr ir is it ls iv iw ix lt iz ja jb ha bi translated"><code class="du ju jv jw jx b">select(dataframe, col_1, col_2, ...)</code></p><p id="efc2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du ju jv jw jx b">select </code>是一个<code class="du ju jv jw jx b">dplyr</code>动词，它将第一个参数作为一个<code class="du ju jv jw jx b">dataset </code>和您想要选择的一列或一系列列。</p><ul class=""><li id="cdcf" class="jl jm hh ig b ih ii il im ip jn it jo ix jp jb jq jr js jt bi translated">选择<code class="du ju jv jw jx b">gapminder </code>数据集的<code class="du ju jv jw jx b">country</code>、<code class="du ju jv jw jx b">lifeExp </code>和<code class="du ju jv jw jx b">gdpPercap </code>列</li><li id="436e" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">使用范围操作符(<code class="du ju jv jw jx b">:</code>)选择从<code class="du ju jv jw jx b">country </code>到<code class="du ju jv jw jx b">lifeExp</code>的列</li><li id="b529" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">使用<code class="du ju jv jw jx b">everything()</code>参数选择所有列</li><li id="82dd" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">使用<code class="du ju jv jw jx b">last_col()</code>参数选择最后一列</li><li id="b3b4" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">使用<code class="du ju jv jw jx b">starts_with()</code>参数选择以前缀开头的列</li><li id="07bf" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">使用<code class="du ju jv jw jx b">ends_with()</code>参数选择以后缀结尾的列</li></ul><figure class="ke kf kg kh fd ki"><div class="bz dy l di"><div class="lu lv l"/></div></figure><h1 id="e555" class="lw kv hh bd kw lx ly lz la ma mb mc le md me mf lh mg mh mi lk mj mk ml ln mm bi translated">使突变</h1><p id="4c6c" class="pw-post-body-paragraph ie if hh ig b ih lp ij ik il lq in io ip lr ir is it ls iv iw ix lt iz ja jb ha bi translated"><code class="du ju jv jw jx b">mutate(dataset, new_col = col1 * some_value, ...)</code></p><p id="b032" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">变化动词用于创建新的数据列或改变列的数据类型等。例如，我们有关于<code class="du ju jv jw jx b">pop </code>人口和<code class="du ju jv jw jx b">gdpPercap</code>的数据，我们想要计算<code class="du ju jv jw jx b">gdp</code>。</p><ul class=""><li id="fd6d" class="jl jm hh ig b ih ii il im ip jn it jo ix jp jb jq jr js jt bi translated">创建新列<code class="du ju jv jw jx b">gdp</code></li><li id="eaae" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">将<code class="du ju jv jw jx b">lifeExp </code>的数据类型改为整数</li></ul><figure class="ke kf kg kh fd ki"><div class="bz dy l di"><div class="lu lv l"/></div></figure><h1 id="7136" class="lw kv hh bd kw lx ly lz la ma mb mc le md me mf lh mg mh mi lk mj mk ml ln mm bi translated">安排</h1><p id="f060" class="pw-post-body-paragraph ie if hh ig b ih lp ij ik il lq in io ip lr ir is it ls iv iw ix lt iz ja jb ha bi translated"><code class="du ju jv jw jx b">arrange(dataset, col_1, desc(col_2))</code></p><p id="fe31" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">它根据所选列的值对数据框的行进行排序。</p><ul class=""><li id="bbc4" class="jl jm hh ig b ih ii il im ip jn it jo ix jp jb jq jr js jt bi translated">按<code class="du ju jv jw jx b">pop </code>列升序排列<code class="du ju jv jw jx b">gapminder </code>数据集。</li><li id="7c73" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">按照<code class="du ju jv jw jx b">country </code>列降序排列<code class="du ju jv jw jx b">gapminder </code>数据集。</li><li id="a34c" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">按照<code class="du ju jv jw jx b">country </code>列升序和<code class="du ju jv jw jx b">pop </code>列降序排列<code class="du ju jv jw jx b">gapminder </code>数据集。</li></ul><figure class="ke kf kg kh fd ki"><div class="bz dy l di"><div class="lu lv l"/></div></figure><h1 id="4f87" class="lw kv hh bd kw lx ly lz la ma mb mc le md me mf lh mg mh mi lk mj mk ml ln mm bi translated">概括</h1><p id="167a" class="pw-post-body-paragraph ie if hh ig b ih lp ij ik il lq in io ip lr ir is it ls iv iw ix lt iz ja jb ha bi translated"><code class="du ju jv jw jx b">arrange(dataset, mean(col_01), sd(col_2), ...)</code></p><p id="769e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Summarise函数用于计算数据集中的常见统计数据。例如</p><ul class=""><li id="c531" class="jl jm hh ig b ih ii il im ip jn it jo ix jp jb jq jr js jt bi translated">你要计算中国的平均值<code class="du ju jv jw jx b">lifeExp </code>和标准差<code class="du ju jv jw jx b">lifeExp </code>。</li><li id="e7af" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">你要计算欧洲人口的<code class="du ju jv jw jx b">IQR, min, max</code>和<code class="du ju jv jw jx b">mean </code>(<code class="du ju jv jw jx b">pop</code>)。</li></ul><figure class="ke kf kg kh fd ki"><div class="bz dy l di"><div class="lu lv l"/></div></figure><h1 id="2b98" class="lw kv hh bd kw lx ly lz la ma mb mc le md me mf lh mg mh mi lk mj mk ml ln mm bi translated">重新命名</h1><p id="f4ee" class="pw-post-body-paragraph ie if hh ig b ih lp ij ik il lq in io ip lr ir is it ls iv iw ix lt iz ja jb ha bi translated"><code class="du ju jv jw jx b">rename(dataset, new_col = old_col1, ...)</code></p><p id="2cfd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">重命名谓词用于重命名数据集的列。例如，您有一个<code class="du ju jv jw jx b">gapminder </code>数据集，您想将它的列(如<code class="du ju jv jw jx b">pop </code>重命名为<code class="du ju jv jw jx b">population </code>，将<code class="du ju jv jw jx b">lifeExp </code>重命名为<code class="du ju jv jw jx b">life_exp</code>。</p><figure class="ke kf kg kh fd ki"><div class="bz dy l di"><div class="lu lv l"/></div></figure><h1 id="c12e" class="lw kv hh bd kw lx ly lz la ma mb mc le md me mf lh mg mh mi lk mj mk ml ln mm bi translated">管道操作员</h1><p id="5286" class="pw-post-body-paragraph ie if hh ig b ih lp ij ik il lq in io ip lr ir is it ls iv iw ix lt iz ja jb ha bi translated">管道运算符用于链接tidyverse动词。例如，您想要对下面给出的<code class="du ju jv jw jx b">gapminder </code>数据集执行三个操作。</p><ul class=""><li id="a5ec" class="jl jm hh ig b ih ii il im ip jn it jo ix jp jb jq jr js jt bi translated">你想过滤亚洲的数据集</li><li id="a03c" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">仅选择国家/地区和lifeExp列</li><li id="9079" class="jl jm hh ig b ih jy il jz ip ka it kb ix kc jb jq jr js jt bi translated">按照lifeExp升序排列数据集，按照country降序排列数据集。</li></ul><p id="41bc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">管道操作符用于将这三个动词组合成一个命令。</p><figure class="ke kf kg kh fd ki"><div class="bz dy l di"><div class="lu lv l"/></div></figure><h1 id="61cc" class="lw kv hh bd kw lx ly lz la ma mb mc le md me mf lh mg mh mi lk mj mk ml ln mm bi translated">结论</h1><p id="e074" class="pw-post-body-paragraph ie if hh ig b ih lp ij ik il lq in io ip lr ir is it ls iv iw ix lt iz ja jb ha bi translated">在本文中，我们介绍了dplyr包中非常重要的功能，比如过滤、选择、排列、总结、重命名、改变数据集，以及将不同操作链接到单个命令中的管道操作符。</p><div class="mn mo ez fb mp mq"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="mr ab dw"><div class="ms ab mt cl cj mu"><h2 class="bd hi fi z dy mv ea eb mw ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="mx l"><h3 class="bd b fi z dy mv ea eb mw ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="my l"><p class="bd b fp z dy mv ea eb mw ed ef dx translated">medium.com</p></div></div><div class="mz l"><div class="na l nb nc nd mz ne kn mq"/></div></div></a></div></div></div>    
</body>
</html>