<html>
<head>
<title>Applying Machine Learning for A/B Testing: Ad Campaign Performance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将机器学习应用于A/B测试:广告活动绩效</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/applying-machine-learning-for-a-b-testing-ad-campaign-performance-896e4fd4252b?source=collection_archive---------10-----------------------#2022-05-22">https://medium.com/mlearning-ai/applying-machine-learning-for-a-b-testing-ad-campaign-performance-896e4fd4252b?source=collection_archive---------10-----------------------#2022-05-22</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><h1 id="8395" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak">概述</strong></h1><p id="b252" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">一般来说，A/B测试是一种比较两个模型以确定哪个表现更好的方法。</p><p id="e337" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">本博客涵盖以下几点:</p><ul class=""><li id="903c" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kk kl km kn bi translated">A/B测试基础</li><li id="090a" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">经典A/B测试的局限性和挑战</li><li id="bed3" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">顺序A/B测试的利弊</li><li id="08d2" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">机器学习环境下的A/B测试公式</li><li id="ad85" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">数据审查和ML A/B测试结果</li><li id="774e" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">MLFlow和DVC在ML实验中的优势</li></ul><h1 id="dbe9" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak">A/B测试的基础及其用例</strong></h1><p id="0c65" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">A/B测试，也称为桶测试，是一种随机向用户展示产品的两个变体，然后使用不同的统计分析方法来确定哪个变体推动更多的转化的实验。</p><p id="78f4" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">这种分析是在不同的学科领域进行的。以下是一些使用案例，</p><ul class=""><li id="20e0" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kk kl km kn bi translated">重新设计网站</li><li id="d8e8" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">服务、功能或插件的变更</li><li id="d1d6" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">产品或服务价格的变化</li></ul><p id="ce40" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">从技术上讲，A/B测试是一种统计和双样本假设测试。统计假设检验是一种A/B检验，将样本数据与总体数据进行比较。而双样本假设检验是对两个样本之间的差异是否具有统计显著性的衡量。</p><p id="ddbb" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">尽管A/B测试有各种各样的用例，但在这里，我们将讨论数据科学领域的应用，特别是一个广告活动项目。</p><p id="9ec0" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">该项目正在对从广告公司收集的关于用户对广告的反应的数据进行A/B假设检验。在项目中，我做了三种A/B测试，分别是:</p><ul class=""><li id="b555" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kk kl km kn bi translated">经典A/B测试</li><li id="d548" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">顺序A/B测试</li><li id="2616" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">用于A/B测试的机器学习</li></ul><h1 id="cb7b" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak">经典A/B测试</strong></h1><p id="0d24" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">经典的A/B测试基本上是根据计算出的样本大小进行的测试。样本大小是根据我期望测试检测到的阈值效应来计算的。</p><p id="f4b8" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated"><strong class="je hi">传统A/B测试的局限性和挑战</strong></p><p id="b3fe" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">经典A/B测试的主要限制是，它需要非常大的数据集才能得到好的结果，而用少量数据进行这种测试最终会得到不可靠的输出。</p><h1 id="c2d9" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">顺序A/B测试</h1><p id="ca6b" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">序贯A/B测试是一种通过使用一小部分数据来测试我们的假设的测试。</p><p id="f94e" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">顺序过程是这样工作的:</p><ol class=""><li id="fd4a" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kt kl km kn bi translated">首先，我选择一个样本大小的𝑁N.</li><li id="d282" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kt kl km kn bi translated">将受试者随机分配到治疗组和对照组，每组50%的概率。</li><li id="c7f3" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kt kl km kn bi translated">跟踪来自治疗组的成功数量。打这个号码到𝑇T.</li><li id="e7f4" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kt kl km kn bi translated">跟踪从控制组传入的成功次数。打这个号码到𝐶C.</li><li id="2ca5" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kt kl km kn bi translated">如果𝑇−𝐶T−C到达2𝑁‾‾√2N，停止试验。宣布治疗为获胜者。</li><li id="7742" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kt kl km kn bi translated">如果𝑇+𝐶T+C到达𝑁N，停止试验。宣布没有赢家。</li></ol><p id="dd68" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated"><strong class="je hi">顺序A/B测试的利弊</strong></p><p id="8b48" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">优点:</p><ul class=""><li id="4a04" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kk kl km kn bi translated">在实验上花更少的时间</li><li id="6aaa" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">减少交通费用</li><li id="db88" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">降低出错的可能性</li><li id="8d5a" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">减少所需的转换数量</li></ul><p id="e71c" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">骗局</p><ul class=""><li id="b06d" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kk kl km kn bi translated">由于使用小样本数据而丢失的信息</li><li id="8e34" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">复杂性增加</li></ul><h1 id="8680" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">机器学习环境下的A/B测试公式</h1><p id="6ec6" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">与统计推断不同，机器学习算法使我们能够对包括所有正在发生的事件、用户特征等在内的复杂系统进行建模。有许多算法，每种算法都有优缺点。</p><p id="3db7" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">在这个项目中，我通过四种不同的算法使用五重交叉验证来训练一个模型。这些是；</p><ul class=""><li id="1208" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kk kl km kn bi translated">逻辑回归</li><li id="d89f" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">决策图表</li><li id="adcf" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">XGBoost</li><li id="db9a" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">随机森林</li></ul><h1 id="9b55" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">数据审查和ML A/B测试结果</h1><p id="163d" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">我使用的数据有9个特征和8077个实例，它是从一个公司的广告活动中收集的。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es ku"><img src="../Images/3abf1ad84b2e4035244bf21ebfe56ac5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qdEMVdVU3-a6RrYF8fdHQg.png"/></div></div></figure><p id="d59e" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">该数据具有零空值，并且具有分类数据，我需要将其转换为数字来训练模型。</p><p id="205e" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">数据快照如下所示:</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lg"><img src="../Images/0a7430b59f4d43bc8c9b662069797aa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oXwiN2tXot3MlrEE7iJcxA.png"/></div></div></figure><p id="8b08" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">获得关于数据的基本信息后，我探索了每个特性所具有的独特值，并将其可视化为图表。</p><ol class=""><li id="9465" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kt kl km kn bi translated">实验</li></ol><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lh"><img src="../Images/87f78e6c4ec90cc70830f6ce12880e44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BQwe4wLvVSwPkWLN69o38g.png"/></div></div></figure><p id="4dfe" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">从这一形象化来看，暴露组和对照组的数值在数量上是平衡的。</p><p id="f8cd" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">2.日期</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es li"><img src="../Images/f5d810930c61cff6423b8d2acd5f15a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vdLHr7hc5imDe8-Or2T8XA.png"/></div></div></figure><p id="4a00" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">从图中我可以推断出第一天接待的游客数量是其余几天中最多的。</p><p id="6211" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">3.小时</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lh"><img src="../Images/85476db7751afddd4009e1187cd609dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*soiCY6Ae1Qwc-i3zSXREcQ.png"/></div></div></figure><p id="13e4" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">15小时是最繁忙的，因为游客流量非常高，几乎是平均休息时间的3倍。</p><p id="3043" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">3.平台操作系统</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lh"><img src="../Images/2fcd78a22cb7bfc068f35826e3627935.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-VQiWKFmXRaZQJgVUTwzxQ.png"/></div></div></figure><p id="eb9d" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">从数据来看，大多数用户都使用标记为“6”的操作系统。</p><p id="9f98" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">4.浏览器</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lj"><img src="../Images/a59dfbc0a0cba3bad4cee1da825501d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KlgPFIbc8mFxWl6TeSscAg.png"/></div></div></figure><p id="58dc" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">Chrome浏览器是用户中使用最多的浏览器。</p><p id="6482" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">5.是</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lk"><img src="../Images/3b18b3e7cc4cfeb48fa5dc1e012d45d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gJeP33V2NklMYqi0r_3K7A.png"/></div></div></figure><p id="89fb" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">6.不</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es ll"><img src="../Images/6196e6fd4555ab3a3d871ef5cb091b86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6KqMPgLu3H33toTi7LotbQ.png"/></div></div></figure><p id="c176" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">因为上面的数据有分类值(不是数字)，所以我用标签编码器把它们转换成数字。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lm"><img src="../Images/87aec608e0cddce4ca4dad32eca9190b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FwhTW3JhuoxOj2DUDd58KQ.png"/></div></div></figure><p id="6d7d" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">然后，我得到以下数据作为输出</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es ln"><img src="../Images/dd3464dcaf9ca9fb79e6ca76dc2bc6e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HOBSLs97luPO2QP-rHKjdw.png"/></div></div></figure><p id="d240" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">在标签编码之后，我将数据分割成训练、测试和验证数据集来进行训练。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lo"><img src="../Images/900d0c1a426341865ce1ec65f315e5ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jv4aN9JU0R4DokqE-rlX1g.png"/></div></div></figure><p id="d1b0" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">然后我用训练数据在我前面提到的四种算法中训练model，得到如下输出精度。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lp"><img src="../Images/f224d8a9463457ab0158280364edbaaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lKyTREdZgwGjHczWnerZsg.png"/></div></div></figure><p id="5be1" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">在训练模型时，我集成了MLFlow和DVC。我用MLFlow来记录我的训练信息并跟踪它，用DVC来处理不同版本的数据。</p><h1 id="261e" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">MLFlow和DVC在ML实验中的优势</h1><p id="ab96" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">在对我们拥有的数据进行多重分析时，使用MLFlow和DVC非常重要。MLFlow帮助我们注册模型，并跟踪实验中的差异和改进。而DVC帮助我们管理实验中使用的不同版本的数据。</p><p id="1ee5" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">在这个项目中，我使用了这两种工具，并帮助我轻松地管理上述困难，并随着时间的推移可视化我的培训。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lq"><img src="../Images/e063faf1f4ce4ffdb1096ab7b6767836.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vR3BX0JcqNFxrqff9CBnQQ.jpeg"/></div></div></figure><h1 id="b48c" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">研究的局限性</h1><p id="a6d6" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">这项研究的局限性在于它试图用非常少量的数据进行分析和测试。这阻碍了对需要大数据集的逻辑回归等算法得出可靠的结论。因此，对于更大的数据集，实验的输出可能会改变。</p><div class="lr ls ez fb lt lu"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="lv ab dw"><div class="lw ab lx cl cj ly"><h2 class="bd hi fi z dy lz ea eb ma ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="mb l"><h3 class="bd b fi z dy lz ea eb ma ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="mc l"><p class="bd b fp z dy lz ea eb ma ed ef dx translated">medium.com</p></div></div><div class="md l"><div class="me l mf mg mh md mi le lu"/></div></div></a></div></div></div>    
</body>
</html>