<html>
<head>
<title>Power Flow to automate Azure Cognitive Services QnA Maker Train and Publish</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">自动化Azure认知服务QnA Maker培训和发布的功率流</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/power-flow-to-automate-azure-cognitive-services-qna-maker-train-and-publish-129af2f4e196?source=collection_archive---------5-----------------------#2022-03-05">https://medium.com/mlearning-ai/power-flow-to-automate-azure-cognitive-services-qna-maker-train-and-publish-129af2f4e196?source=collection_archive---------5-----------------------#2022-03-05</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><h1 id="14ee" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">更新知识库、培训和发布QnA制造商的自动化流程</h1><h1 id="7c6a" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">用例</h1><ul class=""><li id="ff5d" class="jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt bi translated">创建QnA制造商知识库</li><li id="8117" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">基于blob触发器更新知识库的能力</li><li id="21cd" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">更新知识库</li><li id="1002" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">培训和发布QnA制造商</li><li id="9596" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">使用功率流</li></ul><h1 id="fac1" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">整个过程</h1><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es jz"><img src="../Images/7d794c84736e63eef09ab630961d94c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*koLQcz1jAvQacbPh.jpg"/></div></div></figure><h1 id="3b44" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">步伐</h1><ul class=""><li id="2e31" class="jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt bi translated">首先用blob触发器创建一个功率流</li><li id="6a58" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">配置存储帐户名称并使用密钥进行身份验证</li></ul><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es kl"><img src="../Images/547e002f3de191829e724a39c094c7e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MKbsr7WgvwllqVnb.jpg"/></div></div></figure><ul class=""><li id="d645" class="jc jd hh je b jf km jh kn jj ko jl kp jn kq jp jq jr js jt bi translated">接下来引入HTTP任务来更新知识库</li><li id="9267" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">查看端点URL</li><li id="f7ca" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">用QnA Maker UI中的实际知识库id替换xxxxxxxxxxxxxxxxxxxxxxx中的知识库id</li><li id="e252" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">qna Maker UI<a class="ae kr" href="https://qnamaker.ai/" rel="noopener ugc nofollow" target="_blank">Https://qnamaker.ai/</a></li></ul><pre class="ka kb kc kd fd ks kt ku kv aw kw bi"><span id="346a" class="kx if hh kt b fi ky kz l la lb">Method: PATCH<br/>URL: https://qnaservicename.cognitiveservices.azure.com/qnamaker/v4.0/knowledgebases/xxxxxxxxxxxxxxxxxxxxxx<br/>Ocp-Apim-Subscription-Key: Primary or Secondary Key from Azure Portal<br/>Content-Type: application/json</span></pre><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es lc"><img src="../Images/2c870a5388ba5a668714c590ce0dbfec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JM5eBWpwRnuxPB-0.jpg"/></div></div></figure><ul class=""><li id="420c" class="jc jd hh je b jf km jh kn jj ko jl kp jn kq jp jq jr js jt bi translated">这是我们传递的数据</li></ul><pre class="ka kb kc kd fd ks kt ku kv aw kw bi"><span id="93fb" class="kx if hh kt b fi ky kz l la lb">{<br/>  "add": {<br/>    "qnaList": [<br/>      {<br/>        "id": 0,<br/>        "answer": "You can change the default message if you use the QnAMakerDialog. See this for details: https://docs.botframework.com/en-us/azure-bot-service/templates/qnamaker/#navtitle",<br/>        "source": "Custom Editorial",<br/>        "questions": [<br/>          "How can I change the default message from QnA Maker?"<br/>        ],<br/>        "metadata": []<br/>      }<br/>    ],<br/>    "urls": [<br/>      "https://docs.microsoft.com/en-us/azure/cognitive-services/Emotion/FAQ"<br/>    ],<br/>    "files": [<br/>      {<br/>        "fileName": "SurfaceManual.pdf",<br/>        "fileUri": "https://download.microsoft.com/download/2/9/B/29B20383-302C-4517-A006-B0186F04BE28/surface-pro-4-user-guide-EN.pdf"<br/>      }<br/>    ]<br/>  },<br/>  "delete": {<br/>    "ids": [<br/>      13,<br/>      35<br/>    ]<br/>  },<br/>  "update": {<br/>    "name": "QnA Maker FAQ Prompts Bot",<br/>    "qnaList": [<br/>      {<br/>        "id": 2,<br/>        "answer": "You can use our REST apis to create a KB. See here for details: https://docs.microsoft.com/en-us/rest/api/cognitiveservices/qnamaker/knowledgebase/create",<br/>        "source": "Custom Editorial",<br/>        "questions": {<br/>          "add": [],<br/>          "delete": []<br/>        },<br/>        "metadata": {<br/>          "add": [],<br/>          "delete": []<br/>        },<br/>        "context": {<br/>          "isContextOnly": false,<br/>          "promptsToAdd": [<br/>            {<br/>              "displayText": "Add Prompts",<br/>              "displayOrder": 0,<br/>              "qna": {<br/>                "id": 0,<br/>                "answer": "Click here to know more https://docs.microsoft.com/en-us/azure/cognitive-services/qnamaker/how-to/multiturn-conversation",<br/>                "source": "Editorial",<br/>                "questions": [<br/>                  "How can I add prompts?"<br/>                ],<br/>                "metadata": [],<br/>                "context": {<br/>                  "isContextOnly": false,<br/>                  "prompts": []<br/>                }<br/>              },<br/>              "qnaId": 0<br/>            },<br/>            {<br/>              "displayText": "Delete Prompts",<br/>              "displayOrder": 0,<br/>              "qna": {<br/>                "id": 0,<br/>                "answer": "Click here to know more https://docs.microsoft.com/en-us/azure/cognitive-services/qnamaker/how-to/multiturn-conversation",<br/>                "source": "Editorial",<br/>                "questions": [<br/>                  "How can I delete delete prompts?"<br/>                ],<br/>                "metadata": [],<br/>                "context": {<br/>                  "isContextOnly": false,<br/>                  "prompts": []<br/>                }<br/>              },<br/>              "qnaId": 0<br/>            },<br/>            {<br/>              "displayText": "Update Knowledgebase",<br/>              "displayOrder": 0,<br/>              "qna": null,<br/>              "qnaId": 3<br/>            }<br/>          ],<br/>          "promptsToDelete": [<br/>            3<br/>          ]<br/>        }<br/>      },<br/>      {<br/>        "id": 3,<br/>        "answer": "You can use our REST apis to update your KB. See here for details: https://docs.microsoft.com/en-us/rest/api/cognitiveservices/qnamaker/knowledgebase/update",<br/>        "source": "Custom Editorial",<br/>        "questions": {<br/>          "add": [],<br/>          "delete": []<br/>        },<br/>        "metadata": {<br/>          "delete": [<br/>            {<br/>              "name": "category",<br/>              "value": "api"<br/>            }<br/>          ],<br/>          "add": [<br/>            {<br/>              "name": "category",<br/>              "value": "programmatic"<br/>            }<br/>          ]<br/>        },<br/>        "context": {<br/>          "isContextOnly": false,<br/>          "promptsToAdd": [<br/>            {<br/>              "displayText": "Regenerate Endpoint keys",<br/>              "displayOrder": 1,<br/>              "qna": null,<br/>              "qnaId": 4<br/>            }<br/>          ],<br/>          "promptsToDelete": [<br/>            4<br/>          ]<br/>        }<br/>      }<br/>    ]<br/>  }<br/>}</span></pre><ul class=""><li id="d8e3" class="jc jd hh je b jf km jh kn jj ko jl kp jn kq jp jq jr js jt bi translated">现在让我们来训练知识库文章</li><li id="63fc" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">方法:邮寄</li></ul><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es ld"><img src="../Images/b9140be4782b63a83e7a0e612b786c1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KwplhwvnC3MIwaZx.jpg"/></div></div></figure><ul class=""><li id="74af" class="jc jd hh je b jf km jh kn jj ko jl kp jn kq jp jq jr js jt bi translated">这里有一些变化，网址是不同的</li></ul><pre class="ka kb kc kd fd ks kt ku kv aw kw bi"><span id="0b9d" class="kx if hh kt b fi ky kz l la lb">URL: https://qnaservice.azurewebsites.net/qnamaker/knowledgebases/xxxxxxx/train<br/>Authorization: Key from QNA Maker portal Publish screen</span><span id="596a" class="kx if hh kt b fi le kz l la lb">Method: POST<br/>Content-Type: application/json</span><span id="ba21" class="kx if hh kt b fi le kz l la lb">{<br/>  "feedbackRecords": [<br/>    {<br/>      "userId": "sd53lsY=",<br/>      "userQuestion": "qna maker with luis",<br/>      "qnaId": 4<br/>    }<br/>  ]<br/>}</span></pre><ul class=""><li id="96a7" class="jc jd hh je b jf km jh kn jj ko jl kp jn kq jp jq jr js jt bi translated">培训后发布知识库</li><li id="d0f1" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">方法:邮寄</li></ul><pre class="ka kb kc kd fd ks kt ku kv aw kw bi"><span id="4dc1" class="kx if hh kt b fi ky kz l la lb">Ocp-Apim-Subscription-Key: Primary or Secondary Key from Azure Portal</span></pre><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es lf"><img src="../Images/ede4830c618dac9b970d1e1f61b7473b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rmeMzc2gHEy-LPWq.jpg"/></div></div></figure><ul class=""><li id="8729" class="jc jd hh je b jf km jh kn jj ko jl kp jn kq jp jq jr js jt bi translated">保存并运行测试</li><li id="1a22" class="jc jd hh je b jf ju jh jv jj jw jl jx jn jy jp jq jr js jt bi translated">将文档上传到blob以触发</li></ul><figure class="ka kb kc kd fd ke er es paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="er es lg"><img src="../Images/0a991c3b0819ca924e2f60e25da63f53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VNAHYD3IZsl52CGr.jpg"/></div></div></figure><p id="bb44" class="pw-post-body-paragraph lh li hh je b jf km lj lk jh kn ll lm jj ln lo lp jl lq lr ls jn lt lu lv jp ha bi translated">原文—【github.com】samples 2022/qna flow . MD at main balakreshnan/samples 2022</p><div class="lw lx ez fb ly lz"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="ma ab dw"><div class="mb ab mc cl cj md"><h2 class="bd hi fi z dy me ea eb mf ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="mg l"><h3 class="bd b fi z dy me ea eb mf ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="mh l"><p class="bd b fp z dy me ea eb mf ed ef dx translated">medium.com</p></div></div><div class="mi l"><div class="mj l mk ml mm mi mn kj lz"/></div></div></a></div></div></div>    
</body>
</html>