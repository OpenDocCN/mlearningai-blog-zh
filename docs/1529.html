<html>
<head>
<title>MLOps: Building ML Pipeline Part-1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MLOps:构建ML管道第1部分</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/mlops-building-ml-pipeline-part-1-e30783287d0d?source=collection_archive---------2-----------------------#2021-12-31">https://medium.com/mlearning-ai/mlops-building-ml-pipeline-part-1-e30783287d0d?source=collection_archive---------2-----------------------#2021-12-31</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/1ca091685ef7fb372de3fef810e89d88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*jRVuvt7O_aDpjSKp3h-CEg.png"/></div><figcaption class="il im et er es in io bd b be z dx">Pic from <a class="ae ip" href="https://ml-ops.org/" rel="noopener ugc nofollow" target="_blank">https://ml-ops.org/</a></figcaption></figure><p id="58cf" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">在学习了ML/DL的核心概念并把知识运用到实践中之后，这真的很难，也很有挑战性。下一步是我们如何使ML/DL项目更适合生产。因此，为了更多地了解生产流水线，我报名参加了由DeepLearning提供的面向生产的机器学习工程(MLOps)专业课程。AI 由<a class="ae ip" href="https://www.linkedin.com/company/coursera/" rel="noopener ugc nofollow" target="_blank">Coursera</a>&amp;<a class="ae ip" href="https://www.linkedin.com/company/google/" rel="noopener ugc nofollow" target="_blank">Google</a>编写，它非常直观，并提供了如何制作合适的生产流水线。</p><p id="9ef6" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">通过完成这门课程，我已经通过O'Reilly的书《构建机器学习管道》阅读了更多关于Tensorflow自动模型生命周期的内容</p><p id="17e2" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">这一系列文章仅仅是我从这本书中学到的，所以我将一章一章地描述构建ML管道的关键概念。</p><h2 id="31ae" class="jp jq hh bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated"><strong class="ak">什么是机器学习管道？</strong></h2><blockquote class="kk kl km"><p id="3295" class="iq ir jo is b it iu iv iw ix iy iz ja kn jc jd je ko jg jh ji kp jk jl jm jn ha bi translated">机器学习管道实现并形式化了加速、重用、管理和部署机器学习模型的过程。</p></blockquote><p id="ef1a" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">自动化的、可重复的管道减少了部署模型所需的工作。管道应包括以下步骤:</p><ul class=""><li id="05cc" class="kq kr hh is b it iu ix iy jb ks jf kt jj ku jn kv kw kx ky bi translated">有效地将您的数据版本化，并开始新的模型训练</li><li id="776a" class="kq kr hh is b it kz ix la jb lb jf lc jj ld jn kv kw kx ky bi translated">验证收到的数据并检查数据漂移</li><li id="a3ca" class="kq kr hh is b it kz ix la jb lb jf lc jj ld jn kv kw kx ky bi translated">为您的模型训练和验证有效地预处理数据</li><li id="404b" class="kq kr hh is b it kz ix la jb lb jf lc jj ld jn kv kw kx ky bi translated">有效地训练你的机器学习模型</li><li id="f91b" class="kq kr hh is b it kz ix la jb lb jf lc jj ld jn kv kw kx ky bi translated">追踪你的模特训练</li><li id="9f9c" class="kq kr hh is b it kz ix la jb lb jf lc jj ld jn kv kw kx ky bi translated">分析和验证您训练和调整的模型</li><li id="8f64" class="kq kr hh is b it kz ix la jb lb jf lc jj ld jn kv kw kx ky bi translated">部署经验证的模型</li><li id="8154" class="kq kr hh is b it kz ix la jb lb jf lc jj ld jn kv kw kx ky bi translated">缩放部署的模型</li><li id="4d3f" class="kq kr hh is b it kz ix la jb lb jf lc jj ld jn kv kw kx ky bi translated">捕获新的培训数据，并利用反馈循环对绩效指标进行建模</li></ul><h1 id="0264" class="le jq hh bd jr lf lg lh jv li lj lk jz ll lm ln kc lo lp lq kf lr ls lt ki lu bi translated">这个列表忽略了重要的一点:选择模型架构。我假设您已经很好地掌握了这一步的工作知识，这是本系列的先决条件。</h1></div><div class="ab cl lv lw go lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ha hb hc hd he"><p id="bce0" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">目前，有多种框架/工具可以支持ML管道，但由于书中提到了Tensorflow和Tensorflow extended，所以我也将遵循相同的方向。</p><h2 id="7a91" class="jp jq hh bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated"><strong class="ak">TensorFlow和tensor flow为什么要扩展？</strong></h2><ul class=""><li id="8b15" class="kq kr hh is b it mc ix md jb me jf mf jj mg jn kv kw kx ky bi translated">在撰写本文时，TensorFlow生态系统是机器学习最广泛可用的生态系统。它包括多个有用的项目和超出其核心焦点的支持库，如TensorFlow Privacy和TensorFlow Probability。</li><li id="d089" class="kq kr hh is b it kz ix la jb lb jf lc jj ld jn kv kw kx ky bi translated">它很受欢迎，广泛应用于各种小型和大型生产环境中，并且有一个活跃的感兴趣的用户社区。</li><li id="893e" class="kq kr hh is b it kz ix la jb lb jf lc jj ld jn kv kw kx ky bi translated">支持的用例从学术研究到生产中的机器学习。TFX与生产用例的核心TensorFlow平台紧密集成。</li><li id="4c39" class="kq kr hh is b it kz ix la jb lb jf lc jj ld jn kv kw kx ky bi translated">TensorFlow和TFX都是开源工具，使用没有限制。</li></ul></div><div class="ab cl lv lw go lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ha hb hc hd he"><h1 id="fd30" class="le jq hh bd jr lf mh lh jv li mi lk jz ll mj ln kc lo mk lq kf lr ml lt ki lu bi translated">机器学习管道的组件</h1><figure class="mn mo mp mq fd ii er es paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="er es mm"><img src="../Images/c6bd77d5a551f125be8b85fd1a53e207.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t7xwIDUK6a57BiRRqJ8F2g.png"/></div></div><figcaption class="il im et er es in io bd b be z dx">Image from the book</figcaption></figure><p id="67a4" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">从上面的图片中，可以清楚地看到ML管道的生命周期，但是我们将在下一篇文章中进行更多的讨论。</p><h2 id="e70c" class="jp jq hh bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">数据接收和数据版本控制</h2><blockquote class="kk kl km"><p id="111d" class="iq ir jo is b it iu iv iw ix iy iz ja kn jc jd je ko jg jh ji kp jk jl jm jn ha bi translated">数据摄取是每个机器学习管道中的第一步，我们只需将数据处理成后续组件可以消化的专用格式。此外，这可以在数据投入生产和新数据到达时处理多个版本的数据。</p></blockquote><h2 id="eb56" class="jp jq hh bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">数据有效性</h2><blockquote class="kk kl km"><p id="72d6" class="iq ir jo is b it iu iv iw ix iy iz ja kn jc jd je ko jg jh ji kp jk jl jm jn ha bi translated">在训练新的模型版本之前，这是流水线中非常关键的一步。这意味着，一旦ML模型投入生产并且运行良好，几天后管道就会收到新数据，因此在将新数据输入模型之前，我们需要对其进行验证。<br/>数据验证的重点是检查新数据的统计数据是否符合预期(例如，范围、类别数量和类别分布)。如果检测到任何异常，它还会提醒数据科学家。例如，如果您正在训练一个二元分类模型，您的训练数据可能包含50%的X类样本和50%的Y类样本。如果这些类之间的划分发生变化，数据验证工具会提供警报，其中新收集的数据可能会在两个类之间按70/30的比例进行划分。如果模型正在使用这种不平衡的训练集进行训练，并且数据科学家尚未调整模型的损失函数，或者过采样/欠采样类别X或Y，则模型预测可能会偏向主导类别。<br/>如果您有一个带有主导标签的数据集，并且您将该数据集拆分为一个训练集和一个验证集，您需要确保这两个数据集之间的标签拆分大致相同。一旦观察到这种行为，数据科学家或ML工程师就可以改变超参数，并启动生命周期来调整新数据。</p></blockquote><h2 id="479b" class="jp jq hh bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">数据预处理</h2><blockquote class="kk kl km"><p id="2d32" class="iq ir jo is b it iu iv iw ix iy iz ja kn jc jd je ko jg jh ji kp jk jl jm jn ha bi translated">这一步发生在模型训练之前，在模型训练中，我们将根据我们的需要操作数据，如on-multi hot vector或对于文本数据，将文本转换为标记符。由于仅在模型训练之前需要预处理，而不是在每个训练时期都需要预处理，因此在训练模型之前，在其自己的生命周期步骤中运行预处理是最有意义的。</p></blockquote><h2 id="caf3" class="jp jq hh bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">模型训练和调整</h2><blockquote class="kk kl km"><p id="f917" class="iq ir jo is b it iu iv iw ix iy iz ja kn jc jd je ko jg jh ji kp jk jl jm jn ha bi translated">在这里，我们训练一个模型来获取输入，并以尽可能低的误差预测输出。对于较小的数据集，很容易训练，但对于较大的数据集，模型本身将需要较长的时间来训练，这将是一个难点。<br/>模型调优可以显著提高性能，缩短执行时间，这就是为什么在训练之前进行调优非常重要，而且训练和调优可能是一个持续的过程。</p></blockquote><h2 id="81b4" class="jp jq hh bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">模型分析</h2><blockquote class="kk kl km"><p id="2bd4" class="iq ir jo is b it iu iv iw ix iy iz ja kn jc jd je ko jg jh ji kp jk jl jm jn ha bi translated">一旦模型被训练，我们使用精确度或损失来确定最合适的模型参数。但是一旦我们确定了模型的最终版本，对模型性能进行更深入的分析是非常有用的。这可能包括计算精度、召回率和AUC(曲线下面积)等其他指标，或者在比训练中使用的验证集更大的数据集上计算性能。</p></blockquote><h2 id="6017" class="jp jq hh bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">模型版本控制</h2><blockquote class="kk kl km"><p id="b9ac" class="iq ir jo is b it iu iv iw ix iy iz ja kn jc jd je ko jg jh ji kp jk jl jm jn ha bi translated">模型版本化和验证步骤的目的是跟踪哪个模型、超参数集和数据集被选择作为要部署的下一个版本。</p></blockquote><h2 id="7cae" class="jp jq hh bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">模型部署</h2><blockquote class="kk kl km"><p id="a446" class="iq ir jo is b it iu iv iw ix iy iz ja kn jc jd je ko jg jh ji kp jk jl jm jn ha bi translated">一旦您训练、调整和分析了您的模型，它就准备好了。不幸的是，太多的模型是用一次性实现部署的，这使得更新模型成为一个脆弱的过程。同时托管多个版本(通过像REST这样的API)将允许您在您的模型上运行A/B测试，并提供关于您的模型改进的有价值的反馈。<br/>模型服务器可以通过重新部署快速更新模型版本，并减少应用程序停机时间。</p></blockquote><h2 id="856a" class="jp jq hh bd jr js jt ju jv jw jx jy jz jb ka kb kc jf kd ke kf jj kg kh ki kj bi translated">模型反馈</h2><blockquote class="kk kl km"><p id="181b" class="iq ir jo is b it iu iv iw ix iy iz ja kn jc jd je ko jg jh ji kp jk jl jm jn ha bi translated">我们必须衡量新部署模型的有效性和性能。在这一步中，我们可以捕获关于模型性能的有价值的信息。</p></blockquote></div><div class="ab cl lv lw go lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ha hb hc hd he"><p id="b5db" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">希望你会喜欢的内容。请继续关注下一篇文章。请随意发表您的评论或建议</p><p id="4365" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">参考—<a class="ae ip" href="https://www.oreilly.com/library/view/building-machine-learning/9781492053187/" rel="noopener ugc nofollow" target="_blank">https://www . oreilly . com/library/view/building-machine-learning/9781492053187/</a></p><div class="mv mw ez fb mx my"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="mz ab dw"><div class="na ab nb cl cj nc"><h2 class="bd hi fi z dy nd ea eb ne ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="nf l"><h3 class="bd b fi z dy nd ea eb ne ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="ng l"><p class="bd b fp z dy nd ea eb ne ed ef dx translated">medium.com</p></div></div><div class="nh l"><div class="ni l nj nk nl nh nm ij my"/></div></div></a></div></div></div>    
</body>
</html>