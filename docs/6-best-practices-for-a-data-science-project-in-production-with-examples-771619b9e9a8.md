# 生产中数据科学项目的 6 个最佳实践及示例

> 原文：<https://medium.com/mlearning-ai/6-best-practices-for-a-data-science-project-in-production-with-examples-771619b9e9a8?source=collection_archive---------3----------------------->

## 开发更加高效和稳定的 ML 应用程序，然后像外卖老板一样将模型投入生产！

![](img/0bf62042333399d1039e6d6e3bdd286f.png)

Stranger Things ([source](https://flic.kr/p/2nA22h8))

我敢肯定，你们中的大多数人都见过标题'['网飞从来没有使用过它的价值 100 万美元的算法](https://www.wired.com/2012/04/netflix-prize-costs/#:~:text=8%3A20%20AM-,Netflix%20Never%20Used%20Its%20%241%20Million%20Algorithm%20Due%20To%20Engineering,recommendation%20engine%20by%2010%20percent.)'至少一次。2009 年，一个开发团队实现了一个推荐算法，将网飞大学当前推荐系统的准确性提高了 10%，然后该团队赢得了一个大奖。虽然实施提供了足够的性能提升，**网飞从未使用这项获奖研究，因为额外的成本**。正如这个例子所表明的，使用最先进的技术可能不会给公司和他们的客户带来价值。否则，所有有几篇被引用文章的学院派人士，或者所有硬件超性能的创业公司/公司，都不会在业界失败。

除了这个例子，我们还犯了许多错误，应用了太多可怕的实践。

我可以承认:

*   我做了很多估计，在没有任何无偏倚基线研究的情况下提取了太多特征。
*   我通过添加一些简单的特性来降低模型的性能，这些特性在建模的时候提高了模型的性能。
*   由于缺乏功能测试，我将预测时间从 80 毫秒增加到了 400-500 毫秒。
*   我为我可能不会为大学项目交付的代码片段打开了 PRs。
*   …

在这篇文章中，我将主题列表缩小到 6 个，我想用一个真实的故事来讨论。我们可以根据公司的规模和领域来增加这些话题。**所以，我想说的是，这些见解是基于我的经历，我的同事，以及我读过的技术书籍和帖子**。

## 无偏差基线模型的生成

当不同的组织调查创业公司的成功率时，他们指出不到 10%的创业公司在海洋中生存。许多约束会导致失败，但最引人注目的是误解用户。我们在实施新产品时也会遇到同样的问题。

在开发任何数据科学项目之前，我们都会研究客户行为，然后为公司提供一些解决方案，以此作为基线。之后，这个基线解决方案可以产生进一步开发的门槛，或者我们可以将它实现为第一个版本的最小可行产品(MVP)。当我们从不同的数据源获取数据时，我们应该验证数据的质量。如果数据通过质量检查，我们必须确保采样数据能够代表我们的客户。任何非无偏样本数据都可能在我们的解决方案中表现良好，我们可能会忽略挖掘样本质量。不幸的是，有偏见的解决方案在样本中没有很好代表的特定数据点上会失败。

除了有偏差的数据，我们必须在产品的任何阶段，通过从不同方面讨论每个细节，尽可能保持个人偏差最小。个人偏见可能会驱使我们使用我们解决方案中唯一成功的结果，而忽略失败的结果。甚至可能造成样本偏差。来自不同部门的人或来自外部领域的其他人将有助于减少个人偏见。

因此，必须通过无偏见的数据和反馈来研究和验证提议的解决方案。如果没有无偏差的基线，在实际生产中失败是不可避免的。

## 定义 KPI 和建模前的准备工作

数据的质量和稳定性是任何数据科学项目为公司带来价值的关键特征。如果任何结构的基础选择不当，很快就会出现故障。

> 专注于推动人工智能系统的数据质量将有助于释放其全部力量。
> 
> -安德鲁·吴

在我们生成基线以减少个人偏见，甚至对问题解决方案提出任何假设之前，我们必须进行各种数据质量检查。与数据工程师(如果他们存在)握手对以下人员来说是有效的:

*   发现可用的数据源以增加特性的多样性。
*   找出数据操作和数据检索的频率，以确定预测时间。
*   验证训练和预测数据集(实时或批量预测)对于模型性能是相同的。

除了数据质量，我们还必须考虑解决方案在行业中的适用性。如果客户请求支付领域的实时解决方案，2 分钟内的模型预测不会给公司带来任何价值。因此，数据清理、特征工程和预测阶段应该考虑时间限制。

在为优化呼叫中心性能的模型进行特征工程时，我发现了一个具有相关性(相关性不是很高)的特征，具有这一新特征的模型在验证数据集中的表现优于当前模型。在模型部署两天后，我才意识到，在操作员和客户之间的通话结束后，另一个应用程序能够操纵特征值(客户可以在 15 天内改变她的决定)。因此，实时预测和模型构建时的特征值是不同的，只有数据分析师在客户端报告中使用此功能。由于没有人在任何文档中提到它，并且我在模型中使用了该功能，优化精度下降了两天。在监控仪表板的帮助下，我们只是将其回滚到以前的模型。

## 仅引用无偏倚的数据

为数据和 BI 团队带来解决方案不同于其他技术部门。我们可以很容易地证明任何假设或解决方案在实时工作，因为该方法诞生于数据中(p.s .我并不是说软件工程师不能很容易地获取他们的度量)。但是，正如我上面提到的，在做决定或做证明时，个人观点会损害结果。我们可以通过唯一的无偏倚数据样本获得无偏倚的见解。带有带有偏见的观点和带有偏见的采样数据的特征生成会损害模型性能。

除了决策之外，在特性工程阶段，我们应该避免进一步开发有缺陷的特性。一些功能看起来非常有用，尽管没有带来足够的改进。因此，我们应该改变方面，尝试另一个专栏来提取新的特征。

你还记得[亚马逊是如何在人工智能](https://www.reuters.com/article/us-amazon-com-jobs-automation-insight-idUSKCN1MK08G)的招聘算法上失败的吗？有 AI 的招聘解决方案对女性有偏见，模型给男性的机会比女性多。正如你所注意到的，这样的一次失败并不仅仅带来绩效结果。

因此，拥有庞大数据规模的公司甚至可以产生偏向良好的解决方案。为此，我们必须检查洞察力和数据分析中的偏见因素。

## 实施简单的解决方案作为基线

任何改进的度量都和任何新特性的开发一样重要。在科学论文中，提供基线解决方案是发表研究的必备条件，因为读者和裁判希望看到该研究给文献带来了什么。创建基线还可以在早期阶段为数据科学项目带来透明度。我们可以测量任何新特性的重要性，使用不同复杂性的新模型的结果，或者在基线结果的帮助下修改管道中任何单个约束的效果。之后，我们可以决定继续使用这个特性或者继续使用当前的模型。

在增量交付中，可以满足客户要求的基线模型或简单解决方案是在概念验证(POC)阶段由多个团队合作设计的。之后，我们将解决方案部署为应用程序，然后应用程序开始为客户端提供所需的行为。为了给我们的模型带来显著的成果，我们必须在时间和资源有限的情况下，通过开发工作来衡量基线模型和进一步模型之间的改进。然后，我们可以决定进一步的改进是否可以补偿其成本，并通过其收入为公司带来价值。**如果我们不在没有收入问题的公司工作，我们必须在早期回答上面的问题。**

具有十个特征的基线模型可以以 0.81 的 F 分数执行，并且它可以将生产分类团队的手动操作减少 23%。如果我们在两个月内将模型性能提高到 0.85，并且它按照基线减少了 2%的人工操作率会怎么样？为了一个对公司不是超级有用的结果，值得动用所有的数据资源吗？我想答案对你来说也很清楚了…

![](img/f385ec72f50cae19529828c45aa360c2.png)

([source](https://unsplash.com/photos/xJY-7gtC38o))

## 从后端开发人员那里获得可伸缩应用程序的反馈

在我看来，软件的质量可能是影响实现的可持续性命运的重要部分。如果一个小规模的公司使用数据解决方案，我们可以手动预测，直到出现可接受的结果。这个基本的解决方案可以帮助我们满足客户。否则，需要一个具有早期功能的应用程序作为 web 服务。**我不责怪任何人，我也不期望作为一名数据科学家有好的软件技能，但是我们必须考虑在生产中部署一个可维护的应用程序。**一个有软件工程经验的人可以支持甚至做结对编程给；

*   伟大的编码原则
*   建筑设计
*   单元和集成测试的实现
*   避免过度设计等等

否则；例子如；

*   在单核处理器上使用 50 个线程
*   对几个不同的方法使用相同的逻辑，而不是只实现一个方法
*   用字母表中的任何字母创建对象
*   不可调试的应用程序

将是不可避免的，那么这些不好的实践将会影响应用程序和解决方案的未来。

## 跟踪模型的度量

最终，我们到达了模型部署后的最后一步。正如您之前可能遇到的一些情况一样，实时训练数据集和数据点可能会有所不同。数据转移、第三方提供商的变更或任何其他问题都可能导致这种情况。我们可以在部署之后或之后观察这种情况。因此，特定的系统应该提前注意到这种差异，以防止灾难性的结果。创建仪表板进行跟踪；

*   模型特征的分布
*   模型预测的度量

将是有用的，它们带来了处理任何特性转换或性能度量变化的透明性。除了模型性能之外，如果可以即时测量，这些仪表板还可以根据指标灵活地生成即时 KPI 值。通过这种方式，可以根据这些指标生成报告，并定期更新非技术业务人员的信息。除了更新人员，这些报告还为公司带来了敏捷性和灵活性，以使用模型结果来改变方向。

# 最后的话

我试图清晰地表达我的观点、困难以及我从以前的经历中看到或学到的解决方案。作为一个进行学术研究和在行业中工作的人，他们之间对于产生一个数据科学项目有很大的差距。在学术研究中，带来营收可以忽略不计，但对于需要在市场中生存的公司来说却是必备的。特别是对于处于烧钱阶段的创业公司，由于资源有限，决策要经过利益相关者的大量审核。因此，我们必须实现方便、可扩展和可维护的 R&D 解决方案，为行业带来价值。

最后，我希望这些实践或建议能够帮助您在任何数据科学项目中进行进一步的开发和建模，并优化您从零开始到维护的开发生命周期！

在说再见之前，我想感谢这篇文章的第一位读者[穆斯塔法·基拉克](https://www.linkedin.com/in/mustafakirac/)！

向我问好或问我任何问题:

领英:【https://www.linkedin.com/in/ktoprakucar/ 

github:[https://github.com/ktoprakucar](https://github.com/ktoprakucar)

电子邮件:toprakucar@gmail.com

# 参考

1.  [https://startup genome . com/reports/global-startup-ecosystem-report-2019](https://startupgenome.com/reports/global-startup-ecosystem-report-2019)
2.  [https://www.bls.gov/bdm/us_age_naics_00_table7.txt](https://www.bls.gov/bdm/us_age_naics_00_table7.txt)
3.  [https://www . Forbes . com/sites/Glenn gow/2020/11/09/how-ai-can-go-very-mist-5-bias-that-create-failure/？sh=72ed00415b87](https://www.forbes.com/sites/glenngow/2020/11/09/how-ai-can-go-terribly-wrong-5-biases-that-create-failure/?sh=72ed00415b87)
4.  [https://MITS loan . MIT . edu/ideas-made-to-matter/why-its-time-以数据为中心的人工智能](https://mitsloan.mit.edu/ideas-made-to-matter/why-its-time-data-centric-artificial-intelligence)
5.  [https://www . wired . com/2012/04/网飞-prize-costs/#:~:text = 8% 3a 20%20AM-，网飞%20 never % 20 used % 20 its % 20% 241% 2000 万% 20 算法% 20Due % 20To %工程，推荐% 20 引擎% 20by % 2010 %百分比](https://www.wired.com/2012/04/netflix-prize-costs/#:~:text=8%3A20%20AM-,Netflix%20Never%20Used%20Its%20%241%20Million%20Algorithm%20Due%20To%20Engineering,recommendation%20engine%20by%2010%20percent)。
6.  [https://en.wikipedia.org/wiki/Incremental_build_model](https://en.wikipedia.org/wiki/Incremental_build_model)
7.  [https://medium . com/iyzico-engineering/adding-machine-learning-to-a-software-product-97a 831 f 12845](/iyzico-engineering/adding-machine-learning-to-a-software-product-97a831f12845)
8.  [https://eugeneyan.com/writing/first-rule-of-ml/](https://eugeneyan.com/writing/first-rule-of-ml/)
9.  [https://www . Amazon . com/DP/149204511 x/ref = cm _ SW _ r _ tw _ DP _ e 37 ny 3 rcb 1g 8 ncy 6 QM 0 p](https://www.amazon.com/dp/149204511X/ref=cm_sw_r_tw_dp_E37NY3RCB1G8NCY6QM0P)
10.  [https://towards data science . com/当心数据偏移-162cb32d4d41](https://towardsdatascience.com/beware-of-data-shifts-162cb32d4d41)

[](/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb) [## Mlearning.ai 提交建议

### 如何成为 Mlearning.ai 上的作家

medium.com](/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb)