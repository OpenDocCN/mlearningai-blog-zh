<html>
<head>
<title>Plotting Net Promoter Scores with Confidence Intervals in Plotly Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Plotly Python绘制带置信区间的净推广分数</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/plotting-net-promoter-scores-with-confidence-intervals-in-plotly-python-2c6b9c3c6855?source=collection_archive---------5-----------------------#2022-11-10">https://medium.com/mlearning-ai/plotting-net-promoter-scores-with-confidence-intervals-in-plotly-python-2c6b9c3c6855?source=collection_archive---------5-----------------------#2022-11-10</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><h1 id="3495" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak">什么是NPS？</strong></h1><p id="31d9" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">在许多面向消费者的行业中，净推广分数被广泛用作忠诚度和参与度的衡量标准。在用户体验同等重要的公司中，拥有准确的NPS分数和置信区间对于决策至关重要。</p><p id="cb05" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">NPS分数本身是通过调查用户的问题“您向朋友或同事推荐我们公司/产品/服务的可能性有多大？”回答范围从0到10，10是最有可能推荐的。NPS是(%回答9或10的用户)— (%回答0-6的用户)，或者通常被称为%“促进者”— %“贬低者”。这个分数让公司知道，相比不太可能推广产品的用户，有多少用户会推广他们的产品。</p><h1 id="eada" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">NPS数据通常是如何收集的？</h1><p id="3b3c" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">通常情况下，数据是通过在你的网站上随机调查受访者来收集的，使用的服务如<a class="ae kf" href="https://www.hotjar.com/" rel="noopener ugc nofollow" target="_blank"> HotJar </a>。应事先确定样本量，事先商定调查的置信水平和误差幅度。有许多<a class="ae kf" href="https://www.smartsurvey.co.uk/survey-tools/sample-size-calculator" rel="noopener ugc nofollow" target="_blank">在线工具</a>可以帮你做到这一点。</p><p id="12d9" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">例如，如果你的公司网站有大约100，000名活跃用户，你的目标是调查结果有90%的置信度和3%的误差，你将需要至少751名受访者。</p><h1 id="d6c9" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">用置信区间计算NP</h1><p id="cc65" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">因为NPS分数是根据样本估计的两个比例的函数，所以计算标准偏差需要使用分类分布进行一些推导。完整的推导过程在这篇<a class="ae kf" href="https://www.cybaea.net/Journal/2016/01/14/NPS-confidence-intervals-stats/" rel="noopener ugc nofollow" target="_blank"> CYBAEA文章</a>中有所概述。标准偏差的相关计算如下:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kg"><img src="../Images/0aa6b724e8fdc421322774907f79ac9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*adBFrpIop-2YHen4jTTFYw.png"/></div></div></figure><p id="c257" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">这与两个独立样本比例差异的标准差略有不同，因为最后一项<em class="ks"> 2pd </em>考虑了<em class="ks"> p </em>和<em class="ks"> d </em>之间的协方差。</p><p id="e89c" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">一旦有了标准偏差，置信区间可以用以下公式计算:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es kt"><img src="../Images/edc912c990ffb99691f0becbc1a4b2a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:824/format:webp/1*WSDyJut71_6OqiOXYpqqQg.png"/></div></figure><p id="2707" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">其中<em class="ks"> z </em>是z测试值，取决于您想要为测试选择的置信度。假设您有超过30名受访者，对于双边假设检验，常见的z检验值为:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ku"><img src="../Images/60eb095d4addc91c21d5b0a7aac7ba36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BH_Z-BbSRMwKrFoDh9glFg.png"/></div></div></figure><p id="91a3" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">要在Python中实现这一点，请使用以下函数:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kg"><img src="../Images/b9f9421141cebf7fb9f39008ca27ee66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EYNAQEXiDvLycyPViQhXvA.png"/></div></div></figure><p id="2062" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">这将返回置信区间的下限(lb)和上限(ub)。</p><p id="46a3" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">通过一个使用<a class="ae kf" href="https://github.com/sixhobbits/nps-sample-data/blob/master/score.csv" rel="noopener ugc nofollow" target="_blank">样本</a> NPS数据的示例，我们可以通过以下方式轻松提取样本数据集的下限和上限:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es kv"><img src="../Images/c9ab7921a52e4f35d51aabca955f42b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/1*mqWb3ZpHCpViuyl6wbWtrQ.png"/></div></figure><h1 id="f24c" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">向Plotly Python添加置信区间</h1><p id="155b" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">NPS在上下文中是有用的，即在跟踪分数如何随时间变化时。通常，NPS调查每季度进行一次。</p><p id="aa9a" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">Plotly是Python中一个有用的图形工具，因为它允许用户以简单直观的方式集成交互式功能。可以选择添加悬停数据，覆盖图中的标签。在这种情况下，我们可能希望为NPS分数和置信区间的下限和上限添加点值，以使数字对观众来说更清楚。</p><p id="247d" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">为方便绘制NPS置信区间，数据帧应按季度排序:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kw"><img src="../Images/3d4304e51ac5fb2d79f7147e5c829ced.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4HJIGxE8RN_soRC8x-A4Bg.png"/></div></div></figure><p id="eb22" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">因为Plotly将误差棒绘制为点估计值的差值，所以我们需要使用<em class="ks">NPS-下限</em>或<em class="ks">上限-NPS </em>来获得误差值。</p><p id="e907" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated"><strong class="je hi">条形图</strong></p><p id="8423" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">使用以下函数，将绘制一个条形图，根据该季度NPS得分的高低为每个条形图着色。悬停数据显示所有相关的数据点。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kx"><img src="../Images/a01057424a4b5f77e0d773f7b1fd2ed8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JUrqQEGhNO8aJnFddRl5-g.png"/></div></div></figure><p id="7a91" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">使用<code class="du ky kz la lb b">fig.update_traces</code>，可以控制文本标签的大小和误差线的颜色。使用<code class="du ky kz la lb b">fig.update_layout</code>，可以控制图形的大小，以及显示哪些轴标签和图例。为简单起见，图中未显示x轴标题和色标图例。<code class="du ky kz la lb b">color_continous_scale</code>确定条块使用的色标，而<code class="du ky kz la lb b">range_color</code>指定条块的亮/暗程度。</p><p id="ad59" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">这导致了以下情节:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es lc"><img src="../Images/903cf9cea835c3a39478317d38a02404.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*71k4muf0pfnQsGYVwHDABg.png"/></div></div></figure><p id="b2dc" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated"><strong class="je hi">线条图</strong></p><p id="8f8a" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">或者，我们可以使用线图来表示相同的数据。呈现更加清晰，但是，我们失去了代表分数级别的颜色强度的额外视觉兴趣。当有许多季度的数据要显示时，最好使用折线图。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ld"><img src="../Images/1518ac3c0a23f04ab3d388c377d8cc2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WQNdOD2I2EPAQdNt5eACEg.png"/></div></div></figure><p id="078b" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">这导致了以下情节:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es le"><img src="../Images/968dfd33a3ad91db132c3365af22e98b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Vn62XGsuhB4b4OJXi__TQ.png"/></div></div></figure></div><div class="ab cl lf lg go lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ha hb hc hd he"><p id="5435" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">感谢阅读！我希望你觉得有能力绘制有价值的NPS数据。</p><div class="lm ln ez fb lo lp"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="lq ab dw"><div class="lr ab ls cl cj lt"><h2 class="bd hi fi z dy lu ea eb lv ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="lw l"><h3 class="bd b fi z dy lu ea eb lv ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="lx l"><p class="bd b fp z dy lu ea eb lv ed ef dx translated">medium.com</p></div></div><div class="ly l"><div class="lz l ma mb mc ly md kq lp"/></div></div></a></div></div></div>    
</body>
</html>