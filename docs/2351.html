<html>
<head>
<title>Build an NLP extractive Question-Answer web application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建一个NLP抽取式问答web应用程序</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/building-a-question-answer-web-app-using-hugging-face-transformers-and-gradio-f2f881414895?source=collection_archive---------1-----------------------#2022-04-18">https://medium.com/mlearning-ai/building-a-question-answer-web-app-using-hugging-face-transformers-and-gradio-f2f881414895?source=collection_archive---------1-----------------------#2022-04-18</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="f5c8" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">使用拥抱脸变形金刚，Gradio建立一个提取的问答网络应用程序，并部署在拥抱脸空间</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/e2e99fcaeeed5fb982b134de68404a91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XCjPgVDwIFogwITi"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Photo by <a class="ae jm" href="https://unsplash.com/@askkell?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Andy Kelly</a> on <a class="ae jm" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="57f4" class="jn jo hh bd jp jq jr js jt ju jv jw jx in jy io jz iq ka ir kb it kc iu kd ke bi translated"><strong class="ak">简介</strong></h1><p id="0754" class="pw-post-body-paragraph kf kg hh kh b ki kj ii kk kl km il kn ko kp kq kr ks kt ku kv kw kx ky kz la ha bi translated">问答系统是一种在给定上下文的情况下为问题提供正确简短答案的技术。客户支持、解决网站上的用户查询以及从大量的知识中检索资料都从这些系统中受益。</p><p id="8126" class="pw-post-body-paragraph kf kg hh kh b ki lb ii kk kl lc il kn ko ld kq kr ks le ku kv kw lf ky kz la ha bi translated">自然语言处理(NLP)的最新进展使这些系统在工业上对我们可用。在本文中，我们将看看如何使用拥抱脸变形器gradio开发一个问答系统，并在本文中将其部署在拥抱脸空间上。</p></div><div class="ab cl lg lh go li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ha hb hc hd he"><h1 id="0abe" class="jn jo hh bd jp jq ln js jt ju lo jw jx in lp io jz iq lq ir kb it lr iu kd ke bi translated">概观</h1><ol class=""><li id="e400" class="ls lt hh kh b ki kj kl km ko lu ks lv kw lw la lx ly lz ma bi translated">格拉迪欧</li><li id="6dcd" class="ls lt hh kh b ki mb kl mc ko md ks me kw mf la lx ly lz ma bi translated">拥抱面部空间</li><li id="7321" class="ls lt hh kh b ki mb kl mc ko md ks me kw mf la lx ly lz ma bi translated">建筑应用</li><li id="fdaf" class="ls lt hh kh b ki mb kl mc ko md ks me kw mf la lx ly lz ma bi translated">部署</li><li id="3d8a" class="ls lt hh kh b ki mb kl mc ko md ks me kw mf la lx ly lz ma bi translated">结论</li></ol></div><div class="ab cl lg lh go li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ha hb hc hd he"><h1 id="1808" class="jn jo hh bd jp jq ln js jt ju lo jw jx in lp io jz iq lq ir kb it lr iu kd ke bi translated">格拉迪欧</h1><p id="d44a" class="pw-post-body-paragraph kf kg hh kh b ki kj ii kk kl km il kn ko kp kq kr ks kt ku kv kw kx ky kz la ha bi translated"><a class="ae jm" href="https://gradio.app/" rel="noopener ugc nofollow" target="_blank"> Gradio </a>是一个开源的Python框架，允许我们使用web界面快速构建机器学习模型的原型。Gradio这几年比较流行，机器学习从业者都在用。Gradio最近被拥抱脸公司收购了。Gradio允许我们快速制作一个机器学习模型的演示。编写代码非常简单，因为只需几行代码就可以创建一个接口。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mg"><img src="../Images/e27df7e518f1a3396a84d28910e3e091.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5eytpWnZAJeoVlHBir4m4w.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Image source: <a class="ae jm" href="https://gradio.app/" rel="noopener ugc nofollow" target="_blank">Gradio</a></figcaption></figure></div><div class="ab cl lg lh go li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ha hb hc hd he"><h1 id="0f8b" class="jn jo hh bd jp jq ln js jt ju lo jw jx in lp io jz iq lq ir kb it lr iu kd ke bi translated">拥抱面部空间</h1><p id="1541" class="pw-post-body-paragraph kf kg hh kh b ki kj ii kk kl km il kn ko kp kq kr ks kt ku kv kw kx ky kz la ha bi translated"><a class="ae jm" href="https://huggingface.co/spaces" rel="noopener ugc nofollow" target="_blank">拥抱脸空间</a>是一个免费平台，我们可以在这里托管用streamlit和gradio构建的机器学习网络应用，并展示我们的模型在实践中的表现。建立一个非常稳定的平台非常简单。我们可以根据需要设计和部署任意多的应用程序。我们也可以在同一个平台上编写代码，而不是在单独的机器上。我们将在这个平台上编写代码，并在这个项目的同一个平台上托管我们的应用程序。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es mh"><img src="../Images/36e323684c1cbbb088a01d780dcbd734.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*MHIoaNGiC82F1bTvWx9PDg.jpeg"/></div><figcaption class="ji jj et er es jk jl bd b be z dx">Image source: <a class="ae jm" href="https://huggingface.co/spaces" rel="noopener ugc nofollow" target="_blank">Spaces — Hugging Face</a></figcaption></figure></div><div class="ab cl lg lh go li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ha hb hc hd he"><h1 id="da8b" class="jn jo hh bd jp jq ln js jt ju lo jw jx in lp io jz iq lq ir kb it lr iu kd ke bi translated"><strong class="ak">构建应用</strong></h1><p id="1f85" class="pw-post-body-paragraph kf kg hh kh b ki kj ii kk kl km il kn ko kp kq kr ks kt ku kv kw kx ky kz la ha bi translated">为了构建这个应用程序，我们将使用拥抱脸变形金刚库和gradio库。我们将使用变形金刚库的'<em class="mi">管道</em>'模块。这个'<em class="mi">管道</em>'模块有几个功能，用于情感分析、文本摘要等。你可以在变形金刚官方文档<a class="ae jm" href="https://huggingface.co/docs/transformers/index" rel="noopener ugc nofollow" target="_blank">中找到更多关于拥抱脸变形金刚库的信息。</a></p><p id="2524" class="pw-post-body-paragraph kf kg hh kh b ki lb ii kk kl lc il kn ko ld kq kr ks le ku kv kw lf ky kz la ha bi translated">我们将在我们的应用程序中使用管道模块的'<em class="mi">问答</em>'函数。它将上下文文本和相应的问题作为输入，并输出该问题的答案以及置信度得分、开始值和结束值，它们是文本中提取的答案的位置。因此，让我们通过使用pip命令安装必要的库来编写我们的应用程序。</p><pre class="ix iy iz ja fd mj mk ml mm aw mn bi"><span id="c678" class="mo jo hh mk b fi mp mq l mr ms">pip install transformers<br/>pip install gradio</span></pre><p id="2e21" class="pw-post-body-paragraph kf kg hh kh b ki lb ii kk kl lc il kn ko ld kq kr ks le ku kv kw lf ky kz la ha bi translated">现在打开代码编辑器，创建一个“<em class="mi"> app.py </em>”文件。让我们导入库，如下所示</p><pre class="ix iy iz ja fd mj mk ml mm aw mn bi"><span id="6bf2" class="mo jo hh mk b fi mp mq l mr ms">import gradio as gr<br/>from transformers import pipeline</span></pre><p id="3605" class="pw-post-body-paragraph kf kg hh kh b ki lb ii kk kl lc il kn ko ld kq kr ks le ku kv kw lf ky kz la ha bi translated">现在我们已经导入了库，让我们创建一个问答管道的实例，并为我们的应用程序提供一个标题、一个示例问题和上下文，如下所示...</p><pre class="ix iy iz ja fd mj mk ml mm aw mn bi"><span id="58f6" class="mo jo hh mk b fi mp mq l mr ms">question_answerer = pipeline("question-answering")</span><span id="3e68" class="mo jo hh mk b fi mt mq l mr ms">title = 'Question Answering demo with transformers and gradio'</span><span id="4da4" class="mo jo hh mk b fi mt mq l mr ms">context = "The Amazon rainforest (Portuguese: Floresta Amazônica or Amazônia; Spanish: Selva Amazónica, Amazonía or usually Amazonia; French: Forêt amazonienne; Dutch: Amazoneregenwoud), also known in English as Amazonia or the Amazon Jungle, is a moist broadleaf forest that covers most of the Amazon basin of South America. This basin encompasses 7,000,000 square kilometres (2,700,000 sq mi), of which 5,500,000 square kilometres (2,100,000 sq mi) are covered by the rainforest. This region includes territory belonging to nine nations. The majority of the forest is contained within Brazil, with 60% of the rainforest, followed by Peru with 13%, Colombia with 10%, and with minor amounts in Venezuela, Ecuador, Bolivia, Guyana, Suriname, and French Guiana. States or departments in four nations contain 'Amazonas' in their names. The Amazon represents over half of the planet's remaining rainforests, and comprises the largest and most biodiverse tract of tropical rainforest in the world, with an estimated 390 billion individual trees divided into 16,000 species."</span><span id="1df3" class="mo jo hh mk b fi mt mq l mr ms">question = "Which name is also used to describe the Amazon rainforest in English?"</span></pre><p id="28cd" class="pw-post-body-paragraph kf kg hh kh b ki lb ii kk kl lc il kn ko ld kq kr ks le ku kv kw lf ky kz la ha bi translated">现在，我们需要使用gradio为我们的应用程序创建一个界面。我们按如下方式进行操作…</p><pre class="ix iy iz ja fd mj mk ml mm aw mn bi"><span id="a4be" class="mo jo hh mk b fi mp mq l mr ms">interface = gr.Interface.from_pipeline(question_answerer,<br/>    title = title,<br/>    theme = "peach",<br/>    examples = [[context, question]]).launch()</span></pre><p id="fc5f" class="pw-post-body-paragraph kf kg hh kh b ki lb ii kk kl lc il kn ko ld kq kr ks le ku kv kw lf ky kz la ha bi translated">Gradio使用“接口”对象创建接口。因为我们使用的是一个transformers管道，所以我们使用“<em class="mi"> from_pipeline </em>来加载我们创建的管道实例。我们给出标题并设置一个主题，如上图所示。我们还使用如上所示创建的上下文和问题来设置示例。以上步骤的完整代码可以在下面看到…</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mu mv l"/></div></figure><p id="17ba" class="pw-post-body-paragraph kf kg hh kh b ki lb ii kk kl lc il kn ko ld kq kr ks le ku kv kw lf ky kz la ha bi translated">保存文件，让我们将它部署到拥抱脸空间。</p></div><div class="ab cl lg lh go li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ha hb hc hd he"><h1 id="4c51" class="jn jo hh bd jp jq ln js jt ju lo jw jx in lp io jz iq lq ir kb it lr iu kd ke bi translated">部署</h1><p id="7c7f" class="pw-post-body-paragraph kf kg hh kh b ki kj ii kk kl km il kn ko kp kq kr ks kt ku kv kw kx ky kz la ha bi translated">我们创建了我们的应用程序文件。是时候让拥抱面部空间发挥作用了。在拥抱脸空间<a class="ae jm" href="https://huggingface.co/spaces" rel="noopener ugc nofollow" target="_blank">网站</a>上创建一个用户账户。创建帐户后，单击“创建共享空间”。接下来，你会看到屏幕询问你的应用和技术堆栈的名称。为项目命名，选择许可证，从SDK下拉菜单中选择“Gradio ”,然后单击“创建”。</p><p id="3c9a" class="pw-post-body-paragraph kf kg hh kh b ki lb ii kk kl lc il kn ko ld kq kr ks le ku kv kw lf ky kz la ha bi translated">之后，您会看到一个页面，上面有关于克隆GitHub repo并将其推送到spaces的说明。您还可以在空间内创建存储库。在这个文件夹中创建一个名为“<em class="mi"> requirements.txt </em>的文件。在需求文本文件中，粘贴以下材料...</p><pre class="ix iy iz ja fd mj mk ml mm aw mn bi"><span id="d464" class="mo jo hh mk b fi mp mq l mr ms">tensorflow<br/>transformers</span></pre><p id="a34a" class="pw-post-body-paragraph kf kg hh kh b ki lb ii kk kl lc il kn ko ld kq kr ks le ku kv kw lf ky kz la ha bi translated">另外，上传我们在上一步中创建的'<em class="mi"> app.py </em>'文件。现在拥抱面部空间将会处理剩下的事情并部署我们的应用程序。我们的应用程序在工作时看起来如下…</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mw"><img src="../Images/8045c03886a7d2674855078a9254df79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*q-gxPmkpGQuVV24UMNvGjg.gif"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Image by author</figcaption></figure><p id="43ea" class="pw-post-body-paragraph kf kg hh kh b ki lb ii kk kl lc il kn ko ld kq kr ks le ku kv kw lf ky kz la ha bi translated">我们可以看到，我们的应用程序不仅给出了问题的答案，还给出置信度得分。请在下面的链接中找到我构建并部署在拥抱脸空间上的应用程序…</p><p id="167e" class="pw-post-body-paragraph kf kg hh kh b ki lb ii kk kl lc il kn ko ld kq kr ks le ku kv kw lf ky kz la ha bi translated"><a class="ae jm" href="https://huggingface.co/spaces/rajesh1729/question-answering-gradio" rel="noopener ugc nofollow" target="_blank">问答Gradio——rajesh 1729的拥抱脸空间</a></p></div><div class="ab cl lg lh go li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ha hb hc hd he"><h1 id="2020" class="jn jo hh bd jp jq ln js jt ju lo jw jx in lp io jz iq lq ir kb it lr iu kd ke bi translated">结论</h1><p id="c834" class="pw-post-body-paragraph kf kg hh kh b ki kj ii kk kl km il kn ko kp kq kr ks kt ku kv kw kx ky kz la ha bi translated">我们为拥抱脸空间创建了一个提取式问答应用程序并发布了它。Gradio库是一个低代码工具，允许我们通过用户友好的web界面创建我们的机器学习模型的演示，使这变得简单。因此，我们可以使用拥抱面部变形器和gradio以本文描述的方式创建NLP web应用程序。</p></div><div class="ab cl lg lh go li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ha hb hc hd he"><h1 id="628f" class="jn jo hh bd jp jq ln js jt ju lo jw jx in lp io jz iq lq ir kb it lr iu kd ke bi translated">参考</h1><p id="06ab" class="pw-post-body-paragraph kf kg hh kh b ki kj ii kk kl km il kn ko kp kq kr ks kt ku kv kw kx ky kz la ha bi translated">[1] <a class="ae jm" href="https://huggingface.co/spaces" rel="noopener ugc nofollow" target="_blank">空格—拥抱脸</a></p><p id="8c74" class="pw-post-body-paragraph kf kg hh kh b ki lb ii kk kl lc il kn ko ld kq kr ks le ku kv kw lf ky kz la ha bi translated">[2] <a class="ae jm" href="https://huggingface.co/docs/transformers/task_summary#extractive-question-answering" rel="noopener ugc nofollow" target="_blank">任务概要(huggingface.co)</a></p><p id="98b0" class="pw-post-body-paragraph kf kg hh kh b ki lb ii kk kl lc il kn ko ld kq kr ks le ku kv kw lf ky kz la ha bi translated">[3] <a class="ae jm" href="https://huggingface.co/docs/transformers/index" rel="noopener ugc nofollow" target="_blank">🤗变形金刚(huggingface.co)</a></p><p id="f392" class="pw-post-body-paragraph kf kg hh kh b ki lb ii kk kl lc il kn ko ld kq kr ks le ku kv kw lf ky kz la ha bi translated">[4] <a class="ae jm" href="https://gradio.app/" rel="noopener ugc nofollow" target="_blank">格拉迪欧</a></p><p id="a7ac" class="pw-post-body-paragraph kf kg hh kh b ki lb ii kk kl lc il kn ko ld kq kr ks le ku kv kw lf ky kz la ha bi translated">[5] <a class="ae jm" href="https://gradio.app/docs/" rel="noopener ugc nofollow" target="_blank"> Gradio Docs </a></p><div class="mx my ez fb mz na"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="nb ab dw"><div class="nc ab nd cl cj ne"><h2 class="bd hi fi z dy nf ea eb ng ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="nh l"><h3 class="bd b fi z dy nf ea eb ng ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="ni l"><p class="bd b fp z dy nf ea eb ng ed ef dx translated">medium.com</p></div></div><div class="nj l"><div class="nk l nl nm nn nj no jg na"/></div></div></a></div></div></div>    
</body>
</html>