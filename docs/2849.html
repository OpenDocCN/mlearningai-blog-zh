<html>
<head>
<title>Easier SQL Query with a subquery</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带有子查询的更简单的SQL查询</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/easier-sql-query-with-a-subquery-d9e69249eb0f?source=collection_archive---------2-----------------------#2022-06-18">https://medium.com/mlearning-ai/easier-sql-query-with-a-subquery-d9e69249eb0f?source=collection_archive---------2-----------------------#2022-06-18</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><h1 id="db3c" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">什么是子查询？</h1><p id="e275" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi ka translated"><span class="l kb kc kd bm ke kf kg kh ki di"/>子查询是大型查询中的小型SQL查询。这是一个由大型SELECT语句嵌套的SELECT语句。通过括号: ()，可以很容易地注意到子查询。</p><figure class="kk kl km kn fd ko er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es kj"><img src="../Images/57c4e28bf1d9ceebc454c1d7e1dd68b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7ObAMR_JVDlh3WqYZ9yGsg.png"/></div></div></figure><h2 id="c5e7" class="kv if hh bd ig kw kx ky ik kz la lb io jn lc ld is jr le lf iw jv lg lh ja li bi translated">子查询的好处</h2><ul class=""><li id="5d26" class="lj lk hh je b jf jg jj jk jn ll jr lm jv ln jz lo lp lq lr bi translated">允许您在外部查询中使用内部查询的结果。</li><li id="341d" class="lj lk hh je b jf ls jj lt jn lu jr lv jv lw jz lo lp lq lr bi translated">易于理解和调整，因为它将查询分成独立的部分。</li><li id="de65" class="lj lk hh je b jf ls jj lt jn lu jr lv jv lw jz lo lp lq lr bi translated">用于返回将在主查询中使用的筛选数据。</li></ul><h2 id="6268" class="kv if hh bd ig kw kx ky ik kz la lb io jn lc ld is jr le lf iw jv lg lh ja li bi translated">子查询出现次数</h2><ul class=""><li id="3a2d" class="lj lk hh je b jf jg jj jk jn ll jr lm jv ln jz lo lp lq lr bi translated">SELECT子句:计算值</li><li id="449e" class="lj lk hh je b jf ls jj lt jn lu jr lv jv lw jz lo lp lq lr bi translated">FROM子句:数据源</li><li id="258e" class="lj lk hh je b jf ls jj lt jn lu jr lv jv lw jz lo lp lq lr bi translated">WHERE子句:选择标准</li></ul><blockquote class="lx ly lz"><p id="5cd7" class="jc jd ma je b jf mb jh ji jj mc jl jm md me jp jq mf mg jt ju mh mi jx jy jz ha bi translated">想要一个SQL复习器→<br/>T3】https://medium . com/mlearning-ai/quick-SQL-query-reminder-622 a98d 3 ad 0c</p></blockquote><h1 id="26b2" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">子查询示例</h1><p id="e82e" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">student_score数据库中的示例表由4列组成。</p><figure class="kk kl km kn fd ko er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es mk"><img src="../Images/39247487652536a0f07784d42e87045f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1jcVSJpOMxwvcPU_7c82Mg.png"/></div></div></figure><p id="4a3a" class="pw-post-body-paragraph jc jd hh je b jf mb jh ji jj mc jl jm jn me jp jq jr mg jt ju jv mi jx jy jz ha bi translated">询问</p><pre class="kk kl km kn fd ml mm mn mo aw mp bi"><span id="fbed" class="kv if hh mm b fi mq mr l ms mt">SELECT *<br/>FROM student_score </span></pre><h2 id="ddb1" class="kv if hh bd ig kw kx ky ik kz la lb io jn lc ld is jr le lf iw jv lg lh ja li bi translated">1.选择子句</h2><p id="20ab" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">我想创建一个名为max_class_score_math的新列，显示每个类的最大score_math。</p><figure class="kk kl km kn fd ko er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es mu"><img src="../Images/0fbf77927b2f2296df6961932ac3e830.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MYa31oILVeXJY8TJhITnDA.png"/></div></div></figure><p id="27ac" class="pw-post-body-paragraph jc jd hh je b jf mb jh ji jj mc jl jm jn me jp jq jr mg jt ju jv mi jx jy jz ha bi translated">询问</p><pre class="kk kl km kn fd ml mm mn mo aw mp bi"><span id="ba2a" class="kv if hh mm b fi mq mr l ms mt">SELECT *,<br/>      ( SELECT MAX(score_math)<br/>        FROM student_score<br/>        WHERE class = s.class<br/>      ) AS max_class_score_math<br/>FROM student_score AS s</span></pre><ul class=""><li id="30ba" class="lj lk hh je b jf mb jj mc jn mv jr mw jv mx jz lo lp lq lr bi translated">创建一个子查询来计算MAX score_math并作为新列max_class_score_math输出</li><li id="c1d1" class="lj lk hh je b jf ls jj lt jn lu jr lv jv lw jz lo lp lq lr bi translated">将student_score表命名为s，以在子查询中指定条件</li></ul><h2 id="2791" class="kv if hh bd ig kw kx ky ik kz la lb io jn lc ld is jr le lf iw jv lg lh ja li bi translated">2.WHERE子句</h2><p id="80ad" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">我想只显示每个班级数学分数最高的学生。</p><figure class="kk kl km kn fd ko er es paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="er es my"><img src="../Images/4b2faf21d61bd98676d2570da8204f00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rCDz-96P7o7D85-dixVZ8g.png"/></div></div></figure><p id="dd2a" class="pw-post-body-paragraph jc jd hh je b jf mb jh ji jj mc jl jm jn me jp jq jr mg jt ju jv mi jx jy jz ha bi translated">询问</p><pre class="kk kl km kn fd ml mm mn mo aw mp bi"><span id="5775" class="kv if hh mm b fi mq mr l ms mt">SELECT *<br/>FROM student_score AS s<br/>WHERE score_math = ( SELECT MAX(score_math)<br/>                   FROM student_score<br/>                   WHERE class = s.class<br/>                   )</span></pre><ul class=""><li id="3ba3" class="lj lk hh je b jf mb jj mc jn mv jr mw jv mx jz lo lp lq lr bi translated">使用子查询作为筛选条件</li><li id="c96f" class="lj lk hh je b jf ls jj lt jn lu jr lv jv lw jz lo lp lq lr bi translated">它将只返回score_math等于该类的最大score_math的学生</li></ul><h2 id="0503" class="kv if hh bd ig kw kx ky ik kz la lb io jn lc ld is jr le lf iw jv lg lh ja li bi translated">3.FROM子句</h2><p id="8270" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">现在，我有了一个名为subject_score的新表，它显示了每个科目的通过标准。</p><figure class="kk kl km kn fd ko er es paragraph-image"><div class="er es mz"><img src="../Images/ba704bd48f4638a42c170fc54950309a.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/format:webp/1*-udXBh6_GpngwWU28hZxUw.png"/></div></figure><p id="c46c" class="pw-post-body-paragraph jc jd hh je b jf mb jh ji jj mc jl jm jn me jp jq jr mg jt ju jv mi jx jy jz ha bi translated">我想看看通过数学考试的学生。</p><figure class="kk kl km kn fd ko er es paragraph-image"><div class="er es na"><img src="../Images/bf55c4f9dc3fc45157518c49a456b0ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*IIc6UXmHRsqudVnbqhC8YQ.png"/></div></figure><p id="4dbc" class="pw-post-body-paragraph jc jd hh je b jf mb jh ji jj mc jl jm jn me jp jq jr mg jt ju jv mi jx jy jz ha bi translated">询问</p><pre class="kk kl km kn fd ml mm mn mo aw mp bi"><span id="6707" class="kv if hh mm b fi mq mr l ms mt">SELECT *<br/>FROM<br/> (SELECT pass_score <br/>  FROM subject_score<br/>  WHERE subject = 'math') AS pass_math, <br/>  student_score AS s<br/>WHERE s.score_math &gt;= pass_math.pass_score;</span></pre><ul class=""><li id="7b45" class="lj lk hh je b jf mb jj mc jn mv jr mw jv mx jz lo lp lq lr bi translated">创建一个子查询来查找数学科目的通过标准</li><li id="fcb7" class="lj lk hh je b jf ls jj lt jn lu jr lv jv lw jz lo lp lq lr bi translated">仅过滤math_score符合标准的学生</li></ul><h1 id="4dbd" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">注意</h1><p id="4735" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">本文中显示的许多查询都可以使用JOIN编写，但是使用子查询可能更容易理解。虽然子查询更容易编写，但是服务器可能会更好地优化连接。</p><p id="1c83" class="pw-post-body-paragraph jc jd hh je b jf mb jh ji jj mc jl jm jn me jp jq jr mg jt ju jv mi jx jy jz ha bi translated">希望学习子查询让你的生活更轻松。</p><p id="61a9" class="pw-post-body-paragraph jc jd hh je b jf mb jh ji jj mc jl jm jn me jp jq jr mg jt ju jv mi jx jy jz ha bi translated">请关注更多数据科学文章。</p><div class="nb nc ez fb nd ne"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="nf ab dw"><div class="ng ab nh cl cj ni"><h2 class="bd hi fi z dy nj ea eb nk ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="nl l"><h3 class="bd b fi z dy nj ea eb nk ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="nm l"><p class="bd b fp z dy nj ea eb nk ed ef dx translated">medium.com</p></div></div><div class="nn l"><div class="no l np nq nr nn ns kt ne"/></div></div></a></div></div></div>    
</body>
</html>