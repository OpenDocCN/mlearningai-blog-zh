# å–æ ·ä»‹ç»

> åŸæ–‡ï¼š<https://medium.com/mlearning-ai/sampling-3042ccdd4621?source=collection_archive---------4----------------------->

## è¿™æ˜¯ä¸€ç§é€‰æ‹©æœ€å¥½çš„è‰ºæœ¯

![](img/b4d6f4e2936a4ad196078f5459c8ea35.png)

Photo by [Patrick Tomasso](https://unsplash.com/@impatrickt?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/books?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)

åœ¨è¿™ç¯‡åšæ–‡ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºé‡‡æ ·åŠå…¶ç›¸å…³ç»„ä»¶ã€‚ä¸è´å¶æ–¯ã€é¢‘ç‡ã€åˆ†å¸ƒç­‰å…¶ä»–èŠ±å“¨çš„ç»Ÿè®¡æœ¯è¯­ç›¸æ¯”ï¼Œè¿™ä¸ªä¸»é¢˜é€šå¸¸ä¸å¤ªé‡è¦ã€‚

é‡‡æ ·è¿™ä¸ªè¯é¢˜å¾ˆæ¯ç‡¥ï¼Œéœ€è¦ç”¨æˆ·ä»˜å‡ºç‰¹åˆ«çš„åŠªåŠ›æ¥é˜…è¯»ã€‚æˆ‘è¿™ç¯‡åšå®¢çš„ç›®çš„æ˜¯ä»¥ä¸€ç§æ›´ç›´è§‚çš„å½¢å¼åˆ†äº«é‡‡æ ·ä¸»é¢˜ã€‚

åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œé‡‡æ ·æŒ‡çš„æ˜¯æ¥è‡ªæ€»ä½“çš„æ•°æ®å­é›†ï¼Œå…¶ä¸­æ€»ä½“æ„å‘³ç€ä»»åŠ¡å¯ç”¨çš„æ¯ä¸€ä¸ªå¯èƒ½çš„æ•°æ®ï¼Œè¿™æ˜¯æ— é™çš„ï¼Œå› ä¸ºåœ¨ç°å®ä¸–ç•Œçš„ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬ä¸æ–­åœ°ä¸ºæ¨¡å‹æ”¶é›†æ•°æ®ä»¥è¿›è¡Œè®­ç»ƒå’ŒéªŒè¯ã€‚

![](img/0fa6317d15b16a6eabd89102b99c104e.png)

**Sampling**

## å–æ ·ç±»å‹

*   éæ¦‚ç‡æŠ½æ ·
*   éšæœºæˆ–æ¦‚ç‡æŠ½æ ·

## éæ¦‚ç‡æŠ½æ ·

æˆ‘ä»¬åœ¨è¿™é‡Œé€‰æ‹©çš„å­é›†æ˜¯åŸºäºä¸ªäººæˆ–ç”¨æˆ·çš„ï¼Œä»–ä»¬æ˜¯ä¸å¯èƒ½çš„ã€‚æ—¢ç„¶å®ƒåŸºäºç”¨æˆ·æˆ–ä¸ªäººï¼Œå®ƒå°±å¸¦æœ‰**åå·®**ã€‚æœ‰å„ç§éæ¦‚ç‡æŠ½æ ·çš„ä¾‹å­å¦‚ä¸‹

**æ–¹ä¾¿çš„æŠ½æ ·:**å­é›†é€‰æ‹©æ˜¯åŸºäºå¯ç”¨æ€§è¿›è¡Œçš„ã€‚è¿™æ ·å°±æ–¹ä¾¿äº†ã€‚

![](img/cba5473eb8e498e228ae2218b71b70be.png)

**Convenient Sampling**

**æ»šé›ªçƒæŠ½æ ·:**ç°æœ‰å­é›†æœ‰åŠ©äºå¯»æ‰¾ä¸‹ä¸€ç»„å­é›†ã€‚å®ƒä»æ ·æœ¬å­é›†æ»šåŠ¨åˆ°å…¶ä»–å­é›†ã€‚

![](img/d2e4d746b894b9b72bdfad5321b0705d.png)

**Snowball Sampling**

**åˆ¤æ–­å–æ ·:**æ ¹æ®ä¸“å®¶çš„å»ºè®®è¿›è¡Œå­é›†é€‰æ‹©ï¼Œä¸“å®¶å¯¹ä»»åŠ¡çš„æ ·æœ¬è¿›è¡Œåˆ¤æ–­ã€‚

![](img/25b2b34535fb11341a6cb130e382509a.png)

**Judgement Sampling**

**é…é¢æŠ½æ ·:**å­é›†é€‰æ‹©æŒ‰ç…§é¢„å…ˆç¡®å®šçš„é¡ºåºä»å¯ç”¨é…é¢ä¸­è¿›è¡Œï¼Œæ²¡æœ‰ä»»ä½•éšæœºåŒ–ã€‚

![](img/71ec5f4f8427c307967276ffdf3186f2.png)

**Quota Sampling**

ä½œä¸ºæœ€å¤§ä¼¼ç„¶æ³•çš„å€™é€‰ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºåœ¨é€‰æ‹©æ•°æ®æ—¶æœ‰åè§å¯¹æ¨¡å‹è®­ç»ƒæ˜¯ä¸åˆ©çš„ï¼Œä½†è¿™æ˜¯å¯ç”¨çš„æœ€ä½³é€‰æ‹©ï¼Œå› ä¸ºæœ€å¤§ä¼¼ç„¶æ³•çš„æ•°æ®æ˜¯æ–¹ä¾¿å¯ç”¨çš„ï¼Œè€Œä¸æ˜¯éšæœºç”Ÿæˆçš„ã€‚

## éæ¦‚ç‡æŠ½æ ·çš„å®ä¾‹

*   åœ¨äºšé©¬é€Šä¸Šå†™è¯„è®ºï¼Œå¯ä»¥è®¿é—®äº’è”ç½‘æˆ–æ„¿æ„å†™ä½œçš„äººè¢«æ•è·ä¸ºæ•°æ®ã€‚
*   è®­ç»ƒè¯­è¨€æ¨¡å‹ï¼Œç»´åŸºç™¾ç§‘æˆ– reddit æ•°æ®çš„å¯ç”¨æ€§ï¼Œè¿™ä¸æ˜¯äº’è”ç½‘ä¸Šæ‰€æœ‰å¯èƒ½çš„æ•°æ®ï¼Œé€‰æ‹©åå·®ã€‚
*   å½“å‰ç–¾ç—…çš„æ‚£è€…è®°å½•ã€‚

## éšæœºæˆ–æ¦‚ç‡æŠ½æ ·

![](img/12c7e913427d206b2f6b0d6c3a6e4db1.png)

**Random or Probability Sampling**

åœ¨éšæœºæŠ½æ ·ä¸­ï¼Œä»æ€»ä½“ä¸­é€‰æ‹©æ¯ä¸ªæ ·æœ¬çš„æ¦‚ç‡ç›¸ç­‰ã€‚è€ƒè™‘ä¸€ä¸ªåƒè§’å­è€è™æœºï¼Œå…¶ä¸­æ¯ä¸ªè½¬è½®ä»£è¡¨ä¸€ç»„é¡¹ç›®æˆ–æ•°å­—ï¼Œå‡è®¾æ¯ä¸ªè½¬è½®æœ‰ 10 ä¸ªé¡¹ç›®ï¼Œæ¯ä¸ªè½¬è½®ä¸­æ¯ä¸ªé¡¹ç›®çš„æœºä¼šæ˜¯ 1/10ï¼Œé€‰æ‹©æ˜¯éšæœºè¿›è¡Œçš„ã€‚

å®ç°ä¸Šé¢çš„é‡‡æ ·éå¸¸å®¹æ˜“ï¼Œä½†æ˜¯è€ƒè™‘ä¸€ä¸‹è¿™æ ·çš„æƒ…å†µï¼Œæˆ‘ä»¬æƒ³è¦é€‰æ‹©æ‰€æœ‰æ ·æœ¬çš„ 10%ã€‚å¦‚æœæœ‰ä¸€äº›ç¨€æœ‰ç±»åªå‡ºç°åœ¨ 0.1%çš„äººå£ä¸­ï¼Œé‚£ä¹ˆå°±æœ‰å¾ˆå¤§çš„æœºä¼šå®Œå…¨æ¼æ‰è¿™ä¸ªç¨€æœ‰ç±»ä¸­çš„æ ·æœ¬ã€‚åœ¨è¿™ç§é€‰æ‹©è¿‡ç¨‹ä¸­è®­ç»ƒçš„æ¨¡å‹å¯èƒ½è®¤ä¸ºç¨€æœ‰ç±»æ˜¯ä¸å¯ç”¨çš„ã€‚

## åˆ†å±‚æŠ½æ ·

![](img/7e2c2754567603a6ed73c9186cbb5137.png)

**Stratified Sampling**

å‡è®¾æˆ‘ä»¬æœ‰ 10 ä¸ªä¸åŒçš„ç±»è¦é¢„æµ‹ï¼Œæ¯ä¸ªç±»éƒ½æœ‰ä¸€äº›ä»£è¡¨è¯¥ç±»çš„æ•°æ®ç‚¹ã€‚ç°åœ¨ï¼Œå½“æˆ‘ä»¬æ‰§è¡ŒéšæœºæŠ½æ ·æ—¶ï¼Œæ¯”å¦‚ä»æ¯é—¨è¯¾ä¸­é€‰æ‹© 10%,æˆ‘ä»¬ä¸å¯èƒ½å®Œå…¨æ¼æ‰ä¸€é—¨è¯¾ã€‚è¿™è¢«ç§°ä¸ºåˆ†å±‚æŠ½æ ·ã€‚

åœ¨åˆ†å±‚æŠ½æ ·ä¸­ï¼Œæˆ‘ä»¬æ ¹æ®ä¸€äº›å…±åŒçš„è”ç³»å¯¹æ ·æœ¬è¿›è¡Œåˆ†ç»„ï¼Œå¹¶ç›¸åº”åœ°è¿›è¡Œé€‰æ‹©ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®æ€§åˆ«åˆ†ç»„ï¼Œå¹¶ä»æ¯ä¸ªç»„ä¸­é€‰æ‹© 10%ï¼Œä¿æŒæ ·æœ¬çš„å˜åŒ–ä¸å˜ã€‚æ¯ä¸€ç»„ç§°ä¸ºåœ°å±‚ã€‚

åˆ†å±‚æŠ½æ ·çš„ç¼ºç‚¹æ˜¯å½“æˆ‘ä»¬ä¸èƒ½ä»å¯ç”¨çš„æ ·æœ¬ä¸­åˆ›å»ºå­ç»„ï¼Œæˆ–è€…ä¸€ä¸ªæ ·æœ¬å¯ä»¥å±äºå¤šä¸ªå­ç»„ã€‚å½“æ‚¨æœ‰ä¸€ä¸ªå¤šæ ‡ç­¾ä»»åŠ¡å¹¶ä¸”ä¸€ä¸ªæ ·æœ¬å¯ä»¥æ—¢æ˜¯ A ç±»åˆæ˜¯ b ç±»æ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚ä¾‹å¦‚ï¼Œåœ¨å®ä½“åˆ†ç±»ä»»åŠ¡ä¸­ï¼Œä¸€ä¸ªåç§°å¯èƒ½æ—¢æ˜¯ä¸€ä¸ªäººåˆæ˜¯ä¸€ä¸ªåœ°ç‚¹ã€‚

## åŠ æƒæŠ½æ ·

![](img/e0f5e4d42bdc4a5109549a21fe755020.png)

**Weighted Sampling**

åœ¨åŠ æƒæŠ½æ ·ä¸­ï¼Œæ¯ä¸ªæ ·æœ¬éƒ½æœ‰ä¸€ä¸ªæƒé‡ï¼Œè¿™ä¸ªæƒé‡å†³å®šäº†å®ƒè¢«é€‰ä¸­çš„æ¦‚ç‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨å¸Œæœ›ä¸€ä¸ªæ ·æœ¬æœ‰ 30%çš„æœºä¼šè¢«é€‰ä¸­ï¼Œåˆ™èµ‹äºˆå®ƒæƒé‡ 0.3ã€‚è¿™ç§æ–¹æ³•å…è®¸ä½ åµŒå…¥ä¸»é¢˜çš„ä¸“ä¸šçŸ¥è¯†ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çŸ¥é“æœ€è¿‘çš„æ•°æ®å¯¹æ‚¨çš„æ¨¡å‹æ›´æœ‰ä»·å€¼ï¼Œæ‚¨å¯ä»¥èµ‹äºˆæœ€è¿‘çš„æ•°æ®æ›´å¤§çš„æƒé‡ã€‚

å½“æˆ‘ä»¬çš„å¯ç”¨æ•°æ®æ¥è‡ªä¸çœŸå®æ•°æ®ä¸åŒçš„åˆ†å¸ƒæ—¶ï¼Œè¿™ä¹Ÿæ˜¯æœ‰å¸®åŠ©çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨æˆ‘ä»¬çš„æ•°æ®ä¸­ï¼Œçº¢è‰²æ ·æœ¬ä»…å  25%ï¼Œè“è‰²æ ·æœ¬å  75%ï¼Œä½†æˆ‘ä»¬çŸ¥é“åœ¨ç°å®ä¸–ç•Œä¸­ï¼Œçº¢è‰²å’Œè“è‰²å‘ç”Ÿçš„æ¦‚ç‡ç›¸ç­‰ï¼Œå› æ­¤æˆ‘ä»¬ä¼šç»™çº¢è‰²æ ·æœ¬ä¸‰å€äºè“è‰²æ ·æœ¬çš„æƒé‡ã€‚

## é‡è¦æ€§æŠ½æ ·

é‡è¦æ€§æŠ½æ ·æ˜¯ä¸€ç§ç”¨äºä¼°è®¡ç‰¹å®šåˆ†å¸ƒæ€§è´¨çš„æŠ€æœ¯ï¼Œå®ƒåªå…·æœ‰ä»ä¸åŒåˆ†å¸ƒäº§ç”Ÿçš„æ ·æœ¬ï¼Œè€Œæ²¡æœ‰æ„Ÿå…´è¶£åˆ†å¸ƒçš„æ ·æœ¬ã€‚

*æ¥è‡ª Wiki:é‡è¦æ€§æŠ½æ ·æ˜¯ä¸€ç§* [*æ–¹å·®ç¼©å‡*](https://en.wikipedia.org/wiki/Variance_reduction) *æŠ€æœ¯ï¼Œå¯ç”¨äº* [*è’™ç‰¹å¡ç½—æ–¹æ³•*](https://en.wikipedia.org/wiki/Monte_Carlo_method) *ã€‚é‡è¦æ€§æŠ½æ ·èƒŒåçš„æ€æƒ³æ˜¯ï¼Œåœ¨ä¸€ä¸ª* [*æ¨¡æ‹Ÿ*](https://en.wikipedia.org/wiki/Simulation) *ä¸­ï¼Œè¾“å…¥* [*éšæœºå˜é‡*](https://en.wikipedia.org/wiki/Random_variables) *çš„æŸäº›å€¼æ¯”å…¶ä»–å€¼å¯¹è¢«ä¼°è®¡çš„å‚æ•°æœ‰æ›´å¤§çš„å½±å“ã€‚å¦‚æœè¿™äº›â€œé‡è¦çš„â€å€¼é€šè¿‡æ›´é¢‘ç¹çš„é‡‡æ ·å¾—åˆ°å¼ºè°ƒï¼Œé‚£ä¹ˆ* [*ä¼°è®¡é‡*](https://en.wikipedia.org/wiki/Estimator) *æ–¹å·®å°±å¯ä»¥å‡å°‘ã€‚å› æ­¤ï¼Œé‡è¦æ€§æŠ½æ ·çš„åŸºæœ¬æ–¹æ³•æ˜¯é€‰æ‹©ä¸€ä¸ªâ€œé¼“åŠ±â€é‡è¦å€¼çš„åˆ†å¸ƒã€‚*

é‡è¦æ€§æŠ½æ ·çš„æŒ‘æˆ˜æ˜¯æ‰¾åˆ°é¼“åŠ±é‡è¦å€¼çš„åˆ†å¸ƒã€‚[é‡è¦æŠ½æ ·åœ¨ RL ä¸­æœ‰å¹¿æ³›çš„åº”ç”¨](https://jonathan-hui.medium.com/rl-importance-sampling-ebfb28b4a8c6)

æ·±å…¥æ¢è®¨é‡è¦æ€§æŠ½æ ·: [RL â€”é‡è¦æ€§æŠ½æ ·](https://jonathan-hui.medium.com/rl-importance-sampling-ebfb28b4a8c6)(è®¸å®—ç››)

## å‚¨å±‚å–æ ·

å‚¨å±‚å–æ ·ä¹‹é—´çš„åŠ¨æœº:å‡è®¾æˆ‘ä»¬çœ‹åˆ°ä¸€ç³»åˆ—é¡¹ç›®ï¼Œä¸€æ¬¡ä¸€ä¸ªã€‚æˆ‘ä»¬å¸Œæœ›åœ¨å†…å­˜ä¸­ä¿å­˜ 10 ä¸ªé¡¹ç›®ï¼Œå¹¶ä¸”å¸Œæœ›ä»åºåˆ—ä¸­éšæœºé€‰æ‹©å®ƒä»¬ã€‚å¦‚æœæˆ‘ä»¬çŸ¥é“é¡¹ç›®æ€»æ•° ***n*** *å¹¶ä¸”å¯ä»¥ä»»æ„è®¿é—®é¡¹ç›®ï¼Œé‚£ä¹ˆè§£å†³æ–¹æ³•å°±å¾ˆç®€å•:åœ¨ 1 å’Œ* ***n*** *ä¹‹é—´é€‰æ‹© 10 ä¸ªä¸åŒçš„ç´¢å¼•* ***i*** *å’Œ****n****nï¼Œä¿ç•™ç¬¬***ã€T6 é—®é¢˜æ˜¯æˆ‘ä»¬å¹¶ä¸æ€»æ˜¯äº‹å…ˆçŸ¥é“ç¡®åˆ‡çš„**ã€‚****

> *****è¿™é‡Œçš„å…³é”®æ˜¯æˆ‘ä»¬æƒ³ä»ä¸€ä¸ªæœªçŸ¥çš„æ ·æœ¬é‡ n ä¸­éšæœºé€‰æ‹© k ä¸ªé¡¹ç›®ï¼Œæ¯ä¸ªé¡¹ç›®å…·æœ‰ç›¸åŒçš„æ¦‚ç‡*****

***æƒ³è±¡ä¸€ä¸‹ï¼Œæˆ‘ä»¬å¿…é¡»ä»ä¼ å…¥çš„ tweet æµä¸­æŠ½å– k æ¡ tweetã€‚ä½ ä¸çŸ¥é“æœ‰å¤šå°‘æ¡æ¨æ–‡ï¼Œä½†ä½ çŸ¥é“ä½ æ— æ³•å°†å®ƒä»¬éƒ½æ”¾å…¥å†…å­˜ï¼Œè¿™æ„å‘³ç€ä½ ä¸çŸ¥é“ä¸€æ¡æ¨æ–‡è¢«é€‰ä¸­çš„æ¦‚ç‡ã€‚ä½ æƒ³:***

*   ***ç¡®ä¿æ¯æ¡æ¨æ–‡éƒ½æœ‰åŒç­‰çš„è¢«é€‰ä¸­æ¦‚ç‡ï¼Œ***
*   ***æ‚¨å¯ä»¥éšæ—¶åœæ­¢ç®—æ³•å¹¶è·å¾—æ‰€éœ€çš„æ ·æœ¬ã€‚***

***ä¸€ä¸ªè§£å†³åŠæ³•æ˜¯æ²¹è—å–æ ·ã€‚ç®—æ³•æ˜¯è¿™æ ·çš„:***

1.  ***é¦–å…ˆå°† k å…ƒç´ æ”¾å…¥å®¹å™¨ä¸­ã€‚***
2.  ***å¯¹äºæ¯ä¸ªè¾“å…¥çš„ç¬¬ I ä¸ªå…ƒç´ ï¼Œç”Ÿæˆä¸€ä¸ªä»‹äº 1 å’Œ I ä¹‹é—´çš„éšæœºæ•° j***
3.  ***å¦‚æœ 1â‰¤jâ‰¤kï¼›ç”¨ ith æ›¿æ¢å‚¨å±‚ä¸­çš„ jth***

***æ¯ä¸ªè¾“å…¥çš„ç¬¬ I ä¸ªå…ƒç´ æœ‰(k / i)ä¸ªæ¦‚ç‡åœ¨å‚¨å±‚ä¸­ã€‚ä½ ä¹Ÿå¯ä»¥è¯æ˜æ²¹è—ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æœ‰(k / i)çš„æ¦‚ç‡åœ¨é‚£é‡Œã€‚***

***![](img/56de4ef31bd58183e9a7bd55838bd90c.png)***

*****Reservoir sampling*****

```
*#Reservoir Sampling**(* S has items to sample, R will contain the result *)
ReservoirSample(S[1..n], R[1..k])
  // fill the reservoir array
  for i := 1 to k
      R[i] := S[i]

  // replace elements with gradually decreasing probability
  for i := k+1 to n
    (* randomInteger(a, b) generates a uniform integer from the inclusive range {a, ..., b} *)
    j := randomInteger(1, i)
    if j <= k
        R[j] := S[i]***
```

****ä¾‹å¦‚ï¼Œæˆ‘ä»¬å°†å¤„ç†ä¸€ä¸ªåŒ…å«ä¸‰ä¸ªå…ƒç´ çš„æµï¼Œå¦‚ä¸‹æ‰€ç¤º:****

1.  ****å‚¨å­˜ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚****
2.  ****ä»¥ 1/2 çš„æ¦‚ç‡å­˜å‚¨ç¬¬äºŒä¸ªå…ƒç´ ã€‚ç°åœ¨è¿™ä¸¤ç§å…ƒç´ åœ¨æ°´åº“ä¸­çš„æ¦‚ç‡ç›¸ç­‰ã€‚****
3.  ****ä»¥ 1/3 çš„æ¦‚ç‡å­˜å‚¨ç¬¬ä¸‰ä¸ªå…ƒç´ ã€‚å‰é¢çš„ä¸¤ä¸ªå…ƒç´ ä¹Ÿæœ‰ä¸€ä¸ªæœ€ç»ˆçš„æ¦‚ç‡(1/2)Ã·(2/3)= 1/3 è¢«é€‰ä¸­ã€‚****

***æ„Ÿè°¢é˜…è¯»ã€‚å¦‚æœä½ å–œæ¬¢é˜…è¯»æˆ‘çš„æ–‡ç« ï¼Œè¯·æŸ¥çœ‹æ›´å¤šæ–‡ç« ã€‚***

## ***åœ¨ [LinkedIn](https://www.linkedin.com/in/mayur-jain-ds) å’Œ [Twitter](https://twitter.com/mayur__22) ä¸Šä¸æˆ‘è”ç³»ğŸ… âœ‹***

## ***å‚è€ƒ***

*   *****CS 329S:æœºå™¨å­¦ä¹ ç³»ç»Ÿè®¾è®¡**ç”±[èŠ¯ç‰‡èƒ¡å»¶](https://huyenchip.com)ã€[è¿ˆå…‹å°”Â·åº“å¸•](https://michaeljohncooper.com/)***