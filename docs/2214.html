<html>
<head>
<title>Easy deployment of AI microservices</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AI微服务轻松部署</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/easy-deployment-of-ai-microservices-514f8f2830e8?source=collection_archive---------6-----------------------#2022-03-25">https://medium.com/mlearning-ai/easy-deployment-of-ai-microservices-514f8f2830e8?source=collection_archive---------6-----------------------#2022-03-25</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="fece" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在AI微服务的开发和部署中，有一些步骤不仅非常耗时，而且非常麻烦。Emily 就是为了帮助开发者而诞生的。今天，我将在几分钟内向您展示如何使用Emily构建生产就绪的人工智能解决方案。<br/>让我们从头开始，接着是如何使用它们的例子。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/06fbcc64f9097aa9336176ac36f10eba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HSOt70pg46pHQl3iNSUynw.png"/></div></div></figure><h1 id="a6fa" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">艾米莉是什么？</h1><p id="591f" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated"><strong class="ig hi">艾米丽</strong>是开发者工具包，帮助<br/>的工程师和数据科学家开发和部署人工智能微服务。Emily允许您构建和部署生产就绪的人工智能微服务系统，同时您可以专注于重要的部分——人工智能。从项目创建到生产环境中的最终部署，一切都将由Emily协调。<br/>基本的“Emily Core”包现在已经扩展到包括“Emily <br/> Deploy”，其中主要关注的是帮助部署AI <br/>微服务。使用Emily Core，您可以获得启动人工智能项目所需的一切。当项目完成并准备部署时，Emily Deploy会助您一臂之力。Emily Deploy提供了配置服务器和生产环境的直观流程，使无缝部署项目成为可能。Emily Deploy确保如果项目在本地为开发人员工作，它也将在生产环境中工作！Emily由丹麦的Ambolt AI开发。</p><blockquote class="ks"><p id="566f" class="kt ku hh bd kv kw kx ky kz la lb jb dx translated">“由于我们在Ambolt AI的工作涉及为客户自动化数据和决策流程，我们已经采取了自己的措施，创建了可以自动化部分部署流程的AI平台。我们通过使用该平台节省的时间有利于我们的客户。我们可以将精力投入到开发的定制解决方案部分，在基本配置和部署上花费更少的时间。简而言之，我们已经自动化了开发过程中“无聊”的部分——可能花费不必要的长时间或导致挫折的部分。</p><p id="0361" class="kt ku hh bd kv kw kx ky kz la lb jb dx translated">我们自己使用这个平台，现在也向所有其他开发者开放。"</p><p id="4006" class="kt ku hh bd kv kw kx ky kz la lb jb dx translated"><em class="lc"> -安博尔特首席执行官安德烈亚斯·贝尔·埃里克森</em></p></blockquote><p id="80ec" class="pw-post-body-paragraph ie if hh ig b ih ld ij ik il le in io ip lf ir is it lg iv iw ix lh iz ja jb ha bi translated">你可以在这里阅读更多关于Emily的内容:<a class="ae kr" href="https://ambolt.io/emily-ai/" rel="noopener ugc nofollow" target="_blank">https://ambolt.io/emily-ai/</a><br/>我们都同意，开发AI和ML项目是AI解决方案中最有趣的部分，生产和部署的设置相当繁琐和耗时。在接下来的部分中，我将向您展示如何快速入门！</p><h1 id="6e70" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">我在哪里可以找到艾米丽，要花多少钱？</h1><p id="7859" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">好消息！Emily Core是免费的，甚至不需要帐户！你可以从这里下载艾米丽核心:<a class="ae kr" href="https://ambolt.io/emily-ai/" rel="noopener ugc nofollow" target="_blank">ambolt.io/emily-ai/</a></p><p id="bb72" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下载并安装Emily将确保您的系统是最新的，并安装所有必要的依赖项。Emily旨在使用<a class="ae kr" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker </a>在容器化的环境中开发您的解决方案。您可以在不了解Docker的情况下使用Emily，因为您不需要与Docker交互。这就是艾米丽施展魔法的地方！</p><p id="87be" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">继续，下载并安装Emily，如果您在安装过程中遇到任何问题，请留下评论，我会联系您。<br/>将Emily安装到您的终端后，键入:</p><pre class="jd je jf jg fd li lj lk ll aw lm bi"><span id="a244" class="ln jp hh lj b fi lo lp l lq lr">emily</span></pre><p id="b5cb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果Emily安装正确，您应该会看到一条Hello消息，显示您可以使用的不同命令。Run <code class="du ls lt lu lj b">emily doctor</code>让Emily解决运行的需求，这包括设置Docker、安装正确的Nvidia驱动程序、python扩展等。</p><p id="4480" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当<code class="du ls lt lu lj b">emily doctor</code>完成后，您就可以开始开发了！我们开始吧！</p><h1 id="9f92" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">构建您的第一个项目</h1><p id="f641" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">在这一节中，我将向您展示使用Emily开始构建一个项目是多么顺利和容易。在您最喜欢的终端中，编写以下命令:</p><pre class="jd je jf jg fd li lj lk ll aw lm bi"><span id="b595" class="ln jp hh lj b fi lo lp l lq lr">emily build</span></pre><p id="bc2b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">它将指导您完成创建项目的过程。首先，你应该为你的项目选择一个名字，在这篇文章中我将使用这个名字<code class="du ls lt lu lj b">demo-project</code>。</p><p id="805a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">接下来，您应该为您的项目选择一个模板，您可以选择一个包含API设置的模板，这样您的新项目在部署时就已经有了可以与之通信的端点。您也可以选择默认模板，它只包含运行所需的最少模板。我会为我的项目选择<code class="du ls lt lu lj b">API</code>。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es lv"><img src="../Images/1ddcb4a0a9b9a535ca79e42143a837fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vnH8CBW_ox0_80ANzCpsKQ.png"/></div></div></figure><p id="9982" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">接下来(如果在ubuntu上运行),会询问你是否希望访问你的容器中的NVIDIA GPU。最酷的是，它会自动为您的项目建立一个具有CUDA功能的环境，因此您可以使用GPU进行训练和推断。在您的系统上手动安装CUDA可能是一项令人沮丧的任务，但是Emily可以轻松完成！我会选择<code class="du ls lt lu lj b">true</code>。</p><p id="2163" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最后你应该选择的是你预期的项目类型，无论你是打算做NLP，计算机视觉还是基本的机器学习。这不会限制您，它只是为您提供了用于该任务的预安装库。<br/>我是计算机视觉的家伙，所以我选<code class="du ls lt lu lj b">Computer Vision</code>。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es lw"><img src="../Images/2bc532f8cb8e4f73c6ddf2ddefe753a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j7ZMC3YAg07IVqj5vaJziw.png"/></div></div></figure><p id="84fd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最后，你可以选择是否想要一个深度学习平台，如<code class="du ls lt lu lj b">Tensorflow</code>或<code class="du ls lt lu lj b">PyTorch</code>，你也可以只选择<code class="du ls lt lu lj b">No deep learning</code>。为了向你展示艾米莉的单纯，我选<code class="du ls lt lu lj b">Tensorflow</code>。</p><p id="acf6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你会被问到你想用哪个编辑器来开发，目前可以用<code class="du ls lt lu lj b">VScode</code>、<code class="du ls lt lu lj b">PyCharm</code>、<code class="du ls lt lu lj b">Jupyter Notebook / Lab</code>。我个人喜欢<code class="du ls lt lu lj b">VScode</code>，所以我会选择它。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es lx"><img src="../Images/201ae4f3d08899b128be7faee845bbdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*S7VWDC_cRHKJUzLAzh7G0Q.png"/></div></figure><p id="bc7a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，环境将被构建，所需的库将被下载和安装，在您等待的时候去喝杯咖啡吧…</p><p id="a119" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦Visual Studio代码出现，您就可以开始工作了。要查看一切是否正常，请创建一个python文件并插入以下代码:</p><pre class="jd je jf jg fd li lj lk ll aw lm bi"><span id="62c9" class="ln jp hh lj b fi lo lp l lq lr">import tensorflow as tf</span><span id="7f58" class="ln jp hh lj b fi ly lp l lq lr">print("# GPUs Available: ", len(tf.config.experimental.list_physical_devices('GPU')))</span></pre><p id="79eb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你会看到它输出:<code class="du ls lt lu lj b"># GPUs Available: 1</code>，就是这样，你现在有了一个带有CUDA和GPU访问的容器化开发环境。环境与您的个人文件是隔离的。</p><h1 id="24fe" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">调查关联的API</h1><p id="051c" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">因此，我们确实用API构建了一个项目，这意味着我们可以使用浏览器与容器进行通信。尝试打开<code class="du ls lt lu lj b">api.py</code>并运行python文件。转到浏览器，输入<code class="du ls lt lu lj b">localhost:4242</code>。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es lz"><img src="../Images/8c8b5d090450ea7d61056475b95c56e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bAqxjPjRmTgxZBjtByqoCw.png"/></div></div></figure><p id="a991" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您现在可以看到您的API正在运行，您可以按下<code class="du ls lt lu lj b">Run</code>来获得您的API的健康检查。</p><p id="43e2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">导航回<code class="du ls lt lu lj b">api.py</code>文件，您可以找到与此类似的部分:</p><pre class="jd je jf jg fd li lj lk ll aw lm bi"><span id="1640" class="ln jp hh lj b fi lo lp l lq lr">@app.get('/api')<br/>def hello():<br/>return {<br/>"service": Environment().COMPOSE_PROJECT_NAME,<br/>"uptime": get_uptime()<br/>}</span></pre><p id="9103" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">本节创建运行状况检查端点，并定义它应该返回的内容。让我们为您的ML模型的自定义端点创建一个端点，在您的<code class="du ls lt lu lj b">/api</code>端点下插入以下部分:</p><pre class="jd je jf jg fd li lj lk ll aw lm bi"><span id="3f3e" class="ln jp hh lj b fi lo lp l lq lr">@app.post('/sentiment')<br/>def sentiment(sentence: str):<br/>   sentiment = 'Positive'<br/>   return {'sentence': sentence, 'sentiment': sentiment}</span></pre><p id="8ae3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">重新运行<code class="du ls lt lu lj b">api.py</code>文件并导航到<code class="du ls lt lu lj b">localhost:4242/docs</code>，找到您的<code class="du ls lt lu lj b">sentiment</code>端点。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es ma"><img src="../Images/d9833d4bf555f78a14523ce19eb59957.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7zlx0g2Hhk3VgpmbIAmCuw.png"/></div></div></figure><p id="3e63" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">单击向下箭头，找到关于您的端点的详细信息。试着按下<code class="du ls lt lu lj b">Try it out</code>按钮，你可以写一个句子到你的端点，然后按下执行。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es mb"><img src="../Images/ea587f92030ce7b8911b07f33e58c58a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NKt7Mi1btOX9Ld0igUDF5A.png"/></div></div></figure><p id="f384" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您应该会看到响应正文:</p><pre class="jd je jf jg fd li lj lk ll aw lm bi"><span id="2643" class="ln jp hh lj b fi lo lp l lq lr">{<br/>  "sentence": "Emily is cool",<br/>  "sentiment": "Positive"<br/>}</span></pre><p id="73e9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您刚刚创建了一个新的端点，它将在几秒钟内开始工作。您可以创建一个情感分析模型来预测情感，而不是动态地将情感指定为积极的。我不会详细讲述你是如何构建你的ML模型的，因为我假设你已经知道了。</p><h1 id="6e11" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">Localhost没那么好玩！</h1><p id="c304" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">好了，现在我们有了一个包含所有代码的Docker容器，我们可以看到它正在我的机器上运行。Docker的好处是，如果它能在我的机器上工作，那么它也能在你的机器上工作。更好的是，它还可以在您希望托管您的解决方案的服务器上工作！。</p><p id="c238" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Emily可以在几分钟内帮助您将解决方案部署到服务器上，只需运行<code class="du ls lt lu lj b">emily deploy server &lt;project-name&gt;</code>即可部署您的项目。<br/>我的情况是<code class="du ls lt lu lj b">emily deploy server demo-project</code>。<br/> <em class="mc">注意:Emily deploy是一项付费功能，但你可以免费试用一个月。</em></p><p id="3715" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您将被要求创建一个环境，通常，我们会为要投入生产的软件创建一个生产环境，所以让我们使用生产。<br/>你为你的生产环境指定一个端口，选择一个在你的服务器上免费转发的端口，我选择<code class="du ls lt lu lj b">4242</code>。而选择GPU与否，对于这个，你不需要GPU。在以下视频中，您可以看到实际部署:</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="md me l"/></div></figure><p id="9b93" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如您所见，只需几次点击，您就可以将项目部署到生产服务器上，并且可以从任何地方访问您的API。更酷的是，输入配置后，您可以通过选择刚刚添加的环境和服务器来轻松地重新部署，它会重新部署您的解决方案。</p><blockquote class="mf mg mh"><p id="d2e1" class="ie if mc ig b ih ii ij ik il im in io mi iq ir is mj iu iv iw mk iy iz ja jb ha bi translated">你不能否认这并不容易！</p></blockquote><p id="8f3d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Emily为您提供了更多的实用程序，您可以在这里的文档<a class="ae kr" href="https://emily.ambolt.io/docs" rel="noopener ugc nofollow" target="_blank">中看到它们。<br/> <em class="mc">注意:Emily也可以轻松地部署到Kubernetes集群！</em></a></p><p id="58b0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这就是现在的全部内容，我已经展示了您必须在几分钟内构建和部署一个容器化的解决方案。利用Emily来处理开发过程中所有繁琐和麻烦的部分。将来会有更多关于艾米丽的信息。</p><h1 id="5fdb" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">有用的链接:</h1><ul class=""><li id="f3bd" class="ml mm hh ig b ih km il kn ip mn it mo ix mp jb mq mr ms mt bi translated">安博尔特·艾:<a class="ae kr" href="https://ambolt.io/" rel="noopener ugc nofollow" target="_blank">https://ambolt.io/</a></li><li id="8d9e" class="ml mm hh ig b ih mu il mv ip mw it mx ix my jb mq mr ms mt bi translated">艾米丽:https://ambolt.io/emily-ai/</li><li id="b45b" class="ml mm hh ig b ih mu il mv ip mw it mx ix my jb mq mr ms mt bi translated">文件:<a class="ae kr" href="https://emily.ambolt.io/docs" rel="noopener ugc nofollow" target="_blank">https://emily.ambolt.io/docs</a></li><li id="8553" class="ml mm hh ig b ih mu il mv ip mw it mx ix my jb mq mr ms mt bi translated">邮箱:<a class="ae kr" href="mailto:emily@ambolt.io" rel="noopener ugc nofollow" target="_blank"> emily@ambolt.io </a></li></ul><div class="mz na ez fb nb nc"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="nd ab dw"><div class="ne ab nf cl cj ng"><h2 class="bd hi fi z dy nh ea eb ni ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="nj l"><h3 class="bd b fi z dy nh ea eb ni ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="nk l"><p class="bd b fp z dy nh ea eb ni ed ef dx translated">medium.com</p></div></div><div class="nl l"><div class="nm l nn no np nl nq jm nc"/></div></div></a></div></div></div>    
</body>
</html>