<html>
<head>
<title>The “One Minute Map” — static maps creation with the R tmap package: The case of MetaWealth Index in Nigeria</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">“一分钟地图”——用R tmap软件包创建静态地图:尼日利亚元财富指数案例</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/the-one-minute-map-static-and-interactive-maps-creation-with-the-r-tmap-package-6f919b57d7f7?source=collection_archive---------11-----------------------#2022-01-25">https://medium.com/mlearning-ai/the-one-minute-map-static-and-interactive-maps-creation-with-the-r-tmap-package-6f919b57d7f7?source=collection_archive---------11-----------------------#2022-01-25</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="ce14" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">是的，你没看错！</strong>这篇文章与Missy或鲁大著名的“一分钟人”歌曲无关，但它直接介绍了R中的一系列数据分析应用程序，尤其是如何在一分钟内创建和处理R和Rstudio中的地图！！</p><p id="d3dc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是我将在<a class="jc jd ge" href="https://medium.com/u/504c7870fdb6?source=post_page-----6f919b57d7f7--------------------------------" rel="noopener" target="_blank">媒体</a>上为数据科学家和爱好者分享的一系列文章的第一篇，让他们更多地使用r</p><p id="150c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在本节课中，我将用不到一分钟的时间带您体验用R中的“tmap”包创建静态地图的顺利过程。</p></div><div class="ab cl je jf go jg" role="separator"><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj jk"/><span class="jh bw bk ji jj"/></div><div class="ha hb hc hd he"><h1 id="fc3d" class="jl jm hh bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">关于数据</h1><p id="a4b8" class="pw-post-body-paragraph ie if hh ig b ih kj ij ik il kk in io ip kl ir is it km iv iw ix kn iz ja jb ha bi translated">作为一名人道主义数据科学家，我专注于冲突、贫困和脆弱性是我研究的主要驱动力的领域，因此我以尼日利亚为例来绘制“加权相对财富指数”，该指数是由<a class="jc jd ge" href="https://medium.com/u/4e7a97edbbf7?source=post_page-----6f919b57d7f7--------------------------------" rel="noopener" target="_blank"> Meta </a> Data for Good团队使用包含超过10万个观察结果(记录)的大型数据集制作的。数据集只有4个变量，经度，纬度，wri和误差。更多关于数据及其背后的研究由<a class="jc jd ge" href="https://medium.com/u/4e7a97edbbf7?source=post_page-----6f919b57d7f7--------------------------------" rel="noopener" target="_blank">Meta</a>T8】这里很好的解释。</p><h1 id="9ac1" class="jl jm hh bd jn jo kp jq jr js kq ju jv jw kr jy jz ka ks kc kd ke kt kg kh ki bi translated">静态地图</h1><p id="7b31" class="pw-post-body-paragraph ie if hh ig b ih kj ij ik il kk in io ip kl ir is it km iv iw ix kn iz ja jb ha bi translated">使用R中的“tmap”包，我能够使用dots技术创建第一张WRI地图。</p><p id="a902" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要创建一个点状地图，您需要一个带有经度和纬度的数据集以及一些指示器来为您的地图添加更多信息，或者您需要一个<em class="ku"> shapefile </em>来将所有信息嵌入到其相关组件中。</p><p id="2390" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在“tmap”包中，通过设置坐标变量和CRS投影系统，使用st_as_sf将数据集转换为地理标准文件:</p><p id="0003" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">wrimap </p><p id="b18a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">I then used tm_shape and tm_dots to inform the console that I am creating a dots map:</p><p id="7bf7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">tm_shape(wrimap) + <br/> tm_dots(alpha = 0.8，col = "rwi "，palette = "PRGn "，<br/> stretch.palette = TRUE，size = 0.01)+</p><p id="b126" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">布局是“tmap”中的可选项目，用户可以在此调整可视化参数:<br/> tm_layout (frame = TRUE，bg.color = "transparent "，<br/> legend.title.size = 1，<br/> legend.text.size = 0.6，<br/> legend.position = c("right "，" bottom ")，<br/> legend.bg.color = "white "，<br/> legend.bg.alpha = 1，<br/> main.title = "尼日利亚加权相对财富指数"，</p><p id="e881" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是显示尼日利亚加权相对财富指数的结果图。</p><figure class="kw kx ky kz fd la er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es kv"><img src="../Images/a3e512548bb26b1a2a1fcc6b0d1ed140.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5vq4vavKr95U33nrfc0u2g.png"/></div></div></figure><h1 id="e15c" class="jl jm hh bd jn jo kp jq jr js kq ju jv jw kr jy jz ka ks kc kd ke kt kg kh ki bi translated">深入研究RWI的数据</h1><p id="fa22" class="pw-post-body-paragraph ie if hh ig b ih kj ij ik il kk in io ip kl ir is it km iv iw ix kn iz ja jb ha bi translated">该图显示了该国北部地区和南部地区之间的巨大财富差异，北部地区的负指数往往很低，而南部地区根据指数看起来更富裕。</p><p id="37f7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">同样，作为一名人道主义数据科学家，我更关心冲突可能是不太富裕环境的驱动因素的领域。</p><p id="bb9e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这方面，我将绘制博尔诺州、阿达马瓦州和约贝州地方政府区域(LGA)的平均RWI。</p><p id="c18f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">可以从人道主义数据交换(HDX) <a class="ae ko" href="https://data.humdata.org" rel="noopener ugc nofollow" target="_blank">网站</a>下载地方政府机构的形状文件。</p><p id="9706" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用“SpatialEco”包中的“point.in.poly”函数，我将LGAs信息添加到我的点形状文件中。然后，我使用“dplyr”软件包计算了每个地方政府区的WRI平均值。</p><p id="2f0d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后要求“Tigris”包将具有WRI均值的新数据帧连接回LGAs shapefile:</p><p id="3b03" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">lga_rwi  wri_mean，<br/> "ADM2_EN "，<br/> "ADM2_EN "，<br/> how = "left") #将rwi平均值加入lga形状文件</p><p id="4570" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在是时候使用“tmap”包中的tm_fill函数将我们的RWI数据映射到LGA上了:</p><p id="a642" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">wri . LGA . mapTM _ shape(LGA _ rwi)+<br/>TM _ fill(col = " wri "，<br/> palette = "PRGn "，<br/> stretch.palette = FALSE，<br/>n = 10)+<br/>TM _ borders(col = " black "，<br/>LWD = 0.5)+<br/>TM _ text(" ADM 2 _ EN "，<br/>size = 0.7)+<br/>TM _ layout(【T</p><figure class="kw kx ky kz fd la er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es lh"><img src="../Images/f750aadd55dd96d74045859cc1e235d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MyrBXLEoT7021ryZWQMoww.png"/></div></div></figure><p id="39a7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如你所见，除了迈杜古里和约拉这两个主要城市之外，这三个州的地方政府区都有财富减少的趋势，这两个城市的WRI达到了0.8到1.2之间的正数，这也被认为是相对较低的。</p><p id="67ef" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在接下来的会议中，我们将使用不同的数据集进行一些空间相关性分析，这可能有助于我们揭示在这种背景下RWI较低的原因。</p><div class="li lj ez fb lk ll"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="lm ab dw"><div class="ln ab lo cl cj lp"><h2 class="bd hi fi z dy lq ea eb lr ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="ls l"><h3 class="bd b fi z dy lq ea eb lr ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="lt l"><p class="bd b fp z dy lq ea eb lr ed ef dx translated">medium.com</p></div></div><div class="lu l"><div class="lv l lw lx ly lu lz lf ll"/></div></div></a></div></div></div>    
</body>
</html>