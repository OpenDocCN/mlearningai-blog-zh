<html>
<head>
<title>Database Management in SQL (Cont.)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SQL数据库管理(续。)</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/database-management-in-sql-cont-59220e0dfe35?source=collection_archive---------6-----------------------#2022-02-16">https://medium.com/mlearning-ai/database-management-in-sql-cont-59220e0dfe35?source=collection_archive---------6-----------------------#2022-02-16</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/625f86294338a2107ae9e97641e75a5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G6DAemevHz4lvPjCTWQXcg.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Image- <a class="ae hu" href="https://twitter.com/umgbhalla" rel="noopener ugc nofollow" target="_blank">Umang Bhalla</a></figcaption></figure><div class=""/><p id="bbb0" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这篇文章是我在<a class="ae hu" rel="noopener" href="/@tanav2202/database-management-system-with-sql-4109cbef79f9"> DBMS系列</a>上一篇文章的延续。</p><p id="94ab" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">对于这篇文章，我使用一个随机大学的数据库。</p><p id="8b58" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我拥有的表格列表如下:</p><figure class="jt ju jv jw fd hj er es paragraph-image"><div class="er es js"><img src="../Images/a5a7dc675a8a4c2f42c9892b15366ddb.png" data-original-src="https://miro.medium.com/v2/resize:fit:838/format:webp/1*PMjP08dns7zMWI2H2-LfLA.png"/></div><figcaption class="hq hr et er es hs ht bd b be z dx">Tables in University Database</figcaption></figure><p id="7ed3" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">不要被<code class="du jx jy jz ka b">owner= Postgres</code>弄糊涂了，那是因为我在本地主机中使用Postgresql(大多数命令与sql相同)。</p><h2 id="5643" class="kb kc hx bd kd ke kf kg kh ki kj kk kl jf km kn ko jj kp kq kr jn ks kt ku kv bi translated">与和或</h2><p id="6412" class="pw-post-body-paragraph iu iv hx iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr ha bi translated">and和OR操作符<strong class="iw hy">用于根据多个条件</strong>过滤记录:如果由AND分隔的所有条件都为真，AND操作符将显示一条记录。如果由or分隔的任何条件为真，OR运算符将显示一条记录。</p><pre class="jt ju jv jw fd lb ka lc ld aw le bi"><span id="63fe" class="kb kc hx ka b fi lf lg l lh li">select name from instructor I , department D where D.dept_name=I.dept_name and (I.dept_name='Finance' or building in ('Watson','Taylor'));</span></pre><figure class="jt ju jv jw fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lj"><img src="../Images/fcdff56f1d2eb009f5f26d2344137a4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VqbH7EHxnV7IOafTMiQZ6w.png"/></div></div></figure><p id="c343" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这显示了在<strong class="iw hy">财务部</strong>或其部门位于<strong class="iw hy">沃森或泰勒大楼</strong>的<strong class="iw hy">讲师名单</strong>。</p><h2 id="a118" class="kb kc hx bd kd ke kf kg kh ki kj kk kl jf km kn ko jj kp kq kr jn ks kt ku kv bi translated">字符串操作</h2><p id="ae1c" class="pw-post-body-paragraph iu iv hx iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr ha bi translated">SQL Server提供了下列字符串运算符。字符串串联运算符可以:</p><ul class=""><li id="c836" class="lk ll hx iw b ix iy jb jc jf lm jj ln jn lo jr lp lq lr ls bi translated">将两个或多个字符、列等组合成一个表达式</li><li id="928f" class="lk ll hx iw b ix lt jb lu jf lv jj lw jn lx jr lp lq lr ls bi translated">在字符串比较操作中匹配一个或多个字符。</li></ul><p id="4387" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">语法:<code class="du jx jy jz ka b">expression1 + expression2</code>连接两个表达式</p><p id="8941" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">“%”帮助查找零个或多个字符的任何字符串</p><p id="cb08" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">“_”有助于查找单个字符</p><p id="baa0" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">“[]”帮助查找指定范围([a-f])或([abcdef])内的单个字符</p><p id="eaee" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">“[^]”帮助查找不在范围([^a-f])或([^abc])内的单个字符</p><p id="6961" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">LIKE查询通常与WHERE和string运算符一起使用。</p><p id="3f84" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">比如:<code class="du jx jy jz ka b">Select * from table where x LIKE “x%”</code></p><p id="b8d1" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在我的大学数据库中使用这个</p><pre class="jt ju jv jw fd lb ka lc ld aw le bi"><span id="c4ab" class="kb kc hx ka b fi lf lg l lh li">SELECT course_id , title<br/>FROM course<br/>WHERE course_id LIKE '7__';</span></pre><figure class="jt ju jv jw fd hj er es paragraph-image"><div class="er es ly"><img src="../Images/e02c313f244a977a1071a2a6a61261e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*0wDEgytjEX3_tkmOM1wz1w.png"/></div></figure><p id="4841" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这显示了具有从7开始的3位数课程id的课程列表。</p><h2 id="5a6f" class="kb kc hx bd kd ke kf kg kh ki kj kk kl jf km kn ko jj kp kq kr jn ks kt ku kv bi translated">以...排序</h2><p id="7404" class="pw-post-body-paragraph iu iv hx iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr ha bi translated"><strong class="iw hy">用于根据一列或多列对数据进行升序或降序排序</strong>。</p><p id="46aa" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">添加ASC使输出按升序排列(通常是默认的)</p><p id="e241" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">添加DESC会使输出按降序排列。</p><pre class="jt ju jv jw fd lb ka lc ld aw le bi"><span id="c2da" class="kb kc hx ka b fi lf lg l lh li">SELECT course_id , title<br/>FROM course<br/> WHERE course_id LIKE ‘_3_’ ORDER BY course_id desc;</span></pre><figure class="jt ju jv jw fd hj er es paragraph-image"><div class="er es lz"><img src="../Images/cbacce827fc267cd3eb6d1f2c7a8adc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/format:webp/1*OTTAABeLVOpwnm29RJ8TlQ.png"/></div></figure><p id="0e75" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这显示了所有课程的课程id和标题，它们是3位数，中间有3个，按降序排列。</p><h2 id="ecb5" class="kb kc hx bd kd ke kf kg kh ki kj kk kl jf km kn ko jj kp kq kr jn ks kt ku kv bi translated">分组依据</h2><p id="3a5f" class="pw-post-body-paragraph iu iv hx iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr ha bi translated">将它与SELECT语句一起使用会根据行在一列或几列中的值将行分组。下面给出了一个例子(检查AVG的查询)</p><h1 id="e484" class="ma kc hx bd kd mb mc md kh me mf mg kl mh mi mj ko mk ml mm kr mn mo mp ku mq bi translated">聚合函数</h1><p id="bed4" class="pw-post-body-paragraph iu iv hx iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr ha bi translated">SQL <strong class="iw hy">中的聚合函数对多个值执行计算并返回单个值。</strong>示例:AVG、总和、最小值、最大值、计数等。</p><h2 id="35fd" class="kb kc hx bd kd ke kf kg kh ki kj kk kl jf km kn ko jj kp kq kr jn ks kt ku kv bi translated">AVG</h2><p id="0348" class="pw-post-body-paragraph iu iv hx iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr ha bi translated">AVG函数计算一组值的平均值。</p><pre class="jt ju jv jw fd lb ka lc ld aw le bi"><span id="617a" class="kb kc hx ka b fi lf lg l lh li">SELECT building, AVG(capacity)<br/>FROM classroom<br/>GROUP BY building<br/>HAVING AVG(capacity) &gt; 25;</span></pre><figure class="jt ju jv jw fd hj er es paragraph-image"><div class="er es mr"><img src="../Images/c088dbcc6af3879eccb2f737d3acca19.png" data-original-src="https://miro.medium.com/v2/resize:fit:914/format:webp/1*JK60N2Qdh_MfruVyvuQ0fg.png"/></div></figure><p id="35c7" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这显示了平均超过25人的每栋建筑的平均座位容量。</p><h2 id="4894" class="kb kc hx bd kd ke kf kg kh ki kj kk kl jf km kn ko jj kp kq kr jn ks kt ku kv bi translated">部</h2><p id="ca74" class="pw-post-body-paragraph iu iv hx iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr ha bi translated">MIN聚合函数返回一组非空值中的最小值。</p><p id="81b8" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><code class="du jx jy jz ka b">SELECT MIN(salary) AS least_salary FROM instructor;</code></p><figure class="jt ju jv jw fd hj er es paragraph-image"><div class="er es ms"><img src="../Images/33cee5bdc198c3d67a2ba6707c06014d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/1*N64OUS3nG6akK81yk_yZdw.png"/></div></figure><p id="61a7" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这显示了任何讲师的最低工资。</p><h2 id="eb64" class="kb kc hx bd kd ke kf kg kh ki kj kk kl jf km kn ko jj kp kq kr jn ks kt ku kv bi translated">马克斯(男子名ˌ等于Maximilian)</h2><p id="2f01" class="pw-post-body-paragraph iu iv hx iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr ha bi translated">MAX聚合函数返回一组非空值中的最大值。</p><p id="d505" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><code class="du jx jy jz ka b">SELECT MAX(salary) AS max_salary FROM instructor;</code></p><figure class="jt ju jv jw fd hj er es paragraph-image"><div class="er es ly"><img src="../Images/a686a7ebef65b10e7db9bc7058c79595.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*mpMYEc2zSblBAqYgnTHCUA.png"/></div></figure><p id="f4ef" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这显示了任何讲师的最高工资。</p><h2 id="97df" class="kb kc hx bd kd ke kf kg kh ki kj kk kl jf km kn ko jj kp kq kr jn ks kt ku kv bi translated">数数</h2><p id="8f7f" class="pw-post-body-paragraph iu iv hx iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr ha bi translated">执行所有条件和操作后，COUNT函数返回数据库表中的行数。</p><p id="6b09" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><code class="du jx jy jz ka b">SELECT dept_name, COUNT(id) AS ins_count FROM instructor GROUP BY dept_name;</code></p><figure class="jt ju jv jw fd hj er es paragraph-image"><div class="er es mt"><img src="../Images/8b8123be3b4d27fb46518664304734e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1114/format:webp/1*zZlLOvKM9oGmUM4npVFyOQ.png"/></div></figure><p id="48f0" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这显示了每个部门的讲师人数。</p><h2 id="6adb" class="kb kc hx bd kd ke kf kg kh ki kj kk kl jf km kn ko jj kp kq kr jn ks kt ku kv bi translated">总和</h2><p id="ae7c" class="pw-post-body-paragraph iu iv hx iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr ha bi translated">SUM函数返回数值列的总和。</p><p id="eb43" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><code class="du jx jy jz ka b">SELECT dept_name, SUM(budget) AS dept_budget FROM department GROUP BY dept_name;</code></p><figure class="jt ju jv jw fd hj er es paragraph-image"><div class="er es mu"><img src="../Images/6314155372624345e36d24e294c268cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/format:webp/1*e43yd_N-BtzsLpZveB_XWA.png"/></div></figure><p id="40ab" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这显示了每个部门的预算。</p><h1 id="744a" class="ma kc hx bd kd mb mc md kh me mf mg kl mh mi mj ko mk ml mm kr mn mo mp ku mq bi translated">嵌套子查询</h1><p id="f691" class="pw-post-body-paragraph iu iv hx iw b ix kw iz ja jb kx jd je jf ky jh ji jj kz jl jm jn la jp jq jr ha bi translated">SQL提供了一个嵌套子查询的系统。这些是嵌套在另一个查询中的SELECT-FROM-WHERE表达式。</p><p id="b0c2" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">子查询可以与SELECT、INSERT、UPDATE和DELETE语句以及像=、、&gt; =、&lt;=, IN, BETWEEN, etc.</p><p id="7ed2" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">It can be written as</p><p id="2c4b" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"> 【T3】  A₁, A₂…. Aₙ  【T4】  r₁, r₂…….rₘ  【T5】  P</p><p id="2825" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">Aᵢ can be replaced by a sub-query that generates a single value.</p><p id="02a3" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">rᵢ is a valid sub-query</p><p id="cc28" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">P is an expression somewhat like B <operation>子查询这样的操作符一起使用</operation></p><p id="5d46" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><em class="mv">注意:查询的输入→一个或多个关系<br/>查询的输出→总是单个关系</em></p><pre class="jt ju jv jw fd lb ka lc ld aw le bi"><span id="132d" class="kb kc hx ka b fi lf lg l lh li">SELECT DISTINCT course_id<br/>FROM section<br/>WHERE semester = ‘Fall’<br/>AND year = 2009<br/>AND course_id NOT IN (<br/>SELECT course_id<br/>FROM section<br/>WHERE semester = ‘Spring’ AND year = 2010);</span></pre><figure class="jt ju jv jw fd hj er es paragraph-image"><div class="er es mw"><img src="../Images/db4a5b825f6a5f93fe4662822e7373b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:330/format:webp/1*3gqIFkQ7_zWiob533D47rA.png"/></div></figure><p id="bf89" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这可能看起来是一个相当长的查询，但简单来说，它显示了2009年秋季出现但2010年春季没有出现的所有课程的课程id。</p><p id="2dbf" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这里有一个嵌套在另一个语句中的语句。这里的主语句选择2009年秋季的课程id，另一个查询语句位于显示2010年春季课程id的查询的NOT IN部分。</p><p id="3fce" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">本文到此为止。<strong class="iw hy">敬请关注</strong>了解更多信息</p><div class="hg hh ez fb hi mx"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="my ab dw"><div class="mz ab na cl cj nb"><h2 class="bd hy fi z dy nc ea eb nd ed ef hw bi translated">Mlearning.ai提交建议</h2><div class="ne l"><h3 class="bd b fi z dy nc ea eb nd ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="nf l"><p class="bd b fp z dy nc ea eb nd ed ef dx translated">medium.com</p></div></div><div class="ng l"><div class="nh l ni nj nk ng nl ho mx"/></div></div></a></div><p id="ec98" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">🔵<a class="ae hu" rel="noopener" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"> <strong class="iw hy">成为作家</strong> </a></p></div></div>    
</body>
</html>