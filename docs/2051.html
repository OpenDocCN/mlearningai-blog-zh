<html>
<head>
<title>How to get tweets by Python and Twitter API 2022</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何通过Python和Twitter API 2022获取推文</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/how-to-get-tweets-by-python-and-twitter-api-2022-a440c635c3ac?source=collection_archive---------0-----------------------#2022-02-28">https://medium.com/mlearning-ai/how-to-get-tweets-by-python-and-twitter-api-2022-a440c635c3ac?source=collection_archive---------0-----------------------#2022-02-28</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="5e64" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">深入了解新的Twitter API 2022的分步指南</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es iw"><img src="../Images/d3bf45a50bf609d9fd738cf50794ed00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*9XyG-N2-bxkc3857JD4maQ.jpeg"/></div><figcaption class="je jf et er es jg jh bd b be z dx">Photo by <a class="ae ji" href="https://unsplash.com/@unarchive?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Jeremy Bezanger</a> on <a class="ae ji" href="https://unsplash.com/s/photos/twitter-api?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="838c" class="pw-post-body-paragraph jj jk hh jl b jm jn ii jo jp jq il jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">在本教程中，我将向您展示如何快速上手新的Twitter API v2。我们将会看到:</p><ul class=""><li id="28b5" class="kf kg hh jl b jm jn jp jq js kh jw ki ka kj ke kk kl km kn bi translated">如何创建一个<strong class="jl hi">权限提升</strong>的Twitter开发者账号，</li><li id="1b2f" class="kf kg hh jl b jm ko jp kp js kq jw kr ka ks ke kk kl km kn bi translated">如何用<code class="du kt ku kv kw b">tweepy</code>获取推文，</li><li id="b3dc" class="kf kg hh jl b jm ko jp kp js kq jw kr ka ks ke kk kl km kn bi translated">如何将我们的数据导出到CSV。</li></ul><p id="f678" class="pw-post-body-paragraph jj jk hh jl b jm jn ii jo jp jq il jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">所以，让我们开始吧！</p><h1 id="9f6d" class="kx ky hh bd kz la lb lc ld le lf lg lh in li io lj iq lk ir ll it lm iu ln lo bi translated">创建具有提升访问权限的开发人员帐户</h1><p id="9866" class="pw-post-body-paragraph jj jk hh jl b jm lp ii jo jp lq il jr js lr ju jv jw ls jy jz ka lt kc kd ke ha bi translated">为了从Twitter API获取数据，我们首先应该创建一个开发者帐户。让我们在developer.twitter.com的网站上做这件事。对于一步一步的指导，你可以在下面有用的资源部分找到一个视频。这里我只给出一个简短的说明。</p><p id="a767" class="pw-post-body-paragraph jj jk hh jl b jm jn ii jo jp jq il jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">使用您的Twitter用户名登录，并确认一些个人信息。欢迎来到开发者门户！至此，您获得了<em class="lu">基本</em>访问权限。</p><p id="e347" class="pw-post-body-paragraph jj jk hh jl b jm jn ii jo jp jq il jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">下一步是创建你的第一个应用程序，并为它获取密钥。我们将使用这些密钥来访问Twitter API。一旦你给你的应用一个名字，你将得到你的API密钥，不记名令牌和访问令牌和秘密。最后，授予<strong class="jl hi">对app的读写</strong>权限。</p><blockquote class="lv lw lx"><p id="9733" class="jj jk lu jl b jm jn ii jo jp jq il jr ly jt ju jv lz jx jy jz ma kb kc kd ke ha bi translated">把你的API密匙和令牌保存在一个安全和私密的地方！如果其他人设法获得密钥，它可以登录你的Twitter帐户！如果你丢失了钥匙，你总是可以再生一把新的；)</p></blockquote><p id="cfbe" class="pw-post-body-paragraph jj jk hh jl b jm jn ii jo jp jq il jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">为了能够使用Tweepy，我们需要更高级别的Twitter API访问权限:我们需要申请<strong class="jl hi">提升的</strong>访问权限。</p><blockquote class="lv lw lx"><p id="49fb" class="jj jk lu jl b jm jn ii jo jp jq il jr ly jt ju jv lz jx jy jz ma kb kc kd ke ha bi translated">此时，Twitter会问你一些关于你的应用程序的问题:基本的个人信息，以及你将如何使用Twitter数据。回复越详细，越容易获得批准！有时候，Twitter会主动联系你以获取更多信息。不要担心，只要诚实和礼貌，你会得到批准的。</p></blockquote><p id="c2a8" class="pw-post-body-paragraph jj jk hh jl b jm jn ii jo jp jq il jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">一旦你的申请被接受(审批过程可能需要几天)，我们就可以开始做<strong class="jl hi">酷的事情了！</strong></p><h1 id="a114" class="kx ky hh bd kz la lb lc ld le lf lg lh in li io lj iq lk ir ll it lm iu ln lo bi translated">使用Tweepy获取推文</h1><p id="a64a" class="pw-post-body-paragraph jj jk hh jl b jm lp ii jo jp lq il jr js lr ju jv jw ls jy jz ka lt kc kd ke ha bi translated">为了访问Twitter API，我们使用Python库<code class="du kt ku kv kw b">tweepy</code>。我们首先安装所需的库:</p><pre class="ix iy iz ja fd mb kw mc md aw me bi"><span id="810e" class="mf ky hh kw b fi mg mh l mi mj">pip install tweepy<br/>pip install configparser<br/>pip install pandas</span></pre><h2 id="6d09" class="mf ky hh bd kz mk ml mm ld mn mo mp lh js mq mr lj jw ms mt ll ka mu mv ln mw bi translated">将您的密钥保存在配置文件中</h2><p id="3f82" class="pw-post-body-paragraph jj jk hh jl b jm lp ii jo jp lq il jr js lr ju jv jw ls jy jz ka lt kc kd ke ha bi translated">我们首先将API密钥和令牌保存在一个<code class="du kt ku kv kw b">config.ini </code>文件中，这样我们的主python文件可以从那里提取信息，同时保持您的访问信息的私密性。</p><pre class="ix iy iz ja fd mb kw mc md aw me bi"><span id="b911" class="mf ky hh kw b fi mg mh l mi mj">[twitter]</span><span id="1076" class="mf ky hh kw b fi mx mh l mi mj">api_key = XXXXX<br/>api_key_secret = XXXXX</span><span id="2522" class="mf ky hh kw b fi mx mh l mi mj">access_token = XXXXX<br/>access_token_secret = XXXXX</span></pre><h2 id="54f7" class="mf ky hh bd kz mk ml mm ld mn mo mp lh js mq mr lj jw ms mt ll ka mu mv ln mw bi translated">主Python文件</h2><p id="429f" class="pw-post-body-paragraph jj jk hh jl b jm lp ii jo jp lq il jr js lr ju jv jw ls jy jz ka lt kc kd ke ha bi translated">我们现在准备编写我们的主文件，我称之为<code class="du kt ku kv kw b">twitter_api.py</code>。我们首先需要阅读我们的<code class="du kt ku kv kw b">config.ini</code>,并访问Twitter API:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="my mz l"/></div><figcaption class="je jf et er es jg jh bd b be z dx">Authenticate to your Twitter API</figcaption></figure><p id="9aad" class="pw-post-body-paragraph jj jk hh jl b jm jn ii jo jp jq il jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">我们可以使用API在我们的时间线中访问公共推文:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="my mz l"/></div><figcaption class="je jf et er es jg jh bd b be z dx">Get tweets from timeline</figcaption></figure><p id="ef57" class="pw-post-body-paragraph jj jk hh jl b jm jn ii jo jp jq il jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">一旦tweet被打印出来，我们可以看到数据被保存在一个包含所有tweet的JSON文件中。</p><h1 id="4f1d" class="kx ky hh bd kz la lb lc ld le lf lg lh in li io lj iq lk ir ll it lm iu ln lo bi translated">用熊猫将数据保存到CSV</h1><p id="f7f7" class="pw-post-body-paragraph jj jk hh jl b jm lp ii jo jp lq il jr js lr ju jv jw ls jy jz ka lt kc kd ke ha bi translated">我们现在准备以更友好的格式保存收集的推文。我们将使用熊猫，并将推文保存在CSV文件中。</p><p id="a2ca" class="pw-post-body-paragraph jj jk hh jl b jm jn ii jo jp jq il jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">我们首先创建数据框架，将我们感兴趣的字段放入列中。就我而言，我感兴趣的是推文的时间、作者以及推文本身。接下来，我们将我们的<code class="du kt ku kv kw b">data</code>创建为一个列表，并对收集的<code class="du kt ku kv kw b">public_tweets</code>进行迭代，以将每条tweets添加到列表中。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="my mz l"/></div></figure><p id="b0f6" class="pw-post-body-paragraph jj jk hh jl b jm jn ii jo jp jq il jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">最后，一旦用<code class="du kt ku kv kw b">pandas</code>创建了数据帧，我们可以用一行代码轻松地将其保存为CSV文件。</p><p id="8fc3" class="pw-post-body-paragraph jj jk hh jl b jm jn ii jo jp jq il jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">搞定了。我们成功地从我们的时间线收集推文！推文很有趣，可以用于许多数据科学应用，如情感分析和自然语言处理。</p><blockquote class="na"><p id="30d3" class="nb nc hh bd nd ne nf ng nh ni nj ke dx translated">感谢阅读，敬请期待更多内容！</p></blockquote><h1 id="b28e" class="kx ky hh bd kz la lb lc ld le lf lg lh in nk io lj iq nl ir ll it nm iu ln lo bi translated">有用的资源</h1><p id="6af2" class="pw-post-body-paragraph jj jk hh jl b jm lp ii jo jp lq il jr js lr ju jv jw ls jy jz ka lt kc kd ke ha bi translated">对于本教程，我关注了Twitter API 2022上的一个最新视频:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="nn mz l"/></div></figure><p id="9cc8" class="pw-post-body-paragraph jj jk hh jl b jm jn ii jo jp jq il jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">参见Tweepy的官方文档:</p><div class="no np ez fb nq nr"><a href="https://docs.tweepy.org/en/stable/" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab dw"><div class="nt ab nu cl cj nv"><h2 class="bd hi fi z dy nw ea eb nx ed ef hg bi translated">Tweepy文档- tweepy 4.6.0文档</h2><div class="ny l"><h3 class="bd b fi z dy nw ea eb nx ed ef dx translated">tweepy . Asynchronous . async Stream-异步流引用</h3></div><div class="nz l"><p class="bd b fp z dy nw ea eb nx ed ef dx translated">docs.tweepy.org</p></div></div></div></a></div><div class="no np ez fb nq nr"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="ns ab dw"><div class="nt ab nu cl cj nv"><h2 class="bd hi fi z dy nw ea eb nx ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="ny l"><h3 class="bd b fi z dy nw ea eb nx ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="nz l"><p class="bd b fp z dy nw ea eb nx ed ef dx translated">medium.com</p></div></div><div class="oa l"><div class="ob l oc od oe oa of jc nr"/></div></div></a></div></div></div>    
</body>
</html>