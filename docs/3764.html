<html>
<head>
<title>Using NLP To Improve Grantee Discovery</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用自然语言处理改善被授权者的发现</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/using-nlp-to-improve-grantee-discovery-adc40f3833f?source=collection_archive---------4-----------------------#2022-10-18">https://medium.com/mlearning-ai/using-nlp-to-improve-grantee-discovery-adc40f3833f?source=collection_archive---------4-----------------------#2022-10-18</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="ce06" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我如何构建一个简单的数据科学主题分类器来标记洛克菲勒基金会的资助数据库。</p><p id="17d1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">由Dustin Marshall撰写，这篇文章基于去年社区聚焦系列的《走向数据科学》编辑和Rockefeller Foundation之间的 <a class="ae jd" href="https://towardsdatascience.com/adapting-data-science-tools-for-social-impact-in-philanthropy-73a8a382c79c" rel="noopener" target="_blank"> <em class="jc">采访</em> </a> <em class="jc">中提出的许多主题。</em></p><div class="je jf jg jh fd ab cb"><figure class="ji jj jk jl jm jn jo paragraph-image"><img src="../Images/e08ef30c99aee563bd5cd514a963f817.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/0*F6WQYy_iLNPvsZIr"/></figure><figure class="ji jj jk jl jm jn jo paragraph-image"><img src="../Images/5a6fd969c7939c85a6d818afcce00d6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/0*JTlCYOxFzrZO2Kw_"/></figure><figure class="ji jj jk jl jm jn jo paragraph-image"><img src="../Images/d7e98d5ceea709f842fb90a6f3a57fbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/0*TAH9neuZ36t0CJG2"/><figcaption class="jr js et er es jt ju bd b be z dx jv di jw jx">Image: DALL-E mini/Craiyon</figcaption></figure></div><h1 id="20c1" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">洛克菲勒基金会的数据科学团队</h1><p id="bc24" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated">我整个夏天都在洛克菲勒基金会的数据科学团队中，这是他们创新团队的一部分。该团队今年的重点之一是监控社会部门使用人工智能造福社会的所有创新方式。<strong class="ig hi">这项工作要求团队关注RF受让人网络中的数据科学技术和专业知识。</strong></p><p id="f27c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">作为他们的暑期数据科学助理，我的任务是构建一个简单而有效的分类模型，以确定一项资助是否与数据科学相关。该模型将对基金会的拨款应用二元标签——是否与数据科学相关。了解哪些组织使用数据科学技术将有助于我们发现数据科学未来应用的机会。我希望下面分享的过程(和代码)能够对那些希望根据自己的项目需求进行调整的数据新手有所启发。</p><h1 id="d7bb" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">构建数据科学分类模型</h1><p id="b885" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated"><strong class="ig hi">文本分类是大多数现代自然语言处理</strong><a class="ae jd" href="https://towardsdatascience.com/your-guide-to-natural-language-processing-nlp-48ea2511f6e1" rel="noopener" target="_blank"><strong class="ig hi"/></a><strong class="ig hi">【NLP】</strong>应用的基础，无论是在网络搜索中识别最相关的链接，还是从你的电子邮件收件箱中过滤垃圾邮件。在这种数据科学分类模型的情况下，它不必那么复杂。</p><p id="9a81" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">为NLP模型选择数据源时，拥有大量行业特定词汇的文本通常在最简单的模型中表现最佳</strong>。对于这个模型，我注意到我们的内部管理文档包含了太多的冗余，而在拨款开始时提交的提案由于倾向于使用更多的行话而脱颖而出，成为文本分类的良好候选。</p><p id="8927" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">在</strong> <a class="ae jd" href="https://towardsdatascience.com/supervised-vs-unsupervised-learning-14f68e32ea8d" rel="noopener" target="_blank"> <strong class="ig hi">监督机器学习</strong> </a> <strong class="ig hi">中，为了让一个模型对未知数据做出预测，需要对已知数据进行训练。</strong>出于这个原因，在提取了提交给基金会的1000份最新提案后，大约有100份被手工标注为与数据科学相关。其标准是，提案需要使用赠款来开发或改进数据产品。</p><pre class="je jf jg jh fd lb lc ld le aw lf bi"><span id="b4c5" class="lg jz hh lc b fi lh li l lj lk"># Convert csv with data science proposals text to pandas dataframe &amp; add classification label<br/>data_science_proposals = pd.read_csv("DataScienceProposals.csv", header=None)<br/>data_science_proposals.columns = ["raw_text"]<br/>data_science_proposals["label"] = np.ones(len(data_science_proposals), dtype=np.int32)</span><span id="d46c" class="lg jz hh lc b fi ll li l lj lk"># Convert csv with other proposals text to pandas dataframe &amp; add classification label<br/>other_proposals = pd.read_csv("OtherProposals.csv", header=None)<br/>other_proposals.columns = ["raw_text"]<br/>other_proposals["label"] = np.zeros(len(other_proposals), dtype=np.int32)</span></pre><p id="b941" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">为了让NLP模型发挥最佳性能，对数据进行预处理，删除不必要和不一致的细节非常重要。对于该模型，Python数据分析库<a class="ae jd" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank"> Pandas </a>和数学库<a class="ae jd" href="https://numpy.org/" rel="noopener ugc nofollow" target="_blank"> NumPy </a>用于导入和准备数据。然后使用库<a class="ae jd" href="https://www.nltk.org/" rel="noopener ugc nofollow" target="_blank">自然语言工具包</a> (NLKT)对数据进行预处理，去除特殊字符和标点符号。接下来，使用同一个NLKT包，在一个叫做<a class="ae jd" href="https://towardsdatascience.com/stemming-lemmatization-what-ba782b7c0bd8" rel="noopener" target="_blank">词汇化</a>的过程中，同一个单词的不同形式被简化为它们的根单词。</strong></p><pre class="je jf jg jh fd lb lc ld le aw lf bi"><span id="0b3d" class="lg jz hh lc b fi lh li l lj lk"># Create function to pre-process text to improve model performance<br/>def text_preprocessing(text):<br/>    text = text.lower()<br/>    text = re.sub('[^a-zA-Z]', ' ', text)<br/>    text = text.split() <br/>    text = [WordNetLemmatizer().lemmatize(word) for word in text if <br/>        not word in set(stopwords.words('english'))]<br/>    text = ' '.join(text)<br/>    return text</span></pre><p id="5fe0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">为了使模型能够根据数据进行训练，数据必须以一种可以理解的方式通过模型。</strong>为此，该模型包括一个管道，首先根据单词在文档中出现的频率以及在标记为数据科学相关的文档集中出现的频率，将每个唯一的单词转换为数字。这个过程被称为<a class="ae jd" href="https://towardsdatascience.com/tf-idf-for-document-ranking-from-scratch-in-python-on-real-world-dataset-796d339a4089#:~:text=TF%2DIDF%20stands%20for%20%E2%80%9CTerm,Information%20Retrieval%20and%20Text%20Mining." rel="noopener" target="_blank">词频-逆文档频率</a> (TF-IDF)文本矢量化，可以简单地使用Python机器学习包<a class="ae jd" href="https://scikit-learn.org/stable/" rel="noopener ugc nofollow" target="_blank"> Scikit-learn </a> (sklearn)来完成。为了进一步提高模型理解数据的能力，管道再次使用sklearn对向量执行<a class="ae jd" href="https://towardsdatascience.com/singular-value-decomposition-158469b433ad" rel="noopener" target="_blank">奇异值分解</a> (SVD)，进一步删除数据中的冗余，然后标准化数据，转换数字，使平均值为0，标准偏差为1。一旦数据被处理，它被分成训练集和测试集。</p><pre class="je jf jg jh fd lb lc ld le aw lf bi"><span id="71ea" class="lg jz hh lc b fi lh li l lj lk"># Build pipeline to transform and process text<br/>model = Pipeline(steps=[<br/>    ("tfidf", TfidfVectorizer(ngram_range=(2,4), min_df=5, <br/>        max_df=0.5, sublinear_tf=True, stop_words="english")), <br/>    ("svd", TruncatedSVD(n_components=64, n_iter=10, <br/>        random_state=1)),<br/>    ("scaler", StandardScaler()))</span></pre><p id="bc88" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">由于有多种分类模型可供使用，并且每个模型中都有可以调整以提高性能的超参数，因此留出训练集中的数据来测试和验证您的选择非常重要</strong>。对于该模型，训练集被再次分割以包括额外的验证集，然后使用sklearn库中的各种分类模型进行评估，其中<a class="ae jd" href="https://scikit-learn.org/stable/modules/svm.html" rel="noopener ugc nofollow" target="_blank">支持向量机</a> (SVM)分类器具有最高的性能度量。然后使用相同的方法调整模型的超参数。</p><pre class="je jf jg jh fd lb lc ld le aw lf bi"><span id="f38a" class="lg jz hh lc b fi lh li l lj lk"># Iterate through classifiers, building pipeline that transforms text and passes it through classifier<br/>for name, classifier in [<br/>          ('LogReg', LogisticRegression()), <br/>          ('RF', RandomForestClassifier()),<br/>          ('KNN', KNeighborsClassifier()),<br/>          ('SVM', SVC(probability=True)), <br/>          ('GNB', GaussianNB()),<br/>          ('XGB', XGBClassifier())]:<br/>    model = Pipeline(steps=[<br/>        ("tfidf", TfidfVectorizer(ngram_range=(2,4), min_df=5, <br/>            max_df=0.5, sublinear_tf=True, stop_words="english")),<br/>        ("svd", TruncatedSVD(n_components=64, n_iter=10, <br/>            random_state=1)),<br/>        ("scaler", StandardScaler()),<br/>        (name, classifier)])</span></pre><p id="ff5e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">决定如何评估分类模型的性能取决于用例的需求落在</strong> <a class="ae jd" href="https://towardsdatascience.com/precision-and-recall-a-comprehensive-guide-with-practical-examples-71d614e3fc43" rel="noopener" target="_blank"> <strong class="ig hi">精度/召回权衡</strong> </a> <strong class="ig hi">上。</strong>在这种情况下，最重要的是，模型将所有数据科学提案标记为与数据科学相关，即使有些提案被标记为与数据科学无关。这是一个回忆偏向模型的例子，它需要一个考虑到这一点的评估尺度。因此，正在使用<a class="ae jd" href="https://towardsdatascience.com/is-f1-the-appropriate-criterion-to-use-what-about-f2-f3-f-beta-4bd8ef17e285" rel="noopener" target="_blank"> F2-Score测度</a>对模型进行评估，该测度按比例结合了精确度和召回测度，同时也增加了召回的权重。</p><pre class="je jf jg jh fd lb lc ld le aw lf bi"><span id="4619" class="lg jz hh lc b fi lh li l lj lk"># Evaluate average model performance across 10 random states (to account for the small sample size)<br/>f2_scores_byrandomstate = []<br/>for n in range(1,11):<br/>    # split data into training, validation, and testing sets<br/>    X = data["processed_text"].values<br/>    y = data["label"].values<br/>    X_train, X_test, y_train, y_test = train_test_split(X, y, <br/>        test_size=0.20, random_state=n, shuffle=True, stratify=y)<br/>    train_X, validate_X, train_y, validate_y =  <br/>        train_test_split(X_train, y_train, test_size=0.25, <br/>        random_state=n, shuffle=True, stratify=y_train)<br/>    # fit model on the training set<br/>    model.fit(train_X, train_y)<br/>    # find max F2-Score measure for the model<br/>    y_score = model.predict_proba(validate_X)[:, 1]<br/>    precision, recall, thresholds = <br/>        precision_recall_curve(validate_y, y_score)<br/>    f2_score = (5 * recall * precision) / (4 * recall + precision) + <br/>        1e-10<br/>    f2_scores_byrandomstate.append(np.max(f2_score))<br/>average_model_performance = np.average(f2_scores_byrandomstate)</span></pre><p id="a8f0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">经过所有的文本预处理、矢量化、模型选择和超参数调整后，性能最佳的模型的F2-Score为0.828。任何高于. 7的分数都被认为高于平均水平，但高于. 9的分数将是理想的。</p><p id="1c07" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">该型号完整代码见</strong> <a class="ae jd" href="https://gist.github.com/dustinmarshall-rf/95979c8ae1c38630258ccc4cf14c9640" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi">此处为</strong> </a> <strong class="ig hi">。</strong></p><h1 id="e403" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">将该模型应用于洛克菲勒基金会的提案集</h1><p id="aef4" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated">在向洛克菲勒基金会提交最新的1k提案以查找与数据科学相关的应用程序并对模型进行培训后，我们现在可以打开存储在赠款数据库中的其余4k+提案以及将来提交的任何提案。我们得到的回报是对所有提交给基金会并继续前进的提案进行预测分类。这将有助于洛克菲勒基金会利用数据科学技术简化确定受赠人的过程。</p><pre class="je jf jg jh fd lb lc ld le aw lf bi"><span id="0be5" class="lg jz hh lc b fi lh li l lj lk"># Plot predicted data science proposals across time<br/>additional_proposals = additional_proposals.groupby("year").sum()<br/>plt.figure(figsize =(20, 10))<br/>plt.bar(additional_proposals.index.values, <br/>    additional_proposals["predicted_label"])<br/>plt.xlabel("Year", fontsize = 15)<br/>plt.ylabel("Number of Predicted Data Science Proposals", fontsize = <br/>    15)<br/>plt.title("Number of Predicted Data Science Proposals by Year", <br/>    fontweight ='bold', fontsize = 20)<br/>plt.show()</span></pre><figure class="je jf jg jh fd jj er es paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="er es lm"><img src="../Images/e21ddb960d1982fef75da4a27fd15163.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ETuM3Q3eKeWq0Moo"/></div></div></figure><h1 id="8fd9" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">洛克菲勒基金会数据科学基金</h1><p id="39b7" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated">洛克菲勒基金会自成立以来就对慈善事业采取假设和数据驱动的方法，但直到最近，它才加倍承诺资助专注于推广和应用数据科学以产生社会影响的倡议和组织。</p><p id="2e77" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最后，我强调了近年来创新团队中一些杰出的受赠者，他们正在从数据科学中获取技术和模型——与上面分享的没有太大不同——并利用它们来创新解决全球社区面临的长期问题的方案。</p><ul class=""><li id="70c7" class="lr ls hh ig b ih ii il im ip lt it lu ix lv jb lw lx ly lz bi translated"><a class="ae jd" href="https://www.datakind.org/" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi">data kind</strong></a><strong class="ig hi">:</strong>自2017年以来，洛克菲勒基金会已向美国非营利组织<a class="ae jd" href="https://www.datakind.org/" rel="noopener ugc nofollow" target="_blank"> DataKind </a>拨款超过100万美元。这笔正在进行的拨款用于支持该组织使用人工智能和预测分析改善世界各地生活的各种工作，以及总的来说，其连接数据科学和非营利社区以产生更大社会影响的使命。要阅读更多关于他们最近的资助，请看这篇文章。</li><li id="c0de" class="lr ls hh ig b ih ma il mb ip mc it md ix me jb lw lx ly lz bi translated"><a class="ae jd" href="https://data.org/" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi">Data.org</strong></a><strong class="ig hi">:</strong>自2021年以来，洛克菲勒基金会已向美国非营利组织<a class="ae jd" href="https://data.org/" rel="noopener ugc nofollow" target="_blank">Data.org</a>捐赠了超过1000万美元，以支持他们在构建具有社会影响的数据科学领域和建立高影响力用例方面的努力。要阅读更多关于他们惊人工作的内容，请看这篇文章。</li><li id="7cc5" class="lr ls hh ig b ih ma il mb ip mc it md ix me jb lw lx ly lz bi translated"><a class="ae jd" href="https://www.atlasai.co/" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi">阿特拉斯</strong> </a> <strong class="ig hi"> : </strong>上个月，洛克菲勒基金会向总部位于美国的B公司提供了180万美元的资助，目的是帮助他们构建下一代人类与经济地图集，这是一种用于衡量贫困和模拟发展进程的数据科学工具。要了解更多关于这项资助的信息，请看这篇文章。</li></ul><div class="mf mg ez fb mh mi"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="mj ab dw"><div class="mk ab ml cl cj mm"><h2 class="bd hi fi z dy mn ea eb mo ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="mp l"><h3 class="bd b fi z dy mn ea eb mo ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="mq l"><p class="bd b fp z dy mn ea eb mo ed ef dx translated">medium.com</p></div></div><div class="mr l"><div class="ms l mt mu mv mr mw jp mi"/></div></div></a></div></div></div>    
</body>
</html>