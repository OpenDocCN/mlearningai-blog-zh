<html>
<head>
<title>Understanding the Workflow of TorchServe using Densenet</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Densenet了解TorchServe的工作流程</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/understanding-the-workflow-of-torchserve-using-densenet-c4d93458c19?source=collection_archive---------3-----------------------#2022-08-21">https://medium.com/mlearning-ai/understanding-the-workflow-of-torchserve-using-densenet-c4d93458c19?source=collection_archive---------3-----------------------#2022-08-21</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="a4e5" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">部署PyTorch模型的TorchServe第一部分</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/4538e8ceac5ad263f143c5da888e3d42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EzvXfYPHGI6XfutF"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Photo by <a class="ae jm" href="https://unsplash.com/es/@josholalde?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Josh Olalde</a> on <a class="ae jm" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a06f" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">这将是理解、使用和定制TorchServe以部署PyTorch模型的一系列文章。第一篇文章是关于熟悉工作流程的。为此，我们将使用预先训练的模型，并且只考虑当我们的模型准备好部署时会发生什么。本系列的其他文章将涵盖以下内容:</p><ul class=""><li id="2342" class="kj kk hh jp b jq jr jt ju jw kl ka km ke kn ki ko kp kq kr bi translated">👉第二部分—了解基本处理程序</li><li id="77b1" class="kj kk hh jp b jq ks jt kt jw ku ka kv ke kw ki ko kp kq kr bi translated">👉第三部分—带有定制处理程序脚本的MNIST示例</li></ul></div><div class="ab cl kx ky go kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ha hb hc hd he"><h2 id="578f" class="le lf hh bd lg lh li lj lk ll lm ln lo jw lp lq lr ka ls lt lu ke lv lw lx ly bi translated">Torchserve是什么？</h2><blockquote class="lz ma mb"><p id="522b" class="jn jo mc jp b jq jr ii js jt ju il jv md jx jy jz me kb kc kd mf kf kg kh ki ha bi translated"><a class="ae jm" href="https://aws.amazon.com/about-aws/whats-new/2020/04/introducing-torchserve/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp hi"> TorchServe </strong>是PyTorch的一个开源模型服务框架，它可以轻松地大规模部署训练有素的PyTorch模型，而无需编写定制代码。</a>【1】</p></blockquote><p id="5608" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">为了开始使用TorchServe，我们将克隆他们的<a class="ae jm" href="https://github.com/pytorch/serve" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>【2】。</p><pre class="ix iy iz ja fd mg mh mi mj aw mk bi"><span id="f431" class="le lf hh mh b fi ml mm l mn mo">git clone https://github.com/pytorch/serve.git</span></pre><p id="2fa9" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">我们将以densenet模型为例。您可以在资源库中找到更多示例。我强烈推荐通读。</p><h2 id="3818" class="le lf hh bd lg lh li lj lk ll lm ln lo jw lp lq lr ka ls lt lu ke lv lw lx ly bi translated">安全Densenet模型</h2><p id="870e" class="pw-post-body-paragraph jn jo hh jp b jq mp ii js jt mq il jv jw mr jy jz ka ms kc kd ke mt kg kh ki ha bi translated">我们将使用预先培训的densenet来了解部署的工作流程。如果你想在这篇文章中有相同的文件夹结构，创建如下所示的文件夹，并将模型保存在那里。我们可以用wget下载。</p><pre class="ix iy iz ja fd mg mh mi mj aw mk bi"><span id="aafd" class="le lf hh mh b fi ml mm l mn mo">mkdir densenet_example<br/>cd densenet_example<br/>mkdir models<br/>cd models<br/>wget <a class="ae jm" href="https://download.pytorch.org/models/densenet161-8d451a50.pth" rel="noopener ugc nofollow" target="_blank">https://download.pytorch.org/models/densenet161-8d451a50.pth</a></span></pre><p id="560c" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">保存模型的其他选项是通过可执行脚本模块或跟踪脚本，如T <a class="ae jm" href="https://github.com/pytorch/serve/tree/master/examples/image_classifier/densenet_161" rel="noopener ugc nofollow" target="_blank">或chServe GitHub存储库</a>中所述。</p><h2 id="4d43" class="le lf hh bd lg lh li lj lk ll lm ln lo jw lp lq lr ka ls lt lu ke lv lw lx ly bi translated">将模型保存为归档文件</h2><p id="665c" class="pw-post-body-paragraph jn jo hh jp b jq mp ii js jt mq il jv jw mr jy jz ka ms kc kd ke mt kg kh ki ha bi translated">为了部署模型，我们需要创建一个”。标有“文件”字样。这是我们用于部署的文件，它包含完成部署所需的所有信息，例如模型脚本文件和模型的状态字典。我们将很快检查所需的文件，但是首先，我们需要安装所需的依赖项，以便创建这个文件。最简单的方法是移动到克隆的git存储库，并使用以下命令获得所有需要的依赖项:</p><pre class="ix iy iz ja fd mg mh mi mj aw mk bi"><span id="8abb" class="le lf hh mh b fi ml mm l mn mo">cd serve<br/>pip install .<br/><br/>cd model-archiver<br/>pip install .</span></pre><p id="ade7" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">您也可以直接安装所需的依赖项，例如</p><pre class="ix iy iz ja fd mg mh mi mj aw mk bi"><span id="4c0f" class="le lf hh mh b fi ml mm l mn mo">pip install torchserve torch-model-archiver torch-workflow-archiver</span></pre><p id="36e2" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">现在我们可以创建了”。使用下面的命令标记“mar”文件。</p><pre class="ix iy iz ja fd mg mh mi mj aw mk bi"><span id="ea2a" class="le lf hh mh b fi ml mm l mn mo">torch-model-archiver --model-name &lt;your_model_name&gt; \<br/>                     --version 1.0 \<br/>                     --model-file &lt;your_model_file&gt;.py \ <br/>                     --serialized-file &lt;your_model_name&gt;.pth \<br/>                     --handler &lt;handler-script&gt; <br/>                     --extra-files ./index_to_name.json</span></pre><p id="7318" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">解释:</p><ul class=""><li id="0666" class="kj kk hh jp b jq jr jt ju jw kl ka km ke kn ki ko kp kq kr bi translated">-模型名称:模型名称</li><li id="5e95" class="kj kk hh jp b jq ks jt kt jw ku ka kv ke kw ki ko kp kq kr bi translated">—版本:定义版本号(可选)</li><li id="8707" class="kj kk hh jp b jq ks jt kt jw ku ka kv ke kw ki ko kp kq kr bi translated">—模型文件:Python模型脚本(。py文件)</li><li id="db13" class="kj kk hh jp b jq ks jt kt jw ku ka kv ke kw ki ko kp kq kr bi translated">-serialized-file:模型文件的位置，它包含模型的state-dict。pth文件)</li><li id="7cf3" class="kj kk hh jp b jq ks jt kt jw ku ka kv ke kw ki ko kp kq kr bi translated">—额外文件:处理程序脚本所需的其他文档</li><li id="9769" class="kj kk hh jp b jq ks jt kt jw ku ka kv ke kw ki ko kp kq kr bi translated">— handler:脚本，定义模型的预处理、推理和后处理步骤。py文件)</li></ul><p id="73a7" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">当我们的模型准备好部署时，我们有一个模型脚本(<em class="mc">模型文件</em>)和一个保存的状态字典(<em class="mc">序列化文件</em>)。对于这篇文章，我们下载了保存的state-dict。模型脚本，我们将从我们克隆的git repo中复制。<em class="mc">处理器</em>是一个重要的概念，它处理如何预处理数据、应用模型以及如何后处理模型的输出。TorchServe提供了一个BaseHandler类，可以根据个人需求进行定制。在本系列的下一篇文章中，我们将详细介绍这个类。TorchServe还为最重要的任务提供默认处理程序，如图像分类、对象检测、文本分类或图像分割。默认处理程序的完整列表可以在TorchServe <a class="ae jm" href="https://pytorch.org/serve/default_handlers.html" rel="noopener ugc nofollow" target="_blank">文档</a>中找到。在这个例子中，我们考虑一个图像分类任务。默认的图像分类处理程序适用于在ImageNet数据集上训练的模型。这个处理器的输出是图像的前5个预测和它们各自的概率[3]。</p><p id="1a7c" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">对于图像分类处理程序，我们需要一个名为“index_to_name.json”的附加文档。这是一个将预测索引映射到类的字典。在复制模型脚本和字典之前，我们必须更改权限。</p><pre class="ix iy iz ja fd mg mh mi mj aw mk bi"><span id="a361" class="le lf hh mh b fi ml mm l mn mo">cd serve/examples/image_classifier/densenet_161/<br/>chmod +rwx model.py<br/>cd serve/examples/image_classifier/<br/>chmod +rwx index_to_name.json</span></pre><p id="df4e" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">然后回到我们创建的文件夹，复制文件。</p><pre class="ix iy iz ja fd mg mh mi mj aw mk bi"><span id="cda6" class="le lf hh mh b fi ml mm l mn mo">cd densenet_example<br/>mkdir models<br/>cd models<br/>cp ../../serve/examples/image_classifier/densenet_161/model.py .<br/>cd ..<br/>cp ../serve/examples/image_classifier/index_to_name.json .</span></pre><p id="0cbb" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">在我们的示例中，命令创建了。mar"-文件看起来像这样。</p><pre class="ix iy iz ja fd mg mh mi mj aw mk bi"><span id="ba47" class="le lf hh mh b fi ml mm l mn mo">torch-model-archiver --model-name densenet161 \<br/>                     --version 1.0 \<br/>	             --model-file models/model.py \  <br/>		     --serialized-file densenet161-8d451a50.pth \   <br/>                     --extra-files index_to_name.json \<br/>                     --handler image_classifier</span></pre><p id="81d5" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">接下来，创建一个文件夹“model-store ”,并将densenet161.mar文件移动到其中。</p><pre class="ix iy iz ja fd mg mh mi mj aw mk bi"><span id="5c48" class="le lf hh mh b fi ml mm l mn mo">mkdir model-store<br/>mv densenet161.mar model-store/</span></pre><p id="dae1" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">最终的文件夹结构如下所示。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mu"><img src="../Images/095d1ea1e8fde4ada4ca14e786f3c87b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qUTEJB6iH_Obv3cRScltFg.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Folder structure</figcaption></figure><h2 id="b10d" class="le lf hh bd lg lh li lj lk ll lm ln lo jw lp lq lr ka ls lt lu ke lv lw lx ly bi translated">使用Docker部署模型</h2><p id="4b26" class="pw-post-body-paragraph jn jo hh jp b jq mp ii js jt mq il jv jw mr jy jz ka ms kc kd ke mt kg kh ki ha bi translated">我们将使用docker来部署模型。为此，我们下载了TorchServe的最新图片。</p><pre class="ix iy iz ja fd mg mh mi mj aw mk bi"><span id="2396" class="le lf hh mh b fi ml mm l mn mo">docker pull pytorch/torchserve:latest</span></pre><p id="7ef7" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">要了解更多细节——关于具体的图像，请参考TorchServe <a class="ae jm" href="https://github.com/pytorch/serve/tree/master/docker" rel="noopener ugc nofollow" target="_blank"> git库</a>中的docker部分。(还描述了如何创建。直接在docker中标记文件。)使用我们创建的文件，我们可以运行这个映像。</p><pre class="ix iy iz ja fd mg mh mi mj aw mk bi"><span id="567f" class="le lf hh mh b fi ml mm l mn mo">docker run --rm -it -p 8080:8080 -p 8081:8081 \<br/>           --name mar \ <br/>           -v $(pwd)/model-store:/home/model-server/model-store \<br/>           pytorch/torchserve:latest \<br/>           torchserve --start \ <br/>           --model-store model-store \<br/>           --models densenet161=densenet161.mar</span></pre><p id="9b0b" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">我们映射到端口8080和8081进行预测和建模，这是默认端口。我们进一步包括我们的模型存储文件夹。您可以使用此命令检查哪些型号可用。</p><pre class="ix iy iz ja fd mg mh mi mj aw mk bi"><span id="1c34" class="le lf hh mh b fi ml mm l mn mo">curl http://localhost:8081/models</span></pre><p id="44ab" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">这应该输出</p><pre class="ix iy iz ja fd mg mh mi mj aw mk bi"><span id="31e5" class="le lf hh mh b fi ml mm l mn mo">{<br/>  "models": [<br/>    {<br/>      "modelName": "densenet161",<br/>      "modelUrl": "densenet161.mar"<br/>    }<br/>  ]<br/>}</span></pre><h2 id="f257" class="le lf hh bd lg lh li lj lk ll lm ln lo jw lp lq lr ka ls lt lu ke lv lw lx ly bi translated">应用模型</h2><p id="1e8e" class="pw-post-body-paragraph jn jo hh jp b jq mp ii js jt mq il jv jw mr jy jz ka ms kc kd ke mt kg kh ki ha bi translated">现在我们可以用这个模型来做预测。densenet模型在包含1000个不同类的ImageNet上训练。可以在<a class="ae jm" href="https://deeplearning.cms.waikato.ac.nz/user-guide/class-maps/IMAGENET/" rel="noopener ugc nofollow" target="_blank">wekadeeplearng4j</a>上找到课程列表。我们将应用它来看看，如果它可以分类不同的蛇，但你可以从列表中选择任何其他类。让我们来看一些示例图片。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mv"><img src="../Images/3e4c96e06142ad2120ce837eae5dae22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YNIDQBD41NSgZWaT8zXo2A.jpeg"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Photo by<a class="ae jm" href="https://unsplash.com/@davidclode?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> David Clode</a> on<a class="ae jm" href="https://unsplash.com/s/photos/snake?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash</a></figcaption></figure><p id="23b4" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">然后，我们可以通过以下方式进行预测:</p><pre class="ix iy iz ja fd mg mh mi mj aw mk bi"><span id="f301" class="le lf hh mh b fi ml mm l mn mo">curl <a class="ae jm" href="http://localhost:8080/predictions/densenet161" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/predictions/densenet161</a> -T david-clode-Ws6Tb1cI0co-unsplash.jpg</span></pre><p id="ffd2" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">这得到的结果是:</p><pre class="ix iy iz ja fd mg mh mi mj aw mk bi"><span id="1e65" class="le lf hh mh b fi ml mm l mn mo">{<br/>"rock_python": 0.4521763324737549,<br/>"night_snake": 0.35173436999320984,<br/>"king_snake": 0.10417615622282028,<br/>"boa_constrictor": 0.04921364784240723,<br/>"sidewinder": 0.02006538398563862<br/>}</span></pre><p id="bf31" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">不错。该模型对所有蛇的预测最高，最高的是“岩蟒”。我不是蛇方面的专家，但这张图片被描述为“地毯巨蟒”。虽然该模型对该图像不是很确定，因为最高概率仅为0.45。让我们考虑另一个例子:</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mw"><img src="../Images/d7a3f91cb76f72831c977012f8d92e63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JymXxmDz9J42CtUeV_0m2w.jpeg"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Photo by<a class="ae jm" href="https://unsplash.com/@acastrophotocr?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Alfonso Castro</a> on<a class="ae jm" href="https://unsplash.com/s/photos/snake?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash</a></figcaption></figure><p id="e982" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">该预测与前面的示例类似:</p><pre class="ix iy iz ja fd mg mh mi mj aw mk bi"><span id="1d57" class="le lf hh mh b fi ml mm l mn mo">curl <a class="ae jm" href="http://localhost:8080/predictions/densenet161" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/predictions/densenet161</a> -T alfonso-castro-HaGwCk2AD84-unsplash.jpg</span></pre><p id="2113" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">这次我们得到了以下结果:</p><pre class="ix iy iz ja fd mg mh mi mj aw mk bi"><span id="1ffa" class="le lf hh mh b fi ml mm l mn mo">{<br/>"green_snake": 0.7169939279556274,<br/>"green_mamba": 0.1878765970468521,<br/>"vine_snake": 0.02244602143764496,<br/>"night_snake": 0.01946556195616722,<br/>"green_lizard": 0.007101472932845354<br/>}</span></pre><p id="4d8b" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">太棒了！预测是“绿色_蛇”，这也是如何描述图像。下一个:</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mx"><img src="../Images/e62e41d3f8038156292f7a16f77bb2fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_7RMhTSxwDbQGdZUR1ws0A.jpeg"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Photo by<a class="ae jm" href="https://unsplash.com/@mohan_moolepetlu?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Mohan Moolepetlu</a> on<a class="ae jm" href="https://unsplash.com/s/photos/snake?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash</a></figcaption></figure><p id="15e0" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">结果如下:</p><pre class="ix iy iz ja fd mg mh mi mj aw mk bi"><span id="e684" class="le lf hh mh b fi ml mm l mn mo">{<br/>"Indian_cobra": 0.9904808402061462<br/>"water_snake": 0.005116844084113836,<br/>"thunder_snake": 0.002371615031734109,<br/>"night_snake": 0.000596951344050467,<br/>"sea_snake": 0.0005211854004301131<br/>}</span></pre><p id="c222" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">这张图片被描述为“眼镜蛇”，所以这个预测几乎是完美的。让我们看看最后一个例子:</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es my"><img src="../Images/14ef3853dcb82f06b1d0c44dd4e91587.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QKuW492bjsiGmIZHgfM-Vw.jpeg"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Photo by<a class="ae jm" href="https://unsplash.com/@timothycdykes?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Timothy Dykes</a> on<a class="ae jm" href="https://unsplash.com/s/photos/snake?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash</a></figcaption></figure><p id="988f" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">这条漂亮的黄色蛇被分类如下:</p><pre class="ix iy iz ja fd mg mh mi mj aw mk bi"><span id="e322" class="le lf hh mh b fi ml mm l mn mo">{<br/>"boa_constrictor": 0.4590628147125244,<br/>"rock_python": 0.34132421016693115,<br/>"horned_viper": 0.12637333571910858,<br/>"sidewinder": 0.025241760537028313,<br/>"king_snake": 0.024632452055811882<br/>}</span></pre><p id="1076" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">在这种情况下，模型并不像第一个例子那样非常确定。最高预测概率仅为0.45。据我所知，这条黄色的蛇也被称为“香蕉大蟒蛇”。这不是该模型曾接受过培训的课程。这就是为什么模特甚至认出它是一条大蟒蛇，尽管颜色很不寻常。</p><p id="53af" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">就这样！💥这就是使用TorchServe部署模型的工作流程。</p><p id="1610" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">👉看看这个系列的下一集。在这里，我们将更仔细地观察处理程序脚本，当我们想要使用我们自己的模型时，我们需要对其进行定制。🚀</p><div class="mz na ez fb nb nc"><a rel="noopener follow" target="_blank" href="/@pumalinML/understanding-torchserves-basehandler-4d139d12b5f9"><div class="nd ab dw"><div class="ne ab nf cl cj ng"><h2 class="bd hi fi z dy nh ea eb ni ed ef hg bi translated">🔥了解火炬服务器的基本处理器</h2><div class="nj l"><h3 class="bd b fi z dy nh ea eb ni ed ef dx translated">用于部署PyTorch模型的Torchserve第二部分</h3></div><div class="nk l"><p class="bd b fp z dy nh ea eb ni ed ef dx translated">medium.com</p></div></div><div class="nl l"><div class="nm l nn no np nl nq jg nc"/></div></div></a></div><div class="mz na ez fb nb nc"><a rel="noopener follow" target="_blank" href="/@pumalinML/use-torchserve-with-a-customized-handler-script-f7d329e78ba4"><div class="nd ab dw"><div class="ne ab nf cl cj ng"><h2 class="bd hi fi z dy nh ea eb ni ed ef hg bi translated">🔥使用带有自定义处理程序脚本的TorchServe</h2><div class="nj l"><h3 class="bd b fi z dy nh ea eb ni ed ef dx translated">用于部署PyTorch模型的Torchserve第三部分</h3></div><div class="nk l"><p class="bd b fp z dy nh ea eb ni ed ef dx translated">medium.com</p></div></div><div class="nl l"><div class="nr l nn no np nl nq jg nc"/></div></div></a></div><h2 id="f3e2" class="le lf hh bd lg lh li lj lk ll lm ln lo jw lp lq lr ka ls lt lu ke lv lw lx ly bi translated">开始使用TorchServe的进一步建议</h2><ul class=""><li id="6dca" class="kj kk hh jp b jq mp jt mq jw ns ka nt ke nu ki ko kp kq kr bi translated">Shashank Prasanna，TorchServe简介，一个为PyTorch服务的开源模型库，<a class="ae jm" href="https://youtu.be/AIrrI8WOIuk" rel="noopener ugc nofollow" target="_blank">https://youtu.be/AIrrI8WOIuk</a></li><li id="c9ec" class="kj kk hh jp b jq ks jt kt jw ku ka kv ke kw ki ko kp kq kr bi translated"><a class="ae jm" href="https://cceyda.github.io/blog/torchserve/streamlit/dashboard/2020/10/15/torchserve.html" rel="noopener ugc nofollow" target="_blank">https://CCE yda . github . io/blog/torch serve/细流/dashboard/2020/10/15/torch serve . html</a></li></ul><h2 id="3fa3" class="le lf hh bd lg lh li lj lk ll lm ln lo jw lp lq lr ka ls lt lu ke lv lw lx ly bi translated">参考</h2><ul class=""><li id="5b21" class="kj kk hh jp b jq mp jt mq jw ns ka nt ke nu ki ko kp kq kr bi translated">[1] AWS，introduction torch serve:PyTorch模型服务框架(2020)，<a class="ae jm" href="https://aws.amazon.com/about-aws/whats-new/2020/04/introducing-torchserve/" rel="noopener ugc nofollow" target="_blank">https://AWS . Amazon . com/about-AWS/what-new/2020/04/introduction-torch serve/</a></li><li id="d0bb" class="kj kk hh jp b jq ks jt kt jw ku ka kv ke kw ki ko kp kq kr bi translated">[2] PyTorch，TorchServe Examples (2022)，<a class="ae jm" href="https://github.com/pytorch/serve/tree/master/examples" rel="noopener ugc nofollow" target="_blank">https://github.com/pytorch/serve/tree/master/examples</a></li><li id="eb48" class="kj kk hh jp b jq ks jt kt jw ku ka kv ke kw ki ko kp kq kr bi translated">[3] PyTorch，TorchServe默认事件处理程序(2020)，<a class="ae jm" href="https://pytorch.org/serve/default_handlers.html" rel="noopener ugc nofollow" target="_blank">https://pytorch.org/serve/default_handlers.html</a></li></ul><div class="mz na ez fb nb nc"><a rel="noopener follow" target="_blank" href="/@frauke.albrecht/subscribe"><div class="nd ab dw"><div class="ne ab nf cl cj ng"><h2 class="bd hi fi z dy nh ea eb ni ed ef hg bi translated">每当弗劳克·阿尔布雷特出版时，收到一封电子邮件。</h2><div class="nj l"><h3 class="bd b fi z dy nh ea eb ni ed ef dx translated">每当弗劳克·阿尔布雷特出版时，收到一封电子邮件。通过注册，您将创建一个中型帐户，如果您还没有…</h3></div><div class="nk l"><p class="bd b fp z dy nh ea eb ni ed ef dx translated">medium.com</p></div></div><div class="nl l"><div class="nv l nn no np nl nq jg nc"/></div></div></a></div><div class="mz na ez fb nb nc"><a rel="noopener follow" target="_blank" href="/@frauke.albrecht/subscribe"><div class="nd ab dw"><div class="ne ab nf cl cj ng"><h2 class="bd hi fi z dy nh ea eb ni ed ef hg bi translated">每当弗劳克·阿尔布雷特出版时，就收到一封电子邮件。</h2><div class="nj l"><h3 class="bd b fi z dy nh ea eb ni ed ef dx translated">每当弗劳克·阿尔布雷特出版时，就收到一封电子邮件。通过注册，您将创建一个中型帐户，如果您还没有…</h3></div><div class="nk l"><p class="bd b fp z dy nh ea eb ni ed ef dx translated">medium.com</p></div></div><div class="nl l"><div class="nv l nn no np nl nq jg nc"/></div></div></a></div><div class="mz na ez fb nb nc"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="nd ab dw"><div class="ne ab nf cl cj ng"><h2 class="bd hi fi z dy nh ea eb ni ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="nj l"><h3 class="bd b fi z dy nh ea eb ni ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="nk l"><p class="bd b fp z dy nh ea eb ni ed ef dx translated">medium.com</p></div></div><div class="nl l"><div class="nw l nn no np nl nq jg nc"/></div></div></a></div></div></div>    
</body>
</html>