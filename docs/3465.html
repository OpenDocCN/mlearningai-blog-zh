<html>
<head>
<title>How to train custom object detection model using TensorFlow Object Detection API — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用TensorFlow对象检测API训练自定义对象检测模型—第2部分</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/how-to-train-custom-object-detection-model-using-tensorflow-object-detection-api-part-2-4e74a9e306b2?source=collection_archive---------6-----------------------#2022-09-06">https://medium.com/mlearning-ai/how-to-train-custom-object-detection-model-using-tensorflow-object-detection-api-part-2-4e74a9e306b2?source=collection_archive---------6-----------------------#2022-09-06</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="963f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这篇文章中，我将向您展示如何使用TensorFlow对象检测API来注释图像和创建数据集，以训练我们自己的自定义对象检测模型。</p><p id="e1c1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这篇文章的最后，你会学到</p><ol class=""><li id="4d70" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">使用Roboflow注释图像</li><li id="597a" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">增强图像</li><li id="5167" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">生成TFrecord文件</li></ol><figure class="jr js jt ju fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es jq"><img src="../Images/57fdf2fb13285e78a7d687d3078a4cbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j4rWQ6d4UCRzHsZmNrk0jg.jpeg"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx">TensorFlow Object Detection API</figcaption></figure><h1 id="f175" class="kg kh hh bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">使用Roboflow注释图像</h1><p id="2aae" class="pw-post-body-paragraph ie if hh ig b ih le ij ik il lf in io ip lg ir is it lh iv iw ix li iz ja jb ha bi translated">训练任何自定义对象检测模型的第一步是正确地注释图像中的对象。这是物体检测训练过程中最耗时的部分。</p><p id="9dc9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这也是一个手动过程，意味着图像中的每个对象都需要手动注释。在这篇文章中，我们将使用<a class="ae lj" href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwjkn-79_f35AhW84jgGHQlADfkQFnoECAgQAQ&amp;url=https%3A%2F%2Froboflow.com%2F&amp;usg=AOvVaw1h_eItJcl0qix45QGoUODw" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi"> Roboflow </strong> </a>，这是一个端到端的计算机视觉框架，具有从注释图像到使用这些图像训练最佳模型的能力。</p><p id="28c6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">幸运的是，Roboflow还具有数据增强功能，我们将使用它来增加我们训练数据集中的图像数量。</p><p id="c604" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果您还没有登录Roboflow，请登录，让我们在Roboflow中创建我们的第一个图像注释项目。登录后，您将被重定向到网站的主页，如下所示</p><figure class="jr js jt ju fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es lk"><img src="../Images/6275ac4cb90ccd848114432fafbdfd39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jM_w1JrF9D_2Pt1deKXgzA.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx">Roboflow home page</figcaption></figure><p id="186b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我已经创建了一堆对象检测项目，你的主页可能会看起来不同，这取决于你以前是否使用过这个工具。</p><p id="c52a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">点击“创建新项目”按钮。为您的项目命名。在这篇文章中，我将训练一个模型来识别图片中的猫和狗。如下图所示填写细节。</p><figure class="jr js jt ju fd jv er es paragraph-image"><div class="er es ll"><img src="../Images/0abeb2af2271646aa4054d6112642c79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/1*_XJoIQ68BamNf3DDNV-kaw.png"/></div><figcaption class="kc kd et er es ke kf bd b be z dx">Create project in Roboflow</figcaption></figure><p id="e17c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">点击“创建公共项目”。这将需要你上传你的项目的一部分。在这里你可以点击<strong class="ig hi">选择文件</strong>或<strong class="ig hi">选择文件夹</strong>选项来上传你的图片。Roboflow也有许多公共数据集可供选择。如果向下滚动，您可以看到一个选项<strong class="ig hi">公共数据集</strong>。在那里你会发现已经为你做了注释的图片。为了这个项目，我们将上传我们自己的数据集。</p><p id="72a6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用此<a class="ae lj" href="https://drive.google.com/drive/folders/15Bf42bI5fiiLMscBFkTApiWa1H6L5YL5?usp=sharing" rel="noopener ugc nofollow" target="_blank">链接</a>下载数据集。下载后，使用选择文件选项上传图像。</p><figure class="jr js jt ju fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es lm"><img src="../Images/cfa8c76710fd4e88e940b611782aa4ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nFbUsDgsAG6aXPHL2hEbXg.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx">Uploading images to the project</figcaption></figure><p id="6960" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">上传完所有图片后，点击右上角的“完成下载”按钮。</p><p id="3add" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Roboflow允许我们与团队合作，其中开发人员有特定的角色。例如，您的团队中可能有人专门注释图像。Roboflow为您提供了一个选项，将注释任务分配给团队中的某个特定成员。</p><p id="2df8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">由于这是一个演示项目，我们没有一个团队，继续下去，并分配给你自己的任务。点击“分配图像”选项，其他一切保持原样。</p><figure class="jr js jt ju fd jv er es paragraph-image"><div class="er es ln"><img src="../Images/edb70cc4cf07e4c622f99c26c1ea1ddc.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*26P-bZqqm6lHb1cq8Rbozw.png"/></div><figcaption class="kc kd et er es ke kf bd b be z dx">Assign images</figcaption></figure><p id="1f63" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您将在页面的未标注标签中看到您上传的所有图像。单击第一个图像，它会将您重定向到注释工作区。</p><p id="6dc2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这里，您可以用您想要训练自定义对象检测模型的类来注释您的图像。继续创建一个矩形来覆盖图像中的对象。给对象贴上标签，然后点击“保存(输入)”。</p><figure class="jr js jt ju fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es lo"><img src="../Images/191801006ee8f53ec4d39ef2b7628fa6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UPANkMUIpp8WmOgI7XkBxQ.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx">Annotating images</figcaption></figure><p id="7def" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">类似地，对数据集中的每个图像都执行此操作。完成注释后，返回到项目主页。现在你应该可以在<strong class="ig hi">带注释的</strong>标签中看到你所有的图像，而在<strong class="ig hi">不带注释的</strong>标签中将没有任何图像。</p><figure class="jr js jt ju fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es lp"><img src="../Images/0f17b0699247d86b81aed67dba5ee834.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GftigWS_oFcFz8O-yRoD9A.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx">Completed annotation task result page</figcaption></figure><p id="8ce5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在点击右上角的“将图像添加到数据集”按钮。这将在屏幕右侧打开一个页面，要求您输入培训/测试/验证分割策略。对于这个演示，我们将使用80%的数据作为训练，其余的用于验证。我们不会使用该数据集中的任何图像进行测试。</p><p id="fde4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">继续并相应地更改分割策略，然后单击“添加图像”按钮。</p><figure class="jr js jt ju fd jv er es paragraph-image"><div class="er es lq"><img src="../Images/6689e20fe62ad73eda2251783f676d26.png" data-original-src="https://miro.medium.com/v2/resize:fit:890/format:webp/1*q2zg2cR-6Y-Rkz8Od95tcw.png"/></div><figcaption class="kc kd et er es ke kf bd b be z dx">Split data into Train and Validation set</figcaption></figure><p id="8f80" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">点击右上角的“生成新版本”按钮。</p><h1 id="1d95" class="kg kh hh bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">数据扩充</h1><p id="ce30" class="pw-post-body-paragraph ie if hh ig b ih le ij ik il lf in io ip lg ir is it lh iv iw ix li iz ja jb ha bi translated">现在，我们将扩充数据以增加数据库的大小。这也将使我们的模型更好地统帅，并减少过度拟合的风险。</p><p id="70dd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">点击屏幕上的第4步增强选项。在这里，您可以添加多个增强步骤到您的图像。您可以从Roboflow提供的选项列表中添加过滤器，随心所欲地扩充数据。</p><figure class="jr js jt ju fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es lr"><img src="../Images/cb4ffc4187b7bef3fed576e9574792d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FJYP1iQXErQL0lDpbCWWlQ.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx">Data Augmentation</figcaption></figure><p id="0e71" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在上面的图片中，你可以看到我添加了4个增强步骤。这使我的数据集中的图像数量从42个增加到了108个。</p><h1 id="2992" class="kg kh hh bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">正在创建TFrecord文件</h1><p id="7154" class="pw-post-body-paragraph ie if hh ig b ih le ij ik il lf in io ip lg ir is it lh iv iw ix li iz ja jb ha bi translated">TensorFlow对象检测库支持TFRecord文件作为输入。所以我们有必要将我们的注释和图像转换成这种格式。幸运的是，Roboflow支持许多不同的格式，我们可以从中进行选择。</p><p id="107e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">点击<strong class="ig hi">生成</strong>选项。这将创建数据集的一个版本，并将其保存在您的帐户中。</p><figure class="jr js jt ju fd jv er es paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="er es ls"><img src="../Images/8c7b90a7ed980b4c3b2c004eb19d8189.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VshOg1JNWXvDhmti5d530g.png"/></div></div><figcaption class="kc kd et er es ke kf bd b be z dx">Generate Dataset</figcaption></figure><p id="3d81" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，您可以将该数据集导出为您想要的格式。点击右上角的<strong class="ig hi">导出</strong>，选择<em class="lt"> TensorFlow TFRecord </em>作为格式。选择<strong class="ig hi"> <em class="lt">下载zip到电脑</em> </strong>选项，点击<strong class="ig hi">继续</strong>。</p><p id="d6c6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这将把数据集保存在本地系统的. zip文件中。</p><figure class="jr js jt ju fd jv er es paragraph-image"><div class="er es lu"><img src="../Images/af0fc3dced9c244f073fdd240102739f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*9gC2sHOwG8Tc6D53cKPmvA.png"/></div><figcaption class="kc kd et er es ke kf bd b be z dx">TFRecord File download</figcaption></figure><p id="e767" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">就是这样。我们已经成功地注释了我们的图像，扩充了数据集，并生成了TFRecord文件作为输入传递给我们的模型。</p><p id="efcb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">目前为止干得不错。我们离创建自己的自定义对象检测模型只有一步之遥。</p><p id="96c8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这篇文章的下一部分，我将向您展示我们如何最终使用我们创建的数据集，并将其作为训练输入传递给我们的模型。我们还将学习如何为我们的定制类配置模型，触发训练，验证和评估结果，最后在一些测试图像上测试它。</p><p id="28cd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">感谢阅读这篇文章。如果你喜欢它，请考虑在任何社交平台上分享它。干杯！</p><div class="lv lw ez fb lx ly"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="lz ab dw"><div class="ma ab mb cl cj mc"><h2 class="bd hi fi z dy md ea eb me ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="mf l"><h3 class="bd b fi z dy md ea eb me ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="mg l"><p class="bd b fp z dy md ea eb me ed ef dx translated">medium.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm ka ly"/></div></div></a></div></div></div>    
</body>
</html>