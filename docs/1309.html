<html>
<head>
<title>A Beginners’ Guide to Searching in Splunk</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Splunk中搜索的初学者指南</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/a-beginners-guide-to-searching-in-splunk-b8c409a8ae6e?source=collection_archive---------5-----------------------#2021-11-18">https://medium.com/mlearning-ai/a-beginners-guide-to-searching-in-splunk-b8c409a8ae6e?source=collection_archive---------5-----------------------#2021-11-18</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/4e31e5495f5c513cf19aba803e05b160.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*shpkC2oBG8ZHOvbdhC1VQg.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Splunk Search App</figcaption></figure><p id="3101" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">Splunk是成千上万家希望解决数据问题的公司的首选工具，但开始有效使用它可能会令人生畏、力不从心且耗时。通常，配置Splunk实例的管理员或工程师不会使用Splunk，这可能会使用户感到更加疏远，并且不熟悉他们所需的数据结构。本指南旨在为那些搜索Splunk的人提供一个起点，帮助他们只提取对他们有用的数据，并提供如何加快极其漫长的搜索的技巧。</p><h2 id="a027" class="jr js hh bd jt ju jv jw jx jy jz ka kb je kc kd ke ji kf kg kh jm ki kj kk kl bi translated">提示1:通过打开自动格式使你的搜索更清晰</h2><p id="1a56" class="pw-post-body-paragraph it iu hh iv b iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm kq jo jp jq ha bi translated">Splunk搜索可能会变得非常漫长和复杂，尤其是当您开始将几个不同的命令串在一起时。搜索自动格式会将通过<strong class="iv hi"> | </strong>字符“输送”到另一个命令的命令分隔到不同的行上(稍后会详细介绍)，并且会自动切换括号内的子搜索。要打开这个功能，点击页面顶部的用户名&gt;首选项&gt; SPL编辑器，并打开底部的“搜索自动格式”开关。</p><figure class="ks kt ku kv fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kr"><img src="../Images/349b820aee7a5dda38a265be06708c7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eKQXsqLj1dF6MIPFKqTJIg.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Splunk User Preferences</figcaption></figure><h2 id="293c" class="jr js hh bd jt ju jv jw jx jy jz ka kb je kc kd ke ji kf kg kh jm ki kj kk kl bi translated">技巧2:学习你的数据</h2><p id="f001" class="pw-post-body-paragraph it iu hh iv b iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm kq jo jp jq ha bi translated">如果您正在配置您自己的Splunk实例，您应该已经知道您的数据是如何加载到Splunk中的，但是如果您正在搜索其他人已经配置的Splunk实例，了解该数据是什么样子对于浏览它是至关重要的。要开始探索您的数据，您应该了解哪些索引可供您使用。Splunk中的索引就像一个数据桶，创建它是为了对放入其中的数据进行松散排序。您的Splunk实例可能有一个索引，也可能有数百个，而您可能只能访问少数几个。要了解您可以访问哪些索引，您可以运行以下命令:</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="bf30" class="jr js hh kx b fi lb lc l ld le">| eventcount summarize=false index=*<br/>| dedup index<br/>| fields index</span></pre><p id="d971" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">该命令列出您选择的时间段内的所有事件，确保包括索引，从该列表中删除重复的索引，然后只显示剩余索引的列表，而不显示任何无关信息。一旦你有了一个索引列表，试着通过在搜索中包含<code class="du lf lg lh kx b">index=your_index</code>从每个索引中获取数据，然后改变时间范围到你开始得到结果的时候。如果你的搜索时间太长，减少你的时间范围或切换到实时结果。一旦有了结果，看看返回的信息是否是您感兴趣的。如果看起来你可以使用这些数据，记下这个索引，看看数据是如何在每个事件中形成的。这些事件中的字段可用于构建有意义的搜索。</p><h2 id="f43a" class="jr js hh bd jt ju jv jw jx jy jz ka kb je kc kd ke ji kf kg kh jm ki kj kk kl bi translated">技巧3:通过只寻找你需要的东西来加快搜索速度</h2><figure class="ks kt ku kv fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es li"><img src="../Images/22b13bd4e3d6251e003dec07731fa91c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JgZaWp5m8cwiWAJAGtfB1A.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Splunk Timeframe Selector</figcaption></figure><p id="f55a" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我见过用户在Splunk中搜索时遇到的一个常见问题是，他们的查询时间太长，以至于他们认为Splunk不可用。根据加载到Spunk中的数据量，如果您查看的条目太多，您的搜索可能需要几分钟或几小时。为了帮助缓解这个问题，限制你的搜索，只寻找你需要的东西，可以大大提高他们的速度。在设定的时间范围内搜索是加快搜索速度的最有效方法。通过缩小搜索范围，您可以删除Splunk需要搜索的大部分数据。在限制了你的搜索时间后，收录是另一个加快搜索速度的好方法。虽然排除，或者说某个搜索词对加快搜索速度没有什么帮助，但是包含可以大大加快搜索速度。你的每个搜索应该总是以<code class="du lf lg lh kx b">index=your_index_here</code>开头。该搜索只包括您想要搜索的索引。包含索引后，您的搜索词应该限制在可能包含这些词的字段中。例如，<code class="du lf lg lh kx b">index=your_index_here search_term_here</code>是一个非常慢的搜索，而<code class="du lf lg lh kx b">index=your_index_here relevant_field=search_term_here</code>通过定义包含哪个字段来加速搜索。</p><h2 id="679d" class="jr js hh bd jt ju jv jw jx jy jz ka kb je kc kd ke ji kf kg kh jm ki kj kk kl bi translated">技巧4:使用“<code class="du lf lg lh kx b">table"</code>命令让你的结果可读</h2><p id="f634" class="pw-post-body-paragraph it iu hh iv b iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm kq jo jp jq ha bi translated">一旦您知道您要搜索的数据，并且能够在合理的时间内运行搜索，基本Splunk搜索可用性的最后一步是能够以可读和相关的方式格式化结果。管道字符<code class="du lf lg lh kx b">|</code>进行搜索，并根据搜索结果运行附加命令。为了达到可读性，我们可以将搜索结果通过管道传输到<code class="du lf lg lh kx b">table</code>函数中。<code class="du lf lg lh kx b">table</code>命令将字段名作为参数，输出一个表，其中字段名作为列名，搜索返回的事件作为行。例如:</p><pre class="ks kt ku kv fd kw kx ky kz aw la bi"><span id="6f42" class="jr js hh kx b fi lb lc l ld le">index=your_index_here relevant_field=search_term_here<br/>| table relevant_field, column_field_2, column_field_3</span></pre><p id="e228" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">运行上述搜索将显示一个比查看原始Splunk事件更具可读性和可管理性的表格。</p><figure class="ks kt ku kv fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lj"><img src="../Images/492acb00b2ca21d65c38c1f61f550a10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E4jxjVg0AF1f1gHJQA_8QQ.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">A table in Splunk, taken from Splunk’s documentation: <a class="ae lk" href="https://docs.splunk.com/Documentation/SplunkCloud/latest/SearchReference/Table" rel="noopener ugc nofollow" target="_blank">https://docs.splunk.com/Documentation/SplunkCloud/latest/SearchReference/Table</a></figcaption></figure><h2 id="af01" class="jr js hh bd jt ju jv jw jx jy jz ka kb je kc kd ke ji kf kg kh jm ki kj kk kl bi translated">最后的想法</h2><p id="5daf" class="pw-post-body-paragraph it iu hh iv b iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm kq jo jp jq ha bi translated">本指南并不全面，但它应该是熟悉使用一个强大且通常令人生畏的工具的良好开端。现在，您应该对如何理解您正在搜索的数据有了更多的了解，将您的搜索加速到可管理的等待时间，并以易读的格式仅显示相关数据。要获得更全面的信息，请查看Splunk提供的一些文档，或者浏览Splunk在其网站上创建的课程:<br/><a class="ae lk" href="https://docs.splunk.com/Documentation" rel="noopener ugc nofollow" target="_blank">【https://docs.splunk.com/Documentation】</a><br/><a class="ae lk" href="https://education.splunk.com/" rel="noopener ugc nofollow" target="_blank">https://education.splunk.com/</a></p><div class="ll lm ez fb ln lo"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="lp ab dw"><div class="lq ab lr cl cj ls"><h2 class="bd hi fi z dy lt ea eb lu ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="lv l"><h3 class="bd b fi z dy lt ea eb lu ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="lw l"><p class="bd b fp z dy lt ea eb lu ed ef dx translated">medium.com</p></div></div><div class="lx l"><div class="ly l lz ma mb lx mc in lo"/></div></div></a></div></div></div>    
</body>
</html>