<html>
<head>
<title>Record Matching for Hotel Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">酒店数据的记录匹配</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/record-matching-for-hotel-data-20773742bc31?source=collection_archive---------0-----------------------#2021-06-14">https://medium.com/mlearning-ai/record-matching-for-hotel-data-20773742bc31?source=collection_archive---------0-----------------------#2021-06-14</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="ae3c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">基于酒店数据记录链接经验的思考</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/3c879d0589a469aa3badd095b56c90d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1jKXl3nIkesjQBnaA1yiUw.jpeg"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Source: Abstract vector created by <a class="ae js" href="https://www.freepik.com/vectors/abstract" rel="noopener ugc nofollow" target="_blank">starline</a></figcaption></figure><p id="ba7a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi jt translated">当数据从多个来源输入系统时，找出重复数据(或重复出现的数据)是至关重要的，这最终是系统质量的决定性因素。如果有多个数据节点表示同一个实体，比如说酒店，它们的属性(名称、地址、位置等)有微小的变化。)，向系统查询这种数据节点将产生所有这种重复的数据节点，这将误导使用所述系统的系统。现代技术半球充斥着大量不同的数据，这种情况很常见。影响众多行业的大量快速变化的数据不再是令人惊讶的因素，旅游等行业也不例外。</p><h1 id="972f" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">酒店来源</h1><p id="6dd3" class="pw-post-body-paragraph ie if hh ig b ih la ij ik il lb in io ip lc ir is it ld iv iw ix le iz ja jb ha bi translated">如果你拥有一家酒店，你需要销售。实现销售的一个方法是在Expedia这样的代理系统中列出你的酒店，通过他们的系统，顾客可以预订住宿。这意味着你不必直接与客户处理复杂的系统——Expedia会为你做的。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es lf"><img src="../Images/d9d7baab25e85e0cf892420b257aa6ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mBHET_J_jP1lUrI7EMmeeA.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Source: <a class="ae js" href="https://welcome.expediagroup.com/en/how-to-list-your-property-with-expedia-group" rel="noopener ugc nofollow" target="_blank">Expedia</a></figcaption></figure><p id="a8f8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Expedia并不是唯一一家这样做的机构——还有很多。一些这样的系统是HotelBeds、AlphaTravel等。操作与Expedia非常相似。现在，想象一个旅游运营商系统，它将所有这些系统合作并聚合到一个地方。也就是说，通过呼叫中心操作，客户可以通过中间代理给出他们的需求并执行预订，并且中间系统将连接到合作代理系统并返回用户标准的属性。</p><h1 id="20d6" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">旅游运营商系统</h1><p id="110d" class="pw-post-body-paragraph ie if hh ig b ih la ij ik il lb in io ip lc ir is it ld iv iw ix le iz ja jb ha bi translated">如上所述，旅游运营商系统充当来自诸如HotelBeds、Expedia等多个代理系统的多个酒店的聚合平台。现在，每个代理系统承载的酒店数量各不相同，但像Expedia这样的系统在其系统中拥有超过<a class="ae js" href="https://newsroom.expedia.com/fast-facts" rel="noopener ugc nofollow" target="_blank">100万个酒店</a>(酒店还包括除酒店之外的其他酒店)。这基本上意味着旅游运营商要处理的酒店数量非常大。</p><p id="1ed3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，如果你拥有一家酒店，你想为你的酒店销售，你不会满足于只在一个这样的代理系统中注册你的财产。为了让你的酒店曝光度更高，从而使你的收入最大化，你也可以在多个其他机构注册你的酒店。这对你来说是一个更好的结果，但对旅游经营者来说，这是一个非常复杂的问题:识别多家旅行社列出的同一家酒店。</p><h1 id="8587" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">问题是</h1><p id="dbc6" class="pw-post-body-paragraph ie if hh ig b ih la ij ik il lb in io ip lc ir is it ld iv iw ix le iz ja jb ha bi translated">在大多数情况下，没有全局属性的神奇ID来确定两个属性是否相同。尽管有像TTlcodes这样的旨在解决这一问题的倡议，但它们还没有被众多组织充分利用。因此，现在，您需要在数据中使用典型属性来区分众多属性。我们可以将这些属性归类到一些宽泛的领域，从这里开始，我们将关注酒店属性。</p><ul class=""><li id="e447" class="lg lh hh ig b ih ii il im ip li it lj ix lk jb ll lm ln lo bi translated"><strong class="ig hi">命名相关属性</strong>:每家酒店都有名字。但是请注意，这个名称不是唯一的。</li><li id="1ec7" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb ll lm ln lo bi translated"><strong class="ig hi">位置相关属性</strong>:酒店的位置，由其地址、位置度量(纬度、经度)等反映。考虑到每个机构系统表示地址的方式可能不同，并且lat/lon组合在每个系统中可能不是100%准确的，所以这些也可能不是唯一的。</li><li id="6668" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb ll lm ln lo bi translated">便利设施相关属性:每家酒店都有自己的便利设施(设备)。这些远非独一无二。</li><li id="5de0" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb ll lm ln lo bi translated"><strong class="ig hi">其他属性</strong>:包括联系信息、星级(4星、5星等。)之类的。</li></ul><p id="82c7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">似乎一个系统有足够多的属性组来区分两家酒店。事实的确如此——在大多数情况下，辨别两家酒店是否不同并不太困难<strong class="ig hi">。困难的是弄清楚两个酒店实体是否相同。两个酒店的名称完全不同的事实是辨别所讨论的两个酒店是两个不同实体的前兆，这是微不足道的。但是，当两个名字的<em class="lu">数量</em>相差很小时，就会出现不小的问题。也就是说，当名字的差异是分钟。</strong></p><h1 id="40e9" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">量化字符串之间的差异</h1><p id="9d97" class="pw-post-body-paragraph ie if hh ig b ih la ij ik il lb in io ip lc ir is it ld iv iw ix le iz ja jb ha bi translated">假设我们需要计算两个字符串“美国加州酒店”和“英国加州皮克酒店”之间的差异。我们将尝试从一种用于量化所讨论的差异的算法中提取要点。</p><p id="83d1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">通过查看这两个字符串，我们可以确定算法应该具有的一个特征:也就是说，它应该对这两个字符串之间的<em class="lu">公共字数</em>有一个概念。当常用单词数较高时，可以有把握地估计(尽管不完全)这两个字符串极有可能相同，反之亦然。另一个这样的特征是两根弦的<em class="lu">长度</em>。</p><p id="1406" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">利用这些概念以及其他一些概念，人们开发了许多算法来量化这种差异。这类算法包括余弦差、Levenstein距离、N元距离、Jaro-Winkler算法等。这里需要注意的是，每种算法都有自己的优点和注意事项，因此在进行全面分析后应该小心使用。</p><h1 id="7091" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">噪声和预处理</h1><p id="5618" class="pw-post-body-paragraph ie if hh ig b ih la ij ik il lb in io ip lc ir is it ld iv iw ix le iz ja jb ha bi translated">总的来说，数据总是不完美的。更令人不安的是，识别某些种类的噪音极其困难。噪音可能是由酒店企业的许多因素造成的:</p><ol class=""><li id="038a" class="lg lh hh ig b ih ii il im ip li it lj ix lk jb lv lm ln lo bi translated"><strong class="ig hi">人为误差</strong>:记账误差、校准误差</li><li id="49ac" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb lv lm ln lo bi translated"><strong class="ig hi">外部噪音</strong>:从不同来源(API、记账数据)获取的噪音数据</li><li id="0f69" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb lv lm ln lo bi translated"><strong class="ig hi">虚假信息:</strong>错误数据</li><li id="f496" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb lv lm ln lo bi translated"><strong class="ig hi">损坏的数据</strong>:高质量但后来降级的数据</li><li id="1ad2" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb lv lm ln lo bi translated"><strong class="ig hi">数据不完整</strong></li></ol><p id="96e0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">虽然不可能识别噪音的每一次出现，但仍有方法在一定程度上缓解这一问题。一种方法是只使用对指导算法至关重要的一个狭窄的数据子集，而放弃其余的。停用词移除就是这样一种方法:在这种方法中，我们从字符串中移除常用的词，这些词无助于区分字符串。常见的词如“酒店”、“别墅”、“度假村”、酒店集团标签(“阿联酋”、“希尔顿”、“万豪”等。)以及诸如“一个”、“该”、“一个”等语言停用词。可以在预处理阶段的算法执行之前被移除。然而，在这里需要强调的是，当涉及到减轻噪音问题时，100%的自动化将无助于获得准确的结果——无论如何都需要某种形式的手动干预来清理数据，至少在早期阶段是如此，稍后可以在找出模式后自动清理数据(例如，一种这样的方法是使用基于频率的停用词去除，其中对整个酒店名称语料库进行索引和计数，并且去除具有相对较高频率的术语)。</p><h1 id="a724" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">相同的名字，不同的地点</h1><p id="cbfd" class="pw-post-body-paragraph ie if hh ig b ih la ij ik il lb in io ip lc ir is it ld iv iw ix le iz ja jb ha bi translated">仅用术语来解析两个实体在很大程度上是不可能的，尤其是对于酒店数据。尽管人类的思想不像早期的哲学家那样多样化:两个供应商因为他们的财产而跳到同一个名字的统计可能性太高了。作为记录链接问题，解决这个问题的一种方法是另外使用与位置相关的属性。但是，不同的机构有自己的位置层次结构，通过这些结构，他们可以将位置分配给系统中列出的物业。位置可以通过命名属性(城市名、州名和国家名)或数字属性(如纬度/经度组合)来反映。由于位置命名法的不同表示，前者是有问题的:一个人居住的城市可能在另一个城市附近，并且对于代理系统来说，将这种附近的城市归属于特定酒店的位置并不罕见。</p><p id="99fc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">解决这个问题是另一篇文章的主题:它的广度太大，本文无法涵盖。然而，主要思想是，通过使用通用字符串匹配技术和通用位置数据的巧妙算法，可以准备一个地图(具有多对一基数),该地图将来自不同代理系统的每个城市分配到由记录链接系统(即，旅游运营商系统)维护的一个通用位置。</p><p id="3de9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，在记录链接过程之前，可以用通用位置<strong class="ig hi">替换代理酒店位置细节，并使用通用位置作为支点来准备匹配过程所需的对。</strong>该封锁标准(即配对生成)基于以下前提:对于要匹配的两家酒店，至少它们应位于相同的通用位置。也就是说，准备同一城市的酒店对是一种可行的策略，然后将这些酒店对输入算法，以匹配其他属性，如酒店名称。</p><h1 id="a371" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">机器学习</h1><p id="db43" class="pw-post-body-paragraph ie if hh ig b ih la ij ik il lb in io ip lc ir is it ld iv iw ix le iz ja jb ha bi translated">正如我们在上面看到的，每个酒店实体都是成对的，一对实体作为匹配算法的单个输入，该算法对每个输入进行评分。每个分数都可以标准化为[0，1]范围，其中1表示完全匹配。算法本身可能是基于模糊规则的算法，也可能是机器学习算法，这取决于您的数据。不同的是，对于模糊算法，你在先验中设置阈值水平(截止水平)。也就是说，如果我们只考虑酒店名称，我们可以灌输一个规则，即完全匹配将代表名称差异大于0.95的那些对，这些值/阈值是根据经验确定的。然而，在机器学习中，我们让算法通过输入(训练)大量数据来自己找出这些参数。这些数据必须覆盖我们的输入数据可能必须覆盖的几乎每一个领域:也就是说，训练数据需要尽可能多地具有输入数据中可能存在的复杂性。例如，机器学习算法(模型)需要针对噪声数据、不完整数据等进行训练(或“教导”)，以获得准确的输出。可以试验诸如决策树(和诸如森林之类的树的集合)、支持向量机、神经网络之类的常见算法。选择正确的模型总是凭经验。</p><h1 id="f92a" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">假阳性</h1><p id="a95f" class="pw-post-body-paragraph ie if hh ig b ih la ij ik il lb in io ip lc ir is it ld iv iw ix le iz ja jb ha bi translated">任何机器学习算法都不是100%准确的。即使作为人类，我们的决定也不完全正确。如果由两个非常相似(但物理上不相似)的酒店实体组成的对被算法确定为相同的实体，会发生什么？</p><p id="f431" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">影响主要是金融方面的。如果我们回到基础，误报将会错误地区分这两个酒店(来自两个来源)是相同的。也就是说，旅游运营商将在他们的系统中把这两家酒店表示为由一个供应商提供的单个实体。</p><p id="1c01" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果S(在旅游运营商系统中创建的供应商)最初是使用X(假设X和X '是两家酒店，根据我们的算法，这两家酒店错误地返回匹配)酒店的数据创建的，这将意味着在X '中预订房间与在旅游运营商系统中在X中预订房间是一样的！</p><p id="4d3d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了减少这种误报，在核心算法之前必须有一个模糊系统，以便它过滤掉来自核心的不正确结果。否则，财务影响将是毁灭性的。此外，对于不确定的输出，人工干预可能是必要的。基于模糊系统的某些阈值，输出可以被分类为诸如正确匹配、可能匹配等级别。根据这些标准，可以设计一种人工干预的技术。</p><h1 id="8e59" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">结论</h1><p id="cba0" class="pw-post-body-paragraph ie if hh ig b ih la ij ik il lb in io ip lc ir is it ld iv iw ix le iz ja jb ha bi translated">记录联动问题往往有以下步骤:</p><ol class=""><li id="23f4" class="lg lh hh ig b ih ii il im ip li it lj ix lk jb lv lm ln lo bi translated">数据收集。</li><li id="f735" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb lv lm ln lo bi translated">预处理</li><li id="cd7f" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb lv lm ln lo bi translated">配对生成。</li><li id="3102" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb lv lm ln lo bi translated">特征提取。</li><li id="6d72" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb lv lm ln lo bi translated">匹配。</li><li id="d52a" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb lv lm ln lo bi translated">假阳性缓解。</li></ol><p id="0549" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这篇文章中，我试图给出一个非常狭窄的演练，如何将这一过程应用于一个非常现实的问题，在旅游领域。由于这篇文章可以深入到学术研究的许多领域(自然语言处理、机器学习、数学等等)，所以它故意没有详尽地列出它的技术性。我还有意避开了一些非功能性的技术问题，比如处理大量数据，这在其他文章中已经讨论过了，因为本文主要关注主要的功能性问题。然而，这是一个非常现实的问题，这种过程在内存和计算方面都很庞大，需要迅速采取措施来缓解这些问题。然而，必须指出的是，在精度和性能(特别是速度)之间总是存在一种折衷。一个高度精确的算法的机会成本是它的执行速度。在这种情况下，如果出现假阳性，财务影响将是毁灭性的。因此，可能需要牺牲速度来获得准确的结果。</p><p id="d51e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">总的来说，该过程的准确性很大程度上取决于您为算法识别的酒店实体选择的属性的数量和质量，以及算法本身的类型。除了我提出的四个类别中讨论的两个属性之外，还可以有其他重要的属性。但是在使用属性之前，可能必须对那些属性进行质量分析，获取足够的真实数据语料库以理解这种数据的变化。这种分析最终决定了您的预处理程序和核心匹配算法，并间接决定了您的输出质量。</p></div></div>    
</body>
</html>