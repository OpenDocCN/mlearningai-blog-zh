<html>
<head>
<title>How I Determined The Success Of A Manga Using Data Science</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何用数据科学来决定一部漫画的成功</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/how-i-determined-the-success-of-a-manga-using-data-science-5bf3ba8bcb90?source=collection_archive---------5-----------------------#2021-09-19">https://medium.com/mlearning-ai/how-i-determined-the-success-of-a-manga-using-data-science-5bf3ba8bcb90?source=collection_archive---------5-----------------------#2021-09-19</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/2de9b91a730d60f5e411eeadc81b8bf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mb45Y1m3U1Mgw4Rj"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Photo by <a class="ae it" href="https://unsplash.com/@graciadharmaa?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Gracia Dharma</a> on <a class="ae it" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="4575" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">介绍</h1><p id="95fa" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">每年都有数百部漫画被出版商抛弃。作为一个如饥似渴地阅读的人，看到一部文学作品被抛弃是令人心碎的。很多时候，这是因为缺乏读者，糟糕的翻译和它的宣传方式。利用数据科学和分析，我将找到一种方法来确定漫画的成功，并利用这种分析可能会改变他们向公众描绘的方式。</p><h1 id="7fd7" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">数据</h1><p id="9001" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">这些数据是通过网络搜集在myanimelist.com上找到的。关于网络的更多信息，请查看我的前一篇文章。数据由以下几列组成:MALID、名称、分数、流派、概要(漫画的描述)。在分数栏中，分数“未知”意味着该漫画没有被任何成员评级。在我的本地机器上，文件的结构如下。</p><figure class="kr ks kt ku fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kq"><img src="../Images/3842ba07dae6d0f0f94013f800beb615.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-eSAqgOkWirzVs62QpmXyw.jpeg"/></div></div></figure><h1 id="246f" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">探索性数据分析</h1><p id="a8a7" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">如果你跟着这里是EDA的代码。我也解释了我对以下步骤的推理。</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="5f26" class="la iv hh kw b fi lb lc l ld le">import pandas as pd<br/>import numpy as np<br/>import matplotlib.pyplot as plt<br/>from gensim.parsing.preprocessing import remove_stopwords<br/>from wordcloud import WordCloud</span><span id="8417" class="la iv hh kw b fi lf lc l ld le">df = pd.read_csv("../Data/anime_with_synopsis.csv")<br/>display(df)<br/>display(df.info())<br/>display(df.describe())</span><span id="be0d" class="la iv hh kw b fi lf lc l ld le">numerical_features_columns = [""]<br/>description_label = ""<br/>df["Score"] = df["Score"].apply(lambda x : .0 if x == "Unknown" else x)<br/>df.dropna(inplace = True)<br/></span><span id="73a0" class="la iv hh kw b fi lf lc l ld le">categories_list = []<br/>for row in df["Genres"]:<br/>    [categories_list.append(x.strip()) for x in row.split(",")]</span><span id="3f13" class="la iv hh kw b fi lf lc l ld le">categories = list(set(categories_list))<br/>categories_count = [categories_list.count(x) for x in categories]</span><span id="5afb" class="la iv hh kw b fi lf lc l ld le">fig = plt.figure(figsize=(15,25))<br/>plt.barh( categories,categories_count  )<br/>plt.xlabel("Category")<br/>plt.ylabel("Count")<br/>plt.title("Genres")<br/>plt.show()</span><span id="4a39" class="la iv hh kw b fi lf lc l ld le">df["Score"] = pd.to_numeric(df["Score"])<br/>fig = plt.figure(figsize=(15,25))<br/>plt.hist(list(df["Score"]) , bins = [0,1,2,3,4,5,6,7,8,9,10])<br/>plt.show()</span><span id="3a1d" class="la iv hh kw b fi lf lc l ld le"># We'll be removing all the manga with rating 0 to fit the gaussian curve</span><span id="8587" class="la iv hh kw b fi lf lc l ld le">df["Score"] = pd.to_numeric(df["Score"])<br/>fig = plt.figure(figsize=(15,25))<br/>plt.hist(list(df[df["Score"] != 0]["Score"]) , bins = [0,1,2,3,4,5,6,7,8,9,10])<br/>plt.show()</span><span id="f662" class="la iv hh kw b fi lf lc l ld le">df = df[df["Score"] != 0]<br/>plt.figure(figsize=(30,30))<br/>text = " ".join(str for str in df["sypnopsis"])<br/>text_without_stopwords = remove_stopwords(text)<br/>word_cloud = WordCloud(background_color = "black" , collocations = True).generate(text_without_stopwords)<br/>plt.imshow(word_cloud , interpolation= "bilinear")<br/>plt.axis("off")<br/>plt.show()</span><span id="89b3" class="la iv hh kw b fi lf lc l ld le">high_df = df[df["Score"] &gt; 5]<br/>low_df = df[df["Score"] &lt;= 5]</span><span id="3dfc" class="la iv hh kw b fi lf lc l ld le">plt.figure(figsize=(30,30))<br/>text = " ".join(str for str in high_df["sypnopsis"])<br/>text_without_stopwords = remove_stopwords(text)<br/>word_cloud = WordCloud(background_color = "black" , collocations = True).generate(text_without_stopwords)<br/>plt.imshow(word_cloud , interpolation= "bilinear")<br/>plt.axis("off")<br/>plt.show()</span><span id="c70d" class="la iv hh kw b fi lf lc l ld le">plt.figure(figsize=(30,30))<br/>text = " ".join(str for str in low_df["sypnopsis"])<br/>text_without_stopwords = remove_stopwords(text)<br/>word_cloud = WordCloud(background_color = "black" , collocations = True).generate(text_without_stopwords)<br/>plt.imshow(word_cloud , interpolation= "bilinear")<br/>plt.axis("off")<br/>plt.show()</span></pre><p id="d90d" class="pw-post-body-paragraph js jt hh ju b jv lg jx jy jz lh kb kc kd li kf kg kh lj kj kk kl lk kn ko kp ha bi translated">因为没有被评级的漫画被给了“未知”的分数，所以我给他们的评级是零。</p><p id="bd23" class="pw-post-body-paragraph js jt hh ju b jv lg jx jy jz lh kb kc kd li kf kg kh lj kj kk kl lk kn ko kp ha bi translated">然后我做了一个分数直方图。我注意到分数栏似乎遵循正态分布曲线，但是零分太高了。正态分布或钟形曲线是大多数范围应该落入的。比如考试的分数，可量化的结果。这是钟形曲线应该有的样子。</p><figure class="kr ks kt ku fd ii er es paragraph-image"><div class="er es ll"><img src="../Images/2d1396765bc4d62acdba06539b6f62ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*Yj8sjGc6rWmPgspoufJ6Lg.jpeg"/></div></figure><p id="63a2" class="pw-post-body-paragraph js jt hh ju b jv lg jx jy jz lh kb kc kd li kf kg kh lj kj kk kl lk kn ko kp ha bi translated">这是我从分数直方图得到的结果。</p><figure class="kr ks kt ku fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lm"><img src="../Images/2fe8a78afbf0ab783514dc6b8aa02570.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VzHE2R4QeLEdsyb4gE2Xlw.png"/></div></div></figure><p id="641f" class="pw-post-body-paragraph js jt hh ju b jv lg jx jy jz lh kb kc kd li kf kg kh lj kj kk kl lk kn ko kp ha bi translated">正如你所看到的，我决定将所有分数为零的漫画标为“未知”是错误的。为了解决这个问题，我删除了所有带有“未知”标签的分数，虽然我丢失了很多数据，但这将确保更准确的读数。</p><p id="d23a" class="pw-post-body-paragraph js jt hh ju b jv lg jx jy jz lh kb kc kd li kf kg kh lj kj kk kl lk kn ko kp ha bi translated">去除“未知”分数后，下面是直方图。这要好得多，它很好地符合钟形曲线。从直方图来看，大多数分数似乎都在4到8分之间。</p><figure class="kr ks kt ku fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lm"><img src="../Images/b9cf0f76d0f73aa787b45ee2fc360ad2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ThzwT6m-1uXxd4yshMuOow.png"/></div></div></figure><p id="5c8a" class="pw-post-body-paragraph js jt hh ju b jv lg jx jy jz lh kb kc kd li kf kg kh lj kj kk kl lk kn ko kp ha bi translated">接下来，我开始测量每个流派的漫画数量。喜剧和动作似乎是漫画数量最多的。漫画中最常见的类型是喜剧、动作、奇幻、戏剧、儿童、冒险、音乐和科幻。</p><figure class="kr ks kt ku fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ln"><img src="../Images/ff6714bac3cb3ccf56994015fea55542.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9qQh26K15HhLz_r7gpRs8A.png"/></div></div></figure><p id="7918" class="pw-post-body-paragraph js jt hh ju b jv lg jx jy jz lh kb kc kd li kf kg kh lj kj kk kl lk kn ko kp ha bi translated">然后我从提要栏制作了一个词云来检查提要栏中最常用的词。</p><figure class="kr ks kt ku fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lo"><img src="../Images/d7c7f66b519ea585ead30be3029fe199.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-_IfnSW83xs1W3I8neQyiw.png"/></div></div></figure><p id="84a4" class="pw-post-body-paragraph js jt hh ju b jv lg jx jy jz lh kb kc kd li kf kg kh lj kj kk kl lk kn ko kp ha bi translated">接下来，我将得分大于或等于5的数据概要和得分小于5的词云分开，以检查不同类型评级中使用的不同词。</p><figure class="kr ks kt ku fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lo"><img src="../Images/037d1427b8ca98dd6802ca45887aade9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VRxN1WYr6Gqwpee1S-I-KA.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">WordCloud for a rating greater than 5</figcaption></figure><figure class="kr ks kt ku fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lo"><img src="../Images/4c06b6d93557fbc4f561283a961e1bcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9gHyc3QUbPLjBLR3FDLtmw.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">WordCloud for a rating of less than 5</figcaption></figure><h1 id="862e" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">分析</h1><p id="dff2" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">这个项目的原因是为了证明在漫画的类型、梗概和分数之间有统计学意义。所以我会做以下两个假设。</p><ol class=""><li id="ef7b" class="lp lq hh ju b jv lg jz lh kd lr kh ls kl lt kp lu lv lw lx bi translated">大纲和我的动画列表上的分数之间存在线性关系。</li><li id="36c9" class="lp lq hh ju b jv ly jz lz kd ma kh mb kl mc kp lu lv lw lx bi translated">类型和我的动画列表上的分数之间没有线性关系，即所有类型都有相同的成功机会。</li></ol><p id="d11c" class="pw-post-body-paragraph js jt hh ju b jv lg jx jy jz lh kb kc kd li kf kg kh lj kj kk kl lk kn ko kp ha bi translated">为了证明假设，我建立了一个模型，并测量模型的准确性，以确定统计意义。这就是我使用分类模型而不是回归模型的原因。我们将设置以下条件来证明存在线性关系。</p><ol class=""><li id="0644" class="lp lq hh ju b jv lg jz lh kd lr kh ls kl lt kp lu lv lw lx bi translated">高于0.85的准确度将证明大纲和分数之间的关系。</li><li id="7adc" class="lp lq hh ju b jv ly jz lz kd ma kh mb kl mc kp lu lv lw lx bi translated">高于0.91的准确度将证明类型和分数之间的关系</li></ol><p id="ba88" class="pw-post-body-paragraph js jt hh ju b jv lg jx jy jz lh kb kc kd li kf kg kh lj kj kk kl lk kn ko kp ha bi translated">我为类型选择更高准确度的原因是，某些类型比其他类型(如喜剧)具有更高的频率，模型可能会学习这一点。</p><p id="7dc0" class="pw-post-body-paragraph js jt hh ju b jv lg jx jy jz lh kb kc kd li kf kg kh lj kj kk kl lk kn ko kp ha bi translated">如果你想自己试试，这里有代码</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="fd2c" class="la iv hh kw b fi lb lc l ld le">import pandas as pd<br/>from sklearn.feature_extraction.text import TfidfVectorizer<br/>from sklearn import svm,naive_bayes<br/>from gensim.utils import simple_preprocess<br/>from sklearn.metrics import accuracy_score<br/>from sklearn.model_selection import train_test_split</span><span id="6541" class="la iv hh kw b fi lf lc l ld le">df = pd.read_csv("../Data/anime_with_synopsis.csv")<br/>display(df)</span><span id="5520" class="la iv hh kw b fi lf lc l ld le">numerical_features_columns = [""]<br/>description_label = ""<br/>df["Score"] = df["Score"].apply(lambda x : .0 if x == "Unknown" else x)<br/>df["Score"] = pd.to_numeric(df["Score"])<br/>df = df[df["Score"] != 0.0]<br/>df.dropna(inplace = True)<br/>display(df)</span><span id="1136" class="la iv hh kw b fi lf lc l ld le">display(df["sypnopsis"].values[0])<br/>display(simple_preprocess(df["sypnopsis"].values[0]))</span><span id="9954" class="la iv hh kw b fi lf lc l ld le"># In[90]:</span><span id="4f51" class="la iv hh kw b fi lf lc l ld le">df["final_text"] = df["sypnopsis"].apply(lambda x:" ".join(simple_preprocess(x)))</span><span id="3e33" class="la iv hh kw b fi lf lc l ld le">Tfidf_vect = TfidfVectorizer(max_features = 1500)<br/>Tfidf_vect.fit(df["final_text"])<br/>X  = Tfidf_vect.transform(df["final_text"])<br/>y = df["Score"]<br/>y = [round(x) for x in y]<br/>X_train,X_test,y_train,y_test = train_test_split(X,y,test_size = 0.33 , random_state = 42 , stratify= y)</span><span id="c996" class="la iv hh kw b fi lf lc l ld le">model = naive_bayes.MultinomialNB()<br/>model.fit(X_train, y_train)<br/>prediction = model.predict(X_test)<br/>print(accuracy_score(prediction , y_test))</span><span id="a57c" class="la iv hh kw b fi lf lc l ld le">df["final_Genres"] = df["Genres"].apply(lambda x:" ".join(simple_preprocess(x)))<br/>Tfidf_vect = TfidfVectorizer(max_features = 25)<br/>Tfidf_vect.fit(df["final_Genres"])<br/>X  = Tfidf_vect.transform(df["final_Genres"])<br/>y = df["Score"]<br/>y = [round(x) for x in y]<br/>X_train,X_test,y_train,y_test = train_test_split(X,y,test_size = 0.33 , random_state = 42 , stratify= y)</span><span id="5de5" class="la iv hh kw b fi lf lc l ld le">model = naive_bayes.MultinomialNB()<br/>model.fit(X_train, y_train)<br/>prediction = model.predict(X_test)<br/>print(accuracy_score(prediction , y_test))</span></pre><h1 id="4997" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">结果</h1><p id="0199" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">这些是用线性模型拟合大纲的结果</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="8ff0" class="la iv hh kw b fi lb lc l ld le">                    .-------------.----------.<br/>                    |    Model    | Accuracy |<br/>                    :-------------+----------:<br/>                    | SVM         |     0.55 |<br/>                    :-------------+----------:<br/>                    | Naïve Bayes |     0.49 |<br/>                    '-------------'----------'</span></pre><p id="91ce" class="pw-post-body-paragraph js jt hh ju b jv lg jx jy jz lh kb kc kd li kf kg kh lj kj kk kl lk kn ko kp ha bi translated">这些是我在尝试用线性模型来拟合流派时得到的结果</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="3432" class="la iv hh kw b fi lb lc l ld le">                   .-------------.----------.<br/>                   |    Model    | Accuracy |<br/>                   :-------------+----------:<br/>                   | SVM         |     0.46 |<br/>                   :-------------+----------:<br/>                   | Naïve Bayes |     0.43 |<br/>                   '-------------'----------'</span></pre><p id="9425" class="pw-post-body-paragraph js jt hh ju b jv lg jx jy jz lh kb kc kd li kf kg kh lj kj kk kl lk kn ko kp ha bi translated">从结果可以看出，我的第一个假设是错的，第二个假设是对的。剧情梗概和配乐以及体裁和配乐之间没有线性关系。</p><h1 id="e8c2" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">结论</h1><p id="4256" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">如你所见，我的第一个假设被证明是正确的，而第二个被证明是错误的。这并不意味着没有办法预测一部漫画的分数，就像我说的这些值之间没有<strong class="ju hi">线性</strong>关系。我选择<strong class="ju hi">线性</strong>这个词是有原因的。通过使用<strong class="ju hi">非线性</strong>模型，有可能做出线性模型无法做出的预测。非线性模型的例子是神经网络，特别是BERT。这些模型被设计成以高精度对文本进行分类。你也可以使用预先训练过的版本，这些版本已经使用huggingface transformers对大量文本进行了训练。</p><p id="74af" class="pw-post-body-paragraph js jt hh ju b jv lg jx jy jz lh kb kc kd li kf kg kh lj kj kk kl lk kn ko kp ha bi translated">也有一些东西，比如作品和章节的数量，有助于一部漫画的成功，你可以用来分类分数。数据科学不仅依赖于你的数据，还依赖于你的创造力。</p></div></div>    
</body>
</html>