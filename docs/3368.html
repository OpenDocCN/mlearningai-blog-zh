<html>
<head>
<title>How to create simple CI/CD pipeline using Azure DevOps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Azure DevOps创建简单的CI/CD管道</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/how-to-create-simple-ci-cd-pipeline-using-azure-devops-67a6cc7bd21a?source=collection_archive---------3-----------------------#2022-08-24">https://medium.com/mlearning-ai/how-to-create-simple-ci-cd-pipeline-using-azure-devops-67a6cc7bd21a?source=collection_archive---------3-----------------------#2022-08-24</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="af88" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这篇文章中，我将向你展示如何使用Azure DevOps创建和设置一个简单的CI/CD管道。</p><p id="5c56" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae jc" href="https://www.simplilearn.com/tutorials/devops-tutorial/continuous-delivery-and-continuous-deployment" rel="noopener ugc nofollow" target="_blank">持续集成和持续部署</a>又称CI/CD，是一个缩短开发和部署应用程序之间的时间间隔的概念。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/7a8e9ea3e94b856613e6db3c9c47bb9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZbWNTGI7ot5jGc2j.jpg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Image by <a class="ae jc" href="https://www.freepik.com/free-vector/devops-team-abstract-concept-vector-illustration-software-development-team-member-agile-workflow-devops-team-model-it-teamwork-project-management-integrated-practice-abstract-metaphor_11668829.htm#query=devops&amp;from_query=ci%20cd&amp;position=0&amp;from_view=search&quot;" rel="noopener ugc nofollow" target="_blank">vectorjuice</a> on Freepik</figcaption></figure><p id="67f0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">通常，当开发人员向应用程序代码库推出新功能时，代码会通过一系列检查，以测试代码的质量。一旦测试通过，代码就被手动编译并部署在服务器或部署环境所在的任何地方。</p><p id="427a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是一个手动且耗时的过程，CI/CD管道旨在自动化该过程，并减少每次提交/代码推送后花费的时间和手动工作。</p><p id="25bc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在本帖中，我们将部署在本帖中创建的简单Flask API，并在其上设置CI/CD管道。该管道将监控代码库中的任何更改，并将在Azure Web Apps上编译和部署API。</p><p id="63ef" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">完成本教程后，您将了解:</p><ul class=""><li id="42f0" class="jt ju hh ig b ih ii il im ip jv it jw ix jx jb jy jz ka kb bi translated">设置Azure DevOps帐户和存储库</li><li id="ee20" class="jt ju hh ig b ih kc il kd ip ke it kf ix kg jb jy jz ka kb bi translated">创建Azure管道</li><li id="55b1" class="jt ju hh ig b ih kc il kd ip ke it kf ix kg jb jy jz ka kb bi translated">使用管道设置Azure容器注册表</li><li id="fb5e" class="jt ju hh ig b ih kc il kd ip ke it kf ix kg jb jy jz ka kb bi translated">运行管道</li></ul><p id="e5f2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们开始吧！</p><h1 id="3a04" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">1.设置Azure DevOps帐户</h1><p id="06fa" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">去<a class="ae jc" href="https://azure.microsoft.com/en-in/services/devops/" rel="noopener ugc nofollow" target="_blank"> Azure DevOps </a>点击免费星。使用您的电子邮件帐户登录，创建并遵循所有步骤。系统将提示您创建一个组织。为您的组织取一个唯一的名称。</p><p id="66d8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">注册完成后，您将被重定向到DevOps主页，如下图所示。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lk"><img src="../Images/ebee160c305d20220f1972550a8c606a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3c4RYxT7QBzZpvk1.png"/></div></div></figure><p id="a908" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，让我们在您刚刚创建的组织中创建一个存储库/项目。创建一个名为Simple Flask API的项目，并将可见性保持为私有。点击创建项目按钮。这将创建一个名为Simple Flask API的项目。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ll"><img src="../Images/1ed6688f7459e37ce7dd48629f429ea7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*TDrgSRx3difJEOfh.png"/></div></div></figure><p id="d182" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦你进入左边的项目视图，你会看到<strong class="ig hi">回复</strong>。点击Repos，它会告诉你如何导入或添加代码或文件到你的仓库。界面就像GitHub一样。让我们添加我们在这篇<a class="ae jc" href="https://errolpereira.github.io/deploy_flask_api_using_docker_container/" rel="noopener ugc nofollow" target="_blank">文章</a>中创建的简单Flask API代码。使用此<a class="ae jc" href="https://github.com/errolPereira/blog_resources/tree/main/Flask%20API" rel="noopener ugc nofollow" target="_blank">链接</a>下载代码文件。</p><p id="bbc7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦你在你的azure仓库中添加了代码，你将会看到类似下面的输出</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lm"><img src="../Images/e5911dc5eb194ff1293335bb350aa488.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*J27t9nNeko74AS1o.png"/></div></div></figure><h1 id="c681" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">2.创建Azure管道</h1><p id="a30e" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">现在，我们将创建管道，该管道将创建代码的docker映像，并将该映像推送到<a class="ae jc" href="https://azure.microsoft.com/en-us/services/container-registry/" rel="noopener ugc nofollow" target="_blank"> Azure容器注册表</a>。</p><p id="4199" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为此，我们需要有一个Azure容器注册创建Azure帐户。您只需提供您的信用卡/借记卡信息，就可以注册30天的免费试用期。不要担心，他们不会向你收取任何费用，即使在试用期结束后，因为它是你去支付。</p><p id="6b19" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">按照这个教程，使用这个<a class="ae jc" href="https://azure.microsoft.com/en-in/free/" rel="noopener ugc nofollow" target="_blank">链接</a>注册一个免费帐户，并创建一个<a class="ae jc" href="https://docs.microsoft.com/en-us/azure/container-registry/container-registry-get-started-portal?tabs=azure-cli" rel="noopener ugc nofollow" target="_blank"> Azure容器注册表</a>。</p><p id="d176" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">注意:使用您创建Azure DevOps帐户时使用的电子邮件地址。</strong></p><p id="e241" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦你的帐户设置完毕，回到azure devops，点击左边的管道选项。你将会看到一个类似如下的页面。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ln"><img src="../Images/7145bff9dfaddb2e4d832ba03c4c3a8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*29LAbIQ5LesP__c1.png"/></div></div></figure><p id="8e95" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">单击创建管道按钮。它会询问您的代码库。选择Azure Repos Git。然后它会向您显示azure git中的存储库列表。因为我们只创建了一个名为Simple Flask API的存储库，所以我们将只看到这一个选项。选择要为其创建管道的存储库名称。在我们的例子中是简单的Flask API。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lo"><img src="../Images/76c19147e406dec261d22fd07f6ae9cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*akIvbyhhv3hqfyR-.png"/></div></div></figure><p id="f830" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在它会问你想用这个管道做什么。我们希望为我们的应用程序构建一个docker映像，并将其推送到Azure容器注册中心。我们将选择“Docker —构建并向Azure容器注册表推送图像”选项。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lp"><img src="../Images/b34158ca92f28af2983856303d720848.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GslVKd6MukbCeZDl.png"/></div></div></figure><p id="3a71" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，它将继续验证您的azure帐户，并输入您创建的容器注册表名称。选择免费试用订阅选项，然后单击继续。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lq"><img src="../Images/e718c5668e6caa12f9bc810b09e3452c.png" data-original-src="https://miro.medium.com/v2/resize:fit:952/format:webp/0*ic4y-aAjQ2igRPid.png"/></div></figure><p id="086f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在选择您之前创建的容器注册表名称。给你想放入注册表的docker图片起一个名字。一旦你是好的点击验证和配置按钮。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lr"><img src="../Images/031648540c654993631c767dd5a7412b.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*IysnbLOWpRCS2RbprmQeAQ.png"/></div></figure><p id="a2d7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果一切都配置正确，您将看到一个YAML文件，其中包含为您完成的所有配置。该文件将类似于下图</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ls"><img src="../Images/01f47913db2a02ea9356fb51475cee76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Z_GFgycAD5C7HfitE3ufw.png"/></div></div></figure><h1 id="df9e" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">3.运行Azure管道</h1><p id="ef72" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">现在一切都设置好了，继续点击保存并运行按钮。这将触发管道。它会把你的Flask API编译成一个docker镜像，并把这个镜像放到你的Azure容器注册表中。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lt"><img src="../Images/ce837b339f0bd441f595f80f64d29104.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-MgWi7glLz-EqEFF.png"/></div></div></figure><p id="c2f2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦管道运行完成，你可以在<a class="ae jc" href="https://errolpereira.github.io/how_to_create_CI_CD_pipeline_using_azure_devops/portal.azure.com/" rel="noopener ugc nofollow" target="_blank"> azure门户</a>中检查你的容器注册表，你会看到在注册表中推送的图像。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lu"><img src="../Images/b31a7172410678ec0492b2f5cab0bac7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DJdl_DCzMvn8jPKZ.png"/></div></div></figure><h1 id="a10b" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">4.CI/CD自动化</h1><p id="0344" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">现在，您一定想知道我们创建的这个管道中的CI/CD部分在哪里。如果我们每次在应用程序中进行任何更改时都必须手动触发管道，那么这实际上并不能解决任何问题。但幸运的是，每当代码库发生任何变化时，我们创建的管道都会自动触发。</p><p id="dc5f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">继续在<strong class="ig hi"> app.py </strong>文件中添加一个注释，或者对任何文件做一个小的更改，然后提交您的更改并将其推送到存储库。如果您导航到“pipelines”菜单，您将看到我们创建的管道被自动触发，它正在使用我们推送的最新更改编译和构建映像。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lv"><img src="../Images/b85722e7fc88e0f4c032943fae9db8ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bCzvtQL35WFHKYTn.png"/></div></div></figure><p id="8ad7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">好了，我们创建了一个管道，负责将我们的应用程序编译成docker映像，并将其推入ACR。</p><p id="c5fd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">参考文献:</strong></p><ul class=""><li id="718a" class="jt ju hh ig b ih ii il im ip jv it jw ix jx jb jy jz ka kb bi translated"><a class="ae jc" href="https://docs.microsoft.com/en-us/azure/devops/?view=azure-devops&amp;viewFallbackFrom=vsts" rel="noopener ugc nofollow" target="_blank">蔚蓝DevOps </a></li><li id="c195" class="jt ju hh ig b ih kc il kd ip ke it kf ix kg jb jy jz ka kb bi translated"><a class="ae jc" href="https://docs.microsoft.com/en-us/azure/container-registry/" rel="noopener ugc nofollow" target="_blank"> Azure容器注册表</a></li><li id="bc31" class="jt ju hh ig b ih kc il kd ip ke it kf ix kg jb jy jz ka kb bi translated"><a class="ae jc" href="https://docs.microsoft.com/en-us/azure/devops/pipelines/apps/cd/azure/cicd-data-overview?view=azure-devops" rel="noopener ugc nofollow" target="_blank"> CI/CD管道</a></li></ul></div><div class="ab cl lw lx go ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ha hb hc hd he"><p id="d922" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="md">原载于2022年8月24日</em><a class="ae jc" href="https://errolpereira.github.io/how_to_create_CI_CD_pipeline_using_azure_devops/" rel="noopener ugc nofollow" target="_blank"><em class="md">https://errolpereira . github . io</em></a><em class="md">。</em></p><div class="me mf ez fb mg mh"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="mi ab dw"><div class="mj ab mk cl cj ml"><h2 class="bd hi fi z dy mm ea eb mn ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="mo l"><h3 class="bd b fi z dy mm ea eb mn ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="mp l"><p class="bd b fp z dy mm ea eb mn ed ef dx translated">medium.com</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv jn mh"/></div></div></a></div></div></div>    
</body>
</html>