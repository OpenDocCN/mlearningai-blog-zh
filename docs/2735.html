<html>
<head>
<title>A Practical Guide To Exploratory Data Analysis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索性数据分析实用指南</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/a-practical-guide-to-exploratory-data-analysis-fabbac2bcad?source=collection_archive---------3-----------------------#2022-06-05">https://medium.com/mlearning-ai/a-practical-guide-to-exploratory-data-analysis-fabbac2bcad?source=collection_archive---------3-----------------------#2022-06-05</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="2399" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated"><em class="iw">用信用卡诈骗的例子</em></h2></div><h1 id="8805" class="ix iy hh bd iz ja jb jc jd je jf jg jh in ji io jj iq jk ir jl it jm iu jn jo bi translated">探索性数据分析</h1><p id="4c6d" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">探索性数据分析或简称EDA是一个了解数据特征的过程。它帮助您处理数据，揭示特征之间的关系，发现模式和检测异常，从而帮助您实现最终目标。以下是你在探索结束时应该知道的一系列事情:</p><ul class=""><li id="f627" class="kl km hh jr b js kn jv ko jy kp kc kq kg kr kk ks kt ku kv bi translated">数据结构</li><li id="15f5" class="kl km hh jr b js kw jv kx jy ky kc kz kg la kk ks kt ku kv bi translated">特征关系</li><li id="e5d5" class="kl km hh jr b js kw jv kx jy ky kc kz kg la kk ks kt ku kv bi translated">极端值</li><li id="eff1" class="kl km hh jr b js kw jv kx jy ky kc kz kg la kk ks kt ku kv bi translated">假定</li></ul><h2 id="6a59" class="lb iy hh bd iz lc ld le jd lf lg lh jh jy li lj jj kc lk ll jl kg lm ln jn lo bi translated"><strong class="ak">一个小小的警告</strong></h2><p id="c8ac" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">大约10年前，当我还在上学的时候，我的教授告诉我们，在做任何事情之前，应该首先做EDA。他当时说得有道理，因为我们看到和使用的数据集不超过100个要素。今天，EDA对于理解您的数据仍然很重要，但通常不是您想要做的第一步。因为大多数情况下，您将最终处理初始数据集中的数千个(如果不是数百万个)要素，并且生成可视化结果将会令人不知所措。所以我强烈建议任何处理大数据(特性&gt; 100)的人在进入EDA之前先做变量选择。</p><h1 id="1ee0" class="ix iy hh bd iz ja jb jc jd je jf jg jh in ji io jj iq jk ir jl it jm iu jn jo bi translated">探索数据之前先探索自己</h1><p id="5441" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">太多的人直接跳到EDA或模型开发，甚至不知道他们为什么这样做。所以在你探索数据之前，问问自己5个为什么，这样你就清楚地知道你在做什么。我交谈过的人中有一半不知道他们为什么要做他们正在做的事情，那时我知道结果不会令人印象深刻。所以记住这些问题。</p><ul class=""><li id="c7c2" class="kl km hh jr b js kn jv ko jy kp kc kq kg kr kk ks kt ku kv bi translated"><strong class="jr hi">为什么:</strong>你为什么要构建这个数据集？你的最终目标是什么？</li><li id="ae41" class="kl km hh jr b js kw jv kx jy ky kc kz kg la kk ks kt ku kv bi translated"><strong class="jr hi">何时:</strong>您的数据有多长时间限制？应该考虑季节性吗？在此期间是否有可能扭曲结果的欺诈攻击？</li><li id="a659" class="kl km hh jr b js kw jv kx jy ky kc kz kg la kk ks kt ku kv bi translated">你打算做什么来实现你的最终目标？</li><li id="e2a3" class="kl km hh jr b js kw jv kx jy ky kc kz kg la kk ks kt ku kv bi translated"><strong class="jr hi">哪里:</strong>这些数据从哪里来？单一或多重来源？他们可靠吗？</li><li id="d41f" class="kl km hh jr b js kw jv kx jy ky kc kz kg la kk ks kt ku kv bi translated"><strong class="jr hi">谁:</strong>谁是利益相关者？你的观众是谁？你的顾客是谁？</li></ul><h1 id="ea91" class="ix iy hh bd iz ja jb jc jd je jf jg jh in ji io jj iq jk ir jl it jm iu jn jo bi translated">信用卡欺诈数据集</h1><p id="cda2" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">我正在使用的数据集来自Kaggle，你可以在这里下载。值得花些时间来讨论这个数据集，因为我将在整个欺诈检测系列中使用它。<strong class="jr hi"> <em class="lq">本练习中用到的所有代码都是</em> </strong> <a class="ae lp" href="https://github.com/xiaojun-xu/Medium/blob/main/a%20practical%20guide%20to%20exploratory%20data%20analysis.ipynb" rel="noopener ugc nofollow" target="_blank"> <strong class="jr hi"> <em class="lq">这里的</em> </strong> </a></p><p id="a85f" class="pw-post-body-paragraph jp jq hh jr b js kn ii ju jv ko il jx jy lr ka kb kc ls ke kf kg lt ki kj kk ha bi translated">在提供的数据集中，我们有31个不同的属性，其中30个是预测特征，1个是目标(<strong class="jr hi"> <em class="lq">类</em> </strong>)。在这30个预测特征中，有28个由于保密原因是PCA派生的(<strong class="jr hi"><em class="lq">【V1】—v 28</em></strong>)，只有<strong class="jr hi"> <em class="lq">【时间】</em> </strong>和<strong class="jr hi"> <em class="lq">数量</em> </strong>是原始的。所有的都是数字。但是，我觉得一个没有分类变量的数据集是不够的，可能会错过机器学习的很多重要方面，因此我增加了一个分类变量<strong class="jr hi"><em class="lq">【Day _ Night】</em></strong>，它是从<strong class="jr hi"> <em class="lq"> </em> </strong>特征<strong class="jr hi"> <em class="lq">时间</em> </strong>中派生出来的。<strong class="jr hi"> <em class="lq"> Day_Night </em> </strong>包括四个等级:<em class="lq">清晨、上午、下午</em>和<em class="lq">傍晚</em>。</p><figure class="lv lw lx ly fd lz er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es lu"><img src="../Images/f520d632af475cc9d15202c9bb032506.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xiWQyj0_ShhTx_82zNgIrQ@2x.png"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx">Image by Author</figcaption></figure><h1 id="3774" class="ix iy hh bd iz ja jb jc jd je jf jg jh in ji io jj iq jk ir jl it jm iu jn jo bi translated">数据结构</h1><p id="1780" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">当我得到一个数据集时，我总是做的第一件事就是快速浏览一下，这样我就知道数据被正确地导入了。此外，当我看到面前的具体数据集时，它让我感到安心。</p><figure class="lv lw lx ly fd lz er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es lu"><img src="../Images/58129b627e7d4f9e60ffd9f1affbe012.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rS8QsJeIu3Sqeqt0r8fSEA@2x.png"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx">Image by Author</figcaption></figure><p id="f69f" class="pw-post-body-paragraph jp jq hh jr b js kn ii ju jv ko il jx jy lr ka kb kc ls ke kf kg lt ki kj kk ha bi translated">接下来，我将检查观察和特征的数量，确保没有遗漏任何东西。基于形状，我们有284，807个ob和33个特征。这与我最初设计的post + 2特性一致。这种维度检查还可以让你了解你可能面临的问题，计算能力消耗和可能的维度诅咒。在欺诈世界中，不平衡的数据集总是问题所在，问题是我们谈论的不平衡有多严重。在这个数据集中，我们有0.17%的欺诈交易，我认为相当糟糕。有3种通用方法可以用来解决这个问题，(1)成本敏感，(2)重采样和(3)集合模型。稍后我会试着写一篇关于如何处理不平衡数据的文章。</p><figure class="lv lw lx ly fd lz er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es mk"><img src="../Images/54b6bb56f26ffcca7b693a6227182cc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0KmIpJUr5uMExKWnoNgTfw@2x.png"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx">Image by Author</figcaption></figure><p id="3ab6" class="pw-post-body-paragraph jp jq hh jr b js kn ii ju jv ko il jx jy lr ka kb kc ls ke kf kg lt ki kj kk ha bi translated">在<em class="lq">熊猫</em>方法<em class="lq">的帮助下。info() </em>，你可以得到你的数据的一个基本结构信息列表，无论一个特性是否有缺失值或者你正在处理的数据类型。如果你有缺失的值，试着用适当的方法估算它们。很多有监督的机器学习模型对缺失值不满意。幸运的是，所提供的数据没有任何缺失值。然后检查数据类型是否与您认为的一致，有时时间戳采用的是<em class="lq">浮点</em>或<em class="lq">字符串</em>格式。然后，您需要将您的数据类型转换为合适的类型。</p><figure class="lv lw lx ly fd lz er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es ml"><img src="../Images/b4fdb1817a0ed624bb052578838900fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bAaWbtcgL2bwE9eV14UQEg@2x.png"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx">Image by Author</figcaption></figure><h2 id="5a3a" class="lb iy hh bd iz lc ld le jd lf lg lh jh jy li lj jj kc lk ll jl kg lm ln jn lo bi translated">特征统计</h2><p id="e3bd" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">使用dataframe上的方法<em class="lq"> describe() </em>，您将找到数字变量的基本统计数据。这将给你<strong class="jr hi"> <em class="lq">的含义</em> </strong>、<strong class="jr hi"> <em class="lq">标准差</em> </strong>和<strong class="jr hi"> <em class="lq">百分位数</em> </strong>，就像一个箱线图。请注意，<strong class="jr hi"> <em class="lq">表示</em> </strong>全为0，而<strong class="jr hi"> <em class="lq">标准差</em> </strong>按降序排列，这都是因为PCA。在普通数据集中，您不会得到这种分布良好的要素。你可以通过查看<strong class="jr hi"> <em class="lq">的含义</em></strong><strong class="jr hi"><em class="lq">STD</em></strong>以及<strong class="jr hi"> <em class="lq"> max </em> </strong>和<strong class="jr hi"> <em class="lq"> min </em> </strong>得到一个感觉，仅此就足以告诉你关于异常值的信息。</p><figure class="lv lw lx ly fd lz er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es mm"><img src="../Images/c3359a746379e01d92fcf6bc5ae1584a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YFCeTva5AlEkdJ_enmv0SQ@2x.png"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx">Image by Author</figcaption></figure><h2 id="9c1e" class="lb iy hh bd iz lc ld le jd lf lg lh jh jy li lj jj kc lk ll jl kg lm ln jn lo bi translated">处理分类变量</h2><p id="6d0a" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">如果您指定您的参数为<em class="lq"> include = ['O'] </em>，它将返回您的分类变量的信息。大多数机器学习模型无法处理分类变量，我们需要为每个级别创建虚拟变量。这将迅速膨胀你的数据集，并导致一个叫做<strong class="jr hi">维度诅咒</strong>的问题。因此，在创建虚拟变量之前，最好将它们分组。我在学校学到的是，你可以把低频率水平分成一个组，这将有助于消除维数灾难。但在实际业务中，你应该根据欺诈率对级别进行分组。你也可以删除一元变量而不遗漏，因为它们现在不提供任何信息。把有缺失的一元变量当作二元变量，因为正如我的教授告诉我们的，缺失本身就是信息。</p><figure class="lv lw lx ly fd lz er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es lu"><img src="../Images/0931e7a7672577a03994f8de9db41e02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yv_hDxuKoX3F5TMIXo7how@2x.png"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx">Image by Author</figcaption></figure><h1 id="fea4" class="ix iy hh bd iz ja jb jc jd je jf jg jh in ji io jj iq jk ir jl it jm iu jn jo bi translated">关系和异常值</h1><h2 id="10a5" class="lb iy hh bd iz lc ld le jd lf lg lh jh jy li lj jj kc lk ll jl kg lm ln jn lo bi translated">单变量的</h2><p id="b697" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">我喜欢看每个变量的单变量分布和箱线图，因为它们讲述了一个故事。时间分布表明，晚上的交易量比白天少得多。从统计学上讲，这种形状是双峰的，在最终的全局最小值中不太理想。分布<em class="lq"> V1 </em>告诉我们它是向左倾斜的，而<em class="lq"> V1 </em>的箱线图表明有很多异常值。这可能会降低未来模型的准确性。您可以使用<strong class="jr hi"> box-cox变换</strong>找到合适的幂，使您的分布正常。</p><figure class="lv lw lx ly fd lz er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es mn"><img src="../Images/78da7b1de74bdfaf02e2f9a3f05d6e16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nU3VDwuoNc-L5MHso-x3lw@2x.png"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx">Image by Author</figcaption></figure><h2 id="c5e1" class="lb iy hh bd iz lc ld le jd lf lg lh jh jy li lj jj kc lk ll jl kg lm ln jn lo bi translated">多变量的</h2><p id="6a81" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated"><strong class="jr hi">关联热图</strong>让您直观了解每个变量之间的关系。较深或较浅的颜色表明两个变量的相关性较高。皮尔逊相关&gt; |0.8|表示强相关，其中&gt; |0.5|和&lt; |0.8|表示中度相关，&lt; |0.5|表示弱相关。因为变量<strong class="jr hi"> <em class="lq"> V1-V28 </em> </strong>是PCA导出的，我们知道它们彼此正交，因此相关性为0。</p><p id="6ed1" class="pw-post-body-paragraph jp jq hh jr b js kn ii ju jv ko il jx jy lr ka kb kc ls ke kf kg lt ki kj kk ha bi translated">如果我们有相关变量，您可以删除一个变量，基于(1)它有多少个其他相关变量，您可以删除相关性更高的变量，(2)基于变量重要性或两者的预测能力，较高的变量留在数据集中。通常我的丢弃阈值是&gt; |0.90 |，因为即使&gt; |0.8|被认为是强相关的，我仍然认为有一些独特的信息没有被其他变量捕获。</p><figure class="lv lw lx ly fd lz er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es mo"><img src="../Images/5bb8406550fecf6698640311dfc9c4e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hv_ZqpPjsfnnzV4JUzoY4g@2x.png"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx">Image by Author</figcaption></figure><p id="b855" class="pw-post-body-paragraph jp jq hh jr b js kn ii ju jv ko il jx jy lr ka kb kc ls ke kf kg lt ki kj kk ha bi translated">然而，皮尔逊相关只讲述了故事的一部分，如果你有<strong class="jr hi">多重共线性</strong>呢？也就是说，一个变量与其他变量的线性组合相关。我们可以使用<strong class="jr hi">方差膨胀因子</strong>来检查多重共线性。你可以从<em class="lq"> statsmodels </em>包中<em class="lq">variance _ inflation _ factor</em>来计算它。VIF &gt; 5有问题，VIF &gt; 10有问题。</p><figure class="lv lw lx ly fd lz er es paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="er es mo"><img src="../Images/e1e8b4a04b72ec45383dac4255740192.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SjQdfGjJGWVZPIseoDNuyQ@2x.png"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx">Image by Author</figcaption></figure><h1 id="631d" class="ix iy hh bd iz ja jb jc jd je jf jg jh in ji io jj iq jk ir jl it jm iu jn jo bi translated">结论</h1><p id="d294" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">EDA有比我刚才介绍的更多的内容。但是一旦你完成了上面列出的所有项目，你应该对你的数据有一些基本的了解，以及你能从中得到什么。希望这篇文章能有所帮助。</p><p id="5ca5" class="pw-post-body-paragraph jp jq hh jr b js kn ii ju jv ko il jx jy lr ka kb kc ls ke kf kg lt ki kj kk ha bi translated">谢谢，</p><h1 id="df0c" class="ix iy hh bd iz ja jb jc jd je jf jg jh in ji io jj iq jk ir jl it jm iu jn jo bi translated">参考</h1><div class="mp mq ez fb mr ms"><a href="https://www.kaggle.com/datasets/mlg-ulb/creditcardfraud" rel="noopener  ugc nofollow" target="_blank"><div class="mt ab dw"><div class="mu ab mv cl cj mw"><h2 class="bd hi fi z dy mx ea eb my ed ef hg bi translated">信用卡欺诈检测</h2><div class="mz l"><h3 class="bd b fi z dy mx ea eb my ed ef dx translated">标记为欺诈或真实的匿名信用卡交易</h3></div><div class="na l"><p class="bd b fp z dy mx ea eb my ed ef dx translated">www.kaggle.com</p></div></div><div class="nb l"><div class="nc l nd ne nf nb ng me ms"/></div></div></a></div><p id="457e" class="pw-post-body-paragraph jp jq hh jr b js kn ii ju jv ko il jx jy lr ka kb kc ls ke kf kg lt ki kj kk ha bi translated">McClave和t . Sincich(2018年)。<strong class="jr hi">检测异常值的方法:箱线图和z分数</strong>。在<em class="lq">统计</em>(第13版。，第111–118页)。论文，皮尔森。</p><p id="eddb" class="pw-post-body-paragraph jp jq hh jr b js kn ii ju jv ko il jx jy lr ka kb kc ls ke kf kg lt ki kj kk ha bi translated">McClave和t . Sincich(2018年)。<strong class="jr hi">相关系数和确定系数</strong>。在<em class="lq">统计</em>(第13版。，第645–649页)。论文，皮尔森。</p><p id="ef7e" class="pw-post-body-paragraph jp jq hh jr b js kn ii ju jv ko il jx jy lr ka kb kc ls ke kf kg lt ki kj kk ha bi translated">詹姆斯，g .，威滕，d .，哈斯蒂，t .，，蒂布拉尼，R. (2021)。<strong class="jr hi">共线性</strong>。在<em class="lq">统计学习介绍:应用于R </em>(第99-103页)。论文，斯普林格。</p><div class="mp mq ez fb mr ms"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="mt ab dw"><div class="mu ab mv cl cj mw"><h2 class="bd hi fi z dy mx ea eb my ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="mz l"><h3 class="bd b fi z dy mx ea eb my ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="na l"><p class="bd b fp z dy mx ea eb my ed ef dx translated">medium.com</p></div></div><div class="nb l"><div class="nh l nd ne nf nb ng me ms"/></div></div></a></div></div></div>    
</body>
</html>