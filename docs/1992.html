<html>
<head>
<title>Building Pie Chart, Stacked Bar Chart &amp; Column Bar Chart (With Data Labels) Using Matplotlib &amp; Seaborn</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Matplotlib &amp; Seaborn构建饼图、堆积条形图和柱形图(带数据标签)</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/building-pie-chart-stacked-bar-chart-column-bar-chart-with-data-labels-using-matplotlib-32fc3fb5cfe9?source=collection_archive---------8-----------------------#2022-02-19">https://medium.com/mlearning-ai/building-pie-chart-stacked-bar-chart-column-bar-chart-with-data-labels-using-matplotlib-32fc3fb5cfe9?source=collection_archive---------8-----------------------#2022-02-19</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="1e13" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你知道如何使用<a class="ae jc" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank">matplotlib</a>&amp;<a class="ae jc" href="https://seaborn.pydata.org/" rel="noopener ugc nofollow" target="_blank">seaborn</a>来创建可视化并交流你的分析结果，这对你也是一个优势。我个人认为，为了创建有用的可视化效果，我们需要做3件事。</p><ol class=""><li id="35ff" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb ji jj jk jl bi translated">了解<a class="ae jc" href="https://www.scribbr.com/statistics/levels-of-measurement/" rel="noopener ugc nofollow" target="_blank">类型的数据</a>。主要有两种类型的数据:分类数据(名义数据或顺序数据)和数字数据(比率数据或区间数据)。</li><li id="98e8" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated">知道你的目的(总是问谁，什么，何时，何地，为什么，如何)。</li><li id="3a66" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated">使用文字和标签清晰明了。在使用颜色表示某些数据时要保持一致(以避免给浏览者造成混淆)。👀</li></ol><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es jr"><img src="../Images/8194b45d56e72d7ac0b2e0994c0d49b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JDqW-LjkycpNQUmc"/></div></div><figcaption class="kd ke et er es kf kg bd b be z dx">Source: <a class="ae jc" href="https://www.pexels.com/photo/code-projected-over-woman-3861969/" rel="noopener ugc nofollow" target="_blank">Pexels@ThisIsEngineering</a></figcaption></figure><p id="8f67" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">事不宜迟，让我们开始使用matplotlib &amp; seaborn学习一些基本的可视化。我相信你会爱上他们的。💗</p><h1 id="7f44" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">饼图🥧</h1><p id="cc9d" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">饼图对于显示分类数据的百分比很有用。最好不要有超过7个类别。否则，很难区分每个部分的大小。😫</p><ul class=""><li id="de9b" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb lk jj jk jl bi translated"><code class="du ll lm ln lo b"><strong class="ig hi">autopct</strong></code>:显示各段的百分比。下面的例子显示了两位小数<code class="du ll lm ln lo b"><strong class="ig hi">autopct=’%1.2f%%’</strong></code>。对于一个小数位，你只需要使用<code class="du ll lm ln lo b"><strong class="ig hi">autopct=’%1.1f%%’</strong></code>。</li><li id="2940" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb lk jj jk jl bi translated"><code class="du ll lm ln lo b"><strong class="ig hi">explode</strong></code>:从0开始改变数值，移动剩余的线段。</li></ul><pre class="js jt ju jv fd lp lo lq lr aw ls bi"><span id="ff7a" class="lt ki hh lo b fi lu lv l lw lx">import numpy as np<br/>import pandas as pd<br/>import matplotlib.pyplot as plt<br/>df = pd.DataFrame(data={'Count':[49,95,105,155,33,1]},<br/>                  index=['I','II','III','IV','V','VI'])<br/>df.plot.pie(y='Count',<br/>           autopct='%1.2f%%',<br/>           ylabel='',<br/>           fontsize=12,<br/>           explode=(0,0.1,0,0,0.3,0.7),<br/>           figsize=(12,8),<br/>           title='Number of Accidents by Levels');</span></pre><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es ly"><img src="../Images/6682c4169fcd31e56b325aa91c1b4dce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1102/format:webp/1*-MnkWFpji59_nGJgwinJGQ.png"/></div></figure><h1 id="4e4b" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated"><strong class="ak">堆积条形图📊</strong></h1><pre class="js jt ju jv fd lp lo lq lr aw ls bi"><span id="5eb9" class="lt ki hh lo b fi lu lv l lw lx">import numpy as np<br/>import pandas as pd<br/>import matplotlib.pyplot as plt</span><span id="f343" class="lt ki hh lo b fi lz lv l lw lx">df = pd.DataFrame(data=<br/>{'Sector':['Mining','Metals','Others'],<br/>'I':[167,119,42],'II':[26,12,2],'III':[20,7,4],'IV':[21,8,5]})</span><span id="6cb7" class="lt ki hh lo b fi lz lv l lw lx"># plotting stacked bar chart<br/>h = df.plot(kind='bar', stacked=True,figsize=(20,12))<br/>plt.title('Number of Accidents by Industry Sector &amp; Accident Level', fontsize=16)<br/>for c in h.containers:<br/>    h.bar_label(c, labels=[f"{v.get_height():.0f} ({v.get_height()/np.sum(np.array(np.sum(df))[1:])*100:.2f}%)" for v in c],label_type='center')</span><span id="f9b9" class="lt ki hh lo b fi lz lv l lw lx"># creating total column for the df<br/>df['Total']=df['I']+df['II']+df['III']+df['IV']</span><span id="e8b0" class="lt ki hh lo b fi lz lv l lw lx"># add total value at the end of each bar <br/>abs_total = np.array(df['Total'])<br/>rel_total = [float(i)/sum(abs_total)*100 for i in abs_total]<br/>lbs_total = [f"{i[0]} ({i[1]:.2f}%)" for i in zip(abs_total,rel_total)] <br/>for i in range(3):<br/>    h.text(i,abs_total[i],lbs_total[i],ha='center')<br/>plt.xticks([0,1,2],df.Sector,rotation = 50);</span></pre><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es ma"><img src="../Images/2dd99ea54a96e17fd0344fefb2d9af2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gXEniaLyB9X9I-4XjJNGew.png"/></div></div></figure><h1 id="db59" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated"><strong class="ak">柱形图</strong> 🧮</h1><pre class="js jt ju jv fd lp lo lq lr aw ls bi"><span id="078e" class="lt ki hh lo b fi lu lv l lw lx">import numpy as np<br/>import pandas as pd<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns</span><span id="3a72" class="lt ki hh lo b fi lz lv l lw lx">df = pd.DataFrame(data=<br/>{'City':['KL','KL','Penang','Penang','Ipoh','Ipoh'],<br/>'Gender':['Female','Male','Female','Male','Female','Male'],<br/>'Count':[58,73,39,80,50,44]})</span><span id="8dd8" class="lt ki hh lo b fi lz lv l lw lx">plt.figure(figsize=(20,10))<br/>plt.title('Number of Participants by Gender &amp; City', fontsize=16)<br/>p = sns.barplot(x='City', y='Count',hue='Gender',data=df)<br/>for i in p.containers:<br/>    labels = [f'{v.get_height():.0f} ({v.get_height()/np.sum(df.Count)*100:.1f}%)' for v in i]<br/>    p.bar_label(i, labels=labels)</span></pre><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es mb"><img src="../Images/7f7e4d4c7f178407be9a0fb0ff55609b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oiGdsYlMFjF8U3a5bc2CKw.png"/></div></div></figure><p id="85de" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">快乐学习！✌:如果你想了解如何创建关联矩阵和混淆矩阵的热图，请点击这里查看我的另一篇文章。👋</p><div class="mc md ez fb me mf"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="mg ab dw"><div class="mh ab mi cl cj mj"><h2 class="bd hi fi z dy mk ea eb ml ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="mm l"><h3 class="bd b fi z dy mk ea eb ml ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="mn l"><p class="bd b fp z dy mk ea eb ml ed ef dx translated">medium.com</p></div></div><div class="mo l"><div class="mp l mq mr ms mo mt kb mf"/></div></div></a></div><p id="e063" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">🔵<a class="ae jc" rel="noopener" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"> <strong class="ig hi">成为作家</strong> </a></p></div></div>    
</body>
</html>