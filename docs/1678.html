<html>
<head>
<title>Growth Modelling in Ruminants</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反刍动物的生长模型</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/growth-modelling-in-ruminants-1bc62435bd4d?source=collection_archive---------9-----------------------#2022-01-18">https://medium.com/mlearning-ai/growth-modelling-in-ruminants-1bc62435bd4d?source=collection_archive---------9-----------------------#2022-01-18</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="fc5a" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">使用混合模型和R的三分钟阅读</h2></div><p id="6d16" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">阅读会耗费你的时间，所以这里只要代码和情节。尽情享受吧！</p><pre class="js jt ju jv fd jw jx jy jz aw ka bi"><span id="e5cd" class="kb kc hh jx b fi kd ke l kf kg">rm(list = ls())<br/>#### LIBRARIES ####<br/>library(readr)<br/>library(foreign)<br/>library(lme4)<br/>library(ggplot2)<br/>library(rms)<br/>library(plyr)<br/>library(Hmisc)<br/>library(reshape2)<br/>library(boot)<br/>library(sjPlot)<br/>library(sjstats)<br/>library(sjmisc)<br/>library(readr)</span><span id="aa64" class="kb kc hh jx b fi kh ke l kf kg">Datalong &lt;- read_csv(".csv")<br/>View(Datalong)<br/>Datalong$...1&lt;-NULL<br/>colnames(Datalong)[4]&lt;-"Baseline"<br/>Datalong$Treat&lt;-as.factor(Datalong$Treat)<br/>Datalong$Block&lt;-as.factor(Datalong$Block)<br/>head(Datalong)</span></pre><figure class="js jt ju jv fd kj er es paragraph-image"><div class="er es ki"><img src="../Images/dc76b02b8ba45963988a1c01c68d8edf.png" data-original-src="https://miro.medium.com/v2/resize:fit:708/format:webp/1*fgI4upfXtom6_e93_Ya62Q.png"/></div></figure><pre class="js jt ju jv fd jw jx jy jz aw ka bi"><span id="570e" class="kb kc hh jx b fi kd ke l kf kg">theme_set(theme_bw())<br/>myx&lt;-scale_x_continuous(breaks=c(7,14,21,42,49,56))<br/>myy&lt;-scale_y_continuous(breaks = seq(0, 400, by = 10))<br/>ggplot(Datalong, aes(x=Time, y=BW, group=ID, colour=Treat))+<br/>  myx+<br/>  myy+<br/>  geom_line() +<br/>  stat_summary(aes(group=Treat), fun.y=mean, geom="point", size=3.5)+<br/>  stat_summary(aes(group=Treat), fun.y=mean, geom="line", lwd=1.5)</span></pre><figure class="js jt ju jv fd kj er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es km"><img src="../Images/7ebefd8b7e66102c31b3f4b131f9e29d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5xKxk8EzTuHr62r5jeFiDw.png"/></div></div></figure><pre class="js jt ju jv fd jw jx jy jz aw ka bi"><span id="7a56" class="kb kc hh jx b fi kd ke l kf kg">theme_set(theme_bw())<br/>myx&lt;-scale_x_continuous(breaks=c(1,7,14,21,42,49,56))<br/>myy&lt;-scale_y_continuous(breaks = seq(0, 400, by = 10))<br/>ggplot(Datalong, aes(Time, BW, shape=Treat, colour=Treat))+<br/>  stat_summary(fun.data=mean_se, geom="pointrange", lwd=1)+<br/>  myx+<br/>  myy</span></pre><figure class="js jt ju jv fd kj er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es km"><img src="../Images/f3bcf6918655a135dd498c58351ebbe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vMVhFaX8FxBaUew2p_U9lQ.png"/></div></div></figure><pre class="js jt ju jv fd jw jx jy jz aw ka bi"><span id="d5fa" class="kb kc hh jx b fi kd ke l kf kg">Grouped&lt;-groupedData(BW~Time|Block/Treat,<br/>                              data=Datalong,<br/>                              FUN=mean)<br/>fit&lt;-lme(BW~ns(Time,4)+Treat, <br/>             data=Grouped,<br/>             random=~ns(Time,2),<br/>             method="ML", <br/>             control=lmeControl(opt="optim", maxIter=10000, msMaxIter = 1000))<br/>summary(fit)<br/>VarCorr(fit)</span></pre><figure class="js jt ju jv fd kj er es paragraph-image"><div class="er es kr"><img src="../Images/bd7919459b44f5bef2e138015c074555.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*gNOO_TO3fG6QpLy1tUPETA.png"/></div></figure><pre class="js jt ju jv fd jw jx jy jz aw ka bi"><span id="d3d2" class="kb kc hh jx b fi kd ke l kf kg"><br/>plot(fit)<br/>qqnorm(fit)<br/>plot(augPred(fit,level=0:2))<br/>plot(acf(resid(fit)))<br/>bwplot(resid(fit)~Datalong$Block)<br/>bwplot(resid(fit)~as.factor(Datalong$ID))<br/>bwplot(resid(fit)~Datalong$Treat)</span></pre><div class="js jt ju jv fd ab cb"><figure class="ks kj kt ku kv kw kx paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><img src="../Images/33384d616d7aa379d92b5523383c38ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/format:webp/1*ZaLh8Q_czRb07TyqY3d2dg.png"/></div></figure><figure class="ks kj kt ku kv kw kx paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><img src="../Images/dbd8c26fd1ecd3c0535688c42361bb7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/format:webp/1*LCVRqc-lAl4Tfb6oJwJ5Fg.png"/></div></figure><figure class="ks kj ky ku kv kw kx paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><img src="../Images/cfe062054bce21c567f3eb949a63bbdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/format:webp/1*MiROwdzalveiVwhzrH1Gdw.png"/></div></figure></div><div class="ab cb"><figure class="ks kj kz ku kv kw kx paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><img src="../Images/1378a178862eba1ba92118f10422ced5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*I_-QqBf7M1boIKfUuHkaww.png"/></div></figure><figure class="ks kj kz ku kv kw kx paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><img src="../Images/9c5982e50c7f093bdbe4fc996ff9a7c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*eXS4C-NLFG5C5rwi8u0ECA.png"/></div></figure></div><div class="ab cb"><figure class="ks kj la ku kv kw kx paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><img src="../Images/94be303e95349e8fb9ddbb0460e26a7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1420/format:webp/1*bGorKpX-FbBu-45KAnYCyQ.png"/></div></figure><figure class="ks kj lb ku kv kw kx paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><img src="../Images/76f9a60c5e395958eae295b777a70934.png" data-original-src="https://miro.medium.com/v2/resize:fit:582/format:webp/1*VmgKS046Xb3jQFpL8yKv1Q.png"/></div></figure></div><pre class="js jt ju jv fd jw jx jy jz aw ka bi"><span id="5b2f" class="kb kc hh jx b fi kd ke l kf kg">fit&lt;-lmer(BW~ns(Time,4)+Treat+(ns(Time,2)|Block/Treat), data=Datalong, REML = FALSE)<br/>summary(fit)<br/>ranef(fit)</span></pre><figure class="js jt ju jv fd kj er es paragraph-image"><div class="er es lc"><img src="../Images/e039b56672aa9095b049c07697f285f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/1*EtWP7bEsgLkme-30x9AgYg.png"/></div></figure><figure class="js jt ju jv fd kj er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es ld"><img src="../Images/b134287feac78e40cdfbf846ef3fe45f.png" data-original-src="https://miro.medium.com/v2/resize:fit:780/format:webp/1*PlyYJdg3MD1f4YOBDcAADw.png"/></div></div></figure><pre class="js jt ju jv fd jw jx jy jz aw ka bi"><span id="6336" class="kb kc hh jx b fi kd ke l kf kg">plot(fit)<br/>plot_model(fit, type="est")<br/>plot_model(fit, type="re")<br/>plot_model(fit, type="pred")<br/>plot_model(fit, type="diag")</span></pre><div class="js jt ju jv fd ab cb"><figure class="ks kj le ku kv kw kx paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><img src="../Images/671bf005aba0ffec045b5f2f2e040954.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*spXQcF_2pzQR-UA2rQAmKA.png"/></div></figure><figure class="ks kj le ku kv kw kx paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><img src="../Images/f9b9e54f380c3f8129651067eadddfbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*39DdUmGNpiMz0PrPYkLpwQ.png"/></div></figure><figure class="ks kj le ku kv kw kx paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><img src="../Images/31b11fc83e46207af6258760e424d8a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*O4RDt_Hw5jT7LFgHqHDniA.png"/></div></figure></div><div class="ab cb"><figure class="ks kj le ku kv kw kx paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><img src="../Images/1fa56e50491056ab1100fd412ebc58ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*fqW5M0QGmJCjmRdEfxGRgg.png"/></div></figure><figure class="ks kj le ku kv kw kx paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><img src="../Images/179d3b81145ea87c7841f29fb7881636.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*1LUNNDR5alvXYXM_-SWdEA.png"/></div></figure><figure class="ks kj le ku kv kw kx paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><img src="../Images/29f702eaf0abeb8ccc1a13a8b4ed605a.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*V6XJpKQJAvl0EepjzJuCVg.png"/></div></figure></div><div class="ab cb"><figure class="ks kj kz ku kv kw kx paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><img src="../Images/9d699dfb769c2d15497b1d9e5917aec0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*CMyfnz4ryain74FdSqTDOg.png"/></div></figure><figure class="ks kj kz ku kv kw kx paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><img src="../Images/cf5e7768b8b2bf6bbd994ddce3704715.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*_K1gU7TfxGRtAmc6cHex3Q.png"/></div></figure></div><div class="ab cb"><figure class="ks kj kz ku kv kw kx paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><img src="../Images/db22fe674d126703c8770a091e37f2b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*Iioqef3_9HdS2gQ0whfVLw.png"/></div></figure><figure class="ks kj kz ku kv kw kx paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><img src="../Images/02d404af6b970250c862058df3de5d59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*MZw6Y-j43P1uzzzb898xfA.png"/></div></figure></div><pre class="js jt ju jv fd jw jx jy jz aw ka bi"><span id="3de9" class="kb kc hh jx b fi kd ke l kf kg">theme_set(theme_bw())<br/>myx&lt;-scale_x_continuous(breaks=c(1,7,14,21,42,49,56))<br/>myy&lt;-scale_y_continuous(breaks = seq(0, 400, by = 10))<br/>ggplot(Datalong, aes(Time, BW, shape=Treat, colour=Treat))+<br/>  stat_summary(fun.data=mean_se, geom="pointrange", lwd=1, alpha=0.5)+<br/>  stat_summary(aes(y=fitted(fit), linetype=Treat), <br/>               fun.y=mean, geom = "line", lwd=2)+<br/>  myx+<br/>  myy</span></pre><figure class="js jt ju jv fd kj er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es km"><img src="../Images/e6a35339bcba7fc6725e6d5a9d1a35f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kKg0Y5KTLk7tnJ_TiU91tg.png"/></div></div></figure><div class="lf lg ez fb lh li"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="lj ab dw"><div class="lk ab ll cl cj lm"><h2 class="bd hi fi z dy ln ea eb lo ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="lp l"><h3 class="bd b fi z dy ln ea eb lo ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="lq l"><p class="bd b fp z dy ln ea eb lo ed ef dx translated">medium.com</p></div></div><div class="lr l"><div class="ls l lt lu lv lr lw kk li"/></div></div></a></div></div></div>    
</body>
</html>