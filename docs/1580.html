<html>
<head>
<title>Integrations: FastAPI for Fast SaaS Application Deployments</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">集成:用于快速SaaS应用程序部署的FastAPI</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/integrations-fastapi-for-fast-saas-application-deployments-5e1e5861940a?source=collection_archive---------5-----------------------#2022-01-07">https://medium.com/mlearning-ai/integrations-fastapi-for-fast-saas-application-deployments-5e1e5861940a?source=collection_archive---------5-----------------------#2022-01-07</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/d9934b976f42e8f74a42e84b22493244.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XBqVuFcNI6y8AmEPMEPdtA.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">PerceptiLabs and FastAPI Integrations.</figcaption></figure><p id="cb4d" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们开发人员社区中的许多人都曾问过，一旦从<a class="ae jr" href="https://www.perceptilabs.com/" rel="noopener ugc nofollow" target="_blank"> PerceptiLabs </a>中导出模型，如何部署和使用它。因此，在<a class="ae jr" href="https://docs.perceptilabs.com/perceptilabs/support/changelog#version-0.13-november-4-2021" rel="noopener ugc nofollow" target="_blank"> 0.13版本</a>中，我们在感知实验室的<a class="ae jr" href="https://docs.perceptilabs.com/perceptilabs/advanced/ui-overview/exporting" rel="noopener ugc nofollow" target="_blank">部署视图</a>中添加了一个<a class="ae jr" href="https://fastapi.tiangolo.com/" rel="noopener ugc nofollow" target="_blank"> FastAPI </a>部署目标。此功能不仅可以部署您的TensorFlow模型，还可以生成一个完全可用的应用程序，您可以使用它在几分钟内验证和运行您的模型以进行真实世界的推理。</p><p id="4b78" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们选择FastAPI作为基础，因为它是构建RESTful API的高性能web框架，更不用说2021年第三受欢迎的web框架了。让我们仔细看看这给了你什么。</p><h2 id="84cd" class="js jt hh bd ju jv jw jx jy jz ka kb kc je kd ke kf ji kg kh ki jm kj kk kl km bi translated"><strong class="ak">为什么是FastAPI？</strong></h2><p id="22b0" class="pw-post-body-paragraph it iu hh iv b iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm kr jo jp jq ha bi translated">FastAPI部署目标导出TensorFlow模型，并生成基于FastAPI构建的Python服务器应用程序，以及与该服务器通信的示例Python客户端应用程序。我们选择这种架构是因为它展示了如何通过服务器托管模型进行推理，从远程客户端应用程序接收数据，然后将预测返回给客户端应用程序，这是当今SaaS DL解决方案中的典型模式。虽然PerceptiLabs的任何用户都可以通过单击按钮轻松地部署到这个目标，但PerceptiLabs生成的代码需要一些编程经验才能理解和定制。</p><h2 id="ae58" class="js jt hh bd ju jv jw jx jy jz ka kb kc je kd ke kf ji kg kh ki jm kj kk kl km bi translated"><strong class="ak">FastAPI部署目标如何在PerceptiLabs中工作</strong></h2><p id="c39a" class="pw-post-body-paragraph it iu hh iv b iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm kr jo jp jq ha bi translated">FastAPI服务器托管模型并公开一个<strong class="iv hi"> /predict </strong>端点，客户端应用程序可以调用该端点来运行推理。当您运行服务器时，它在浏览器中呈现API，如图1所示:</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ks"><img src="../Images/2f85ea04013975824ffeb53b977c950f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*psqHX2DemMPYt0YT"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx"><em class="kx">Figure 1: FastAPI GUI Generated by PerceptiLabs.</em></figcaption></figure><p id="350e" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">客户端应用程序加载一个CSV文件(也是由部署过程生成的)，该文件列出了一系列数据文件。然后，客户端从列出的数据文件中加载原始数据，并在请求的有效负载中将它发送到<strong class="iv hi"> /predict </strong>端点。服务器通过其托管的TensorFlow模型提供数据，并返回一个JSON响应，其中包含与每个数据项对应的预测:</p><p id="f928" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><em class="ky"> {'labels': ['yes '，' yes '，' yes '，' no '，' yes '，' no '，' yes '，' yes '，' no']} </em></p><p id="3dd4" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">请注意，在您部署了这个目标一次之后，您可能希望在感知器中的模型的后续导出中使用TensorFlow或TensorFlow Lite目标，因为您可能不想继续重新生成服务器和应用程序代码。然后，您可以用新生成的模型文件覆盖FastAPI文件夹中以前的模型。</p><h2 id="2560" class="js jt hh bd ju jv jw jx jy jz ka kb kc je kd ke kf ji kg kh ki jm kj kk kl km bi translated"><strong class="ak"> FastAPI用例</strong></h2><p id="6d12" class="pw-post-body-paragraph it iu hh iv b iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm kr jo jp jq ha bi translated">FastAPI部署目标生成的服务器和客户端应用程序为使用现实推理的用例提供了良好的基础，例如:</p><ul class=""><li id="347a" class="kz la hh iv b iw ix ja jb je lb ji lc jm ld jq le lf lg lh bi translated"><strong class="iv hi">您自己的基于云的SaaS解决方案:</strong>示例服务器的功能是托管一个模型，并将预测请求封装在一个简单的REST API中，这可以作为您自己的基于云的SaaS解决方案的基础。例如，您可以将生成的代码转换为云服务，该云服务根据设备上传的数据执行推理。除了将预测返回给这些边缘设备之外，您的服务器代码还可以执行分析，例如检测上传图像的质量，或者记录简单的指标，例如在给定的时间范围内调用端点的次数。当接收到来自云的带有预测的REST响应时，设备可以执行额外的动作，例如激活另一个设备(例如，致动器)，或者调用您添加到服务中的其他端点(例如，触发警报)。</li><li id="8c44" class="kz la hh iv b iw li ja lj je lk ji ll jm lm jq le lf lg lh bi translated"><strong class="iv hi">调用云服务进行推理:</strong>同样，客户端应用程序用于显示如何调用云服务进行推理。例如，您可以修改应用程序，使其在边缘设备上运行，以收集相机或视频数据。该应用程序可以收集多个图像或帧，将它们打包到一个有效载荷中，然后在调用端点进行基于云的推理时包含该有效载荷。然后，可以在服务器上分析这些预测，服务器进而发出警报和/或提供用于洞察的仪表板。</li><li id="77b7" class="kz la hh iv b iw li ja lj je lk ji ll jm lm jq le lf lg lh bi translated"><strong class="iv hi">捕获时间度量:</strong>您可以做的另一个有趣的增强是向服务器和应用程序添加代码来捕获时间度量。例如，您可以用系统调用包装服务器上的推理调用以及客户机中的POST请求，以收集各个调用前后的时间。然后，您可以计算时间增量来测试您的推理速度和往返请求/响应时间。</li></ul><h2 id="0340" class="js jt hh bd ju jv jw jx jy jz ka kb kc je kd ke kf ji kg kh ki jm kj kk kl km bi translated"><strong class="ak"> FastAPI学习资源</strong></h2><p id="5c82" class="pw-post-body-paragraph it iu hh iv b iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm kr jo jp jq ha bi translated">如需了解更多信息，请务必查看感知器实验室文档中的<a class="ae jr" href="https://docs.perceptilabs.com/perceptilabs/advanced/using-the-exported-deployed-model#fastapi-server" rel="noopener ugc nofollow" target="_blank"> FastAPI部署指南</a>。它提供了有关导出内容以及如何运行服务器和应用程序的更多详细信息。</p><p id="a0e5" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">试试看，<a class="ae jr" href="https://forum.perceptilabs.com/" rel="noopener ugc nofollow" target="_blank">让我们知道</a>它是如何为你工作的。</p><p id="229c" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">如果你还没有我们的免费版感知实验室，一定要看看我们的<a class="ae jr" href="https://docs.perceptilabs.com/perceptilabs/getting-started/quickstart-guide" rel="noopener ugc nofollow" target="_blank">快速入门指南</a>。</p><p id="9c56" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">【https://en.wikipedia.org/wiki/FastAPI T4】</p><div class="ln lo ez fb lp lq"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="lr ab dw"><div class="ls ab lt cl cj lu"><h2 class="bd hi fi z dy lv ea eb lw ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="lx l"><h3 class="bd b fi z dy lv ea eb lw ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="ly l"><p class="bd b fp z dy lv ea eb lw ed ef dx translated">medium.com</p></div></div><div class="lz l"><div class="ma l mb mc md lz me in lq"/></div></div></a></div></div></div>    
</body>
</html>