<html>
<head>
<title>IPL STORIES #1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">IPL故事#1</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/ipl-stories-1-7ba75450589?source=collection_archive---------5-----------------------#2022-04-16">https://medium.com/mlearning-ai/ipl-stories-1-7ba75450589?source=collection_archive---------5-----------------------#2022-04-16</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="7d74" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">获取数据(注意:涉及到数据争论！)</p><p id="3d30" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">第0部分:前言——这个系列想展示什么？</strong></p><p id="eef9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这场IPL的话题是比赛。这一季，已经经常听到这样的陈述:</p><ul class=""><li id="8fce" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated"><em class="jl">球员“A”特别挑选，因为对手有“X”个左手击球手。</em></li><li id="654a" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb jh ji jj jk bi translated"><em class="jl">在击球手“Y”出局之前，球员“B”永远没有机会投球</em></li><li id="4331" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb jh ji jj jk bi translated">由于新击球手“Z”在比赛中处于劣势，球员“C”在次优时间(比如说中间回合)给出了一个回合。</li></ul><p id="fb6c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">本系列旨在收集足够的数据，并一步一步地探索这种匹配游戏。</p><p id="a1b7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">第1部分:数据——我从哪里获得数据？</strong></p><p id="adf1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一球接一球的数据由'<a class="ae jr" href="https://cricsheet.org/" rel="noopener ugc nofollow" target="_blank"> Cricsheet </a>'提供，这个网站由精彩的<a class="ae jr" href="https://twitter.com/srushe" rel="noopener ugc nofollow" target="_blank"> Stephen Rushe </a>维护。出于分析的目的，我下载了CSV格式的整合IPL数据集，可以在下载部分找到。</p><p id="5d87" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">zip文件中有一个非常显眼的名字叫做<code class="du js jt ju jv b">all_matches.csv </code>的文件。然后是一堆信息文件和相应的一个球一个球的数据文件——对于每一场单独的比赛。</p><p id="3c02" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们赶紧把这个装上来看看。</p><figure class="jw jx jy jz fd ka"><div class="bz dy l di"><div class="kb kc l"/></div></figure><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es kd"><img src="../Images/4d81cba4443726b40b35bc9479ada453.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8mfxmI8MdkxjyMiUh8I6Fw.png"/></div></div></figure><p id="c2e3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，这有球员的细节——击球手与投球手，老实说，这本身就足以让投球手与击球手在IPL比赛直播中短兵相接。</p><p id="7f77" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">但是现在假设，你想更深入一层——如果我们想回答击球手是否比速度或旋转更舒服呢？</p><p id="0efc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们需要整合球员，将他们分组——步行者、旋转者等等。但是谁会这么做呢？</p><p id="7e03" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们看看比赛信息文件是否有一些细节。我们随便开一个吧。</p><figure class="jw jx jy jz fd ka"><div class="bz dy l di"><div class="kb kc l"/></div></figure><figure class="jw jx jy jz fd ka er es paragraph-image"><div class="er es kk"><img src="../Images/32cff35e9e3c94fb77b4a465104f5ed4.png" data-original-src="https://miro.medium.com/v2/resize:fit:632/format:webp/1*v0MzZ7sVhK86dhpjXoihSg.png"/></div><figcaption class="kl km et er es kn ko bd b be z dx">Very helpful information like 6 balls an over (there is a reason for this though — historical tidbit!)</figcaption></figure><p id="16be" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">该数据有一堆关于游戏的基本信息，然后有两条很棒的信息。</p><ul class=""><li id="fb96" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">两个队的11名队员</li><li id="c047" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb jh ji jj jk bi translated">与“人员注册”的链接，包括以任何身份(如教练或裁判员)参与游戏的现在和过去的玩家</li></ul><p id="0b22" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">快速检查显示了<a class="ae jr" href="https://cricsheet.org/register/" rel="noopener ugc nofollow" target="_blank">人员注册</a>的链接——一个非常简洁的csv文件，包含cricsheet网站上提到的所有人员的数据库。让我们下载并一窥究竟。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es kp"><img src="../Images/0984fd1fb1d4c083a9722e612dafb1f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*plO2e7wxZ_uOw2hyagNxaQ.png"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx"><em class="kq">Key</em> to have the cricinfo key as a str — I will explain later!</figcaption></figure><p id="4e83" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">识别码与info csv文件中的代码匹配，这是分配给每个玩家的唯一标识符。我最初的想法是只搜索一些球员的详细资料数据库。但看了资料后，我对这个<code class="du js jt ju jv b">key_cricinfo</code>领域产生了相当大的兴趣。</p><p id="8883" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们来看一个球员，比如Ashok Dinda。号码227712和那个玩家的<code class="du js jt ju jv b">key_cricinfo</code>一模一样。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div class="er es kr"><img src="../Images/f58e44283dbb60346ae0b4a6ce452ea5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*TCI8oS19PcQYZu4NLmbfzg.png"/></div></figure><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es ks"><img src="../Images/274c46a4b9c2d376df13570d690aa34c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HteCxE16X0j8wiz682FVbQ.png"/></div></div><figcaption class="kl km et er es kn ko bd b be z dx">Now if only i could transfer the player infocard onto a dataframe</figcaption></figure><p id="b218" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">但是等一下！当数据帧中显示AB Dinda时，如何访问Ashok Dinda的统计数据？</p><p id="6782" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这就是愚蠢的T4实验的用武之地。你们中的一些人可能已经找到了答案— <em class="jl">“如果名称和号码很重要—为什么cricsheet站点只将号码作为键存储？”</em></p><p id="a13f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">网站的工作方式如下——名称是什么并不重要，只要遵循一般语法，并且目标关键字在末尾。网页链接将自动修改以带有正确的名称。</p><p id="f5b2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">用<a class="ae jr" href="https://www.espncricinfo.com/player/ab-dinda-227712" rel="noopener ugc nofollow" target="_blank">https://www.espncricinfo.com/player/ab-dinda-227712</a>试试，你会被重定向到同一个页面。</p><p id="ac1b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">事实上，用https://www.espncricinfo.com/player/John-Doe-227712的<a class="ae jr" href="https://www.espncricinfo.com/player/John-Doe-227712" rel="noopener ugc nofollow" target="_blank"/>来试试吧——同一页。我不知道你怎么想，但这让我大吃一惊。</p><p id="7e7e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这意味着只要我拥有<code class="du js jt ju jv b">key_cricinfo</code>值，我就可以访问任何玩家在Cricinfo上的页面。</p><p id="e12e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">第2部分:数据争论—基础</strong></p><p id="201c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们回到信息文件。解释csv的问题是有些行有3个字段，有些有4个，有些有5个。</p><p id="87cd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在我们该怎么做呢？</p><p id="c8c1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">快速浏览几个示例csv可以告诉我们以下内容</p><pre class="jw jx jy jz fd kt jv ku kv aw kw bi"><span id="c573" class="kx ky hh jv b fi kz la l lb lc">Rows [0:19] - are game information<br/>Rows [20:41] - are the playing eleven for both teams<br/>Rows [42:] - are the people involved in the game, with their unique identifiers.</span></pre><figure class="jw jx jy jz fd ka"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="bae7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这么说吧，这花了几个小时的学习和多次修改才把所有的东西组合在一起。</p><p id="4ada" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">逻辑如下:</p><ul class=""><li id="0d0e" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">第7行只是在我们想要的模板中创建了ipl播放器的列表——这样我以后就可以添加行了</li><li id="d94c" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb jh ji jj jk bi translated">第8行，我们为每一个匹配创建了一个循环</li><li id="7920" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb jh ji jj jk bi translated">第9行，我们读取匹配信息csv文件</li><li id="2b54" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb jh ji jj jk bi translated">第10行，我们将赛季存储在一个单独的单元格中——这对于以后查看一个球员这些年的去向很有用</li><li id="2b72" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb jh ji jj jk bi translated">第11行，我们创建了22名球员的名单<code class="du js jt ju jv b">[20:41]</code></li><li id="d83b" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb jh ji jj jk bi translated">第12行，我们读取所有相关人员的列表，并将所有行组合成一个长字符串。</li><li id="618a" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb jh ji jj jk bi translated">第13–18行将循环遍历22名球员中的每一个，以获取他们的球队名称和他们的名字。</li><li id="be08" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb jh ji jj jk bi translated"><strong class="ig hi">第14行，重要→我们在这里使用try / except的原因是因为并非所有的info_csv文件都具有相同的结构。</strong>例如，有几个以D/L结尾的匹配项，它们有一个额外的行，使结构陷入混乱。我们不做任何事情就把这些有错误的文件排除在外。<strong class="ig hi">我的期望是，由于我们正在阅读900场比赛，统计上有意义的球员被错过的机会非常少。</strong></li><li id="9d75" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb jh ji jj jk bi translated">第20行，我们解析第12行创建的长字符串，使用正则表达式获取22个玩家的<code class="du js jt ju jv b">identifier</code>。</li><li id="cc91" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb jh ji jj jk bi translated">第21–22行，我们按照在第7行为数据帧创建的顺序将这些值组合成一个系列。然后，我们将该系列追加到数据帧中。</li></ul><p id="ef3e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一年中会有很多重复的球员——所以让我们去掉每个赛季的重复球员。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div class="er es ld"><img src="../Images/1cfeeab5b121804fe0e17f17a931d275.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*C4pWQg5mjBjsL-QAUAL9IQ.png"/></div><figcaption class="kl km et er es kn ko bd b be z dx">Yash Dayal, the latest debutante in this dataset!</figcaption></figure><p id="3fca" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">第三部分:思考和对下一篇文章的展望。</p><p id="cacf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">克服错误并理解如何解决具体问题是学习任何概念的最有效方法之一。对于像数据科学这样面向应用的概念来说尤其如此。</p><p id="e954" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我非常享受处理这些数据的时光，希望你也会喜欢。</p><p id="5fc5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在下一部分中，我们将开始使用玩家列表，并开始从espncricinfo网站获取他们的信息——更高级的数据争论[？我想是的。</p><p id="442a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">感谢您阅读本文，如果您能找到更好的方法来解决这些问题，请分享您的想法！毕竟我们都是来互相学习的。</p><div class="le lf ez fb lg lh"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="li ab dw"><div class="lj ab lk cl cj ll"><h2 class="bd hi fi z dy lm ea eb ln ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="lo l"><h3 class="bd b fi z dy lm ea eb ln ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="lp l"><p class="bd b fp z dy lm ea eb ln ed ef dx translated">medium.com</p></div></div><div class="lq l"><div class="lr l ls lt lu lq lv ki lh"/></div></div></a></div></div></div>    
</body>
</html>