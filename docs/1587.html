<html>
<head>
<title>Deploy GPU-Accelerated Deep Learning Models for Free</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">免费部署GPU加速的深度学习模型</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/deploy-gpu-accelerated-deep-learning-models-for-free-c671ccf60a68?source=collection_archive---------5-----------------------#2022-01-08">https://medium.com/mlearning-ai/deploy-gpu-accelerated-deep-learning-models-for-free-c671ccf60a68?source=collection_archive---------5-----------------------#2022-01-08</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><h2 id="5373" class="hf hg hh bd b fp hi hj hk hl hm hn dx ho translated" aria-label="kicker paragraph">终极黑客</h2><div class=""/><div class=""><h2 id="3319" class="pw-subtitle-paragraph in hq hh bd b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je dx translated">创建一个API，用于将深度学习模型与Algorithmia轻松对接</h2></div><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jf"><img src="../Images/310114cd53c52947675642e0169bc02a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*guoMrPxATBy2ejU7"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx">Photo by <a class="ae jv" href="https://unsplash.com/@rvrmakes?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Robert V. Ruggiero</a> on <a class="ae jv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="eb4b" class="pw-post-body-paragraph jw jx hh jy b jz ka ir kb kc kd iu ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">在本文中，我将带您在GPU服务上部署深度学习或ML(机器学习)模型(免费)。这是文章<a class="ae jv" href="http://example.com/" rel="noopener ugc nofollow" target="_blank">“情感表达诗歌的自动生成”</a>的延续，在这篇文章中，我们构建了创作原创诗歌的模型。如果你没有读过它，这是完全没问题的，你仍然可以跟着读，因为这是一篇独立的文章。</p><p id="6b1e" class="pw-post-body-paragraph jw jx hh jy b jz ka ir kb kc kd iu ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">我们将使用<a class="ae jv" href="https://algorithmia.com/" rel="noopener ugc nofollow" target="_blank"> Algorithmia </a>，它将在GPU上托管深度学习模型(你也可以选择在CPU上托管)，并在<a class="ae jv" href="https://www.heroku.com/" rel="noopener ugc nofollow" target="_blank"> Heroku </a>上部署一个API来连接模型。在本文中，将使用<a class="ae jv" href="https://flask.palletsprojects.com/en/2.0.x/" rel="noopener ugc nofollow" target="_blank"> Flask </a>构建API，但是您也可以使用任何其他技术。</p></div><div class="ab cl ks kt go ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ha hb hc hd he"><p id="4a4b" class="pw-post-body-paragraph jw jx hh jy b jz ka ir kb kc kd iu ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">整个项目的代码可以在这个<a class="ae jv" href="https://github.com/prajwalcr/AutoCompose" rel="noopener ugc nofollow" target="_blank"> github库</a>中找到。诗歌生成器app的现场版可以在<a class="ae jv" href="http://autocompose.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">这里</a>找到。该应用程序能够在一秒钟内生成新的诗歌，因为它利用了Algorithmia的GPU服务。如果在CPU上运行，生成一首诗大约需要7秒钟。(请注意，由于冷启动，生成首诗可能需要大约30秒。之后应该就像做梦一样工作了)。</p><h1 id="2041" class="kz la hh bd lb lc ld le lf lg lh li lj iw lk ix ll iz lm ja ln jc lo jd lp lq bi translated">为什么要用Heroku和Algorithmia？</h1><p id="a6ae" class="pw-post-body-paragraph jw jx hh jy b jz lr ir kb kc ls iu ke kf lt kh ki kj lu kl km kn lv kp kq kr ha bi translated">Heroku是平台即服务(PaaS ),可用于完全在云中托管应用程序。它具有良好的自由层，并且易于设置和使用。</p><p id="7cef" class="pw-post-body-paragraph jw jx hh jy b jz ka ir kb kc kd iu ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">Algorithmia是一个MLOps平台，它允许你训练和部署ML模型到产品中。它专门研究“算法即服务”，在这里你必须创建一个算法来运行你的模型。令人惊奇的是，您的模型可以使用API调用，并且现在完全独立于应用程序的其余部分。您可以构建不同的应用程序，所有的应用程序都可以使用API访问模型。另一个好处是，你不再需要在heroku上托管那些庞大的ML模型，由于空闲层的存储限制，这有时是不可能的。您可以直接将模型上传到Algorithmia上(它也可以支持512MB以上的模型)。</p><p id="b8f3" class="pw-post-body-paragraph jw jx hh jy b jz ka ir kb kc kd iu ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">对于那些来自前一篇文章的人，我使用git lfs将模型上传到Huggingface的模型中心，并在Algorithmia中运行模型时访问它们。您可以这样做，也可以将模型上传到Algorithmia。</p><p id="6df2" class="pw-post-body-paragraph jw jx hh jy b jz ka ir kb kc kd iu ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">Algorithmia每月免费提供一定量的计算时间(可以用于CPU，也可以用于GPU)。如果你只是想为一个大学项目建立一个ML应用程序，或者想获得一些ML方面的经验，或者向他人炫耀你的辛勤工作，你可以完全免费使用Algorithmia。你甚至可以允许其他开发者免费或收取版税使用你的模型。然而，如果你想为一家企业打造一个实际的产品，没有捷径可走，你需要根据所使用的资源付费。</p></div><div class="ab cl ks kt go ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ha hb hc hd he"><h1 id="7919" class="kz la hh bd lb lc lw le lf lg lx li lj iw ly ix ll iz lz ja ln jc ma jd lp lq bi translated">创造神奇的算法</h1><h2 id="2b01" class="mb la hh bd lb mc md me lf mf mg mh lj kf mi mj ll kj mk ml ln kn mm mn lp hn bi translated">1.在Algorithmia上创建一个帐户</h2><p id="41ba" class="pw-post-body-paragraph jw jx hh jy b jz lr ir kb kc ls iu ke kf lt kh ki kj lu kl km kn lv kp kq kr ha bi translated">前往Algorithmia <a class="ae jv" href="https://teams.algorithmia.com/signup" rel="noopener ugc nofollow" target="_blank">注册</a>页面，免费创建一个新账户。</p><h2 id="01ef" class="mb la hh bd lb mc md me lf mf mg mh lj kf mi mj ll kj mk ml ln kn mm mn lp hn bi translated">2.创建新算法</h2><p id="fb2c" class="pw-post-body-paragraph jw jx hh jy b jz lr ir kb kc ls iu ke kf lt kh ki kj lu kl km kn lv kp kq kr ha bi translated">进入<strong class="jy hr">创建新的</strong>下拉菜单，点击<strong class="jy hr">算法</strong>。这将带您进入<strong class="jy hr">创建新算法</strong>页面。</p><p id="0693" class="pw-post-body-paragraph jw jx hh jy b jz ka ir kb kc kd iu ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">输入算法的名称。选择Algorithmia作为存储库主机。根据您的需求选择合适的可见性和许可。选择要用来编写算法代码的语言和适当的环境。Algorithmia支持大量语言，如Python、Java、Scala、Javascript、R、Ruby和Rust。对于我的项目，我选择了<em class="mo"> Python 3.x </em>作为语言，Python 3.8 + PyTorch 1.8.x作为环境。最后，点击<strong class="jy hr">创建一个新算法</strong>。</p><h2 id="de3c" class="mb la hh bd lb mc md me lf mf mg mh lj kf mi mj ll kj mk ml ln kn mm mn lp hn bi translated">3.上传ML模型</h2><p id="1aec" class="pw-post-body-paragraph jw jx hh jy b jz lr ir kb kc ls iu ke kf lt kh ki kj lu kl km kn lv kp kq kr ha bi translated">如果您正在使用HuggingFace模型中心或任何其他模型中心上托管的模型，则可以跳过此步骤。</p><p id="2d8e" class="pw-post-body-paragraph jw jx hh jy b jz ka ir kb kc kd iu ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">点击左侧窗格中的<strong class="jy hr">数据源</strong>。这是与所有算法相关的数据所在的位置。移动到<strong class="jy hr">我的托管数据</strong>目录。在这里为您的每个项目创建一个单独的文件夹，并将您的模型上传到那里。在您的算法中，您可以通过以下路径访问模型:<em class="mo">" data://&lt;username&gt;/&lt;folder&gt;/&lt;model-file&gt;"</em></p><h2 id="4c27" class="mb la hh bd lb mc md me lf mf mg mh lj kf mi mj ll kj mk ml ln kn mm mn lp hn bi translated">4.源代码</h2><p id="3580" class="pw-post-body-paragraph jw jx hh jy b jz lr ir kb kc ls iu ke kf lt kh ki kj lu kl km kn lv kp kq kr ha bi translated">我们完成了所有的设置，实际的东西从这里开始。选择您创建的算法并点击<strong class="jy hr">源代码</strong>。这将带您进入Algorithmia IDE。如果您使用的是python环境，您可以看到已经为您创建的以您的算法命名的两个python文件。对于本教程，我们将忽略测试文件。整个代码将被写入第一个文件。</p><p id="d07e" class="pw-post-body-paragraph jw jx hh jy b jz ka ir kb kc kd iu ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">因为我们定义了一个API来与算法交互，所以所有的输入和输出都是JSON字符串。在源代码中，您需要提供用于加载模型、接收和解析JSON格式的输入、在模型上运行输入并返回JSON格式的输出的代码。</p><p id="3b7c" class="pw-post-body-paragraph jw jx hh jy b jz ka ir kb kc kd iu ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">模型仅在<strong class="jy hr">冷启动</strong>期间加载。当算法在一段时间内处于非活动状态时，即在与前一个请求间隔很长时间后出现请求时，会发生冷启动。发生这种情况是因为如果算法在一段时间内没有被任何人调用，它就会进入睡眠模式。</p><h2 id="e64b" class="mb la hh bd lb mc md me lf mf mg mh lj kf mi mj ll kj mk ml ln kn mm mn lp hn bi translated">a)依赖性:</h2><p id="42ba" class="pw-post-body-paragraph jw jx hh jy b jz lr ir kb kc ls iu ke kf lt kh ki kj lu kl km kn lv kp kq kr ha bi translated">点击IDE中的<strong class="jy hr">依赖关系</strong>按钮。这将打开一个弹出窗口，您可以在其中的新行上列出每个依赖项及其名称和版本。根据环境的不同，某些依赖关系可能已经存在。请确保保存您在此所做的任何更改。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es mp"><img src="../Images/d4e1b45a3d6c70054541c2de90244ae2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jvNPQQCiCBGGFQaRfGxJhA.png"/></div></div><figcaption class="jr js et er es jt ju bd b be z dx">Image by Author</figcaption></figure><h2 id="38ff" class="mb la hh bd lb mc md me lf mf mg mh lj kf mi mj ll kj mk ml ln kn mm mn lp hn bi translated">b)编码:</h2><p id="2e68" class="pw-post-body-paragraph jw jx hh jy b jz lr ir kb kc ls iu ke kf lt kh ki kj lu kl km kn lv kp kq kr ha bi translated">导入算法所需的所有依赖项。此外，编写加载模型的任何代码。确保这在<em class="mo"> apply() </em>函数之外，因为您不想每次调用算法时都加载模型。这确保了模型仅在冷启动期间加载，如上所述。</p><figure class="jg jh ji jj fd jk"><div class="bz dy l di"><div class="mq mr l"/></div></figure><h2 id="9e38" class="mb la hh bd lb mc md me lf mf mg mh lj kf mi mj ll kj mk ml ln kn mm mn lp hn bi translated">c)应用()函数:</h2><p id="4a72" class="pw-post-body-paragraph jw jx hh jy b jz lr ir kb kc ls iu ke kf lt kh ki kj lu kl km kn lv kp kq kr ha bi translated"><em class="mo"> apply </em>()函数是一个特殊的函数，每次向算法发出API请求时都会调用这个函数。这里的代码在每次客户端调用算法时都会运行。这段代码应该接受并解析JSON输入，对输入运行模型，并将输出作为JSON字符串返回。</p><figure class="jg jh ji jj fd jk"><div class="bz dy l di"><div class="mq mr l"/></div></figure><h2 id="3b45" class="mb la hh bd lb mc md me lf mf mg mh lj kf mi mj ll kj mk ml ln kn mm mn lp hn bi translated">d)构建:</h2><p id="815e" class="pw-post-body-paragraph jw jx hh jy b jz lr ir kb kc ls iu ke kf lt kh ki kj lu kl km kn lv kp kq kr ha bi translated">将所有代码放在一起后，下一步是构建算法。点击<strong class="jy hr"> Build </strong>按钮，这将安装依赖关系中提到的所有库，算法将准备运行。在屏幕底部的Algorithmia控制台中，您可以输入JSON格式的算法输入，然后按enter键在该输入上运行它，并获得适当的输出。您可以使用它进行基本的调试。成功构建后，您就可以发布算法了。</p><h2 id="c3c8" class="mb la hh bd lb mc md me lf mf mg mh lj kf mi mj ll kj mk ml ln kn mm mn lp hn bi translated">5.出版</h2><p id="17bd" class="pw-post-body-paragraph jw jx hh jy b jz lr ir kb kc ls iu ke kf lt kh ki kj lu kl km kn lv kp kq kr ha bi translated">为了访问您的算法，您需要发布它。为此，单击IDE中的<strong class="jy hr">发布</strong>按钮。您可以为正在发布的算法版本添加发行说明。在下一页中，对样本输入运行算法以获得输出。这个样本输入输出对将在算法的主页上可见。在最后一页，您可以配置算法的设置。您可以将其设为公共或私有。您也可以设置版税，然后点击<strong class="jy hr">发布</strong>按钮。</p><p id="2aca" class="pw-post-body-paragraph jw jx hh jy b jz ka ir kb kc kd iu ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated"><strong class="jy hr">恭喜恭喜！！</strong>你已经成功地部署了你的第一个Algorithmia算法，你的ML模型现在已经准备好投入使用了。下一步是构建一个简单的API来与模型交互。您可以使用web框架，如Flask、Django、Node或任何其他框架来构建API。你可以在我的<a class="ae jv" href="https://github.com/prajwalcr/AutoCompose/tree/main/src" rel="noopener ugc nofollow" target="_blank"> github库</a>中看到我构建的flask应用。</p><h2 id="4674" class="mb la hh bd lb mc md me lf mf mg mh lj kf mi mj ll kj mk ml ln kn mm mn lp hn bi translated">6.调用发布的算法</h2><p id="7def" class="pw-post-body-paragraph jw jx hh jy b jz lr ir kb kc ls iu ke kf lt kh ki kj lu kl km kn lv kp kq kr ha bi translated">在算法主页的底部，你可以看到一个叫做<strong class="jy hr">安装和使用</strong>的部分。在这里，您可以获得各种语言调用算法的说明。</p><p id="330d" class="pw-post-body-paragraph jw jx hh jy b jz ka ir kb kc kd iu ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">要使用python调用算法，首先需要安装Algorithmia客户端。</p><pre class="jg jh ji jj fd ms mt mu mv aw mw bi"><span id="a0d9" class="mb la hh mt b fi mx my l mz na">pip install algorithmia</span></pre><p id="a4d2" class="pw-post-body-paragraph jw jx hh jy b jz ka ir kb kc kd iu ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">导入Algortihmia并使用您的API密钥创建客户端。您可以在主页的<strong class="jy hr"> API Keys </strong>选项卡中找到它。</p><pre class="jg jh ji jj fd ms mt mu mv aw mw bi"><span id="2b07" class="mb la hh mt b fi mx my l mz na"><strong class="mt hr">import</strong> Algorithmia</span><span id="2f42" class="mb la hh mt b fi nb my l mz na">input = "neutral"<br/>client = Algorithmia.client('&lt;YOUR-API-KEY&gt;')</span></pre><p id="c374" class="pw-post-body-paragraph jw jx hh jy b jz ka ir kb kc kd iu ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">一旦你有了你的客户，你需要选择你的算法并指定你想要使用的版本。然后，您可以使用pipe()函数将输入传递给算法，并作为结果访问输出。</p><pre class="jg jh ji jj fd ms mt mu mv aw mw bi"><span id="9c97" class="mb la hh mt b fi mx my l mz na"># String format: '&lt;user&gt;/&lt;Algorithm&gt;/&lt;Algorithm-version&gt;'<br/>algo = client.algo('pgcr/PoetryGeneration/1.1.0')</span><span id="9f1a" class="mb la hh mt b fi nb my l mz na">try:</span><span id="3073" class="mb la hh mt b fi nb my l mz na"># Get the result<br/>poem = algo.pipe(emotion).result</span><span id="15f1" class="mb la hh mt b fi nb my l mz na">except Exception as error:</span><span id="148a" class="mb la hh mt b fi nb my l mz na"># Algorithm error if, for example, the input is not correctly formatted<br/>print("Error:", error)</span></pre><p id="365d" class="pw-post-body-paragraph jw jx hh jy b jz ka ir kb kc kd iu ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">通过这种方式，您可以轻松地将您的ML模型输出到您的应用程序中。在我的例子中，我得到了一首由模特创作的原创诗歌。我可以继续在我的应用程序中处理这首诗，删除任何奇怪的标点符号，为它生成一个标题，并显示给用户。</p></div><div class="ab cl ks kt go ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="ha hb hc hd he"><h1 id="f5ea" class="kz la hh bd lb lc lw le lf lg lx li lj iw ly ix ll iz lz ja ln jc ma jd lp lq bi translated">使用Heroku部署应用程序</h1><p id="22d6" class="pw-post-body-paragraph jw jx hh jy b jz lr ir kb kc ls iu ke kf lt kh ki kj lu kl km kn lv kp kq kr ha bi translated">假设您已经创建了一个利用Algorithmia模型的应用程序，下一步是将其部署到生产中。这就是Heroku的用武之地。我将带你在Heroku上部署Flask应用程序。首先，如果你还没有为你的应用创建一个github库。</p><h2 id="d266" class="mb la hh bd lb mc md me lf mf mg mh lj kf mi mj ll kj mk ml ln kn mm mn lp hn bi translated">1.在Heroku上创建一个帐户</h2><p id="a4b5" class="pw-post-body-paragraph jw jx hh jy b jz lr ir kb kc ls iu ke kf lt kh ki kj lu kl km kn lv kp kq kr ha bi translated">如果您没有Heroku帐户，您可以通过前往<a class="ae jv" href="https://www.heroku.com/" rel="noopener ugc nofollow" target="_blank"> Heroku </a>轻松创建一个免费帐户。点击<strong class="jy hr">注册</strong>按钮，输入所需的详细信息并创建您的帐户。</p><h2 id="3235" class="mb la hh bd lb mc md me lf mf mg mh lj kf mi mj ll kj mk ml ln kn mm mn lp hn bi translated">2.安装Heroku CLI</h2><p id="f0da" class="pw-post-body-paragraph jw jx hh jy b jz lr ir kb kc ls iu ke kf lt kh ki kj lu kl km kn lv kp kq kr ha bi translated">如果您没有安装Heroku CLI，请下载并安装。点击<a class="ae jv" href="https://devcenter.heroku.com/articles/heroku-cli#download-and-install" rel="noopener ugc nofollow" target="_blank">这里</a>并根据您的操作系统下载合适的安装程序。运行安装程序。确保选择所有组件并点击<strong class="jy hr">下一步</strong>。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div class="er es nc"><img src="../Images/cbdd1b410c28e2d6eeca4799f26090eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/1*k8FzZXKEhN-bp5-CAQr2Tg.png"/></div></figure><p id="b57e" class="pw-post-body-paragraph jw jx hh jy b jz ka ir kb kc kd iu ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">选择合适的安装目标文件夹，点击<strong class="jy hr">安装</strong>。等待安装完成。应该不会花太长时间。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es nd"><img src="../Images/e591b6295ad590a4f5e88071aef9ff6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZjQdvoWPuJAVtDF5QTWfwA.png"/></div></div></figure><p id="4d37" class="pw-post-body-paragraph jw jx hh jy b jz ka ir kb kc kd iu ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">安装成功完成后，关闭安装程序。打开您的命令提示符并键入<code class="du ne nf ng mt b">heroku</code>,您应该会看到以下输出:</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div class="er es nh"><img src="../Images/47ca8bac2b41c7a6202d7a74f94e4e64.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/format:webp/1*pma6AZowBCN0Yi_8tmpe6w.png"/></div></figure><h2 id="f2eb" class="mb la hh bd lb mc md me lf mf mg mh lj kf mi mj ll kj mk ml ln kn mm mn lp hn bi translated">3.在Heroku上创建您的应用程序</h2><p id="41d7" class="pw-post-body-paragraph jw jx hh jy b jz lr ir kb kc ls iu ke kf lt kh ki kj lu kl km kn lv kp kq kr ha bi translated">使用以下命令在您的终端中登录heroku。</p><pre class="jg jh ji jj fd ms mt mu mv aw mw bi"><span id="0cc6" class="mb la hh mt b fi mx my l mz na">heroku login</span></pre><p id="0fbd" class="pw-post-body-paragraph jw jx hh jy b jz ka ir kb kc kd iu ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">这将在您的浏览器上打开一个页面，您必须在其中输入所需的凭据。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div class="er es ni"><img src="../Images/d42d8a607f50a88984a9d984685e42b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*z-5-h0mZ-GIODr4aeKxM7Q.png"/></div></figure><p id="92af" class="pw-post-body-paragraph jw jx hh jy b jz ka ir kb kc kd iu ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">下一步是创建Heroku应用程序。在这里，我将创建名为<strong class="jy hr"> heroku-app-name </strong>的应用程序。将此替换为您自己的应用程序的名称。请记住，您在此给出的名称将决定您的应用程序的URL。URL的格式是<em class="mo">http://heroku-app-name.herokuapp.com</em>确保你给的名字是唯一的。</p><pre class="jg jh ji jj fd ms mt mu mv aw mw bi"><span id="61e5" class="mb la hh mt b fi mx my l mz na">heroku create heroku-app-name --buildpack heroku/python</span></pre><p id="390d" class="pw-post-body-paragraph jw jx hh jy b jz ka ir kb kc kd iu ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">在您的终端中导航到您的项目文件夹(git在其中初始化),并通过向heroku应用程序添加一个遥控器将您的git存储库链接到heroku。</p><pre class="jg jh ji jj fd ms mt mu mv aw mw bi"><span id="aa87" class="mb la hh mt b fi mx my l mz na">heroku git:remote -a heroku-app-name</span></pre><h2 id="10a0" class="mb la hh bd lb mc md me lf mf mg mh lj kf mi mj ll kj mk ml ln kn mm mn lp hn bi translated">4.修改用于部署的Flask应用程序</h2><h2 id="7a52" class="mb la hh bd lb mc md me lf mf mg mh lj kf mi mj ll kj mk ml ln kn mm mn lp hn bi translated">a)安装Gunicorn</h2><p id="a8a2" class="pw-post-body-paragraph jw jx hh jy b jz lr ir kb kc ls iu ke kf lt kh ki kj lu kl km kn lv kp kq kr ha bi translated"><a class="ae jv" href="https://gunicorn.org/" rel="noopener ugc nofollow" target="_blank"> Gunicorn </a>是一个用于UNIX的Python WSGI HTTP服务器。这将有助于为Heroku提供您的Flask应用程序。</p><pre class="jg jh ji jj fd ms mt mu mv aw mw bi"><span id="214f" class="mb la hh mt b fi mx my l mz na">pip install gunicorn</span></pre><h2 id="972b" class="mb la hh bd lb mc md me lf mf mg mh lj kf mi mj ll kj mk ml ln kn mm mn lp hn bi translated">b) <strong class="ak">过程文件</strong></h2><p id="4fc2" class="pw-post-body-paragraph jw jx hh jy b jz lr ir kb kc ls iu ke kf lt kh ki kj lu kl km kn lv kp kq kr ha bi translated">ProcFile基本上包含在Heroku上启动应用程序的命令，因此是部署应用程序所必需的。flask应用程序的procfile应该包含应用程序的python文件的名称和该文件中构造Flask应用程序的应用程序变量的名称(<code class="du ne nf ng mt b">app = Flask(__name__)</code>)。在git存储库的根目录下创建一个Procfile(文件名为“procfile”)。</p><pre class="jg jh ji jj fd ms mt mu mv aw mw bi"><span id="7e05" class="mb la hh mt b fi mx my l mz na">web: gunicorn src.app:app</span></pre><p id="5921" class="pw-post-body-paragraph jw jx hh jy b jz ka ir kb kc kd iu ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">这是我的应用程序的Procfile。这表明flask应用程序的python文件名为“app.py ”,位于“src”文件夹(src/app.py)中，并且构造flask应用程序的变量名为“app”。</p><h2 id="be2c" class="mb la hh bd lb mc md me lf mf mg mh lj kf mi mj ll kj mk ml ln kn mm mn lp hn bi translated">c)要求. txt</h2><p id="912b" class="pw-post-body-paragraph jw jx hh jy b jz lr ir kb kc ls iu ke kf lt kh ki kj lu kl km kn lv kp kq kr ha bi translated">在根目录下创建一个<strong class="jy hr"> requirements.txt </strong>文件。这是Heroku将应用程序视为python项目所必需的，它将安装所有要求并为项目创建所需的环境。</p><pre class="jg jh ji jj fd ms mt mu mv aw mw bi"><span id="982c" class="mb la hh mt b fi mx my l mz na">pip freeze &gt; requirements.txt</span></pre><h2 id="9a2a" class="mb la hh bd lb mc md me lf mf mg mh lj kf mi mj ll kj mk ml ln kn mm mn lp hn bi translated">d)提交更改并推送到Heroku</h2><p id="70e8" class="pw-post-body-paragraph jw jx hh jy b jz lr ir kb kc ls iu ke kf lt kh ki kj lu kl km kn lv kp kq kr ha bi translated">暂存并提交您所做的所有更改。</p><pre class="jg jh ji jj fd ms mt mu mv aw mw bi"><span id="1e94" class="mb la hh mt b fi mx my l mz na">git add .<br/>git commit -m "deployment to Heroku"</span></pre><p id="ffc5" class="pw-post-body-paragraph jw jx hh jy b jz ka ir kb kc kd iu ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">将更改推送到heroku的<code class="du ne nf ng mt b">main</code>分支。请注意，对heroku中任何其他分支的更改都不会对应用程序产生影响。</p><pre class="jg jh ji jj fd ms mt mu mv aw mw bi"><span id="66e8" class="mb la hh mt b fi mx my l mz na">git push heroku main</span></pre><p id="ca1a" class="pw-post-body-paragraph jw jx hh jy b jz ka ir kb kc kd iu ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">现在开始部署中最令人焦虑的部分。稍等几分钟，等待命令运行。如果你一切顺利，你将在<code class="du ne nf ng mt b"><em class="mo">http://heroku-app-name.herokuapp.com</em></code>T13有一个工作申请。否则，祝你调试好运:)</p><div class="nj nk ez fb nl nm"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="nn ab dw"><div class="no ab np cl cj nq"><h2 class="bd hr fi z dy nr ea eb ns ed ef hq bi translated">Mlearning.ai提交建议</h2><div class="nt l"><h3 class="bd b fi z dy nr ea eb ns ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="nu l"><p class="bd b fp z dy nr ea eb ns ed ef dx translated">medium.com</p></div></div><div class="nv l"><div class="nw l nx ny nz nv oa jp nm"/></div></div></a></div></div></div>    
</body>
</html>