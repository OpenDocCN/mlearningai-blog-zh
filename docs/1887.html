<html>
<head>
<title>Building Simple Image Recognition Backend Service with TensorFlow + ExpressJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用TensorFlow + ExpressJS构建简单的图像识别后端服务</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/implementing-image-recognition-model-to-backend-service-with-tensorflow-expressjs-dde828b3ccda?source=collection_archive---------3-----------------------#2022-02-08">https://medium.com/mlearning-ai/implementing-image-recognition-model-to-backend-service-with-tensorflow-expressjs-dde828b3ccda?source=collection_archive---------3-----------------------#2022-02-08</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="7c64" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">将Python中内置的TensorFlow模型应用到Node的分步指南。Js(快递)后端。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/c2e6d1ee9955f20da9efaf16f9045a6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*K5FDLP0bcnNVLR5k"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Photo by <a class="ae js" href="https://unsplash.com/@writecodenow?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Boitumelo Phetla</a> on <a class="ae js" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="bdfb" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">介绍</h1><p id="6771" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">在当前时代，我们可以找到许多平台、网站和应用程序实现机器学习来增强他们的业务流程和体验。TensorFlow是一个众所周知的开源框架，广泛用于开发机器学习模型。它还可以集成到多种语言的平台上，如Python、JavaScript、Java、C++等。</p><p id="5719" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">另一方面，表达。Js是一个基于JavaScript的框架，广泛用于构建后端服务。即使Tensorflow可以用Tensorflow在JavaScript上构建。Js，Python似乎有更多的实用程序和方便的工具和特性来构建一个ML模型，比如NumPy，Pandas，以及其他一些可以帮助ML开发者在构建模型时进行研究和实验的东西。那么，<strong class="ig hi">有没有可能用Tensorflow(在Python中)构建的ML模型实现到express </strong>中的后端服务？答案绝对是肯定的。</p><p id="8b13" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">TensorFlow提供了各种各样的格式来显示您希望如何保存ML模型，TensorFlow.js可以利用基本的SavedModel格式，这种格式可以通过执行<code class="du kw kx ky kz b">model.save('folder_name_of_saved_model')</code>生成包含几个<code class="du kw kx ky kz b">.pb</code>文件的文件夹来轻松获得；或者您可以在将模型保存为TensorFlow.js格式后将其转换为包含JSON文件和几个<code class="du kw kx ky kz b">.bin</code>文件的文件夹。</p><p id="2582" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然而，关于TensorFlow博客的这篇文章，我们可以看到，与使用转换的TensorFlow.js模型相比，直接应用SavedModel的服务在预测方面获得了更好(更快)的推理时间，而不管使用的是哪个版本的<code class="du kw kx ky kz b">tfjs-node</code>(CPU和GPU)。下图显示了性能对比。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es la"><img src="../Images/c0c098e0b5e4c5ecbb39e5866649f3fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*IPM85iJOlfKBXSqQ.png"/></div><figcaption class="jo jp et er es jq jr bd b be z dx">Performance Benchmark of the saved model formats (from TensorFlow Blog).</figcaption></figure><p id="24e2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，我们将在本文中使用SavedModel。</p><h1 id="8eb7" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">准备材料</h1><p id="7453" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">在这篇文章中，我在<a class="ae js" href="https://github.com/ddhira123/tensorflow_with_expressjs/tree/main/SavedModel" rel="noopener ugc nofollow" target="_blank">这个链接</a>准备了石头剪刀布手势分类器的SavedModel。该模型将为每个类别生成概率数组，格式如下:</p><pre class="jd je jf jg fd lb kz lc ld aw le bi"><span id="3163" class="lf ju hh kz b fi lg lh l li lj">[[paper_prob, rock_prob, scissors_prob]]</span></pre><p id="4115" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是来自Laurence Moroney的RPS数据集的岩石标志图像，用于SavedModel的示例测试。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es lk"><img src="../Images/9b653931bd63f77b183ee3f3ddb84db1.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*C7pg3bYWs-5rZ_0K2OQ-Sg.png"/></div><figcaption class="jo jp et er es jq jr bd b be z dx">Sample Test Image (Source: <a class="ae js" href="https://laurencemoroney.com/datasets.html" rel="noopener ugc nofollow" target="_blank">Laurence Moroney’s Dataset</a>)</figcaption></figure><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es ll"><img src="../Images/e939678cb5c616d7716c97697f4d7f16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j2OHqZFmzWQ-CuHwhHpvsQ.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Prediction of Sample Image</figcaption></figure><p id="859b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在执行后续步骤之前，请确保您的设备中已经安装了NodeJS和NPM，并准备好获取所需的包。您可以通过在您的终端或powershell或命令提示符或另一个shell中运行<code class="du kw kx ky kz b">npm -v</code>和<code class="du kw kx ky kz b">node -v</code>来检查它们是否准备好了(在这之后我将简单地称之为“shell”)。如果你没有安装Node及其附加功能(node-gyp)，如果你使用Windows，你可能需要通过接受附加安装从GUI重新安装Node LTS，或者阅读<a class="ae js" href="https://stackoverflow.com/questions/45801457/node-js-python-not-found-exception-due-to-node-sass-and-node-gyp" rel="noopener ugc nofollow" target="_blank">this stack overflow thread</a>。</p><p id="5b43" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">首先，我们需要创建一个express.js应用。在您的shell中运行这一行来创建我们的Express后端服务的模板。这个命令将创建一个名为<code class="du kw kx ky kz b">imageRecogAPI</code>的express.js应用程序，使用Pug作为<a class="ae js" href="https://expressjs.com/en/guide/using-template-engines.html" rel="noopener ugc nofollow" target="_blank">模板引擎</a>，并创建一个包含我们后端服务源代码的同名文件夹。</p><pre class="jd je jf jg fd lb kz lc ld aw le bi"><span id="2574" class="lf ju hh kz b fi lg lh l li lj">npx express-generator --view=pug imageRecogAPI</span></pre><p id="a795" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后，在您的shell上运行下面代码块中的这个命令，为这个项目安装整个依赖项。标志<code class="du kw kx ky kz b">--legacy-peer-deps</code>只是为了预防包之间的依赖冲突，以防任何包有下面列出的其他包，但版本较旧。如果您想查看安装进度(以防安装卡住)，您也可以在<code class="du kw kx ky kz b">--legacy-peer-deps</code>标志后添加标志<code class="du kw kx ky kz b">--verbose</code>。</p><pre class="jd je jf jg fd lb kz lc ld aw le bi"><span id="d441" class="lf ju hh kz b fi lg lh l li lj">npm install @tensorflow/tfjs-node cookie-parser cors multer debug get-image-data jimp morgan express pug --save --legacy-peer-deps</span></pre><p id="5989" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你在安装时遇到错误，你可以运行下面的脚本，或者如果你在安装时卡住了，点击<code class="du kw kx ky kz b">Ctrl</code> + <code class="du kw kx ky kz b">C</code>，然后运行下面的脚本。之后，重新运行上面的命令<code class="du kw kx ky kz b">npm install</code>。如果您实际上是在代理后面工作，那么您可以通过这篇文章来解决这个问题。</p><pre class="jd je jf jg fd lb kz lc ld aw le bi"><span id="9215" class="lf ju hh kz b fi lg lh l li lj">npm cache clear --force</span></pre><div class="lm ln ez fb lo lp"><a rel="noopener follow" target="_blank" href="/@d_dhana/working-with-npm-behind-network-proxy-444ced82a3"><div class="lq ab dw"><div class="lr ab ls cl cj lt"><h2 class="bd hi fi z dy lu ea eb lv ed ef hg bi translated">在网络代理背后与NPM合作</h2><div class="lw l"><h3 class="bd b fi z dy lu ea eb lv ed ef dx translated">介绍</h3></div><div class="lx l"><p class="bd b fp z dy lu ea eb lv ed ef dx translated">medium.com</p></div></div><div class="ly l"><div class="lz l ma mb mc ly md jm lp"/></div></div></a></div><p id="96c4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">安装包完成后，将SavedModel文件夹移动或复制到这个express项目的文件夹中。因此，在完成上述所有工作后，您的项目结构应该类似如下:</p><pre class="jd je jf jg fd lb kz lc ld aw le bi"><span id="30b1" class="lf ju hh kz b fi lg lh l li lj">imageRecogAPI/<br/>├── node_modules/<br/>├── bin/<br/>│   └── www<br/>├── public/<br/>│   ├── images/<br/>│   ├── javascripts/<br/>│   └── stylesheets/<br/>├── routes/<br/>│   ├── index.js<br/>│   └── users.js<br/>├── views/<br/>│   ├── error.pug<br/>│   ├── index.pug<br/>│   └── layout.pug<br/>├── SavedModel/<br/>│   ├── variables/<br/>│   ├── keras_metadata.pb<br/>│   └── saved_model.pb<br/>├── app.js<br/>├── package.json<br/>└── package-lock.json</span></pre><h1 id="8bea" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">服务的发展</h1><h2 id="29cc" class="lf ju hh bd jv me mf mg jz mh mi mj kd ip mk ml kh it mm mn kl ix mo mp kp mq bi translated">设置app.js和路线</h2><p id="b144" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">让我们开始发展。我们已经在项目结构中看到的最重要的东西是<code class="du kw kx ky kz b">app.js</code>。不做任何修改，您应该已经得到了这个模板:</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="0e92" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果您希望更改应用程序的端口，您可以在您的<code class="du kw kx ky kz b">app.js</code>中的<code class="du kw kx ky kz b">module.export</code>上方添加这些行。根据下面的代码，默认端口将是<code class="du kw kx ky kz b">9000</code>。您可以简单地更改那里的值或添加一个<code class="du kw kx ky kz b">.env</code>文件，然后编写<code class="du kw kx ky kz b">PORT=9000</code>(如果您想让服务在端口9000上运行)。</p><pre class="jd je jf jg fd lb kz lc ld aw le bi"><span id="28a2" class="lf ju hh kz b fi lg lh l li lj">const PORT = process.env.PORT || 9000;<br/>app.listen(PORT);<br/>console.log(`Running server at http://localhost:${PORT}`);</span></pre><p id="4fd3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后使用命令<code class="du kw kx ky kz b">npm run start</code>运行应用程序，然后打开浏览器，然后转到<code class="du kw kx ky kz b"><a class="ae js" href="http://localhost:9000" rel="noopener ugc nofollow" target="_blank">http://localhost:9000</a></code>，您将看到默认的快速欢迎页面。</p><p id="6f73" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">之后，我们检查app.js中的路由，已经有2个路由器(<code class="du kw kx ky kz b">/</code>和<code class="du kw kx ky kz b">/users</code>)。您也可以尝试访问<code class="du kw kx ky kz b"><a class="ae js" href="http://localhost:9000/users" rel="noopener ugc nofollow" target="_blank">http://localhost:9000/users</a></code>。如果你读了上面的内容，你就会明白路线是如何定义和使用的。然后，将下面的粗体代码行添加到您的<code class="du kw kx ky kz b">app.js</code>中。</p><pre class="jd je jf jg fd lb kz lc ld aw le bi"><span id="0481" class="lf ju hh kz b fi lg lh l li lj">var indexRouter = require('./routes/index');<br/>var usersRouter = require('./routes/users'); <br/><strong class="kz hi">var predictionRouter = require('./routes/predict');</strong></span><span id="64da" class="lf ju hh kz b fi mt lh l li lj">...</span><span id="90ab" class="lf ju hh kz b fi mt lh l li lj">app.use('/', indexRouter);<br/>app.use('/users', usersRouter);<br/><strong class="kz hi">app.use('/predict', predictionRouter);</strong></span></pre><p id="0990" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，我们将通过在目录<code class="du kw kx ky kz b">routes/</code>中创建一个新文件<code class="du kw kx ky kz b">predict.js</code>来创建我们自己的路由，并将下面的代码复制到其中。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="c0a0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下面是对上面代码的解释:</p><ol class=""><li id="b0b8" class="mu mv hh ig b ih ii il im ip mw it mx ix my jb mz na nb nc bi translated">首先，我们导入所需的包，即<code class="du kw kx ky kz b">express</code>和<code class="du kw kx ky kz b">multer</code>。至于<code class="du kw kx ky kz b">controller</code>，我们将稍后创建一个，因为它是用于利用ML模型进行图像识别的主要过程。</li><li id="10f2" class="mu mv hh ig b ih nd il ne ip nf it ng ix nh jb mz na nb nc bi translated">然后，我们声明您希望使用的文件名。该文件名必须与您将在控制器中使用的文件名相同。</li><li id="7102" class="mu mv hh ig b ih nd il ne ip nf it ng ix nh jb mz na nb nc bi translated">之后，我们设置了多磁盘存储和文件检查器/过滤器来处理上传的图像。记住，在目的地，我们将上传的图像设置为从项目根目录保存到文件夹<code class="du kw kx ky kz b">images/</code>中。</li><li id="a29d" class="mu mv hh ig b ih nd il ne ip nf it ng ix nh jb mz na nb nc bi translated">最后，我们设置了一个具有前缀<code class="du kw kx ky kz b">/predict</code>的内部路由器<code class="du kw kx ky kz b">/</code>。将multer放在那里，检查文件类型以及文件是否存在，因为它应该是<code class="du kw kx ky kz b">multipart/form-data</code>请求中的必填字段。然后，如果请求符合要求，就将它们全部传递给控制器。</li></ol></div><div class="ab cl ni nj go nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ha hb hc hd he"><h2 id="6515" class="lf ju hh bd jv me mf mg jz mh mi mj kd ip mk ml kh it mm mn kl ix mo mp kp mq bi translated">构建控制器</h2><p id="aec7" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">处理完路由之后，我们需要创建控制器来处理图像识别过程。首先，从项目根目录创建名为<code class="du kw kx ky kz b">controllers</code>的文件夹，然后创建名为<code class="du kw kx ky kz b">PredictController.js</code>的文件。之后，把这一整块复制进去。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="4e53" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这些是上面代码的解释:</p><ol class=""><li id="9c3d" class="mu mv hh ig b ih ii il im ip mw it mx ix my jb mz na nb nc bi translated">首先，我们导入所有的包(一如既往)。</li><li id="9c9c" class="mu mv hh ig b ih nd il ne ip nf it ng ix nh jb mz na nb nc bi translated">我们只是把整个过程，一次全部导出。</li><li id="d169" class="mu mv hh ig b ih nd il ne ip nf it ng ix nh jb mz na nb nc bi translated">在导出的函数中，有两个主要的函数:<code class="du kw kx ky kz b">loadModel()</code>和<code class="du kw kx ky kz b">image()</code>，下面将进行说明。</li></ol><p id="ebec" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">函数<code class="du kw kx ky kz b">loadModel()</code>执行这些步骤:</p><ol class=""><li id="8c62" class="mu mv hh ig b ih ii il im ip mw it mx ix my jb mz na nb nc bi translated">用<code class="du kw kx ky kz b">await tf.node.loadSavedModel()</code>加载保存的模型</li><li id="801c" class="mu mv hh ig b ih nd il ne ip nf it ng ix nh jb mz na nb nc bi translated">用<code class="du kw kx ky kz b">await model.predict().data()</code>进行预测并得到结果</li><li id="354f" class="mu mv hh ig b ih nd il ne ip nf it ng ix nh jb mz na nb nc bi translated">将预测结果转换为数组，然后作为响应发送。</li></ol><p id="526c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">函数<code class="du kw kx ky kz b">image()</code>执行这些步骤:</p><ol class=""><li id="ff57" class="mu mv hh ig b ih ii il im ip mw it mx ix my jb mz na nb nc bi translated">读取上传的待预测图像。</li><li id="1f40" class="mu mv hh ig b ih nd il ne ip nf it ng ix nh jb mz na nb nc bi translated">将图像转换为张量，以便可以通过模型进行预测。</li><li id="056b" class="mu mv hh ig b ih nd il ne ip nf it ng ix nh jb mz na nb nc bi translated">由于模型是为了读取形状为<code class="du kw kx ky kz b">(None, 150, 150, 3)</code>的图像而构建的，我们需要通过<code class="du kw kx ky kz b">resizeNearestNeighbor()</code>将图像大小调整为150 x 150，并通过<code class="du kw kx ky kz b">expandDims()</code>添加一个维度，将这个张量调整为该形状。因为图像已经是RGB格式，所以我们不需要担心形状中的<code class="du kw kx ky kz b">3</code>。</li><li id="a961" class="mu mv hh ig b ih nd il ne ip nf it ng ix nh jb mz na nb nc bi translated">之后，我们通过将图像张量划分为255来归一化它们。</li><li id="2773" class="mu mv hh ig b ih nd il ne ip nf it ng ix nh jb mz na nb nc bi translated">然后我们调用<code class="du kw kx ky kz b">loadModel()</code>并在预测完成后删除图像文件。</li></ol></div><div class="ab cl ni nj go nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ha hb hc hd he"><p id="d043" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后，转到您的shell，运行<code class="du kw kx ky kz b">npm run start</code>。尝试你的邮差新鲜服务。在键列中选择下拉菜单<code class="du kw kx ky kz b">File</code>。如果你从一开始就正确地做了所有的步骤，你应该能得到这个。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es np"><img src="../Images/cc0ed5e6ef10a454c27cf5b24d4652fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qCuxBzZY8k54yRsSIe_52A.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">The Finished API.</figcaption></figure><p id="955e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">但是，您可以用自己的风格来增强预测的回报。例如，如果您只想得到概率最高的类名和概率，您可以使用下面的技巧。一开始，我们知道预测数组的值将按照<code class="du kw kx ky kz b">[paper, rock, scissors]</code>的方式排列。通过对数组使用Javascript本地方法，我们可以很容易地获得它。</p><p id="444f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">回头看一下<code class="du kw kx ky kz b">PredictionController</code>，我们有这样一行:</p><pre class="jd je jf jg fd lb kz lc ld aw le bi"><span id="ddcd" class="lf ju hh kz b fi lg lh l li lj">predictions = Array.from(predictions);</span></pre><p id="da3a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们可以把它改成</p><pre class="jd je jf jg fd lb kz lc ld aw le bi"><span id="9e3a" class="lf ju hh kz b fi lg lh l li lj">predictions = Array.from(predictions)<br/>                   // Construct<br/>                .map((prob, idx) =&gt; {<br/>                  var classes = ['paper', 'rock', 'scissors'];<br/>                  return {class: classes[idx], probability: prob};<br/>                })<br/>                   // Sort Descending, Get the highest one                <br/>                .sort((a, b) =&gt; b.probability - a.probability)[0];</span></pre><p id="26cf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后，我们完成这个。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es np"><img src="../Images/3517ac9a8c11ffa44bc56a114c091631.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ok6MiJ5vuCSghusUzeyKDA.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Enhanced Response.</figcaption></figure><p id="4608" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在我忘记之前，这整个代码也可以在github库中找到，因为我把链接放在了本文的最后。</p><h1 id="9a93" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">结论</h1><p id="129a" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">我们终于赶上了这篇文章的结尾。由于TensorFlow开发了许多跨各种平台和语言的集成，因此在任何地方应用机器学习模型都变得更加容易，包括NodeJs和Express。希望本文能帮助您理解如何用Express构建图像识别API。</p><div class="lm ln ez fb lo lp"><a href="https://github.com/ddhira123/tensorflow_with_expressjs" rel="noopener  ugc nofollow" target="_blank"><div class="lq ab dw"><div class="lr ab ls cl cj lt"><h2 class="bd hi fi z dy lu ea eb lv ed ef hg bi translated">GitHub-DD hira 123/tensor flow _ with _ express js:这是关于Medium中文章的报告</h2><div class="lw l"><h3 class="bd b fi z dy lu ea eb lv ed ef dx translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="lx l"><p class="bd b fp z dy lu ea eb lv ed ef dx translated">github.com</p></div></div><div class="ly l"><div class="nq l ma mb mc ly md jm lp"/></div></div></a></div><h1 id="e80c" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">关于作者</h1><p id="332f" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">Dhana目前在一家印度尼西亚银行担任软件工程师，致力于通过创建或增强服务来优化业务流程。</p><p id="5ca8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">除了软件工程，Dhana喜欢学习和分享机器学习，并自2021年以来一直被认证为TensorFlow开发者。最后，请在<a class="ae js" rel="noopener" href="/@d_dhana">媒体</a>和<a class="ae js" href="https://www.linkedin.com/in/dhanadhira" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>伸出达那。</p><div class="lm ln ez fb lo lp"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="lq ab dw"><div class="lr ab ls cl cj lt"><h2 class="bd hi fi z dy lu ea eb lv ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="lw l"><h3 class="bd b fi z dy lu ea eb lv ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="lx l"><p class="bd b fp z dy lu ea eb lv ed ef dx translated">medium.com</p></div></div><div class="ly l"><div class="nr l ma mb mc ly md jm lp"/></div></div></a></div><p id="5c2c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">🔵<a class="ae js" rel="noopener" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"> <strong class="ig hi">成为作家</strong> </a></p></div></div>    
</body>
</html>