<html>
<head>
<title>San Francisco Crime Classification</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">旧金山犯罪分类</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/san-francisco-crime-classification-ffa2cd02a1bf?source=collection_archive---------4-----------------------#2022-01-25">https://medium.com/mlearning-ai/san-francisco-crime-classification-ffa2cd02a1bf?source=collection_archive---------4-----------------------#2022-01-25</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="f0fc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">端到端机器学习案例研究</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/87490164f0e5c6d5ae83805f4aac739c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*42gBq2jz6SddxJuU"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Photo by <a class="ae js" href="https://unsplash.com/@nampoh?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Maxim Hopman</a> on <a class="ae js" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="f2d2" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">旧金山——城市</h1><p id="f71d" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">旧金山是美国加利福尼亚州的文化、商业和金融中心。它是美国第17大人口城市，也是著名的旅游胜地，以凉爽的夏天、金门大桥和一些世界上最好的餐馆而闻名。尽管旧金山是一个以发展而闻名的城市，但由于犯罪活动的增加，它仍然是最危险的居住地之一。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es kw"><img src="../Images/4ebc1c2fe910bb5907958988bf038767.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/0*4pzeROP-8RZPBZqM.jpg"/></div><figcaption class="jo jp et er es jq jr bd b be z dx">San Francisco — Golden Gate</figcaption></figure><p id="6b7e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">旧金山的开放数据目录提供了从2003年1月1日到2015年5月13日的12年犯罪数据。这些犯罪记录大多来自SFPD犯罪事件报告系统。他们已经在<a class="ae js" href="https://www.kaggle.com/c/sf-crime/data" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>上发布了这个数据集。</p><p id="ceb2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">整个案例研究的主要议程是预测未来可能发生的事件的犯罪类别。因此，帮助他们减少组织数据的时间和精力。</p><h1 id="ebf5" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">ML问题公式化</h1><h2 id="ea7c" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">数据概述</h2><ol class=""><li id="c1a9" class="ll lm hh ig b ih kr il ks ip ln it lo ix lp jb lq lr ls lt bi translated">来源→<a class="ae js" href="https://www.kaggle.com/c/sf-crime/data" rel="noopener ugc nofollow" target="_blank">kaggle.com/c/sf-crime/data</a></li><li id="0236" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">我们总共有3个文件</li></ol><ul class=""><li id="e757" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated"><strong class="ig hi"> <em class="md"> train.csv.zip </em> </strong></li><li id="63a7" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated"><strong class="ig hi"> <em class="md"> test.csv.zip </em> </strong></li><li id="55b7" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated"><strong class="ig hi"><em class="md">sample submission . CSV . zip</em></strong></li></ul><p id="48a9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3.定型数据有9列，其中也包括目标列。</p><p id="3258" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">4.测试数据有6列，不包括目标列(这是我们需要预测的)。</p><h2 id="4552" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">问题类型</h2><ul class=""><li id="416d" class="ll lm hh ig b ih kr il ks ip ln it lo ix lp jb mc lr ls lt bi translated">有不同种类的犯罪需要分类。</li><li id="3a3a" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">因此，这导致了多类分类问题。</li></ul><h2 id="d3df" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">绩效指标</h2><p id="e8ce" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">因为这是一个分类问题，我们坚持的标准是-</p><ul class=""><li id="3561" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated">多重对数损失——任何机器学习模型的最终目标都是减少损失。对于这个问题，完美的分类器应该是将多类对数损失减少到<code class="du me mf mg mh b">0</code>的分类器。</li></ul><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es mi"><img src="../Images/02045a29ecdb816c252e5a2210da4d1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/0*gEgcWcQ-qVQgY-jG"/></div></figure><ul class=""><li id="8b39" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated">混淆矩阵——是对分类问题预测结果的总结。正确和错误预测的数量用计数值汇总，并按每个类别细分。</li></ul><h2 id="a731" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">目标和限制</h2><ol class=""><li id="0567" class="ll lm hh ig b ih kr il ks ip ln it lo ix lp jb lq lr ls lt bi translated">预测每个数据点属于每个<code class="du me mf mg mh b">39</code>类别的概率。</li><li id="1def" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated">约束条件:</li></ol><ul class=""><li id="4177" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated">可解释性</li><li id="bfbb" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">需要类别概率</li><li id="b28e" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">惩罚类概率中的错误= &gt;度量是对数损失</li><li id="899b" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">没有延迟限制</li></ul><h1 id="eae4" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">探索性数据分析</h1><p id="cbaa" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">给出的原始训练数据-</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><p id="b02a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">给出的原始测试数据-</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><p id="0c93" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">显然，从<code class="du me mf mg mh b">Dates</code>列中，我们可以提取基于时间的特性，例如-</p><ul class=""><li id="7d69" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated"><strong class="ig hi"> <em class="md">日期</em> </strong></li><li id="b573" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated"><strong class="ig hi"> <em class="md">年份</em> </strong></li><li id="5ce6" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated"><strong class="ig hi"> <em class="md">月</em> </strong></li><li id="307b" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated"><strong class="ig hi"> <em class="md">日</em> </strong></li><li id="6e11" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated"><strong class="ig hi"> <em class="md">小时</em> </strong></li><li id="837d" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated"><strong class="ig hi"> <em class="md">分钟</em> </strong></li><li id="421f" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated"><strong class="ig hi"> <em class="md">季节</em> </strong></li><li id="397a" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated"><strong class="ig hi"> <em class="md">小时_类型</em> </strong></li><li id="4358" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated"><strong class="ig hi"> <em class="md">时间_周期</em> </strong></li></ul><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><p id="3861" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">此外，从<code class="du me mf mg mh b">Address</code>列中，我们可以提取地址类型，例如-</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><p id="5f01" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">提取基于时间和地址类型的特征后的训练数据。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><p id="8edf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">提取基于时间和地址类型的特征后测试数据。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><h1 id="6f68" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">单变量分析</h1><p id="689b" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">所以，我们得到了一些重要的特征。我们可以考虑每一列执行单变量分析，并了解数据是如何分布的。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><h2 id="eb35" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">目标分布</h2><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><ul class=""><li id="86d6" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated">以上是<code class="du me mf mg mh b">category</code>栏目的班级分布。</li><li id="ec6b" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">显然，我们可以看到<code class="du me mf mg mh b">Larceny/Theft</code>是历年来发生最多的犯罪类型。</li><li id="058d" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">最后的<code class="du me mf mg mh b">5</code>到<code class="du me mf mg mh b">6</code>犯罪可以忽略不计，这意味着它们很少发生。</li><li id="f088" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">数据不平衡。因此，在构建模型时，最好进行基于分层的分割。</li></ul><h2 id="a897" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">地址型分布</h2><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><ul class=""><li id="9f33" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated">从上面的情节可以看出，大部分的犯罪都发生在<code class="du me mf mg mh b">Streets</code>和<code class="du me mf mg mh b">Crosses</code>两天。</li><li id="e024" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated"><code class="du me mf mg mh b">St</code>代表街道。</li><li id="b302" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated"><code class="du me mf mg mh b">Cross</code>表示连接点。</li></ul><h2 id="86bd" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">警察局分布</h2><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><ul class=""><li id="2131" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated">湾区是大多数犯罪被报道的地方。</li></ul><h2 id="4857" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">年份分布</h2><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><ul class=""><li id="835e" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated">我们知道数据是从<strong class="ig hi">2003年1月1日</strong>到<strong class="ig hi">2015年5月13日</strong>记录的。</li><li id="6c1c" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">2015年<strong class="ig hi">的数据没有完全记录。</strong></li><li id="22cb" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">2013年数字犯罪较多。其他的也有类似的发生范围。</li></ul><h2 id="987b" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">月份分布</h2><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><ul class=""><li id="0039" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated">在所有月份中，我们可以观察到犯罪的发生大致在<code class="du me mf mg mh b">60k</code>到<code class="du me mf mg mh b">80k</code>之间。</li></ul><h2 id="61b6" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">工作日分布</h2><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><ul class=""><li id="42c6" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated"><code class="du me mf mg mh b">Friday</code>是大部分犯罪发生的日子。</li><li id="d91d" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated"><code class="du me mf mg mh b">Sunday</code>是犯罪发生较少的一天(与其他日子相比)。</li><li id="e0fb" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">这种可能性比较大，因为是节假日。</li><li id="b2fd" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">这个分布差不多。</li></ul><h2 id="c8f6" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">小时分布</h2><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><ul class=""><li id="7ff7" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated">从上面可以看出，大多数犯罪发生在晚上或午夜。</li></ul><h2 id="1452" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">时间段分布</h2><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><ul class=""><li id="f30b" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated">我们可以观察到大多数犯罪通常发生在晚上或夜间。</li></ul><h2 id="3db2" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">小时型分布</h2><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><ul class=""><li id="05e1" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated"><code class="du me mf mg mh b">Morning</code>、<code class="du me mf mg mh b">Mid-Night</code>、<code class="du me mf mg mh b">Night</code>被认为是适合犯罪发生的时间段。</li><li id="a759" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">事实上，它们有相似的分布。</li><li id="4fe6" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated"><code class="du me mf mg mh b">Evening</code>和<code class="du me mf mg mh b">Noon</code>是业务通常持续的时间段。</li></ul><h2 id="5992" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">每年发生的次数</h2><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><ul class=""><li id="bc70" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated">上面是一个动画图，展示了每年发生的事情。</li><li id="d1d0" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">以上是在警察局发生的每种事件类型的计数。</li><li id="5962" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">最常见的犯罪是<code class="du me mf mg mh b">Larceny/Theft</code>。</li><li id="bf45" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">这是我们在所有年份的总体事件图中观察到的。</li></ul><h2 id="549e" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">地图可视化每年</h2><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><ul class=""><li id="3249" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated">以上显示了每个警察局发生的犯罪类型的确切位置。</li><li id="ecb0" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">这是一个全年的计划，选择的警察部门是<code class="du me mf mg mh b">Richmond</code>。</li></ul><h2 id="0024" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">Choropleth可视化月刊</h2><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><ul class=""><li id="e59d" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated">以上是基于每个警察局的事件数的choropleth地图。</li><li id="e33a" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">南区是大部分罪案报案的警局。</li><li id="68fe" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">这是今年<code class="du me mf mg mh b">2015</code>的月图。</li></ul><h2 id="a021" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">地理密度图</h2><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es ml"><img src="../Images/dd9ecc3ce255dabcd3e245bc85b12cd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GJ6tLuVyV03MklyI.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Image by Author</figcaption></figure><ul class=""><li id="0d0a" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated">GIF图<a class="ae js" href="https://bit.ly/3qFfJqM" rel="noopener ugc nofollow" target="_blank">展示了每年发生的最高<code class="du me mf mg mh b">12</code>犯罪的密度图。</a></li><li id="72b8" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">这里面最需要观察的是<code class="du me mf mg mh b">Larency/Theft</code>一开始总是存在的。</li><li id="f032" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">第二个是<code class="du me mf mg mh b">Other Offenses</code>。</li><li id="f6ad" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">密度按降序排列，因此保留了最高的犯罪。</li></ul><h1 id="ef7e" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">多变量分析</h1><p id="be74" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">为了进行多元分析，我们必须要求基于现有列的其他特性。我们可以按照以下步骤获取它们。</p><ol class=""><li id="d1f0" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb lq lr ls lt bi translated">分类列可以编码为<code class="du me mf mg mh b">One-Hot-Encoding</code>。</li></ol><ul class=""><li id="4a9f" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated">跟进程序— <a class="ae js" href="https://jovian.ai/msameeruddin/00-cs1-eda-mv-tsa-bow-tfidf-final#C146" rel="noopener ugc nofollow" target="_blank">此处为</a>。</li></ul><p id="cd4a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">2.我们可以通过考虑旧金山的所有警察局并计算每个警察局与数据中所有坐标值之间的哈弗线距离来提取空间距离特征。</p><ul class=""><li id="8168" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated">跟进程序— <a class="ae js" href="https://jovian.ai/msameeruddin/00-cs1-eda-mv-tsa-bow-tfidf-final#C150" rel="noopener ugc nofollow" target="_blank">此处为</a>。</li></ul><p id="e0f3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3.我们可以在纬度和经度之间进行一些算术运算。这些被称为基于位置的功能。</p><ul class=""><li id="e5a2" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated">跟进程序— <a class="ae js" href="https://jovian.ai/msameeruddin/00-cs1-eda-mv-tsa-bow-tfidf-final#C155" rel="noopener ugc nofollow" target="_blank">此处为</a>。</li></ul><p id="a2b8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">4.地址栏可以转换成<code class="du me mf mg mh b">Bog of Words</code>和<code class="du me mf mg mh b">TF-IDF</code>表示。</p><ul class=""><li id="99ac" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated">跟进程序— <a class="ae js" href="https://jovian.ai/msameeruddin/00-cs1-eda-mv-tsa-bow-tfidf-final#C159" rel="noopener ugc nofollow" target="_blank">此处为</a>。</li></ul><p id="3a57" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">5.这样做，我们最终拥有了<code class="du me mf mg mh b">130</code>的特性。从数据中学习这一点非常好。早先我们有大约<code class="du me mf mg mh b">7</code>的特性。</p><p id="5c25" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们将想象一个<em class="md"> TSNE </em>图，看看我们是否能完全分离这些类。由于数据很大，我只考虑了<code class="du me mf mg mh b">10%</code>通过执行分层分割的整个数据。这样做的原因是<em class="md"> TSNE </em>花费更多的时间来接受训练。整个数据的<code class="du me mf mg mh b">10%</code>几乎是<code class="du me mf mg mh b">87804</code>个数据点。</p><h2 id="92f2" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">TSNE——10%</h2><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><ul class=""><li id="45b4" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated">目前，数据集由<code class="du me mf mg mh b">39</code>类组成。</li><li id="3f7f" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">从上面的图中，我们可以清楚地看到，数据是高度不平衡的。</li><li id="e697" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">集群没有正确分离。</li></ul><h2 id="0589" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">TSNE——10%(前12种犯罪)</h2><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><ul class=""><li id="63e4" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated">与我们考虑所有类别时相比，上述情况更好。</li><li id="d880" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">集群也以更好的方式形成。</li><li id="105b" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">簇的分离也更好。</li></ul><h2 id="4049" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">TSNE——10%(前五大犯罪)</h2><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><ul class=""><li id="184d" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated">上面的情节比起之前所有的情节要好得多。</li><li id="57a9" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">我们可以清楚地看到分离。</li></ul><h1 id="5c67" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">建模和培训</h1><p id="e71a" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">既然我们已经获得了这些特性，是时候应用各种分类模型并检查每个模型的性能了。对于这个问题，我们就用以下几款。</p><ul class=""><li id="224d" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated"><strong class="ig hi"> <em class="md">逻辑回归</em> </strong></li><li id="ff62" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated"><strong class="ig hi"> <em class="md">决策树</em> </strong></li><li id="6268" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated"><strong class="ig hi"> <em class="md">随机森林</em> </strong></li><li id="6a4b" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated"><strong class="ig hi"> <em class="md"> XGBoost分类器</em> </strong></li></ul><p id="2f50" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们也可以试试</p><ul class=""><li id="2b50" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated"><strong class="ig hi"> <em class="md"> KNN </em> </strong></li></ul><p id="6a5e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我没有实现它，因为它消耗更多的时间来训练，由于系统的低效率，我选择跳过它。</p><blockquote class="mm mn mo"><p id="0333" class="ie if md ig b ih ii ij ik il im in io mp iq ir is mq iu iv iw mr iy iz ja jb ha bi translated">让我们训练一些模型…</p></blockquote><h2 id="0c5c" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">虚拟分类器</h2><p id="c7b4" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">也称为随机模型。该模型为每个数据点分配一个随机的类别标签。这有助于检查其他重要模型是否比这做得更好。我们由此获得的损失—可以设置为阈值，从而旨在实现比阈值更小的损失。</p><h2 id="ca31" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">逻辑回归</h2><p id="e897" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">超参数调整后，<code class="du me mf mg mh b">C</code>的最佳值恰好是<code class="du me mf mg mh b">30</code>和<code class="du me mf mg mh b">l2</code>作为正则化器。我们用<code class="du me mf mg mh b">log loss</code>继续，因为<code class="du me mf mg mh b">accuracy</code>没有帮助，因为数据不平衡。幸运的是，这种损失小于虚拟分类器的损失。</p><p id="8b42" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当模型在测试数据上进行测试时，总体Kaggle得分为-</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><h2 id="420c" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">决策图表</h2><p id="c8e7" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">超参数调整后，<code class="du me mf mg mh b">max_depth</code>的最佳值为<code class="du me mf mg mh b">50</code>，<code class="du me mf mg mh b">min_samples_split</code>为<code class="du me mf mg mh b">500</code>。我们用<code class="du me mf mg mh b">log loss</code>继续，因为<code class="du me mf mg mh b">accuracy</code>不会有帮助，因为数据是不平衡的。幸运的是，这种损失小于虚拟分类器的损失。</p><p id="ae06" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当模型在测试数据上进行测试时，总体Kaggle得分为-</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><h2 id="ed97" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">随机森林</h2><p id="cdbb" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">超参数调整后，发生了<code class="du me mf mg mh b">max_depth</code>的最佳值为<code class="du me mf mg mh b">8</code>和<code class="du me mf mg mh b">n_estimators</code>为<code class="du me mf mg mh b">100</code>。我们用<code class="du me mf mg mh b">log loss</code>继续，因为<code class="du me mf mg mh b">accuracy</code>不会有帮助，因为数据是不平衡的。幸运的是，这种损失小于虚拟分类器的损失。</p><p id="d548" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当模型在测试数据上进行测试时，总体Kaggle得分为-</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><h2 id="c8d1" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">XGBoost分类器</h2><p id="44c9" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">超参数调整后，<code class="du me mf mg mh b">max_depth</code>的最佳值为<code class="du me mf mg mh b">8</code>而<code class="du me mf mg mh b">n_estimators</code>为<code class="du me mf mg mh b">150</code>。我们用<code class="du me mf mg mh b">log loss</code>继续，因为<code class="du me mf mg mh b">accuracy</code>没有帮助，因为数据不平衡。幸运的是，这种损失小于虚拟分类器的损失。</p><p id="9af9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当模型在测试数据上进行测试时，总体Kaggle得分为-</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><blockquote class="mm mn mo"><p id="4562" class="ie if md ig b ih ii ij ik il im in io mp iq ir is mq iu iv iw mr iy iz ja jb ha bi translated">我们必须校准概率(预测)，因为概率在分类问题中起着至关重要的作用。</p><p id="67c1" class="ie if md ig b ih ii ij ik il im in io mp iq ir is mq iu iv iw mr iy iz ja jb ha bi translated"><code class="du me mf mg mh b">StackingClassifier</code>结果不达标。</p></blockquote><h2 id="4f93" class="kx ju hh bd jv ky kz la jz lb lc ld kd ip le lf kh it lg lh kl ix li lj kp lk bi translated">模型总结</h2><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><ul class=""><li id="95b2" class="ll lm hh ig b ih ii il im ip lz it ma ix mb jb mc lr ls lt bi translated">从上面我们可以观察到，所有车型(除了<code class="du me mf mg mh b">DummyClassifier</code>)表现都不错。</li><li id="055a" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">每个型号的损耗都小于<code class="du me mf mg mh b">DummyClassifier</code>。</li><li id="dc8b" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb mc lr ls lt bi translated">与所有其他车型相比，最好的车型是<code class="du me mf mg mh b">XGBoost</code>。这个损失很小。</li></ul><blockquote class="mm mn mo"><p id="f417" class="ie if md ig b ih ii ij ik il im in io mp iq ir is mq iu iv iw mr iy iz ja jb ha bi translated">建模的完整代码可以在<a class="ae js" href="https://jovian.ai/msameeruddin/02-cs1-modelling-main" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p></blockquote><h1 id="2467" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">单点预测</h1><p id="4981" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">作为其中的一部分，当原始测试数据(单点)作为输入传递到模型时，我们需要预测犯罪的类别。这在现实场景中很重要，因为我们通常不会将特性和预处理的测试数据传递给模型。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mj mk l"/></div></figure><blockquote class="mm mn mo"><p id="dae3" class="ie if md ig b ih ii ij ik il im in io mp iq ir is mq iu iv iw mr iy iz ja jb ha bi translated">单点预测的代码可以在这里找到<a class="ae js" href="https://jovian.ai/msameeruddin/05-cs1-final-submission" rel="noopener ugc nofollow" target="_blank">。</a></p></blockquote><p id="2d9e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">视频演示。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="ms mk l"/></div></figure><p id="fdc3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">木星计划链接- </strong></p><div class="mt mu ez fb mv mw"><a href="https://jovian.ai/msameeruddin/collections/san-francisco-crime-classification" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab dw"><div class="my ab mz cl cj na"><h2 class="bd hi fi z dy nb ea eb nc ed ef hg bi translated">旧金山-犯罪-按msameeruddin分类| Jovian</h2><div class="nd l"><h3 class="bd b fi z dy nb ea eb nc ed ef dx translated">msameeruddin的笔记本收藏。</h3></div><div class="ne l"><p class="bd b fp z dy nb ea eb nc ed ef dx translated">jovian.ai</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk jm mw"/></div></div></a></div><p id="b5ee" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">领英简介- </strong></p><p id="61fa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">【https://www.linkedin.com/in/mohammed-sameeruddin-596a70133/ T4】</p><h1 id="a1a6" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">参考</h1><ol class=""><li id="462b" class="ll lm hh ig b ih kr il ks ip ln it lo ix lp jb lq lr ls lt bi translated"><a class="ae js" href="https://www.appliedaicourse.com/" rel="noopener ugc nofollow" target="_blank">appliedaicourse.com</a></li><li id="67fb" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated"><a class="ae js" href="https://towardsdatascience.com/why-training-set-should-always-be-smaller-than-test-set-61f087ed203c" rel="noopener" target="_blank">towardsdatascience.com/why-training-set-sho..</a></li><li id="78f4" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated"><a class="ae js" href="https://towardsdatascience.com/leveraging-geolocation-data-for-machine-learning-essential-techniques-192ce3a969bc" rel="noopener" target="_blank">towardsdatascience.com/leveraging-geolocati..</a></li><li id="7f5d" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated"><a class="ae js" href="https://www.slideshare.net/RohitDandona/san-francisco-crime-prediction-report" rel="noopener ugc nofollow" target="_blank">slideshare.net/RohitDandona/san-francisco-c..</a></li><li id="4f20" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated"><a class="ae js" href="https://www.researchgate.net/publication/305288147_San_Francisco_Crime_Classification" rel="noopener ugc nofollow" target="_blank">researchgate.net/publication/305288147_San_..</a></li><li id="a6ed" class="ll lm hh ig b ih lu il lv ip lw it lx ix ly jb lq lr ls lt bi translated"><a class="ae js" href="https://cseweb.ucsd.edu/classes/wi15/cse255-a/reports/fa15/012.pdf" rel="noopener ugc nofollow" target="_blank">cseweb.ucsd.edu/classes/wi15/cse255-a/repor..</a></li></ol><h1 id="7b78" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">未来的工作</h1><p id="3ffd" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">我们可以尝试应用基于深度学习的模型，并检查我们已经训练过的模型的性能。据我所知，大多数试图解决这个问题的kagglers使用深度学习模型实现了他们的解决方案。我们绝对可以试一试。</p><div class="mt mu ez fb mv mw"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="mx ab dw"><div class="my ab mz cl cj na"><h2 class="bd hi fi z dy nb ea eb nc ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="nd l"><h3 class="bd b fi z dy nb ea eb nc ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="ne l"><p class="bd b fp z dy nb ea eb nc ed ef dx translated">medium.com</p></div></div><div class="nf l"><div class="nl l nh ni nj nf nk jm mw"/></div></div></a></div></div></div>    
</body>
</html>