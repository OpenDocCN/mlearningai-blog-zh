# åœ¨ web ä¸Šéƒ¨ç½²æ‚¨çš„ ML æ¨¡å‹ï¼Œå…±äº«å®ƒä»¬ï¼Œåˆ¶ä½œä»¤äººæƒŠå¹çš„ web ç•Œé¢ç¬¬ 2 éƒ¨åˆ†

> åŸæ–‡ï¼š<https://medium.com/mlearning-ai/deploying-your-ml-models-on-the-web-sharing-them-and-making-the-awesome-web-interface-part-2-1db472b1ca0b?source=collection_archive---------1----------------------->

![](img/9200bd18bbd2c5a1768deef126e1d4e8.png)

Photo by [Joshua Aragon](https://unsplash.com/@goshua13?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

åœ¨å‰ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å·²ç»è®¾è®¡äº† app.py ä¸»ç•Œé¢ï¼Œåœ¨è¿™ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†é‡ç‚¹å…³æ³¨åº”ç”¨ç¨‹åºçš„åŠŸèƒ½ã€‚

> å‰ä¸€éƒ¨åˆ†çš„é“¾æ¥

[](/mlearning-ai/deploying-your-ml-models-on-the-web-sharing-them-and-making-the-awesome-web-interface-part-1-1b70c6579d71) [## åœ¨ web ä¸Šéƒ¨ç½²æ‚¨çš„ ML æ¨¡å‹ï¼Œå…±äº«å®ƒä»¬ï¼Œåˆ¶ä½œä»¤äººæƒŠå¹çš„ web ç•Œé¢ç¬¬ 1 éƒ¨åˆ†

### åœ¨å¯¹æŸä¸ªé—®é¢˜å»ºç«‹äº†æœºå™¨å­¦ä¹ æ¨¡å‹åï¼Œä½ å¯èƒ½æƒ³ä¸å…¶ä»–æœ‹å‹åˆ†äº«ï¼Œè®©ä»–ä»¬çœ‹çœ‹â€¦

medium.com](/mlearning-ai/deploying-your-ml-models-on-the-web-sharing-them-and-making-the-awesome-web-interface-part-1-1b70c6579d71) 

åœ¨ç»§ç»­ä¹‹å‰ï¼Œè®©æˆ‘ä»¬ç¡®ä¿æ‚¨å·²ç»åœ¨ç³»ç»Ÿä¸­å®‰è£…äº†æ‰€æœ‰éœ€è¦çš„åº“

ç¡®ä¿æ‚¨å·²ç»å®‰è£…äº†ä¸Šè¿°åº“ï¼Œä»¥ä¾¿å®‰è£…è¿™äº›åº“ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å¯¼èˆªåˆ°ä¸Šè¿°æ–‡ä»¶æ¥å®‰è£…è¿™äº›åº“(ç¡®ä¿æ‚¨å°†æ­¤æ–‡ä»¶ä¿å­˜åœ¨é¡¹ç›®ç›®å½•ä¸­ï¼Œæˆ‘ä»¬å°†éœ€è¦å®ƒæ¥åœ¨äº‘è®¡ç®—æœºä¸Šå®‰è£…åº“)

```
pip install -r requirements.txt
```

## æœ€åä¸€æ¬¡ç¼–è¾‘ app.py

æˆ‘ä»¬å°†å–æ¶ˆå¯¹ä¸Šä¸€éƒ¨åˆ† if-else é˜¶æ¢¯çš„æ³¨é‡Šï¼Œå¹¶ä»¥`streamlit run app.py`å¼€å§‹æˆ‘ä»¬çš„åº”ç”¨ç¨‹åº

## ç¼–è¾‘åŠŸèƒ½. py

åœ¨è¿™ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†ç¼–å†™åº”ç”¨ç¨‹åºçš„åŠŸèƒ½

åœ¨åˆ›å»ºåº”ç”¨ç¨‹åºçš„åŠŸèƒ½ä¹‹å‰ï¼Œæˆ‘ä»¬å°†ç¡®ä¿æˆ‘ä»¬çš„æ¨¡å‹ä¸ºæ­¤åšå¥½å‡†å¤‡ã€‚æˆ‘å‘ç° drive æ˜¯å­˜å‚¨æ¨¡å‹çš„æœ€ä½³å¹³å°ï¼Œå› ä¸ºåœ¨ GitHub ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å­˜å‚¨é«˜è¾¾ 20 MB çš„æ¨¡å‹ã€‚

ç¡®ä¿æ‚¨çš„æ¨¡å‹æ˜¯`h5`æ ¼å¼çš„ï¼Œå¹¶ä¸Šä¼ åˆ°é©±åŠ¨å™¨ä¸Š

åœ¨è¿™é‡Œï¼Œæˆ‘å·²ç»ä¸Šä¼ äº†æ¨¡å‹ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªæˆ–è€…ä¸Šä¼ ä½ è‡ªå·±çš„æ¨¡å‹ï¼Œå¹¶ç¡®ä¿ä½ è®¾ç½®çš„æ–‡ä»¶å¯¹æ¯ä¸ªäººéƒ½å¯è§

```
[https://drive.google.com/uc?id=1--eULExMNhEKGiY4zZmdSB7dvMwh0nOX](https://drive.google.com/uc?id=1--eULExMNhEKGiY4zZmdSB7dvMwh0nOX)
```

è®©æˆ‘ä»¬å¯¼å…¥æ‰€æœ‰éœ€è¦çš„åº“å’Œ URL

```
*import* json
*import* streamlit *as* st
*import* tensorflow_text *as* text
*import* tensorflow_hub *as* hub
*import* tensorflow *as* tf
*import* gdown
*import* osmodel_url = "https://drive.google.com/uc?id=1--eULExMNhEKGiY4zZmdSB7dvMwh0nOX"
model_path = './Best_model_emotion.h5'
```

è®©æˆ‘ä»¬ä¸ºä¸»è¦åŠŸèƒ½ç¼–å†™ run_app å‡½æ•°ï¼Œå®ƒå°†ä½œä¸ºæˆ‘ä»¬

åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨`st.text_area`å‡½æ•°è¾“å…¥ç”¨æˆ·æ–‡æœ¬ï¼Œè¿™å°†åœ¨åº”ç”¨ç¨‹åºçš„å±å¹•ä¸Šåˆ›å»ºä¸€ä¸ªæ–‡æœ¬åŒºåŸŸ

æˆ‘å°è¯•ä½¿ç”¨ firebase python API åœ¨ firebase æ•°æ®é›†ä¸Šå­˜å‚¨æˆ‘çš„é¢„æµ‹ï¼Œä½†è¿™ä¸æ˜¯ä¸€ä¸ªå¿…è¦çš„æ­¥éª¤ï¼Œæˆ‘ä»¬ç°åœ¨å°†å¿½ç•¥å­˜å‚¨é¢„æµ‹

ä¹‹åï¼Œæˆ‘ä»¬è°ƒç”¨ load_model å‡½æ•°ï¼Œæˆ‘ä»¬å°†åœ¨è·å¾—æ¨¡å‹åç¼–å†™è¯¥å‡½æ•°ï¼Œæˆ‘ä»¬ä½¿ç”¨`model.predict`å‡½æ•°è¿›è¡Œé¢„æµ‹

ç„¶åæˆ‘ä»¬å¯ä»¥ç”¨`st.title`åŠŸèƒ½å°†é¢„æµ‹æ˜¾ç¤ºåœ¨å±å¹•ä¸Š

## åˆ›å»º load_model å‡½æ•°

æˆ‘ä»¬å°†åœ¨`functionality.py`ä¸­åˆ›å»ºè¿™ä¸ªå‡½æ•°

è¿™ä¸ªæ¨¡å‹è´Ÿè´£ä»é©±åŠ¨å™¨ä¸‹è½½æˆ‘ä»¬ä¿å­˜çš„æ¨¡å‹ï¼Œå¹¶ç¡®ä¿å®ƒæ­£ç¡®åŠ è½½åˆ°æˆ‘ä»¬çš„äº‘æœºå™¨ä¸­

ä¸ºäº†éªŒè¯æ¨¡å‹æ˜¯å¦å­˜åœ¨ï¼Œé¿å…ä¸€æ¬¡åˆä¸€æ¬¡åœ°ä¸‹è½½æ¨¡å‹ï¼Œæ¯æ¬¡åŠ è½½æ—¶ï¼Œæˆ‘ä»¬éƒ½å¿…é¡»éªŒè¯æ¨¡å‹æ˜¯å¦å­˜åœ¨äºæˆ‘ä»¬çš„æ¨¡å‹è·¯å¾„ä¸­ï¼Œä»¥åŠå®ƒæ˜¯å¦å·¥ä½œæ­£å¸¸

ä¸ºäº†ä¸‹è½½æ¨¡å‹ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†`gdown`åº“ï¼Œè¿™ä¸ªåº“å¸®åŠ©æˆ‘ä»¬ä»é©±åŠ¨å™¨ä¸‹è½½æ–‡ä»¶

å¦‚æœä½ å¾—åˆ°ä¸€ä¸ªæ¨¡å—æ²¡æœ‰æ‰¾åˆ°çš„é”™è¯¯ï¼Œç„¶ååœ¨ä½ çš„ç»ˆç«¯è¿è¡Œ`pip install gdown`

åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæ¨¡å‹æ˜¯ä½¿ç”¨ TensorFlow æ„å»ºçš„ï¼Œæˆ‘ä»¬ä½¿ç”¨ USE ä½œä¸ºç‰¹å¾æå–çš„åŸºç¡€æ¨¡å‹ã€‚

æˆ‘ä»¬ä½¿ç”¨ Keras `load_model`å‡½æ•°åŠ è½½æ¨¡å‹ï¼Œå¹¶è¿”å›å®ƒä»¥ä¾¿å¯¹è¯¥æ¨¡å‹è¿›è¡Œé¢„æµ‹ã€‚

## å®Œæ•´çš„ functionality.py æ–‡ä»¶

æœ€åï¼Œç¡®ä¿æäº¤å¹¶æ¨é€è‡³ GitHub åº“ã€‚å¦‚æœä½ æƒ³å­¦ä¹ å¦‚ä½•åœ¨ GitHub ä¸Šæ¨é€æ–‡ä»¶ï¼Œè¯·å‚è€ƒ[æ°è€¶ä»€Â·è´¾å› ](https://medium.com/u/9ca3204a0400?source=post_page-----1db472b1ca0b--------------------------------)çš„åšå®¢

[](/@jayeshjain_246/github-for-beginners-8ff6b072539b) [## é€‚åˆåˆå­¦è€…çš„ GitHub

### åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘è¯•å›¾ç”¨ä¸€ç§éå¸¸åˆå­¦è€…å‹å¥½çš„æ–¹å¼æ¥è§£é‡Š GitHub åŠå…¶ç”¨æ³•ï¼Œè¿™æ ·ä»–ä»¬å°±æœ‰äº†ä¸€ä¸ªæ¸…æ™°çš„è§†è§’

medium.com](/@jayeshjain_246/github-for-beginners-8ff6b072539b) 

å¦‚æœæ‚¨åœ¨è¿è¡Œå¹¶å¯¼èˆªåˆ°`run_app`æ åæ­£ç¡®å®Œæˆäº†æ‰€æœ‰æ­¥éª¤

```
 streamlit run app.py
```

ä½ åº”è¯¥æœ‰ä¸€äº›ç±»ä¼¼çš„å±å¹•

![](img/aa81554d8db0124eae03914ca6180fb5.png)

ç°åœ¨ï¼Œæ‚¨å‡ ä¹å¤„äºéƒ¨ç½²çš„æœ€åé˜¶æ®µï¼Œæ‚¨åªéœ€è¦è®¾ç½®ä¸€ä¸ªäº‘æœºå™¨ï¼Œç„¶åæ‚¨å°±å¯ä»¥ä¸æ‚¨çš„æœ‹å‹åˆ†äº«æ‚¨çš„æ¨¡å‹äº†ğŸ˜ƒ

æˆ‘ä»¬å°†åœ¨æœ¬æ•™ç¨‹çš„ä¸‹ä¸€éƒ¨åˆ†è®¨è®ºåœ¨ Streamlit.cloud ä¸Šè®¾ç½®äº‘æœºå™¨å¹¶å…±äº«æˆ‘ä»¬çš„åº”ç”¨ç¨‹åº

> æ„Ÿè°¢ä½ é˜…è¯»æˆ‘çš„åšå®¢:)å…³æ³¨æ›´å¤šï¼Œåœ¨è¯„è®ºä¸­å‘æˆ‘é—®å¥½ï¼Œè¿™ç»™äº†æˆ‘å†™æ›´å¤šåšå®¢çš„é¼“åŠ±:)ç¥ä½ æœ‰ç¾å¥½çš„ä¸€å¤©:)

[](/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb) [## Mlearning.ai æäº¤å»ºè®®

### å¦‚ä½•æˆä¸º Mlearning.ai ä¸Šçš„ä½œå®¶

medium.com](/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb)