<html>
<head>
<title>Anomaly Detection in Residual Gas Analyzer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">残余气体分析仪中的异常检测</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/anomaly-detection-in-ar-sensitivity-ac01ac7edbc9?source=collection_archive---------4-----------------------#2020-12-30">https://medium.com/mlearning-ai/anomaly-detection-in-ar-sensitivity-ac01ac7edbc9?source=collection_archive---------4-----------------------#2020-12-30</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/67b52f886983073501809bb2da9b4b38.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/0*W8fpNR9h42rcoD4q"/></div><figcaption class="il im et er es in io bd b be z dx">Gas Analyzer machine</figcaption></figure><p id="059f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">星期天早上，我接到一个电话，是我在部队服役时认识的一个朋友打来的。他问我:“你对线性回归有多熟悉？我的硕士论文需要帮助:(”</p><p id="1f9b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">喂？我当然知道线性回归！</p><h1 id="de12" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">动机:</h1><p id="faaf" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">设备异常检测系统的开发可以有助于在整个系统故障发生之前识别错误的来源，并且可以区别于被动维护，在被动维护中，维护工程师仅在机器异常时根据机器状态来诊断故障。</p><p id="7a66" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">该项目的目标是避免半导体物理气相沉积(PVD，physical vapor deposition)工艺设备中使用的残余气体分析仪意外停机。这样做的好处不仅可以一天24小时监控，减少生产机器停止测试机器以获得生产力。</p><p id="cfb0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">根据经验，当来自残余气体分析仪的Ar灵敏度信号变弱时，这意味着异常发生。<strong class="ir hi">统计学上的说法，我们想定义一个可以在残余气体分析仪出现故障时立即识别故障的指标。</strong></p><h1 id="1b37" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">数据:</h1><figure class="kr ks kt ku fd ii er es paragraph-image"><div class="er es kq"><img src="../Images/d9f0d9b1d98616aa4de9c2c0e68c1903.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*c6UH5XDjEzIJYvSn51TqQw.png"/></div><figcaption class="il im et er es in io bd b be z dx">Lifetime verse Ar sensitivity</figcaption></figure><p id="1445" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">根据数据，我们可以看到当寿命&gt; 2547时，出现异常信号。</p><figure class="kr ks kt ku fd ii er es paragraph-image"><div class="er es kv"><img src="../Images/567a4974a9464546265fce0df3ff23ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*c1sz_jjMzR9t78X63aeh3w.png"/></div></figure><h1 id="7e5f" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">移动窗口:</h1><p id="67bb" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">我们首先使用截断回归的斜率来识别点。也就是说，我们首先将生命期作为移动窗口，每个窗口包含50个生命期，窗口每次向右移动20个生命期。</p><p id="172b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">因此，第一个窗口的寿命在1到51之间，第二个窗口的寿命在21到71之间，依此类推。在本例中，我们创建了185个窗口。</p></div><div class="ab cl kw kx go ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ha hb hc hd he"><h1 id="d116" class="jn jo hh bd jp jq ld js jt ju le jw jx jy lf ka kb kc lg ke kf kg lh ki kj kk bi translated">方法1:原始数据中的线性回归斜率模式</h1><p id="6dc2" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">然后我们从ar灵敏度和寿命拟合185线性回归。</p><figure class="kr ks kt ku fd ii er es paragraph-image"><div class="er es li"><img src="../Images/daf3e5e99b54cda053098d6e13915eee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/format:webp/1*04QehXmQZsg4aFyFyYX3dw.png"/></div><figcaption class="il im et er es in io bd b be z dx">Linear regression between 2000 to 2051</figcaption></figure><p id="f603" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们计算了185个窗户的斜率。下图是每条回归线的斜率。</p><figure class="kr ks kt ku fd ii er es paragraph-image"><div class="er es lj"><img src="../Images/33b51e4ae4679d60fc8b7306029da790.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*57f-a_FociBdHmSVRESNBg.png"/></div></figure><p id="8557" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">答对了！我们发现了这个规律:如果斜率的方差很小，那么这就是异常！</strong></p><h1 id="ccdd" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">但是……</h1><p id="6f2b" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">在这种情况下，它还没有结束。我们仍然需要</p><ol class=""><li id="1e53" class="lk ll hh ir b is it iw ix ja lm je ln ji lo jm lp lq lr ls bi translated">定义“多小才算小？”</li><li id="dbe3" class="lk ll hh ir b is lt iw lu ja lv je lw ji lx jm lp lq lr ls bi translated">定义寿命间隔的长度，并计算间隔中的方差</li></ol><p id="0b33" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">有什么聪明的方法可以避免这种情况吗？是啊！当然</p><h1 id="823d" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">方法2:对转换后的数据进行回归</h1><p id="17ab" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">Ar灵敏度的尺度太小了！让我们取对数10。</p><figure class="kr ks kt ku fd ii er es paragraph-image"><div class="er es ly"><img src="../Images/451c262a1e2aed09ed862b0217362902.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/1*G41EVgujV7OaMntvT2yw8g.png"/></div></figure><p id="983f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">是啊！这里的模式非常清楚。异常是发散的！</p><p id="f8bf" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">然后，我们根据预定义的窗口拟合185°回归线，并计算每个模型的SSE(误差平方和)。散点图如下。</p><figure class="kr ks kt ku fd ii er es paragraph-image"><div class="er es lz"><img src="../Images/36ef713f36f83e96bee387a1412935ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/format:webp/1*VpnBaW_VFDYT-QUMY2t7AQ.png"/></div></figure><p id="992d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我创建了一个表格来寻找SSE的最佳截止值(正值表示异常)</p><ul class=""><li id="59b9" class="lk ll hh ir b is it iw ix ja lm je ln ji lo jm ma lq lr ls bi translated">精度:σ真阳性/σ预测条件阳性</li><li id="11a9" class="lk ll hh ir b is lt iw lu ja lv je lw ji lx jm ma lq lr ls bi translated">回忆:σ真阳性/σ预测阳性</li><li id="f28e" class="lk ll hh ir b is lt iw lu ja lv je lw ji lx jm ma lq lr ls bi translated">准确度:σ真阳性+σ真阴性/σ总人口</li><li id="d9aa" class="lk ll hh ir b is lt iw lu ja lv je lw ji lx jm ma lq lr ls bi translated">f1-分数:2精确回忆/精确+回忆</li></ul><p id="ff5c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">细节可以参见<a class="ae mb" href="https://en.wikipedia.org/wiki/Confusion_matrix" rel="noopener ugc nofollow" target="_blank">混淆矩阵</a></p><figure class="kr ks kt ku fd ii er es paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="er es mc"><img src="../Images/5a8199134a17bc55651ab7add87d1ce8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qM78svfPxqQSGSd_CLPW9g.png"/></div></div></figure><p id="a057" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这里我们可以看到，当SSE截止值为0.075时，性能最佳。</p><h1 id="a25c" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">结论</h1><p id="1950" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">在实践中，我们如何检测异常？</p><ol class=""><li id="aba9" class="lk ll hh ir b is it iw ix ja lm je ln ji lo jm lp lq lr ls bi translated">通过取-log10转换Ar灵敏度</li><li id="14b9" class="lk ll hh ir b is lt iw lu ja lv je lw ji lx jm lp lq lr ls bi translated">每50个生命周期拟合一次回归</li><li id="a2c8" class="lk ll hh ir b is lt iw lu ja lv je lw ji lx jm lp lq lr ls bi translated">从模型中计算上证指数</li><li id="62f9" class="lk ll hh ir b is lt iw lu ja lv je lw ji lx jm lp lq lr ls bi translated">如果上证&gt; 0.075，则止损。把它定义为异常点！</li></ol><div class="mh mi ez fb mj mk"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="ml ab dw"><div class="mm ab mn cl cj mo"><h2 class="bd hi fi z dy mp ea eb mq ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="mr l"><h3 class="bd b fi z dy mp ea eb mq ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="ms l"><p class="bd b fp z dy mp ea eb mq ed ef dx translated">medium.com</p></div></div><div class="mt l"><div class="mu l mv mw mx mt my ij mk"/></div></div></a></div></div></div>    
</body>
</html>