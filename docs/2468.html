<html>
<head>
<title>Building a web3 job scraper in python.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用python构建web3作业抓取器。</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/building-a-web3-job-scraper-in-python-da034f05f568?source=collection_archive---------5-----------------------#2022-05-06">https://medium.com/mlearning-ai/building-a-web3-job-scraper-in-python-da034f05f568?source=collection_archive---------5-----------------------#2022-05-06</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/6a7e6eb06fba8c04db79f65b2bca68aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ORSR6iXyclzphoIc"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Photo by <a class="ae it" href="https://unsplash.com/@theshubhamdhage?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Shubham Dhage</a> on <a class="ae it" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="fa1a" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">Web3是最受欢迎的新词之一，我猜是最近要进入的行业。我曾在家族理财室的it部门工作过，觉得参与其中很有收获。</p><p id="5662" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">不幸的是，我目前失业了，因为我所在的家族办公室不适合我。因此，作为一名自学成才的程序员和黑客，我认为尝试建立一个web3工作抓取器是一个好主意，因为这将允许我以更快的方式访问工作，并找到最适合我的行业和专业知识的工作。</p><p id="07c5" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这里有一个到Github回购的链接。</p><p id="b2f5" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我要完全归功于这个项目的原创者，PythonEatsSquirrel。确实为谁创造了工作机会。我修改了这段代码，让它为我工作，允许我从一个定制的网站上抓取工作，在这个例子中，这个网站是web3 jobs。然而，如果你想要原始视频的链接，<a class="ae it" href="https://www.youtube.com/watch?v=070e7nMYt6c" rel="noopener ugc nofollow" target="_blank">给你。</a></p><p id="29eb" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在经历这个过程时，要记住的主要事情是提取、转换和学习。</p><p id="c613" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这个项目使用的外部库是:<br/>-beautiful soup<br/>-Pandas<br/>-Requests</p><p id="2b8f" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们想从创建一个名为extract的函数开始，它接受一个名为page的参数。</p><p id="a98e" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">好的，首先，你要收集你抓取的页面的URL，但是把它转换成f字符串，这样你就可以遍历你需要抓取的不同页面。<br/>您还想找出您的用户代理，以确保它在您的机器上正确运行。这对于每个人来说是不同的，但是在google中输入我的用户代理应该对你有用。然后，您希望获取一个请求变量，该变量包含标题和URL。在此基础上，我们将使用现在调用beautiful soup、调用r.content和调用HTML解析器的一个库。你想确保这个变量返回soup您可以在下面找到这个函数的代码。</p><pre class="js jt ju jv fd jw jx jy jz aw ka bi"><span id="e11b" class="kb kc hh jx b fi kd ke l kf kg">def extract(page):</span><span id="8e6f" class="kb kc hh jx b fi kh ke l kf kg">headers = {"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.88 Safari/537.36"}</span><span id="8f84" class="kb kc hh jx b fi kh ke l kf kg">url =  f"https://web3.career/marketing+remote-jobs?page={page}"</span><span id="d558" class="kb kc hh jx b fi kh ke l kf kg">r = requests.get(url,headers)</span><span id="0d08" class="kb kc hh jx b fi kh ke l kf kg">soup = BeautifulSoup(r.content, "html.parser")</span><span id="bf10" class="kb kc hh jx b fi kh ke l kf kg">return soup</span></pre><p id="6d81" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这是我们转移到代码库的转换方面的地方。<br/>在这里，我们将创建一个名为transform的新函数，并将来自extract函数的汤传递给它。这是事情变得棘手的地方，对您的代码来说会有所不同。您将需要进入正在运行的浏览器的调试工具，并开始读取HTML。来看看你需要你的工作伙伴阅读的代码。它很可能是一个div，其中包含了您正在寻找的所有招聘信息。然后，您需要扫描您正在寻找的工作角色的各个方面，例如工作名称和工资，并将其存储在一个变量中。这个变量的最后一步是将每次迭代的所有内容存储在一个字典中，并将其添加到您的作业列表中。</p><pre class="js jt ju jv fd jw jx jy jz aw ka bi"><span id="e4e4" class="kb kc hh jx b fi kd ke l kf kg">def transform(soup):</span><span id="b57b" class="kb kc hh jx b fi kh ke l kf kg">divs = soup.find_all('div', class_="d-flex align-middle")</span><span id="a9fc" class="kb kc hh jx b fi kh ke l kf kg">for item in divs:</span><span id="13f7" class="kb kc hh jx b fi kh ke l kf kg">title = item.find('a').text.strip()</span><span id="2ac5" class="kb kc hh jx b fi kh ke l kf kg">company = item.find('div', class_="mt-auto d-block d-md-flex").text.strip()</span><span id="2990" class="kb kc hh jx b fi kh ke l kf kg">try:</span><span id="f90b" class="kb kc hh jx b fi kh ke l kf kg">salary = item.find('p', class_="text-salary").text.strip()</span><span id="390b" class="kb kc hh jx b fi kh ke l kf kg">except:</span><span id="14ce" class="kb kc hh jx b fi kh ke l kf kg">salary = ''</span><span id="e12f" class="kb kc hh jx b fi kh ke l kf kg">job = {</span><span id="47e6" class="kb kc hh jx b fi kh ke l kf kg">"title":title,</span><span id="112c" class="kb kc hh jx b fi kh ke l kf kg">"company":company,</span><span id="fa40" class="kb kc hh jx b fi kh ke l kf kg">"salary":salary</span><span id="7302" class="kb kc hh jx b fi kh ke l kf kg">}</span><span id="2901" class="kb kc hh jx b fi kh ke l kf kg">joblist.append(job)</span><span id="2580" class="kb kc hh jx b fi kh ke l kf kg">return</span></pre><p id="b734" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">该项目的学习方面相对简单。您只需创建存储所有作业的作业列表，并对其进行格式化，使其适合pandas数据框。</p><div class="ki kj ez fb kk kl"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="km ab dw"><div class="kn ab ko cl cj kp"><h2 class="bd hi fi z dy kq ea eb kr ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="ks l"><h3 class="bd b fi z dy kq ea eb kr ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="kt l"><p class="bd b fp z dy kq ea eb kr ed ef dx translated">medium.com</p></div></div><div class="ku l"><div class="kv l kw kx ky ku kz in kl"/></div></div></a></div></div></div>    
</body>
</html>