# 堆叠适合照片

> 原文：<https://medium.com/mlearning-ai/stacking-fits-photos-a25e7c002ed3?source=collection_archive---------0----------------------->

无论你是纯粹为了娱乐而拍摄夜空图像的业余天文学家，还是筛选大量数据以研究各种星云恒星形成或检查年轻恒星物体(YSO 的)的天体物理学家，你都将使用一种对创建可用图像至关重要的技术。这种技术被称为堆叠。

1.  背景
2.  在 python 中使用它
3.  未来作品

**背景**

你可能会问，堆积到底是什么？堆叠就是它听起来的样子。你对你的物体拍摄了大量的照片，在这种情况下，它将是马头星云，并将这些图像叠加在一起。我们这样做的原因是为了尽可能减少图像中的噪声。通过这样做，我们的对象的图像随着我们覆盖的每个堆栈而变得更加清晰，从而有利于提高信噪比。

![](img/0698d6fff55dd2a15a999ae37f27586b.png)

M31 also known as the HorseHead Nebula.

天文学家、天体物理学家、业余天文学家和业余爱好者都使用一种特殊的传感器，使现在的摄影师能够很好地拍摄夜晚。CCD 或电荷耦合器件接收电信号并输出图像或视频。这是由于我们的电磁波谱发出的不同波长的光谱。天文学家和天体物理学家在大多数(如果不是所有的话)当前的卫星上使用相同的设备，这取决于你试图捕捉的电磁波谱的部分。然而，这些设计精美的机器并非没有缺陷。在这种情况下，缺陷是天体的每张照片中存在的噪声量。这就是堆叠成为关键的地方。

![](img/0ab5f9267508b88f9e4f2760af0f9d65.png)

A stacked image of Jupiter showing how noise is being cancelled out. Each image iteration showing the improvement of the image via stacking.

**Python 和 Astropy 的使用:**

在当今时代，天文学家和天体物理学家都使用数据科学作为工具来改进模型，解释数据，并以更大的信心分析我们的宇宙。使用 AstroPython 的教程查看和操作 FITS 图像。由 Wikipedia 定义的 FITS 图像是用于定义数字文件格式的开放标准，该格式对于存储、传输和处理格式化为多维数组的数据是有用的。天文学家利用这些文件从他们感兴趣的物体上获取信息。在这种情况下，我们将会看到马头星云。

![](img/dcb93b73f2ecaa349fb6deefd99f10f3.png)

FITS image of the sombrero galaxy.

首先，分配必要的包来处理图像。为此，你需要导入包 numpy、astropy、plyplt、fits 和 LogNorm，如下所示。

然后，我们从您的本地计算机或外部来源获取想要处理的图像。我们将它调用到一个变量中，以便于调用这个图像。一旦我们有了我们的图像，我们需要打开我们的图像，以便能够获取包含在文件主要部分的数组。一旦我们有了图像的数组，我们可以使用 **imshow 来绘制数组。Imshow** 采用 2D 阵列并输出 2D 图像。下图显示了马头星云的梯度。

![](img/71057e602fbffac93c168b8069fbc045.png)

The HorseHead Nebula produced from a FITS file. d

这幅图像给了我们许多关于马头星云的细节，包括尘埃云的转变，形成恒星的气体，以及尘埃云在哪里停止。这幅图像对于分析这个特定星云内发生的事情非常有用，但是噪声仍然存在于这幅图像中。现在，我们可以叠加图像，以进一步降低噪声。接下来，通过使用 for 循环的能力，我们可以开始一次又一次地堆叠图像，将它们重叠尽可能多的次数，最终生成一个文件。在这个例子中，我使用了 5 个相互堆叠的图像，然后再一次提取数组数据。

一旦我有了这些连接起来的数据，我就可以对每个图像的所有数组列表求和，并使用另一个 for 循环将所有数组组合成一个最终图像。

在我们绘制这个图像之前，我们需要通过绘制堆叠的最终图像的直方图，找出最佳的拉伸，也就是如何最好地适合页面上的图像。我可以看到我们的范围是从 2000 到 3000 的颜色缩放，并将使用这些数据来绘制最终的图像。这就是我们的最终图像，它以清晰简洁的方式展示了这个星云的许多特征。

![](img/fbd81fa5f60b7b0e9cd425f92440c35d.png)

现在我们用 2000 到 3000 的色阶参数来绘制最终的图像。

![](img/73bd8fe7bac2b6d3f921d62db1fe06a4.png)

**未来作品:**

在一个即将到来的项目中，我将使用这种方法来叠加小麦哲伦星云(SMC)的图像，这是我在论文中已经分类的几个 YSO 居住的地方。这将有助于显著降低噪声量，以获得 SMC 中感兴趣区域的最佳拟合图像。这将使我能够提取必要的信息来绘制近红外光谱，并正确地确定每个 YSO 的恒星特征。未完待续…