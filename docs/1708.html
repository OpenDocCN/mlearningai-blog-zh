<html>
<head>
<title>Document Scanner using OpenCV — with source code — Easy way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用OpenCV的文档扫描仪——带源代码——简单易行</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/document-scanner-using-opencv-with-source-code-easiest-way-e0543e1f3a72?source=collection_archive---------3-----------------------#2022-01-22">https://medium.com/mlearning-ai/document-scanner-using-opencv-with-source-code-easiest-way-e0543e1f3a72?source=collection_archive---------3-----------------------#2022-01-22</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="d4ef" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所以，伙计们，在今天的博客中，我们将看到如何使用OpenCV构建一个非常简单而强大的文档扫描仪。这是我最喜欢的项目之一，因为它简单而强大。所以没有任何进一步的原因。</p><p id="2785" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">在这里阅读带源代码的整篇文章—</strong><a class="ae jc" href="https://machinelearningprojects.net/document-scanner-using-opencv/" rel="noopener ugc nofollow" target="_blank">https://machine learning projects . net/document-scanner-using-opencv/</a></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/ee9d089f4d836b9519c064c0bc558512.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QO8BKIE9gFr3kUb3.png"/></div></div></figure><h1 id="64ea" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">让我们开始吧…</h1><h2 id="5ebe" class="kn jq hh bd jr ko kp kq jv kr ks kt jz ip ku kv kd it kw kx kh ix ky kz kl la bi translated">使用OpenCV的文档扫描仪的代码…</h2><pre class="je jf jg jh fd lb lc ld le aw lf bi"><span id="9713" class="kn jq hh lc b fi lg lh l li lj">import cv2<br/>import imutils<br/>from skimage.filters import threshold_local<br/>from pyimagesearch.transform import four_point_transform<br/>import numpy as np<br/><br/>img_path = 'b.jpg'<br/>big_img = cv2.imread(img_path)<br/>cv2.imshow('org img',big_img)<br/>cv2.waitKey(0)<br/><br/><br/>ratio = big_img.shape[0] / 500.0<br/>org = big_img.copy()<br/>img = imutils.resize(big_img, height = 500)<br/>cv2.imshow('resizing',img)<br/>cv2.waitKey(0)<br/><br/><br/>gray_img = cv2.cvtColor(img.copy(),cv2.COLOR_BGR2GRAY)<br/>blur_img = cv2.GaussianBlur(gray_img,(5,5),0)<br/>edged_img = cv2.Canny(blur_img,75,200)<br/>cv2.imshow('edged',edged_img)<br/>cv2.waitKey(0)<br/><br/><br/>cnts,_ = cv2.findContours(edged_img.copy(),cv2.RETR_LIST,cv2.CHAIN_APPROX_SIMPLE)<br/>cnts = sorted(cnts,key=cv2.contourArea,reverse=True)[:5]<br/>for c in cnts:<br/>    peri = cv2.arcLength(c,True)<br/>    approx = cv2.approxPolyDP(c,0.02*peri,True)<br/>    if len(approx)==4:<br/>        doc = approx<br/>        break<br/>        <br/>        <br/>p=[]<br/>for d in doc:<br/>    tuple_point = tuple(d[0])<br/>    cv2.circle(img,tuple_point,3,(0,0,255),4)<br/>    p.append(tuple_point)<br/>cv2.imshow('Corner points detected',img)<br/>cv2.waitKey(0)<br/><br/><br/>warped = four_point_transform(org, doc.reshape(4, 2) * ratio)<br/>warped = cv2.cvtColor(warped, cv2.COLOR_BGR2GRAY)<br/>cv2.imshow("Warped", imutils.resize(warped, height = 650))<br/>cv2.waitKey(0)<br/><br/><br/>T = threshold_local(warped, 11, offset = 10, method = "gaussian")<br/>warped = (warped &gt; T).astype("uint8") * 255<br/>cv2.imshow("Scanned", imutils.resize(warped, height = 650))<br/>cv2.waitKey(0)<br/>cv2.destroyAllWindows()</span></pre><ul class=""><li id="8543" class="lk ll hh ig b ih ii il im ip lm it ln ix lo jb lp lq lr ls bi translated">第1–5行—导入所需的库。</li><li id="3da2" class="lk ll hh ig b ih lt il lu ip lv it lw ix lx jb lp lq lr ls bi translated">第7–10行—读取并显示输入图像。</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/5426a75b1885579161bba47ded5a2122.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lTjrfXJYtnAhVYX6.png"/></div></div></figure><ul class=""><li id="e0ba" class="lk ll hh ig b ih ii il im ip lm it ln ix lo jb lp lq lr ls bi translated">第13行——通过将我们的图像高度除以500得到比率。我们将在流程中进一步使用该比率。</li><li id="607f" class="lk ll hh ig b ih lt il lu ip lv it lw ix lx jb lp lq lr ls bi translated">第14行—制作原始图像的副本。</li><li id="0fce" class="lk ll hh ig b ih lt il lu ip lv it lw ix lx jb lp lq lr ls bi translated">第15–17行—调整图像大小，高度设为500，保持纵横比不变。</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/800f63c40d5a42bdc2042bb8ccac6dd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LLNSXCo6ho6I3bTo.png"/></div></div></figure><ul class=""><li id="4e5f" class="lk ll hh ig b ih ii il im ip lm it ln ix lo jb lp lq lr ls bi translated">第20行——这里我们将BGR图像转换成灰度图像。</li><li id="e1bd" class="lk ll hh ig b ih lt il lu ip lv it lw ix lx jb lp lq lr ls bi translated">第21行——这里我们使用<a class="ae jc" href="https://en.wikipedia.org/wiki/Gaussian_blur#:~:text=In%20image%20processing%2C%20a%20Gaussian,image%20noise%20and%20reduce%20detail." rel="noopener ugc nofollow" target="_blank">高斯模糊</a>来去除图像中的高斯噪声。</li><li id="7b26" class="lk ll hh ig b ih lt il lu ip lv it lw ix lx jb lp lq lr ls bi translated">第22行——在这一步，我们简单地使用<a class="ae jc" href="https://docs.opencv.org/3.4/da/d22/tutorial_py_canny.html" rel="noopener ugc nofollow" target="_blank"> Canny边缘检测</a>在图像中找到边缘。</li><li id="9dcc" class="lk ll hh ig b ih lt il lu ip lv it lw ix lx jb lp lq lr ls bi translated">第23 -24行—显示图像。</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/ece5df57554e0dbfb7cb6089073425ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BiMXrCDXtL8pL6Kx.png"/></div></div></figure><ul class=""><li id="6d1f" class="lk ll hh ig b ih ii il im ip lm it ln ix lo jb lp lq lr ls bi translated">第27行—查找图像中的所有轮廓</li><li id="210c" class="lk ll hh ig b ih lt il lu ip lv it lw ix lx jb lp lq lr ls bi translated">第28行-根据等高线面积对等高线进行降序排序，只取前5行。</li><li id="78c1" class="lk ll hh ig b ih lt il lu ip lv it lw ix lx jb lp lq lr ls bi translated">第29–34行—遍历轮廓并使用<a class="ae jc" href="https://docs.opencv.org/4.5.2/d3/dc0/group__imgproc__shape.html#ga0012a5fdaea70b8a9970165d98722b4c" rel="noopener ugc nofollow" target="_blank"> cv2.approxPolyDP() </a>找到具有4条边的轮廓。</li><li id="f312" class="lk ll hh ig b ih lt il lu ip lv it lw ix lx jb lp lq lr ls bi translated">第37–43行—我们只是在文档的角上画点/圈。这些是我们在轮廓检测步骤中使用<a class="ae jc" href="https://docs.opencv.org/3.4/d4/d73/tutorial_py_contours_begin.html" rel="noopener ugc nofollow" target="_blank"> CHAIN_APPROX_SIMPLE </a>方法得到的点。</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/407f7a58e907e7142815214a93dd1e22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ECgWJ7Cnj4LjQ6ry.png"/></div></div></figure><ul class=""><li id="ff82" class="lk ll hh ig b ih ii il im ip lm it ln ix lo jb lp lq lr ls bi translated">第46–49行——我们正在对图像应用<a class="ae jc" href="https://www.pyimagesearch.com/2014/08/25/4-point-opencv-getperspective-transform-example/" rel="noopener ugc nofollow" target="_blank">四点变换</a>。这意味着我们将只从图像中提取文档。或者我们也可以说，我们只想提取四个点组成的矩形。</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/46294e22d18d26b1effb65f33a3cdfbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_iyhKwFsI9BVbV-5.png"/></div></div></figure><ul class=""><li id="6fb2" class="lk ll hh ig b ih ii il im ip lm it ln ix lo jb lp lq lr ls bi translated">第52–55行—对图像进行阈值处理，给它一种黑白的感觉。</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/ee9d089f4d836b9519c064c0bc558512.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QO8BKIE9gFr3kUb3.png"/></div></div></figure><ul class=""><li id="c180" class="lk ll hh ig b ih ii il im ip lm it ln ix lo jb lp lq lr ls bi translated">第56行—销毁所有打开的窗口。</li></ul><p id="02a7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果对使用OpenCV的文档扫描仪有任何疑问，请通过电子邮件或LinkedIn联系我。</p><p id="ceac" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">如需进一步的代码解释和源代码，请访问此处</strong>—<a class="ae jc" href="https://machinelearningprojects.net/document-scanner-using-opencv/" rel="noopener ugc nofollow" target="_blank">https://machine learning projects . net/document-scanner-using-opencv/</a></p><p id="8998" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="ly">这就是我写给这个博客的全部内容，感谢你的阅读，我希望你在阅读完这篇文章后，能有所收获，直到下一次👋… </em></p><p id="fa49" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="ly">看我以前的帖子:</em> </strong> <a class="ae jc" href="https://machinelearningprojects.net/face-landmarks-detection-using-dlib/" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi"> <em class="ly">人脸地标检测使用DLIB </em> </strong> </a></p><p id="7b94" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">查看我的其他</strong> <a class="ae jc" href="https://machinelearningprojects.net/machine-learning-projects/" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi">机器学习项目</strong></a><strong class="ig hi"/><a class="ae jc" href="https://machinelearningprojects.net/deep-learning-projects/" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi">深度学习项目</strong></a><strong class="ig hi"/><a class="ae jc" href="https://machinelearningprojects.net/opencv-projects/" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi">计算机视觉项目</strong></a><strong class="ig hi"/><a class="ae jc" href="https://machinelearningprojects.net/nlp-projects/" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi">NLP项目</strong></a><strong class="ig hi"/><a class="ae jc" href="https://machinelearningprojects.net/flask-projects/" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi">烧瓶项目</strong> </a> <strong class="ig hi"> at</strong></p><div class="lz ma ez fb mb mc"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="md ab dw"><div class="me ab mf cl cj mg"><h2 class="bd hi fi z dy mh ea eb mi ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="mj l"><h3 class="bd b fi z dy mh ea eb mi ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="mk l"><p class="bd b fp z dy mh ea eb mi ed ef dx translated">medium.com</p></div></div><div class="ml l"><div class="mm l mn mo mp ml mq jn mc"/></div></div></a></div></div></div>    
</body>
</html>