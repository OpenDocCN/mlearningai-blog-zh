<html>
<head>
<title>How to Encode Categorical Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何对分类数据进行编码</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/category-encoders-c2a9bb192f0a?source=collection_archive---------0-----------------------#2021-06-11">https://medium.com/mlearning-ai/category-encoders-c2a9bb192f0a?source=collection_archive---------0-----------------------#2021-06-11</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="38f6" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">任务:试验和实现不同类型的编码来处理分类数据</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/ca624e7ec25af41651f71cd9567f105b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8hqUML7BBRIsDfCB"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Image Ref: <a class="ae jm" href="https://unsplash.com/photos/F79gXCckUUY" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="de94" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">在这篇博客中，我们将探索和实现:</h2><p id="d9db" class="pw-post-body-paragraph kl km hh kn b ko kp ii kq kr ks il kt jy ku kv kw kc kx ky kz kg la lb lc ld ha bi translated">一个热编码使用:</p><ul class=""><li id="9085" class="le lf hh kn b ko lg kr lh jy li kc lj kg lk ld ll lm ln lo bi translated">Python的类别编码库</li><li id="155f" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">Sklearn预处理</li><li id="d782" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">Python的get_dummies</li></ul><p id="48da" class="pw-post-body-paragraph kl km hh kn b ko lg ii kq kr lh il kt jy lu kv kw kc lv ky kz kg lw lb lc ld ha bi translated">二进制编码</p><p id="df28" class="pw-post-body-paragraph kl km hh kn b ko lg ii kq kr lh il kt jy lu kv kw kc lv ky kz kg lw lb lc ld ha bi translated">频率编码</p><p id="e92b" class="pw-post-body-paragraph kl km hh kn b ko lg ii kq kr lh il kt jy lu kv kw kc lv ky kz kg lw lb lc ld ha bi translated">标签编码</p><p id="a046" class="pw-post-body-paragraph kl km hh kn b ko lg ii kq kr lh il kt jy lu kv kw kc lv ky kz kg lw lb lc ld ha bi translated">顺序编码</p><h2 id="4d1b" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">什么是分类数据</h2><p id="6711" class="pw-post-body-paragraph kl km hh kn b ko kp ii kq kr ks il kt jy ku kv kw kc kx ky kz kg la lb lc ld ha bi translated">分类数据是一种用于对具有相似特征的信息进行分组的数据，而数值数据是一种以数字形式表达信息的数据。</p><p id="2269" class="pw-post-body-paragraph kl km hh kn b ko lg ii kq kr lh il kt jy lu kv kw kc lv ky kz kg lw lb lc ld ha bi translated">例如:性别</p><h2 id="88aa" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">为什么我们需要编码？</h2><ul class=""><li id="e7b6" class="le lf hh kn b ko kp kr ks jy lx kc ly kg lz ld ll lm ln lo bi translated">大多数机器学习算法不能处理分类变量，除非我们将它们转换成数值。</li><li id="6ed0" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">许多算法的性能甚至因分类变量的编码方式而异。</li></ul><h2 id="d402" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">分类变量可以分为两类:</h2><ul class=""><li id="fa10" class="le lf hh kn b ko kp kr ks jy lx kc ly kg lz ld ll lm ln lo bi translated">标称值(无特定顺序)</li><li id="ead0" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">序数(有些是有序的)</li></ul><p id="a75f" class="pw-post-body-paragraph kl km hh kn b ko lg ii kq kr lh il kt jy lu kv kw kc lv ky kz kg lw lb lc ld ha bi translated">我们还将参考一个备忘单，显示何时使用哪种类型的编码。</p><h2 id="9e9e" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">方法:1使用Python的类别编码器库</h2><p id="aeaf" class="pw-post-body-paragraph kl km hh kn b ko kp ii kq kr ks il kt jy ku kv kw kc kx ky kz kg la lb lc ld ha bi translated">category_encoders是一个了不起的python库，它提供了15种不同的编码方案。</p><h2 id="c213" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">以下是15种编码类型的列表:</h2><ul class=""><li id="7bd4" class="le lf hh kn b ko kp kr ks jy lx kc ly kg lz ld ll lm ln lo bi translated">一个热编码</li><li id="1157" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">标签编码</li><li id="1a10" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">顺序编码</li><li id="bf31" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">赫尔默特编码</li><li id="2f31" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">二进制编码</li><li id="7b7a" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">频率编码</li><li id="ec18" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">平均编码</li><li id="9324" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">证据权重编码</li><li id="c878" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">概率比编码</li><li id="7be6" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">哈希编码</li><li id="ef06" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">后向差分编码</li><li id="113d" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">省略一个编码</li><li id="c4d4" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">詹姆斯-斯坦编码</li><li id="b108" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">m估计编码</li><li id="7d07" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">温度计编码器</li></ul><h2 id="93fb" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">导入库</h2><pre class="ix iy iz ja fd ma mb mc md aw me bi"><span id="2f73" class="jn jo hh mb b fi mf mg l mh mi">import pandas as pd <br/>import sklearn</span></pre><p id="b884" class="pw-post-body-paragraph kl km hh kn b ko lg ii kq kr lh il kt jy lu kv kw kc lv ky kz kg lw lb lc ld ha bi translated">pip安装类别_编码器</p><pre class="ix iy iz ja fd ma mb mc md aw me bi"><span id="1c1d" class="jn jo hh mb b fi mf mg l mh mi">import category_encoders as ce</span></pre><h2 id="b968" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">创建数据框架</h2><pre class="ix iy iz ja fd ma mb mc md aw me bi"><span id="6257" class="jn jo hh mb b fi mf mg l mh mi">data = pd.DataFrame({ 'gender' : ['Male', 'Female', 'Male', 'Female', 'Female'],<br/>                      'class' : ['A','B','C','D','A'],<br/>                      'city' : ['Delhi','Gurugram','Delhi','Delhi','Gurugram'] })</span><span id="9b03" class="jn jo hh mb b fi mj mg l mh mi">data.head()</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl mk"><img src="../Images/432aea9685dc12b5550ab49ad640cf82.png" data-original-src="https://miro.medium.com/v2/format:webp/1*L1xfAaH5gshJ4KgWImMS5w.png"/></div></figure><h2 id="924f" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">通过category_encoder实现一键编码</h2><p id="718e" class="pw-post-body-paragraph kl km hh kn b ko kp ii kq kr ks il kt jy ku kv kw kc kx ky kz kg la lb lc ld ha bi translated">在该方法中，每个类别被映射到一个向量，该向量包含1和0，表示该特征的存在或不存在。向量的数量取决于特征类别的数量。</p><p id="637b" class="pw-post-body-paragraph kl km hh kn b ko lg ii kq kr lh il kt jy lu kv kw kc lv ky kz kg lw lb lc ld ha bi translated">创建一个Hot编码器的对象</p><pre class="ix iy iz ja fd ma mb mc md aw me bi"><span id="5410" class="jn jo hh mb b fi mf mg l mh mi">ce_OHE = ce.OneHotEncoder(cols=['gender','city']) <br/><br/>ce_OHE</span><span id="6a58" class="jn jo hh mb b fi mj mg l mh mi">OneHotEncoder(cols=['gender', 'city'])</span><span id="2ac8" class="jn jo hh mb b fi mj mg l mh mi">data1 = ce_OHE.fit_transform(data)<br/>data1.head()</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl mk"><img src="../Images/067b3e5a311fb0b2103060ba4fd3101a.png" data-original-src="https://miro.medium.com/v2/format:webp/1*liI6CsMitXH6ZbDEfN_7pA.png"/></div></figure><h2 id="4901" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">二进制编码</h2><p id="30dd" class="pw-post-body-paragraph kl km hh kn b ko kp ii kq kr ks il kt jy ku kv kw kc kx ky kz kg la lb lc ld ha bi translated">二进制编码将类别转换为二进制数字。每个二进制数字创建一个特征列。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/6362d2ab5f93d8b9d0957028de972b05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Lf89kI3SX5JJVm3N"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx"><a class="ae jm" href="https://towardsdatascience.com/all-about-categorical-variable-encoding-305f3361fd02" rel="noopener" target="_blank">Image Ref</a></figcaption></figure><pre class="ix iy iz ja fd ma mb mc md aw me bi"><span id="2ba3" class="jn jo hh mb b fi mf mg l mh mi">ce_be = ce.BinaryEncoder(cols=['class']);<br/><br/># transform the data <br/>data_binary = ce_be.fit_transform(data["class"]);</span></pre><p id="3114" class="pw-post-body-paragraph kl km hh kn b ko lg ii kq kr lh il kt jy lu kv kw kc lv ky kz kg lw lb lc ld ha bi translated">打印数据</p><pre class="ix iy iz ja fd ma mb mc md aw me bi"><span id="c555" class="jn jo hh mb b fi mf mg l mh mi">print(data["class"])<br/>data_binary</span><span id="7489" class="jn jo hh mb b fi mj mg l mh mi">0    A<br/>1    B<br/>2    C<br/>3    D<br/>4    A<br/>Name: class, dtype: object</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl mk"><img src="../Images/88a61dadd328f280519ac691af6b3557.png" data-original-src="https://miro.medium.com/v2/format:webp/1*M8JYb3NPNaFP12s2Kqjf_w.png"/></div></figure><p id="857f" class="pw-post-body-paragraph kl km hh kn b ko lg ii kq kr lh il kt jy lu kv kw kc lv ky kz kg lw lb lc ld ha bi translated">类似地，该库还提供了其他14种编码类型。</p><h2 id="2b1f" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">方法2:使用PYTHON的获取虚拟对象</h2><pre class="ix iy iz ja fd ma mb mc md aw me bi"><span id="7042" class="jn jo hh mb b fi mf mg l mh mi">pd.get_dummies(data,columns=["gender","city"])</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl mk"><img src="../Images/0b44333fad88e2d3f902d2873b91f493.png" data-original-src="https://miro.medium.com/v2/format:webp/1*ZZ5KxQtIs6s_dDpYygUbaQ.png"/></div></figure><p id="6ecb" class="pw-post-body-paragraph kl km hh kn b ko lg ii kq kr lh il kt jy lu kv kw kc lv ky kz kg lw lb lc ld ha bi translated">如果我们想的话，可以指定前缀。尽管它也采用默认前缀！</p><pre class="ix iy iz ja fd ma mb mc md aw me bi"><span id="c001" class="jn jo hh mb b fi mf mg l mh mi">pd.get_dummies(data,prefix=["gen","city"],columns=["gender","city"])</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl mk"><img src="../Images/0b4a9ad946be31a30fcae970081b66bb.png" data-original-src="https://miro.medium.com/v2/format:webp/1*zn2ubO1Ah0xKPAdz-DFmRA.png"/></div></figure><h2 id="1479" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">方法3:使用SKLEARN</h2><p id="9c49" class="pw-post-body-paragraph kl km hh kn b ko kp ii kq kr ks il kt jy ku kv kw kc kx ky kz kg la lb lc ld ha bi translated">sklearn还有15种不同类型的内置编码器，可以从sklearn.preprocessing访问。</p><h2 id="78f2" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">SKLEARN ONE热编码</h2><h2 id="7eb3" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">让我们首先从数据中获得一个分类变量列表</h2><pre class="ix iy iz ja fd ma mb mc md aw me bi"><span id="8e19" class="jn jo hh mb b fi mf mg l mh mi">s = (data.dtypes == 'object')<br/>cols = list(s[s].index)</span></pre><p id="9346" class="pw-post-body-paragraph kl km hh kn b ko lg ii kq kr lh il kt jy lu kv kw kc lv ky kz kg lw lb lc ld ha bi translated">导入:</p><pre class="ix iy iz ja fd ma mb mc md aw me bi"><span id="8483" class="jn jo hh mb b fi mf mg l mh mi">from sklearn.preprocessing import OneHotEncoder<br/><br/>ohe = OneHotEncoder(handle_unknown='ignore',sparse=False)</span></pre><h2 id="31bc" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">申请性别专栏</h2><pre class="ix iy iz ja fd ma mb mc md aw me bi"><span id="9d17" class="jn jo hh mb b fi mf mg l mh mi">data_gender = pd.DataFrame(ohe.fit_transform(data[["gender"]]))<br/><br/>data_gender</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl mk"><img src="../Images/471a0d2b714487eec470856ef7997945.png" data-original-src="https://miro.medium.com/v2/format:webp/1*g9ic39PLu21xXtmkgZK0wg.png"/></div></figure><h2 id="5938" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">应用于城市专栏</h2><pre class="ix iy iz ja fd ma mb mc md aw me bi"><span id="2185" class="jn jo hh mb b fi mf mg l mh mi">data_city = pd.DataFrame(ohe.fit_transform(data[["city"]]))<br/><br/>data_city</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl mk"><img src="../Images/aacbf26731f729898072ebfd42dacc9e.png" data-original-src="https://miro.medium.com/v2/format:webp/1*FF2A8c415mHSgwr-N8PPCA.png"/></div></figure><h2 id="0274" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">应用于类列</h2><pre class="ix iy iz ja fd ma mb mc md aw me bi"><span id="786f" class="jn jo hh mb b fi mf mg l mh mi">data_class = pd.DataFrame(ohe.fit_transform(data[["class"]]))<br/><br/>data_class</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl mk"><img src="../Images/335777c1415b087f5868d755dfde4f4d.png" data-original-src="https://miro.medium.com/v2/format:webp/1*PS_bxv0zMm_wceOCDLmZXA.png"/></div></figure><p id="4f97" class="pw-post-body-paragraph kl km hh kn b ko lg ii kq kr lh il kt jy lu kv kw kc lv ky kz kg lw lb lc ld ha bi translated">这是因为class列有4个唯一的值</p><h2 id="cb5c" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">应用于分类变量列表:</h2><pre class="ix iy iz ja fd ma mb mc md aw me bi"><span id="c9a9" class="jn jo hh mb b fi mf mg l mh mi">data_cols = pd.DataFrame(ohe.fit_transform(data[cols]))<br/><br/>data_cols</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl mk"><img src="../Images/48fc351cc9a6edd817f1cd50f71997e7.png" data-original-src="https://miro.medium.com/v2/format:webp/1*q7M4MIQqwz6v9iGK-tAAdg.png"/></div></figure><p id="3688" class="pw-post-body-paragraph kl km hh kn b ko lg ii kq kr lh il kt jy lu kv kw kc lv ky kz kg lw lb lc ld ha bi translated">这里的前2列代表性别，接下来的4列代表阶级，剩下的2列代表城市。</p><h2 id="9760" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">SKLEARN标签编码</h2><p id="a638" class="pw-post-body-paragraph kl km hh kn b ko kp ii kq kr ks il kt jy ku kv kw kc kx ky kz kg la lb lc ld ha bi translated">在标注编码中，为每个类别指定一个从1到N的值，其中N是要素的类别数。这些作业之间没有关系或顺序。</p><pre class="ix iy iz ja fd ma mb mc md aw me bi"><span id="1db6" class="jn jo hh mb b fi mf mg l mh mi">from sklearn.preprocessing import LabelEncoder<br/><br/>le = LabelEncoder()</span></pre><p id="bc85" class="pw-post-body-paragraph kl km hh kn b ko lg ii kq kr lh il kt jy lu kv kw kc lv ky kz kg lw lb lc ld ha bi translated">标签编码器不带参数</p><pre class="ix iy iz ja fd ma mb mc md aw me bi"><span id="5406" class="jn jo hh mb b fi mf mg l mh mi">le_class = le.fit_transform(data[["class"]]);</span><span id="53e4" class="jn jo hh mb b fi mj mg l mh mi">le_class</span><span id="e3cc" class="jn jo hh mb b fi mj mg l mh mi">array([0, 1, 2, 3, 0])</span></pre><h2 id="a4f5" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">与独热编码相比</h2><pre class="ix iy iz ja fd ma mb mc md aw me bi"><span id="a259" class="jn jo hh mb b fi mf mg l mh mi">data_class</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl mk"><img src="../Images/335777c1415b087f5868d755dfde4f4d.png" data-original-src="https://miro.medium.com/v2/format:webp/1*PS_bxv0zMm_wceOCDLmZXA.png"/></div></figure><h2 id="7129" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">顺序编码</h2><p id="2de2" class="pw-post-body-paragraph kl km hh kn b ko kp ii kq kr ks il kt jy ku kv kw kc kx ky kz kg la lb lc ld ha bi translated">序数编码的编码变量保留了变量的序数(有序)性质。它看起来几乎类似于标签编码。唯一的区别是标签编码不考虑变量是否是有序的，它会指定一个整数序列</p><h2 id="8da8" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">示例:序数编码将赋值为非常好(1)<good/></h2><p id="b6cd" class="pw-post-body-paragraph kl km hh kn b ko kp ii kq kr ks il kt jy ku kv kw kc kx ky kz kg la lb lc ld ha bi translated">First, we need to assign the original order of the variable through a dictionary.</p><pre class="ix iy iz ja fd ma mb mc md aw me bi"><span id="28e1" class="jn jo hh mb b fi mf mg l mh mi">temp = {'temperature' :['very cold', 'cold', 'warm', 'hot', 'very hot']}<br/><br/>df=pd.DataFrame(temp,columns=["temperature"])<br/><br/>temp_dict = {<br/>    'very cold': 1,<br/>    'cold': 2,<br/>    'warm': 3,<br/>    'hot': 4,<br/>    "very hot": 5<br/>}</span><span id="93ff" class="jn jo hh mb b fi mj mg l mh mi">temp_dict</span><span id="5e4e" class="jn jo hh mb b fi mj mg l mh mi">{'very cold': 1, 'cold': 2, 'warm': 3, 'hot': 4, 'very hot': 5}</span><span id="961f" class="jn jo hh mb b fi mj mg l mh mi">temp</span><span id="d5d6" class="jn jo hh mb b fi mj mg l mh mi">{'temperature': ['very cold', 'cold', 'warm', 'hot', 'very hot']}</span><span id="f230" class="jn jo hh mb b fi mj mg l mh mi">df</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl mk"><img src="../Images/9f62c8e6c69fd680a53bb5766d4164fd.png" data-original-src="https://miro.medium.com/v2/format:webp/1*G6-wM5ow44AGW8JFr9Bz1g.png"/></div></figure><p id="a12e" class="pw-post-body-paragraph kl km hh kn b ko lg ii kq kr lh il kt jy lu kv kw kc lv ky kz kg lw lb lc ld ha bi translated">Then we can map each row for the variable as per the dictionary.</p><pre class="ix iy iz ja fd ma mb mc md aw me bi"><span id="90be" class="jn jo hh mb b fi mf mg l mh mi">df["temp_ordinal"] = df.temperature.map(temp_dict)</span><span id="92d0" class="jn jo hh mb b fi mj mg l mh mi">df</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl mk"><img src="../Images/7128bdf00cb1232a1caecb8a912f52a3.png" data-original-src="https://miro.medium.com/v2/format:webp/1*wJU0tXKI4vZwmnBaSulyaQ.png"/></div></figure><h2 id="2a01" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">Frequency Encoding</h2><p id="0b8e" class="pw-post-body-paragraph kl km hh kn b ko kp ii kq kr ks il kt jy ku kv kw kc kx ky kz kg la lb lc ld ha bi translated">The category is assigned as per the frequency of value in its total lot</p><pre class="ix iy iz ja fd ma mb mc md aw me bi"><span id="c861" class="jn jo hh mb b fi mf mg l mh mi">data_freq = pd.DataFrame({'class' : ['A','B','C','D','A',"B","E","E","D","C","C","C","E","A","A"]})</span></pre><p id="f04e" class="pw-post-body-paragraph kl km hh kn b ko lg ii kq kr lh il kt jy lu kv kw kc lv ky kz kg lw lb lc ld ha bi translated">Grouping by class column</p><pre class="ix iy iz ja fd ma mb mc md aw me bi"><span id="4fee" class="jn jo hh mb b fi mf mg l mh mi">fe = data_freq.groupby("class").size()<br/>fe</span><span id="a12a" class="jn jo hh mb b fi mj mg l mh mi">class<br/>A    4<br/>B    2<br/>C    4<br/>D    2<br/>E    3<br/>dtype: int64</span></pre><p id="defc" class="pw-post-body-paragraph kl km hh kn b ko lg ii kq kr lh il kt jy lu kv kw kc lv ky kz kg lw lb lc ld ha bi translated">Dividing by length</p><pre class="ix iy iz ja fd ma mb mc md aw me bi"><span id="67a9" class="jn jo hh mb b fi mf mg l mh mi">len(data_freq)</span><span id="3d3b" class="jn jo hh mb b fi mj mg l mh mi">15</span><span id="92d7" class="jn jo hh mb b fi mj mg l mh mi">fe_ = fe/len(data_freq)</span></pre><p id="0c25" class="pw-post-body-paragraph kl km hh kn b ko lg ii kq kr lh il kt jy lu kv kw kc lv ky kz kg lw lb lc ld ha bi translated">Mapping and Rounding off</p><pre class="ix iy iz ja fd ma mb mc md aw me bi"><span id="6529" class="jn jo hh mb b fi mf mg l mh mi">data_freq["data_fe"] = data_freq["class"].map(fe_).round(2)</span><span id="f881" class="jn jo hh mb b fi mj mg l mh mi">data_freq</span></pre><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="ab fe cl mk"><img src="../Images/e998c23c6ad5bee17e835e288f70f88b.png" data-original-src="https://miro.medium.com/v2/format:webp/1*yVCyHtryOibg23Eb8MIAlg.png"/></div></figure><p id="be1f" class="pw-post-body-paragraph kl km hh kn b ko lg ii kq kr lh il kt jy lu kv kw kc lv ky kz kg lw lb lc ld ha bi translated">We saw 5 types of encoding schemes. Similarly, there are 10 other types of encoding :</p><ul class=""><li id="8f66" class="le lf hh kn b ko lg kr lh jy li kc lj kg lk ld ll lm ln lo bi translated">Helmert Encoding</li><li id="04ae" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">Mean Encoding</li><li id="c465" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">Weight of Evidence Encoding</li><li id="17b8" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">Probability Ratio Encoding</li><li id="295b" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">Hashing Encoding</li><li id="bfa8" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">Backward Difference Encoding</li><li id="2d1e" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">Leave One Out Encoding</li><li id="f622" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">James-Stein Encoding</li><li id="035b" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">M-estimator Encoding</li><li id="51dd" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld ll lm ln lo bi translated">Thermometer Encoder</li></ul><h2 id="0f71" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">Which One is Best then?</h2><p id="d0d8" class="pw-post-body-paragraph kl km hh kn b ko kp ii kq kr ks il kt jy ku kv kw kc kx ky kz kg la lb lc ld ha bi translated">There is no single method that works best for every problem or dataset. I personally think that the get_dummies method has an advantage in its ability to implement very easily.</p><h2 id="9027" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">Read about all the 15 types of encoding in detail here:</h2><p id="71a4" class="pw-post-body-paragraph kl km hh kn b ko kp ii kq kr ks il kt jy ku kv kw kc kx ky kz kg la lb lc ld ha bi translated">If you want to read about all the 15 types of encoding here is a very good article to refer to: <a class="ae jm" href="https://towardsdatascience.com/all-about-categorical-variable-encoding-305f3361fd02" rel="noopener" target="_blank">https://towardsdatascience . com/all-about-categorial-variable-encoding-305 f 3361 FD 02</a></p><p id="e404" class="pw-post-body-paragraph kl km hh kn b ko lg ii kq kr lh il kt jy lu kv kw kc lv ky kz kg lw lb lc ld ha bi translated">我还附上一个什么时候使用什么类型的编码备忘单。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/0213dd23681e8b77e6848bebb6d816bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aZsxJ1y5XEYeZdEo"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx"><a class="ae jm" href="https://towardsdatascience.com/all-about-categorical-variable-encoding-305f3361fd02" rel="noopener" target="_blank">Image Ref</a></figcaption></figure><p id="32c1" class="pw-post-body-paragraph kl km hh kn b ko lg ii kq kr lh il kt jy lu kv kw kc lv ky kz kg lw lb lc ld ha bi translated"><em class="ml"> …………。如果你喜欢这个博客，别忘了留下几个由衷的掌声:)</em></p><h2 id="0d45" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated"><a class="ae jm" href="https://www.linkedin.com/in/shelvi-garg-3a7421108/" rel="noopener ugc nofollow" target="_blank">在LinkedIn上帮我联系</a></h2><p id="b9cc" class="pw-post-body-paragraph kl km hh kn b ko kp ii kq kr ks il kt jy ku kv kw kc kx ky kz kg la lb lc ld ha bi translated">参考资料:</p><ol class=""><li id="b1e4" class="le lf hh kn b ko lg kr lh jy li kc lj kg lk ld mm lm ln lo bi translated"><a class="ae jm" href="https://towardsdatascience.com/all-about-categorical-variable-encoding-305f3361fd02" rel="noopener" target="_blank">https://towards data science . com/all-about-category-variable-encoding-305 f 3361 FD 02</a></li><li id="0d06" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld mm lm ln lo bi translated"><a class="ae jm" href="https://pypi.org/project/category-encoders/" rel="noopener ugc nofollow" target="_blank">https://pypi.org/project/category-encoders/</a></li><li id="d5dd" class="le lf hh kn b ko lp kr lq jy lr kc ls kg lt ld mm lm ln lo bi translated"><a class="ae jm" href="https://pandas.pydata.org/docs/reference/api/pandas.get_dummies.html" rel="noopener ugc nofollow" target="_blank">https://pandas . pydata . org/docs/reference/API/pandas . get _ dummies . html</a></li></ol></div></div>    
</body>
</html>