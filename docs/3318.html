<html>
<head>
<title>OpenCV-color in BGR order you must know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">OpenCV-颜色在BGR的顺序你一定知道</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/opencv-color-in-bgr-order-you-must-know-53470396d18c?source=collection_archive---------2-----------------------#2022-08-18">https://medium.com/mlearning-ai/opencv-color-in-bgr-order-you-must-know-53470396d18c?source=collection_archive---------2-----------------------#2022-08-18</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="f2ec" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">想玩玩代码吗？<a class="ae jc" href="https://github.com/SueGK/Courses/blob/main/pyimagesearch-opencv-17-day-course/OpenCV-Mynotes/opencv_BGR_color.ipynb" rel="noopener ugc nofollow" target="_blank">链接</a></p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="6587" class="jm jn hh ji b fi jo jp l jq jr">import os<br/>import numpy as np<br/>import argparse<br/>import cv2<br/>import matplotlib.pyplot as plt</span></pre><p id="e0a9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">原图是这样的:</p><figure class="jd je jf jg fd jt er es paragraph-image"><div class="er es js"><img src="../Images/a3bb87cba52654d454267eacc020ab0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:164/format:webp/0*gMD-zYzvJWZegLIH.png"/></div></figure><p id="7e3c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">OpenCV假设图像处于BGR通道顺序。OpenCV imread、imwrite和imshow都使用BGR顺序，所以如果我们使用cv2.imshow来显示图像，图像不会改变。但在matplotlib上不起作用。</p><p id="e0e5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">大多数图像处理库使用RGB排序，如matplotlib，所以如果使用<code class="du jw jx jy ji b">plt.imshow</code>，标志的颜色会改变。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="d5ac" class="jm jn hh ji b fi jo jp l jq jr">img = cv2.imread("logo.png")</span><span id="71ea" class="jm jn hh ji b fi jz jp l jq jr"># show the image by cv2<br/># The cv2.imshow() and cv.imshow() functions from the opencv-python package are incompatible with Jupyter notebook; <br/># see https://github.com/jupyter/notebook/issues/3935. <br/># As a replacement, you can use the following function:<br/>from google.colab.patches import cv2_imshow<br/>cv2_imshow(img)</span></pre><figure class="jd je jf jg fd jt er es paragraph-image"><div class="er es js"><img src="../Images/a3f0993b7cdd260c41e69aa99355c922.png" data-original-src="https://miro.medium.com/v2/resize:fit:164/format:webp/1*Ixo3Bu6gZwaoAGhT64Rlyg.png"/></div></figure><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="79ea" class="jm jn hh ji b fi jo jp l jq jr"># show the image by matplotlib<br/>plt.subplot(111)<br/>plt.imshow(img)<br/>plt.title("Original")</span></pre><figure class="jd je jf jg fd jt er es paragraph-image"><div class="er es ka"><img src="../Images/e6c853e3692c95de7727ee4ca22ecb93.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*sqd7CCalX7L04M21PYdCvA.png"/></div></figure><p id="bc28" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果我们想在OpenCV中以RGB顺序读取图像，我们可以使用:</p><p id="a18b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du jw jx jy ji b">img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)</code></p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="e6e4" class="jm jn hh ji b fi jo jp l jq jr"># read images in RGB order in OpenCV<br/>img_rgb = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)<br/>from google.colab.patches import cv2_imshow<br/>cv2_imshow(img_rgb)<br/>plt.imshow(img_rgb)</span></pre><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="kc kd di ke bf kf"><div class="er es kb"><img src="../Images/6d3109e00fae88e0075f8f16fa51a653.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b6K55FOZwp3tePqYe-DERg.png"/></div></div></figure><p id="1ae8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> cv2.imread(文件名，标志)</strong></p><p id="c2ec" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有一些标志:</p><p id="8d2b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> cv2。IMREAD_UNCHANGED: </strong>从源(带alpha通道)按原样读取图像。如果源图像是RGB，它将图像加载到具有红色、绿色和蓝色通道的数组中。</p><p id="802b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> cv2。IMREAD_COLOR: </strong>将图像转换为3通道BGR彩色图像，但不转换为透明通道</p><p id="99cf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> cv2。im read _ gray:</strong>将图像转换为单通道灰度图像</p><p id="afb7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">查看更多标志:<a class="ae jc" href="https://docs.opencv.org/3.4/d8/d6a/group__imgcodecs__flags.html#ga61d9b0126a3e57d9277ac48327799c80" rel="noopener ugc nofollow" target="_blank"> OpenCV:用于图像文件读写的标志</a></p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="35a9" class="jm jn hh ji b fi jo jp l jq jr">img = cv2.imread('logo.png', cv2.IMREAD_UNCHANGED)<br/>cv2_imshow(img)<br/>plt.imshow(img)</span></pre><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="kc kd di ke bf kf"><div class="er es kg"><img src="../Images/353a67aad66e95fddf5d300d3a6f6ed5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d_zvffWdR2cnGDKDOuG0DA.png"/></div></div></figure><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="b0a8" class="jm jn hh ji b fi jo jp l jq jr">img = cv2.imread('logo.png', cv2.IMREAD_COLOR)<br/>cv2_imshow(img)<br/>plt.imshow(img)</span></pre><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="kc kd di ke bf kf"><div class="er es kh"><img src="../Images/8d74101b1e10999bc94d3e7ac0a3151f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bz2dYJPqveXPof4lw4f24A.png"/></div></div></figure><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="1297" class="jm jn hh ji b fi jo jp l jq jr">​<!-- -->img = cv2.imread('logo.png', cv2.IMREAD_GRAYSCALE)<br/>cv2_imshow(img)</span></pre><figure class="jd je jf jg fd jt er es paragraph-image"><div class="er es ki"><img src="../Images/23a9711ec7dd6bb15aa4e490054c933e.png" data-original-src="https://miro.medium.com/v2/resize:fit:456/format:webp/1*yYNiNY657JdYVMZMLnqlVg.png"/></div></figure><p id="b9dd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们看看BGR频道。如果我们想打印整个数组，那么设置<code class="du jw jx jy ji b">np.set_printoptions(threshold=np.inf)</code>并在打印完数组后将其设置回默认值。<code class="du jw jx jy ji b">np.set_printoptions(threshold=1000</code></p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="9080" class="jm jn hh ji b fi jo jp l jq jr">img = cv2.imread('logo.png', cv2.IMREAD_COLOR)<br/>cv2_imshow(img)<br/>b = img[:,:,0] # get blue channel<br/>g = img[:,:,1] # get green channel<br/>r = img[:,:,2] # get red channel<br/><br/>print(b)</span></pre><figure class="jd je jf jg fd jt er es paragraph-image"><div class="er es kj"><img src="../Images/f4959977378c9a0e9c8740f7a64f6525.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/format:webp/1*aLUmFMIu3E8WJ6zMM0_t8g.png"/></div></figure><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="f828" class="jm jn hh ji b fi jo jp l jq jr">np.set_printoptions(threshold=np.inf)<br/>print(b)<br/>np.set_printoptions(threshold=1000)</span><span id="9aa2" class="jm jn hh ji b fi jz jp l jq jr"># the output is really long so I won't print it here.</span></pre><p id="7e49" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在让我们将其转换为<strong class="ig hi"> RGB </strong>通道。即使我们以RGB顺序读取图像，但如果我们使用<code class="du jw jx jy ji b">cv2.imshow</code>显示图像，标志颜色会改变，因为它与<strong class="ig hi"> BGR </strong>顺序配合使用。<code class="du jw jx jy ji b">plt.imshow</code>显示图像的原始颜色，因为它也适用于<strong class="ig hi"> RGB </strong>顺序。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="6589" class="jm jn hh ji b fi jo jp l jq jr"># read images in RGB order in OpenCV<br/>img_rgb = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)<br/>from google.colab.patches import cv2_imshow<br/>cv2_imshow(img_rgb)<br/>plt.imshow(img_rgb)</span></pre><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="kc kd di ke bf kf"><div class="er es kk"><img src="../Images/3cd4c0dfaa78d868b6fe6af948526fa5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*abBgvTaTAg_wKCYiWBMuPQ.png"/></div></div></figure><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="0438" class="jm jn hh ji b fi jo jp l jq jr">r1 = img_rgb[:,:,0] # get blue channel<br/>g1 = img_rgb[:,:,1] # get green channel<br/>b1 = img_rgb[:,:,2] # get red channel</span><span id="7538" class="jm jn hh ji b fi jz jp l jq jr">(img[:,:,0] == img_rgb[:,:,2]).all()</span><span id="9da4" class="jm jn hh ji b fi jz jp l jq jr">Output: True</span></pre><p id="8120" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当你试图在OpenCV中绘制一个矩形框时，注意矩形的颜色也是按照<strong class="ig hi"> BGR </strong>的顺序。</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="e9ce" class="jm jn hh ji b fi jo jp l jq jr"># read the image<br/>image = cv2.imread('logo.png')<br/><br/><br/># represents the top left corner of rectangle<br/>start_point = (5, 5)<br/><br/># represents the bottom right corner of rectangle<br/>end_point = (20, 20)<br/><br/># choose the rectangle color in BGR<br/>color = (0, 0, 255) # red<br/><br/># thickness of lines that make up the rectangle is 2 px<br/>thickness = 2<br/><br/># draw a rectangle with red line borders of thickness of 2 px<br/>image = cv2.rectangle(image, start_point, end_point, color, thickness)<br/><br/># Displaying the image <br/>cv2_imshow(image)</span></pre><figure class="jd je jf jg fd jt er es paragraph-image"><div class="er es kl"><img src="../Images/f99818ac234d9f37424708f9f04bc1ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:484/format:webp/1*J3rSiqjnPRM1D04oPitI1Q.png"/></div></figure><div class="km kn ez fb ko kp"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="kq ab dw"><div class="kr ab ks cl cj kt"><h2 class="bd hi fi z dy ku ea eb kv ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="kw l"><h3 class="bd b fi z dy ku ea eb kv ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="kx l"><p class="bd b fp z dy ku ea eb kv ed ef dx translated">medium.com</p></div></div><div class="ky l"><div class="kz l la lb lc ky ld ju kp"/></div></div></a></div></div></div>    
</body>
</html>