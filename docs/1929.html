<html>
<head>
<title>Features and Capabilities of Azure Machine Learning</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Azure机器学习的特性和功能</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/features-and-capabilities-of-azure-machine-learning-868eb3b4d333?source=collection_archive---------6-----------------------#2022-02-12">https://medium.com/mlearning-ai/features-and-capabilities-of-azure-machine-learning-868eb3b4d333?source=collection_archive---------6-----------------------#2022-02-12</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="2970" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现代机器学习算法使得开发能够做出准确预测的模型变得越来越容易。但是在建立“模型”之后，将它投入生产也伴随着挑战。在几个月的时间里，模型可能会恶化，或者我们会建立一个更好的模型来适应不断变化的数据。随着模型和版本数量的增加，这个过程变得更加复杂。</p><p id="9139" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这个问题可以用MLOps来解决，这是一个结合了机器学习和Devops原理的学科。Azure机器学习为这个问题提供了端到端的解决方案。Azure Machine Learning为我们所有的ML实验、管道、计算资源、数据集、conda环境、docker图像、训练模型、端点和一个与所有这些资源交互的SDK提供了一个公共工作空间。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/7c70769d9c8b47e81ac1aa88761f429a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2tUprlMCrMJcBW-r"/></div></div></figure><p id="7064" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">机器学习生命周期包括训练模型、打包模型、验证模型、部署模型和监控模型。该模型在部署前和部署后都经过测试。如果结果不令人满意，那么我们从训练阶段重新开始。Azure ML提供了更多的灵活性来处理机器学习生命周期。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jo"><img src="../Images/f69a30561a883cd2ce4f2d19c76be7e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*P8ECEPAZ_1bDb4fg"/></div></div></figure><p id="229a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> Azure机器学习设计师</strong></p><p id="8a5d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是一个无代码环境，可以为聚类、回归、分类、异常检测和推荐模型以及数据、统计和文本分析构建模型。我们可以通过简单的拖放来获得想要的功能。最终的流程是一个我们可以保存和执行的图表。在训练和注册模型之后，只需点击几下鼠标就可以部署它。对于使用GUI构建复杂模型的初学者来说，Designer是一个很好的起点。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jp"><img src="../Images/f9360e4796e948d5cf7d61a7023f2064.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Nb_jCuV5uC1TochR"/></div></div></figure><p id="1aae" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> Azure自动化机器学习</strong></p><p id="26e0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">没有训练模型经验的用户可以继续使用这项服务。顾名思义，配置、超参数调整是自动完成的。用户只需提供数据，选择目标变量并指定需要对数据执行的ML任务。自动机器学习目前支持分类、回归和时间序列预测任务。它还存储了指标、见解和运行，以便我们可以复制它。在下图中，我们可以看到ROC曲线和混淆矩阵，它们被记录为运行的一部分。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es et"><img src="../Images/8aefcf6d2be025b9ddab510fb826c113.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZKQ55U1DUdZi4bBD"/></div></div></figure><p id="d66a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">工作区</strong></p><p id="a4da" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Workspace是一个中心位置，用于跟踪您的ML实验、监控您的训练和验证指标、收集您的训练模型和其他输出文件，以及保存当前环境的快照。使用run.log()方法，您可以在训练和实验过程中跟踪任何参数。它可以是csv文件、图像或输出日志。</p><p id="7ba4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在Azure ML中，你的ML任务被组织成实验。每个实验可以有多次运行，运行输出和指标将根据每个实验进行汇总。假设我们正在为一个分类模型进行超参数调整。在这种情况下，我们可以用多个值训练模型，我们可以记录准确性、f1得分、roc-auc曲线等。这样做之后，我们可以通过所有运行来挑选性能最佳的模型。在选择了最佳运行之后，部署模型是非常简单的。</p><p id="47c0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在下图中，我们可以看到在上传和注册跑步模型时得到的结果，这是一个将模型与实验跑步及其指标相链接的中心位置。您再也不会丢失训练好的模型，也不会用尽磁盘空间来保存训练好的模型，也不必记住哪些参数用于训练这个模型，或者在运行期间测试性能如何。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jq"><img src="../Images/fe643970cdbfc11f86c37ac991c6fcee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*psA4x3HUmy2GI3Bh"/></div></div></figure><p id="fc24" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">工作区的订阅信息可以从config.json文件中获得。除了指标之外，azure ML workspace还存储了repo的快照，这反过来可用于重现特定的运行。Azure ML还集成了MLflow，提高了日志记录的能力。对于调试，输出和日志部分非常有用。详细的错误消息使我们能够快速理解问题并修复它。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jr"><img src="../Images/23bd2fb3b0609f4f81e7a56f65a3eb3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Oi5Uxa9EVR8p_8WX"/></div></div></figure><p id="d586" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">每当我们创建一个新的工作空间时，就会自动创建应用洞察、密钥库、容器注册表和存储。Azure Blob容器和Azure文件共享会自动注册为新工作区的数据存储。我们需要contributor访问工作区，这将使我们能够创建和删除计算实例。</p><p id="f828" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">workspaceblobstore(默认)-存储工作空间工件和机器学习实验日志。</p><p id="8588" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Workspacefilestore —存储笔记本和R脚本。</p><p id="bdeb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">管道</strong></p><p id="b587" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Azure机器学习管道是Azure机器学习中可执行步骤的工作流，组成了一个完整的ML工作流。您可以将数据导入、数据转换、特征工程、模型训练和优化以及部署结合起来，作为您的管道步骤。</p><p id="f7cf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">管道是Azure机器学习工作区中的资源，您可以创建、管理、版本化、触发和部署这些资源..每个管道运行都是在Azure机器学习工作区上作为实验执行的，并在灵活的计算集群上运行时为您提供相同的好处，如跟踪文件、日志、模型、工件、图像等。</p><ol class=""><li id="c6e4" class="js jt hh ig b ih ii il im ip ju it jv ix jw jb jx jy jz ka bi translated">ML任务的独立可执行工作流</li><li id="a776" class="js jt hh ig b ih kb il kc ip kd it ke ix kf jb jx jy jz ka bi translated">Azure ML管道是多个阶段的集合</li><li id="3bf5" class="js jt hh ig b ih kb il kc ip kd it ke ix kf jb jx jy jz ka bi translated">每个阶段只负责一项任务</li><li id="a0e8" class="js jt hh ig b ih kb il kc ip kd it ke ix kf jb jx jy jz ka bi translated">每个阶段都有一个依赖阶段</li><li id="cdc9" class="js jt hh ig b ih kb il kc ip kd it ke ix kf jb jx jy jz ka bi translated">Azure ML编排任务和依赖关系</li><li id="d86c" class="js jt hh ig b ih kb il kc ip kd it ke ix kf jb jx jy jz ka bi translated">可以将管道发布为REST端点</li><li id="2ed1" class="js jt hh ig b ih kb il kc ip kd it ke ix kf jb jx jy jz ka bi translated">可以通过designer和python sdk创建管道。</li><li id="035d" class="js jt hh ig b ih kb il kc ip kd it ke ix kf jb jx jy jz ka bi translated">可以串行和并行执行</li><li id="e90e" class="js jt hh ig b ih kb il kc ip kd it ke ix kf jb jx jy jz ka bi translated">可以为每个步骤配置不同的计算目标</li></ol><p id="057f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">环境</strong></p><p id="ec9b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Azure机器学习环境是你进行机器学习训练的环境的封装。Azure ML环境允许我们随着项目软件依赖的发展来跟踪和复制它们。环境描述了我们的项目对pip和conda的依赖，可以用于培训和测试。可用的运行时环境有Python、Spark和Docker。Azure ML缓存了环境，因此它们可以在后续运行中重用。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es kg"><img src="../Images/237ba0fbc0d93775b60067d87e70e4b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SuzjeDpALbDv7i_j"/></div></div></figure><p id="b2be" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">运行配置-&gt;训练脚本+环境+计算</p><p id="2751" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">推理和部署配置—评分脚本+环境+计算</p><p id="ab8b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">环境有三种类型。策划、系统管理和用户管理。</p><p id="d34e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">策划(默认)-由Azure机器学习预先创建。</p><p id="af22" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">用户管理—用户必须自己安装依赖项。</p><p id="eb83" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">系统管理—康达负责环境管理。conda环境是在基本docker映像的基础上创建的。</p><p id="664d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了确定是重用缓存的映像还是构建一个新的映像，AzureML从环境定义中计算一个哈希值，并将其与现有环境的哈希值进行比较。散列是基于基本映像、自定义docker步骤、python包和spark包计算的。构造哈希值时不考虑图像的名称。如果库的顺序和版本相同，那么散列值将是相似的。如果哈希值相似，则重新使用缓存的图像，否则构建新的图像。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es kh"><img src="../Images/0567cb9457a0136c6dbf9a3783901446.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jaQ9AX0jPpW4kSeA"/></div></div></figure><p id="5cdf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">数据存储</strong></p><p id="4b8d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">数据存储有助于安全地连接到azure存储服务。要验证您对底层存储服务的访问，您可以提供帐户密钥、共享访问签名(SAS)令牌或服务主体。数据存储目前支持将连接信息存储到存储服务，因此我们可以在数据存储中配置访问密钥，并与存储服务连接。</p><p id="64db" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">支持的存储服务有Azure Blob storage、Azure File Share、Azure Data Lake Storage Gen 1、Azure Data Lake Storage Gen 2、Azure SQL Database、Azure postgreSQL、Azure Database for Mysql和Databricks文件系统。</p><p id="24ff" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有了数据集，你可以从Azure storage services下载或挂载任何格式的文件，用于计算目标上的模型训练。它们还提供了数据版本控制，这是随着时间的推移监控模型性能非常需要的功能。我们可以通过分析它们的分布来监控数据随时间的变化。</p><p id="457e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">计算</strong></p><p id="4d46" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">构建模型后，下一步是将模型部署为web服务。根据我们的需要，我们可以在AMLCompute(批量推理)、ACI和AKS中部署模型。</p><p id="633c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">ACI(Azure容器实例)可用于在开发环境中部署模型，AKS可用于在生产环境中部署模型。</p><p id="682f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">AKS(Azure Kubernetes Service)是一个完全托管的Kubernetes服务，用于部署、管理和扩展。AKS还提供了检测模型漂移的现成功能。为此，我们需要启用实时数据收集选项。启用后，我们可以设置一个阈值，当指标超过阈值时，我们可以检测漂移并重新训练我们的模型。</p><p id="34de" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了部署模型，我们必须提供配置文件、评分脚本和涵盖所有依赖关系的环境。如果我们使用链接到Azure ML的MLflow，我们不必提供评分脚本，因为它是自动生成的。</p><p id="4325" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了降低成本，我们可以指定最小节点数。以便在不使用时，计算将缩减到最小节点数。计算目标必须与存储位于同一个虚拟网络和子网中。目前Azure机器学习只为批量预测提供数据存储访问。Web服务无权访问数据存储。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es ki"><img src="../Images/65fa565d8b697238832cf472e423739e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UsxuqsNAY377xz2A"/></div></div></figure><p id="7712" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">模型和终点</strong></p><p id="98fc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有两种部署模式，它们的使用取决于批量的大小。具有快速响应的小批量需要水平可伸缩的实时web服务，而大批量和慢响应时间需要水平和垂直可伸缩的批处理服务。</p><p id="0f67" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">训练模型由一个或多个存储模型参数和结构的文件组成。在scikit-learn中，这可能是一个酸洗估计器，在Light Gradient Boosting Machine(Light GBM)中，这可能是一个决策树的序列化列表，而在Keras中，这可能是一个模型定义和一个存储模型权重的二进制blob。</p><p id="0619" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">构建模型后，我们可以使用ACI、AKS部署它。部署之后，我们将获得一个计分uri，我们可以向其发送请求并获得响应。这些请求就是我们想要预测结果的数据，而结果就是结果。</p><p id="ebfc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="kj">想要连接？</em> </strong> <em class="kj"> <br/>如果你喜欢这篇文章，请在Medium上关注我，了解更多关于机器学习和计算机科学的故事。</em></p><p id="68c1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="kj">链接于—</em><a class="ae kk" href="https://www.linkedin.com/in/prithivee-ramalingam-032b42110/" rel="noopener ugc nofollow" target="_blank"><em class="kj">Prithivee Ramalingam</em></a></p><div class="kl km ez fb kn ko"><a href="https://mlearning.substack.com" rel="noopener  ugc nofollow" target="_blank"><div class="kp ab dw"><div class="kq ab kr cl cj ks"><h2 class="bd hi fi z dy kt ea eb ku ed ef hg bi translated">MLearning.ai艺术</h2><div class="kv l"><h3 class="bd b fi z dy kt ea eb ku ed ef dx translated">创意经济的人工智能艺术解决方案🟠最先进的机器学习演示，快速易用🔵…</h3></div><div class="kw l"><p class="bd b fp z dy kt ea eb ku ed ef dx translated">mlearning.substack.com</p></div></div><div class="kx l"><div class="ky l kz la lb kx lc jm ko"/></div></div></a></div></div></div>    
</body>
</html>