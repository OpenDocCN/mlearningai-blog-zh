<html>
<head>
<title>Image Classification 101 with HuggingFace and Pinferencia</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">图像分类101与拥抱脸和Pinferencia</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/image-classification-101-huggingface-and-pinferencia-7881d34fd914?source=collection_archive---------4-----------------------#2022-04-20">https://medium.com/mlearning-ai/image-classification-101-huggingface-and-pinferencia-7881d34fd914?source=collection_archive---------4-----------------------#2022-04-20</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="eccf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">图像分类使<strong class="ig hi">简单了</strong>。借助HuggingFace和P <a class="ae jc" href="https://github.com/underneathall/pinferencia" rel="noopener ugc nofollow" target="_blank">推理</a>的力量，你可以在5分钟内部署一个图像分类。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/579de10e12e177b024c1c75800c0b79d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hbid0fadXrbi4zKVoLV8vQ.jpeg"/></div></div></figure><p id="22c6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在本教程中，我们将使用<a class="ae jc" href="https://huggingface.co/" rel="noopener ugc nofollow" target="_blank"> HuggingFace </a>和<a class="ae jc" href="https://github.com/underneathall/pinferencia" rel="noopener ugc nofollow" target="_blank"> Pinferencia </a>来部署模型，以使用图像的URL对图像进行分类。</p><p id="d600" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了更加实用，我们通过使用图像的Base64编码字符串对图像进行分类来改进服务。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jp"><img src="../Images/6f92dd8457e6f7dc8a0c7e1e086faa19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4E-rTJpCveJpCdJqNkASXw.png"/></div></div></figure></div><div class="ab cl jq jr go js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="ha hb hc hd he"><p id="84a4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae jc" href="https://github.com/underneathall/pinferencia" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi"> Pinferencia </strong> </a>只需三条额外线路，就能轻松为任何模特提供服务。<br/> <a class="ae jc" href="https://huggingface.co/" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi">拥抱脸</strong> </a>只需几行就能轻松使用预训练模型。</p></div><div class="ab cl jq jr go js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="ha hb hc hd he"><h1 id="ae8a" class="jx jy hh bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">安装依赖项</h1><h2 id="a182" class="kv jy hh bd jz kw kx ky kd kz la lb kh ip lc ld kl it le lf kp ix lg lh kt li bi translated">拥抱脸</h2><p id="18b2" class="pw-post-body-paragraph ie if hh ig b ih lj ij ik il lk in io ip ll ir is it lm iv iw ix ln iz ja jb ha bi translated"><code class="du lo lp lq lr b">pip install "transformers[pytorch]"</code></p><p id="299e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果不起作用，请访问<a class="ae jc" href="https://huggingface.co/docs/transformers/installation" rel="noopener ugc nofollow" target="_blank">安装(huggingface.co)</a>并检查他们的官方文件。</p><h2 id="1b3f" class="kv jy hh bd jz kw kx ky kd kz la lb kh ip lc ld kl it le lf kp ix lg lh kt li bi translated">平费伦西亚</h2><p id="6d68" class="pw-post-body-paragraph ie if hh ig b ih lj ij ik il lk in io ip ll ir is it lm iv iw ix ln iz ja jb ha bi translated"><code class="du lo lp lq lr b">pip install "pinferencia[uvicorn]"</code></p><p id="11b6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果不行，请访问<a class="ae jc" href="https://pinferencia.underneathall.app/" rel="noopener ugc nofollow" target="_blank">https://pinferencia . under neat hall . app</a>查看他们的官方文档。</p><h1 id="4bf2" class="jx jy hh bd jz ka ls kc kd ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku bi translated">定义服务</h1><p id="e4ea" class="pw-post-body-paragraph ie if hh ig b ih lj ij ik il lk in io ip ll ir is it lm iv iw ix ln iz ja jb ha bi translated">将以下代码保存到<code class="du lo lp lq lr b">app.py</code>:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lx ly l"/></div></figure><h2 id="0767" class="kv jy hh bd jz kw kx ky kd kz la lb kh ip lc ld kl it le lf kp ix lg lh kt li bi translated">代码解释:</h2><p id="6098" class="pw-post-body-paragraph ie if hh ig b ih lj ij ik il lk in io ip ll ir is it lm iv iw ix ln iz ja jb ha bi translated"><strong class="ig hi">第1–3行</strong>:导入依赖关系。<br/> <strong class="ig hi">第5行</strong>:下载并初始化huggingface模型。<br/> <strong class="ig hi">第8–9行</strong>:定义一个函数来运行预测。<br/> <strong class="ig hi">第12–13行</strong>:初始化服务器，注册模型。</p><p id="a1e5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在让我们运行服务</p><h1 id="6786" class="jx jy hh bd jz ka ls kc kd ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku bi translated">启动服务</h1><p id="016a" class="pw-post-body-paragraph ie if hh ig b ih lj ij ik il lk in io ip ll ir is it lm iv iw ix ln iz ja jb ha bi translated">运行:</p><pre class="je jf jg jh fd lz lr ma mb aw mc bi"><span id="be0b" class="kv jy hh lr b fi md me l mf mg">uvicorn app:service --reload</span></pre><p id="cf01" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">等待模型被下载。完成后，您会看到:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mh"><img src="../Images/3d0f418eaac8f528e77ed195a5c4ff65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*n1wYGgy2JkORrSwV.png"/></div></div></figure><h1 id="1797" class="jx jy hh bd jz ka ls kc kd ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku bi translated">呼叫服务</h1><p id="2c2a" class="pw-post-body-paragraph ie if hh ig b ih lj ij ik il lk in io ip ll ir is it lm iv iw ix ln iz ja jb ha bi translated">你可以使用比利时的<code class="du lo lp lq lr b">curl</code>或<code class="du lo lp lq lr b">interactive api page</code>。</p><p id="d1bd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们使用一个免费的图像:</p><p id="4f43" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae jc" href="https://images.pexels.com/photos/52961/antelope-nature-flowers-meadow-52961.jpeg" rel="noopener ugc nofollow" target="_blank">https://images . pexels . com/photos/52961/羚羊-自然-花朵-草地-52961.jpeg </a></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mi"><img src="../Images/1b369676d7f2952d337db2665f355e55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yacKEAjBvSDkjBwnAsWurQ.jpeg"/></div></div></figure><h2 id="55bf" class="kv jy hh bd jz kw kx ky kd kz la lb kh ip lc ld kl it le lf kp ix lg lh kt li bi translated">卷曲</h2><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mj"><img src="../Images/852a67c52c957b11a0af50c36247e6b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GDQOA_2HmK6jxYWgSeaP4w.png"/></div></div></figure><p id="451a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">结果:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mk"><img src="../Images/470fad66845fc8d020828b007a05f6a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N_wAcOTQqr5Um1DJRPMLwQ.png"/></div></div></figure><p id="0bdb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">得分最高的一句话是:企鹅不会飞。有道理，对吧？</p><p id="abd1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">除了Curl，你还可以访问http://127.0.0.1使用<a class="ae jc" href="https://github.com/underneathall/pinferencia" rel="noopener ugc nofollow" target="_blank"> Pinferencia的</a>:</p><h1 id="9091" class="jx jy hh bd jz ka ls kc kd ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku bi translated">交互式API页面</h1><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ml"><img src="../Images/61df39141bf243af4600e5b549315004.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1sFCwnZU_ZB2JIAZC_IdKQ.png"/></div></div></figure><h1 id="0753" class="jx jy hh bd jz ka ls kc kd ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku bi translated">提高发球质量</h1><p id="ca4b" class="pw-post-body-paragraph ie if hh ig b ih lj ij ik il lk in io ip ll ir is it lm iv iw ix ln iz ja jb ha bi translated">但是，使用图像的url来预测有时并不合适。</p><p id="853c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们创建一个文件<code class="du lo lp lq lr b">base64_app.py</code>，稍微修改一下，接受<strong class="ig hi"> Base64编码的字符串</strong>作为输入。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="lx ly l"/></div></figure><p id="433f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您可以使用<a class="ae jc" href="https://codebeautify.org/image-to-base64-converter" rel="noopener ugc nofollow" target="_blank"> Image to Base64 converter将图像转换为Base64字符串。(codebeautify.org)</a>找出图像的Base64编码字符串。</p><p id="7cf0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们再次卷曲:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mm"><img src="../Images/fb79acc9cd781c580f680cc80123c399.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B_NkSN0k1APmEyziSy8Wpg.png"/></div></div></figure><p id="7489" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">不出意外，同样的结果:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mk"><img src="../Images/470fad66845fc8d020828b007a05f6a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N_wAcOTQqr5Um1DJRPMLwQ.png"/></div></div></figure></div><div class="ab cl jq jr go js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="ha hb hc hd he"><p id="7d75" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你喜欢我的文章，点击你右边的关注按钮。</p><p id="3151" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">感谢<a class="ae jc" href="https://huggingface.co/" rel="noopener ugc nofollow" target="_blank"> HuggingFace </a>和<a class="ae jc" href="https://github.com/underneathall/pinferencia" rel="noopener ugc nofollow" target="_blank"> Pinferencia </a>提供了很棒的库。</p><div class="mn mo ez fb mp mq"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="mr ab dw"><div class="ms ab mt cl cj mu"><h2 class="bd hi fi z dy mv ea eb mw ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="mx l"><h3 class="bd b fi z dy mv ea eb mw ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="my l"><p class="bd b fp z dy mv ea eb mw ed ef dx translated">medium.com</p></div></div><div class="mz l"><div class="na l nb nc nd mz ne jn mq"/></div></div></a></div></div></div>    
</body>
</html>