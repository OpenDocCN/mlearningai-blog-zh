<html>
<head>
<title>Pivot Table in Pandas for data summarization and visualization in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Pandas中的数据透视表用于Python中的数据汇总和可视化</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/pivot-table-in-pandas-for-data-summarization-and-visualization-in-python-aa2a763a633f?source=collection_archive---------1-----------------------#2022-01-12">https://medium.com/mlearning-ai/pivot-table-in-pandas-for-data-summarization-and-visualization-in-python-aa2a763a633f?source=collection_archive---------1-----------------------#2022-01-12</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/ab4d8ada75b4a509270ba78485754c91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zyJf_0MQ5I0FhW_i9HR3dw.jpeg"/></div></div></figure><p id="637b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">朋友们好，</strong></p><p id="9a1d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我敢肯定，你们中的大多数人都使用过微软Excel 的<a class="ae jn" href="https://support.microsoft.com/en-us/office/create-a-pivottable-to-analyze-worksheet-data-a9a84538-bfe9-40a9-a8e9-f99134456576" rel="noopener ugc nofollow" target="_blank">数据透视功能来处理数据和进行数据分析。MS Excel提供了一个简单、快速的拖放功能，可以对数据进行计算、汇总数据和汇总数据集，以便进行高级分析，从而得出有意义的模式、见解和趋势。用MS Excel做数据展示生成可视化很容易。</a></p><p id="a1e2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">“数据透视表将简单的列式数据作为输入，并将条目分组到一个二维表中，这在python中提供了数据的多维汇总。”杰克·范德普拉斯</strong></p><p id="7902" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">对于python爱好者来说，pandas库提供了pivot_table()函数，用于处理表格数据集，尽管pandas dataframe类似于MS excels。它非常强大，速度快，并带有可定制的参数。Pandas pivot_table()函数比MS Excel pivot函数更高效、更强大、更健壮。你可能很快就能理解函数的语法。但是一旦你理解了，它会让supper中的数据聚合和数据可视化变得简单。它可以轻松处理非常大的数据文件。</p><p id="716b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在本文中，我们将看到pandas pivot_table()函数的本质，它使数据聚合和可视化任务变得非常简单。所以，让我们深入了解它。我们将借助ICC T20世界杯数据集的一个有趣用例来理解它。我们从https://www.kaggle.com/affanazhar/icct20-worldcup2021? ka ggle<a class="ae jn" href="https://www.kaggle.com/affanazhar/icct20-worldcup2021?select=kaggle_data.csv" rel="noopener ugc nofollow" target="_blank">获取了2021年IIC世界杯T20数据集select=kaggle_data.csv </a>，将数据集重命名为T20_ICC_WC.csv，下面的步骤演示了如何使用pandas的pivot_table()函数进行类似于Python中MS excel的聚合和可视化。</p><ol class=""><li id="0a94" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">如果你是jupyter notebook用户，运行jupyter notebook，导入pandas包并将CSV文件读入pandas dataframe。举个例子，</li></ol><figure class="jy jz ka kb fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es jx"><img src="../Images/db06908000adfcfa0ce9aa9d85af9a2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hb5K0XC94BvAvso_PkmOOQ.jpeg"/></div></div></figure><p id="103f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">2.<strong class="ir hi">执行数据选择</strong>:选择您想要考虑的数据项，用于数据聚合和可视化。例如，我们希望可视化场地明智的球队赢得了多少次投掷和选择守备/击球，也赢得了比赛。因此，我们从数据集中选择了所需的数据项。举个例子，</p><figure class="jy jz ka kb fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kc"><img src="../Images/9083624abe239a640d1dc1648d1ece49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AlV4orgWZJjaRSkzQaAcsA.jpeg"/></div></div></figure><p id="5130" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">3.<strong class="ir hi"> Pivot_table()函数使用index </strong>参数来指定透视表索引上的分组依据键。(<a class="ae jn" href="https://pandas.pydata.org/docs/reference/api/pandas.pivot_table.html" rel="noopener ugc nofollow" target="_blank">点击</a>此处查阅熊猫pivot_table()函数官方文档)。例如，我们可以通过列名venue和time来总结toss_decision。默认情况下，pivot_table()按numpy.mean()使用聚合，如下所示:</p><figure class="jy jz ka kb fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kd"><img src="../Images/3383cbfe038756554487ef0a070811de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KniXpbSk81P_Z34c8aWaZA.jpeg"/></div></div></figure><p id="00f6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">4.您可以使用<strong class="ir hi">聚合函数，如max、min、mean、count </strong>等。但是这里我们要应用聚合函数count。因此，我们可以如下指定aggfunc = 'count ':</p><figure class="jy jz ka kb fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ke"><img src="../Images/0796f4d4c4361f3ccbefcb91d7fd956c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5LAHwL5tFtdvppV_3JoN4A.jpeg"/></div></div></figure><p id="21c6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">5.我们也可以<strong class="ir hi">用期望值填充NA/NaN值</strong>。举个例子，</p><figure class="jy jz ka kb fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kf"><img src="../Images/a10b26e48128dd5075ef1364d3192b90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fId-Xr0-eqLmnl2hFH7h1A.jpeg"/></div></div></figure><p id="ef14" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">6.现在我们可以导入matlotlib.pyplot来绘制所需的<strong class="ir hi">可视化</strong>。例如，条形图:</p><figure class="jy jz ka kb fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kg"><img src="../Images/60052c7a295588e3a68b46fd2a2b4eb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/1*mvXaYwVTm5KFh1rzbDVRhA.jpeg"/></div></div></figure><p id="792e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">7.我们还可以使用<strong class="ir hi">水平条形图</strong>生成可视化。举个例子，</p><figure class="jy jz ka kb fd ii er es paragraph-image"><div class="er es kh"><img src="../Images/f3ab037ebd8055b99507fcc90ffc54d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*W-cnOFX9MS-c-CzLOeKVDg.jpeg"/></div></figure><p id="5275" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">结论</strong></p><p id="d23c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在这篇文章中我们已经看到了如何使用pandas的pivot_table()函数。使用pivot_table()函数似乎非常容易和超级简单，并且具有更大的灵活性和健壮性。一旦理解了这个概念，在Python中执行聚合和可视化就只需要几行简单的代码了。也可以<strong class="ir hi">访问</strong> <a class="ae jn" href="https://github.com/vks2021/Pythonprogramming/blob/f6af5fb329da9df7835bab85eb26fce93d21f949/LinkedIn%20Post%2037%20-%20Pivot%20table.ipynb" rel="noopener ugc nofollow" target="_blank"> <strong class="ir hi"> Jupyter笔记本</strong> </a> <strong class="ir hi">对pivot_table进行教程。</strong></p><p id="ead0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">总结笔记时，请随意分享您的意见。你的评论一定会帮助我更好地展示内容。下周见。</p><div class="ki kj ez fb kk kl"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="km ab dw"><div class="kn ab ko cl cj kp"><h2 class="bd hi fi z dy kq ea eb kr ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="ks l"><h3 class="bd b fi z dy kq ea eb kr ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="kt l"><p class="bd b fp z dy kq ea eb kr ed ef dx translated">medium.com</p></div></div><div class="ku l"><div class="kv l kw kx ky ku kz in kl"/></div></div></a></div></div></div>    
</body>
</html>