<html>
<head>
<title>How to add LSD letters in geom_bar plot in R?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在R中的geom_bar图中添加LSD字母？</h1>
<blockquote>原文：<a href="https://medium.com/mlearning-ai/how-to-add-lsd-letters-in-geom-bar-plot-in-r-d839196506ed?source=collection_archive---------1-----------------------#2022-02-14">https://medium.com/mlearning-ai/how-to-add-lsd-letters-in-geom-bar-plot-in-r-d839196506ed?source=collection_archive---------1-----------------------#2022-02-14</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="7644" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你在做实验设计或假设检验，你通过ANOVA(方差分析)发现对你的反应变量有显著的处理效果。现在，您需要进行事后均值比较，以查看各治疗之间的显著均值差异。您的结果输出有一堆字母和组。如果你和我一样，出于出版的目的，对将那些字母添加到情节(条形图)感到困惑，这篇文章可以帮助你。</p><blockquote class="jc jd je"><p id="bd2f" class="ie if jf ig b ih ii ij ik il im in io jg iq ir is jh iu iv iw ji iy iz ja jb ha bi translated">我将教你如何使用R包将error_bar和LSD字母添加到你的条形图中。(最大限度地减少可能出现的错误)</p><p id="5bd2" class="ie if jf ig b ih ii ij ik il im in io jg iq ir is jh iu iv iw ji iy iz ja jb ha bi translated"><strong class="ig hi">我会教你如何在facet_wrap或多个子情节选项中做同样的事情。</strong></p></blockquote><p id="1175" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">注意:我将为此使用“gapminder”数据集。</p><p id="747f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们将使用gapminder数据进行方差分析，以了解这些年来预期寿命的变化。年份会影响预期寿命吗？我们进行了方差分析，发现年份对预期寿命有显著影响，这是可以解释的；随着时间的推移，医学的进步大大提高了人们的预期寿命。</p><p id="4c63" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">代码是这样工作的:</p><pre class="jj jk jl jm fd jn jo jp jq aw jr bi"><span id="58a9" class="js jt hh jo b fi ju jv l jw jx">library(gapminder) #to load the gapminder data<br/>library(agricolae) #to run teh posthoc lsd test<br/>library(ggplot2) #for visualization<br/>library(dplyr) #for data wrangling</span><span id="54cf" class="js jt hh jo b fi jy jv l jw jx"># install.packages(“remotes”)<br/>#just to give a good lock to the bar plot</span><span id="297a" class="js jt hh jo b fi jy jv l jw jx">remotes::install_github(“coolbutuseless/ggpattern”) library(ggpattern) </span><span id="f6bd" class="js jt hh jo b fi jy jv l jw jx">#however this library (ggpattern) has few limitation, we will discuss later</span><span id="a299" class="js jt hh jo b fi jy jv l jw jx">#our model<br/>model_1 &lt;- aov(lifeExp ~ year, data = gapminder)<br/>summary(model_1) #summary of our model as below</span><span id="208d" class="js jt hh jo b fi jy jv l jw jx">#lsd test <br/>lsd_test &lt;- LSD.test(model_1, trt = “year”, console = T, group = T)<br/>lsd_test_df &lt;- as.data.frame(lsd_test$groups)</span><span id="92ad" class="js jt hh jo b fi jy jv l jw jx">#plotting (before plotting I connected the lsd dataset with the gapminder dataset summarised for mean and sd, I suggest to join the dataset correctly and then add the groups to the plot to avoid errors)</span><span id="ef20" class="js jt hh jo b fi jy jv l jw jx">gapminder %&gt;% group_by(year) %&gt;% <br/> summarise(Mean = mean(lifeExp), SD = sd(lifeExp)) %&gt;%<br/> left_join(lsd_test_df, by = c(“Mean” = “lifeExp”)) %&gt;%<br/> ggplot(aes(factor(year), Mean)) + <br/> geom_bar_pattern(stat = “identity”, aes(pattern = year)) +<br/> geom_errorbar(aes(ymin = Mean — SD, ymax = Mean + SD), width = 0.5) +<br/> geom_text(aes(label = groups), vjust= -9.9) + <br/> theme_classic() +<br/> labs(x = “year”, y = “mean life expectancy”, fill = “year”) +<br/> scale_y_continuous(expand = c(0, 0),<br/> limits = c(0,85)) +<br/> theme(legend.position = “none”, <br/> text = element_text(size = 16))</span></pre><p id="5e5d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">方差分析表汇总:</p><figure class="jj jk jl jm fd ka er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es jz"><img src="../Images/91902bdb1231a5c80ac78ba2e184de80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d-8S0CkAWKZlywicppQ4iw.png"/></div></div></figure><figure class="jj jk jl jm fd ka er es paragraph-image"><div class="er es kh"><img src="../Images/713655b52f6913e19fdc2fe35f28966d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*y6cM3cUcThwbgn4HGOEpXw.jpeg"/></div></figure><div class="ki kj ez fb kk kl"><a rel="noopener follow" target="_blank" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb"><div class="km ab dw"><div class="kn ab ko cl cj kp"><h2 class="bd hi fi z dy kq ea eb kr ed ef hg bi translated">Mlearning.ai提交建议</h2><div class="ks l"><h3 class="bd b fi z dy kq ea eb kr ed ef dx translated">如何成为Mlearning.ai上的作家</h3></div><div class="kt l"><p class="bd b fp z dy kq ea eb kr ed ef dx translated">medium.com</p></div></div><div class="ku l"><div class="kv l kw kx ky ku kz kf kl"/></div></div></a></div><p id="6da2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">🟠在MLearning.ai  成为<a class="ae la" rel="noopener" href="/mlearning-ai/mlearning-ai-submission-suggestions-b51e2b130bfb">作家</a></p></div></div>    
</body>
</html>